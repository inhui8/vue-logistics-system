"use strict";(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[991],{5991:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ge});var s=a(641),l=a(33),n=a(3751),o=a(953),u=a(5220),r=a(163),c=a(7918),i=a(8548);const d={class:"work-order-detail-container"},p={key:0,class:"loading-state"},m={key:1},k={class:"work-order-header"},v={class:"work-order-title"},f={class:"work-order-meta"},y={class:"meta-item"},b={class:"meta-value"},g={class:"meta-item"},_={class:"meta-value"},h={key:0,class:"meta-item"},L={class:"meta-value"},w={class:"meta-item"},F={class:"meta-value"},C={class:"meta-item"},W={class:"meta-value"},D={class:"meta-item"},E={class:"meta-value"},V={class:"meta-item"},X={class:"meta-value"},R={class:"meta-item"},x={class:"meta-value"},K={class:"meta-item"},A={class:"meta-value"},U={class:"meta-item"},$={class:"meta-value"},B={class:"meta-item"},Q={class:"meta-value"},T={class:"meta-item"},j={class:"meta-value"},z={key:0,class:"meta-item"},S={class:"meta-value"},O={key:1,class:"meta-item"},I={class:"meta-value"},M={key:2,class:"meta-item"},N={class:"meta-value"},q={class:"work-order-actions"},H={class:"card-header"},P={class:"content-body"},Y={class:"description-content"},G={key:0,class:"attachments-section"},J={class:"attachments-list"},Z={class:"card-header"},ee={class:"record-item"},te={class:"record-header"},ae={class:"record-type"},se={class:"record-user"},le={class:"record-content"},ne={key:0,class:"record-attachments"},oe={class:"attachments-list"},ue={class:"dialog-footer"},re={class:"dialog-footer"},ce={key:0,class:"preview-container"},ie={class:"preview-header"},de={key:0,class:"preview-content"},pe=["src"],me=["src"],ke={key:2,class:"preview-other"},ve={class:"dialog-footer"},fe={__name:"CommandWorkDetail",setup(e){const t=(0,u.rd)(),a=(0,u.lq)(),fe=(0,o.KR)(!0),ye=(0,o.KR)([{id:1,name:"张三"},{id:2,name:"李四"},{id:3,name:"客服团队"}]),be=(0,o.Kh)({id:"WO202307250001",subject:"客户反馈订单延迟问题",type:"exception",status:"pending",priority:"high",orderNo:"ORD202307250123",creator:"张三",assignee:"李四",createdAt:new Date(Date.now()-864e5),updatedAt:new Date,dueAt:new Date(Date.now()+1728e5),completedAt:null,location:"A-01-02",palletCount:3,exceptionType:"客户投诉",description:"客户反馈他的订单已经延迟3天未发货，客户情绪激动，需要尽快处理。客户电话：13800138000",attachments:[{name:"客户投诉截图.png",url:"#",size:524288},{name:"订单详情.pdf",url:"#",size:2097152}],records:[{type:"create",user:"张三",timestamp:new Date(Date.now()-864e5),content:"创建工单"},{type:"assign",user:"系统",timestamp:new Date(Date.now()-828e5),content:"工单已指派给李四"},{type:"note",user:"李四",timestamp:new Date(Date.now()-72e6),content:"已联系客户，告知原因是由于商品缺货，预计明天可以发货"},{type:"status",user:"李四",timestamp:new Date(Date.now()-648e5),content:"状态更新为：处理中"}]}),ge=(0,o.KR)(!1),_e=(0,o.KR)(!1),he=(0,o.KR)(!1),Le=(0,o.KR)(null),we=(0,o.KR)(null),Fe=(0,o.KR)(null),Ce=(0,o.Kh)({type:"process",content:""}),We=(0,o.Kh)({assignee:null,reason:""}),De=(0,o.KR)(!1),Ee=(0,o.KR)(null),Ve=(0,o.KR)(""),Xe=e=>{const t=e.size/1024/1024<10;return t?((Ke(e.raw)||Ae(e.raw))&&(Ve.value=URL.createObjectURL(e.raw),Ee.value=e,De.value=!0),!0):(r.nk.error("文件大小不能超过 10MB!"),!1)},Re=e=>{Ee.value&&Ee.value.uid===e.uid&&xe()},xe=()=>{Ve.value&&URL.revokeObjectURL(Ve.value),De.value=!1,Ee.value=null,Ve.value=""},Ke=e=>e.type.startsWith("image/"),Ae=e=>"application/pdf"===e.type,Ue=e=>{const t=document.createElement("a");t.href=URL.createObjectURL(e.raw),t.download=e.name,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(t.href)},$e=(0,o.Kh)({status:"processing",comment:"",fileList:[]}),Be=async()=>{if($e.comment.trim())try{const e=await Promise.all($e.fileList.map((async e=>({name:e.name,url:URL.createObjectURL(e.raw),size:e.size}))));be.records.push({type:"status",user:"当前用户",timestamp:new Date,content:`状态更新为：${Ne($e.status)}。说明：${$e.comment}`,attachments:e}),be.status=$e.status,be.updatedAt=new Date,r.nk.success(`工单状态已更新为：${Ne($e.status)}`),he.value=!1,xe(),$e.fileList=[]}catch(e){console.error("Failed to update status:",e),r.nk.error("更新状态失败")}else r.nk.warning("请输入状态变更说明")},Qe=(0,s.EW)((()=>"pending"===be.status)),Te=(0,s.EW)((()=>["pending","processing"].includes(be.status))),je=(0,s.EW)((()=>["processing","pending_confirmation"].includes(be.status))),ze=(0,s.EW)((()=>["processing","pending_confirmation"].includes(be.status))),Se=(0,s.EW)((()=>["resolved"].includes(be.status))),Oe=(0,s.EW)((()=>"closed"===be.status)),Ie=e=>{if(!e)return"未设置";const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`},Me=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",Ne=e=>{const t={pending:"待处理",processing:"处理中",pending_confirmation:"待确认",resolved:"已解决",closed:"已关闭"};return t[e]||e},qe=e=>{const t={pending:"warning",processing:"primary",pending_confirmation:"info",resolved:"success",closed:"info"};return t[e]||"info"},He=e=>{const t={exception:"异常订单处理",command:"指令执行",warning:"订单预警响应",value_added:"增值服务请求",other:"其他问题"};return t[e]||e},Pe=e=>{const t={urgent:"紧急",high:"高",medium:"中",low:"低"};return t[e]||e},Ye=e=>{const t={urgent:"danger",high:"warning",medium:"info",low:"success"};return t[e]||"info"},Ge=e=>{const t={command:"指令内容",value_added:"服务要求",exception:"详细情况",warning:"详细情况",other:"详细情况"};return t[e]||"详细情况"},Je=e=>{const t={create:"primary",assign:"info",note:"info",process:"warning",status:"success"};return t[e]||"info"},Ze=e=>{const t={create:"#409EFF",assign:"#909399",note:"#E6A23C",process:"#409EFF",status:"#67C23A"};return t[e]||"#909399"},et=e=>{const t={create:"创建工单",assign:"指派工单",note:"内部备注",process:"处理记录",status:"状态更新"};return t[e]||e},tt=async()=>{try{const e=a.params.id;console.log(`Loading work order: ${e}`),setTimeout((()=>{fe.value=!1}),1e3)}catch(e){console.error("Failed to load work order:",e),r.nk.error("加载工单数据失败"),fe.value=!1}},at=()=>{t.back()},st=e=>{t.push(`/order/detail/${e}`)},lt=()=>{Ce.type="process",Ce.content="",ge.value=!0},nt=()=>{Ce.content.trim()?(be.records.push({type:Ce.type,user:"当前用户",timestamp:new Date,content:Ce.content}),r.nk.success("记录已添加"),ge.value=!1,be.updatedAt=new Date):r.nk.warning("请输入记录内容")},ot=()=>{We.assignee=null,We.reason="",_e.value=!0},ut=()=>{if(!We.assignee)return void r.nk.warning("请选择处理人");const e=ye.value.find((e=>e.id===We.assignee))?.name||"未知用户";be.records.push({type:"assign",user:"当前用户",timestamp:new Date,content:`工单已转派给 ${e}。原因：${We.reason||"无"}`}),be.assignee=e,be.updatedAt=new Date,r.nk.success(`工单已转派给 ${e}`),_e.value=!1},rt=()=>{$e.status="processing",$e.comment="",he.value=!0},ct=()=>{c.s.confirm("确认开始处理该工单?","操作确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"info"}).then((()=>{be.status="processing",be.updatedAt=new Date,be.records.push({type:"status",user:"当前用户",timestamp:new Date,content:"开始处理工单"}),r.nk.success("工单状态已更新为：处理中")})).catch((()=>{}))},it=()=>{c.s.prompt("请输入解决方案","标记为已解决",{confirmButtonText:"确认",cancelButtonText:"取消",inputType:"textarea",inputValidator:e=>!!e.trim()||"解决方案不能为空"}).then((({value:e})=>{be.status="resolved",be.updatedAt=new Date,be.records.push({type:"status",user:"当前用户",timestamp:new Date,content:`工单已解决。解决方案：${e}`}),r.nk.success("工单已标记为已解决")})).catch((()=>{}))},dt=()=>{c.s.confirm("确认关闭该工单?","操作确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{be.status="closed",be.updatedAt=new Date,be.records.push({type:"status",user:"当前用户",timestamp:new Date,content:"工单已关闭"}),r.nk.success("工单已关闭")})).catch((()=>{}))},pt=()=>{c.s.prompt("请输入重新打开原因","重新打开工单",{confirmButtonText:"确认",cancelButtonText:"取消",inputType:"textarea",inputValidator:e=>!!e.trim()||"原因不能为空"}).then((({value:e})=>{be.status="processing",be.updatedAt=new Date,be.records.push({type:"status",user:"当前用户",timestamp:new Date,content:`工单已重新打开。原因：${e}`}),r.nk.success("工单已重新打开")})).catch((()=>{}))},mt=e=>{const t=e.name.split(".").pop().toLowerCase(),a=["jpg","jpeg","png","gif","bmp","webp"].includes(t),s="pdf"===t;a||s?(Ve.value=e.url,Ee.value=e,De.value=!0):window.open(e.url,"_blank")};return(0,s.sV)((()=>{tt()})),(e,t)=>{const a=(0,s.g2)("el-page-header"),u=(0,s.g2)("el-skeleton"),r=(0,s.g2)("el-tag"),c=(0,s.g2)("el-link"),tt=(0,s.g2)("el-button"),kt=(0,s.g2)("el-button-group"),vt=(0,s.g2)("el-card"),ft=(0,s.g2)("el-timeline-item"),yt=(0,s.g2)("el-timeline"),bt=(0,s.g2)("el-option"),gt=(0,s.g2)("el-select"),_t=(0,s.g2)("el-form-item"),ht=(0,s.g2)("el-input"),Lt=(0,s.g2)("el-form"),wt=(0,s.g2)("el-dialog"),Ft=(0,s.g2)("el-upload"),Ct=(0,s.g2)("el-icon");return(0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(a,{onBack:at,content:`工单详情: ${be.subject||"加载中..."}`},null,8,["content"]),fe.value?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.bF)(u,{rows:10,animated:""})])):((0,s.uX)(),(0,s.CE)("div",m,[(0,s.bF)(vt,{class:"info-card",shadow:"never"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",k,[(0,s.Lk)("h2",v,(0,l.v_)(be.subject),1),(0,s.bF)(r,{type:qe(be.status),effect:"dark"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(Ne(be.status)),1)])),_:1},8,["type"])]),(0,s.Lk)("div",f,[(0,s.Lk)("div",y,[t[14]||(t[14]=(0,s.Lk)("span",{class:"meta-label"},"工单号:",-1)),(0,s.Lk)("span",b,(0,l.v_)(be.id),1)]),(0,s.Lk)("div",g,[t[15]||(t[15]=(0,s.Lk)("span",{class:"meta-label"},"工单类型:",-1)),(0,s.Lk)("span",_,(0,l.v_)(He(be.type)),1)]),be.orderNo?((0,s.uX)(),(0,s.CE)("div",h,[t[16]||(t[16]=(0,s.Lk)("span",{class:"meta-label"},"关联订单号:",-1)),(0,s.Lk)("span",L,[(0,s.bF)(c,{onClick:t[0]||(t[0]=e=>st(be.orderNo)),type:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(be.orderNo),1)])),_:1})])])):(0,s.Q3)("",!0),(0,s.Lk)("div",w,[t[17]||(t[17]=(0,s.Lk)("span",{class:"meta-label"},"优先级:",-1)),(0,s.Lk)("span",F,[(0,s.bF)(r,{type:Ye(be.priority),size:"small"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(Pe(be.priority)),1)])),_:1},8,["type"])])]),(0,s.Lk)("div",C,[t[18]||(t[18]=(0,s.Lk)("span",{class:"meta-label"},"创建人:",-1)),(0,s.Lk)("span",W,(0,l.v_)(be.creator),1)]),(0,s.Lk)("div",D,[t[19]||(t[19]=(0,s.Lk)("span",{class:"meta-label"},"处理人:",-1)),(0,s.Lk)("span",E,(0,l.v_)(be.assignee||"未指派"),1)]),(0,s.Lk)("div",V,[t[20]||(t[20]=(0,s.Lk)("span",{class:"meta-label"},"创建时间:",-1)),(0,s.Lk)("span",X,(0,l.v_)(Ie(be.createdAt)),1)]),(0,s.Lk)("div",R,[t[21]||(t[21]=(0,s.Lk)("span",{class:"meta-label"},"最晚完成时间:",-1)),(0,s.Lk)("span",x,(0,l.v_)(Ie(be.dueAt)),1)]),(0,s.Lk)("div",K,[t[22]||(t[22]=(0,s.Lk)("span",{class:"meta-label"},"完成时间:",-1)),(0,s.Lk)("span",A,(0,l.v_)(Ie(be.completedAt)),1)]),(0,s.Lk)("div",U,[t[23]||(t[23]=(0,s.Lk)("span",{class:"meta-label"},"库位:",-1)),(0,s.Lk)("span",$,(0,l.v_)(be.location||"-"),1)]),(0,s.Lk)("div",B,[t[24]||(t[24]=(0,s.Lk)("span",{class:"meta-label"},"板数:",-1)),(0,s.Lk)("span",Q,(0,l.v_)(be.palletCount||"-"),1)]),(0,s.Lk)("div",T,[t[25]||(t[25]=(0,s.Lk)("span",{class:"meta-label"},"最后更新:",-1)),(0,s.Lk)("span",j,(0,l.v_)(Ie(be.updatedAt)),1)])]),"exception"===be.type?((0,s.uX)(),(0,s.CE)("div",z,[t[26]||(t[26]=(0,s.Lk)("span",{class:"meta-label"},"异常类型:",-1)),(0,s.Lk)("span",S,(0,l.v_)(be.exceptionType),1)])):(0,s.Q3)("",!0),"warning"===be.type?((0,s.uX)(),(0,s.CE)("div",O,[t[27]||(t[27]=(0,s.Lk)("span",{class:"meta-label"},"预警来源:",-1)),(0,s.Lk)("span",I,(0,l.v_)(be.warningSource),1)])):(0,s.Q3)("",!0),"value_added"===be.type?((0,s.uX)(),(0,s.CE)("div",M,[t[28]||(t[28]=(0,s.Lk)("span",{class:"meta-label"},"服务项目:",-1)),(0,s.Lk)("span",N,(0,l.v_)(be.serviceItem),1)])):(0,s.Q3)("",!0),(0,s.Lk)("div",q,[(0,s.bF)(kt,null,{default:(0,s.k6)((()=>[Qe.value?((0,s.uX)(),(0,s.Wv)(tt,{key:0,type:"primary",onClick:ct},{default:(0,s.k6)((()=>t[29]||(t[29]=[(0,s.eW)("开始处理")]))),_:1})):(0,s.Q3)("",!0),Te.value?((0,s.uX)(),(0,s.Wv)(tt,{key:1,onClick:ot},{default:(0,s.k6)((()=>t[30]||(t[30]=[(0,s.eW)("转派")]))),_:1})):(0,s.Q3)("",!0),je.value?((0,s.uX)(),(0,s.Wv)(tt,{key:2,onClick:rt},{default:(0,s.k6)((()=>t[31]||(t[31]=[(0,s.eW)("更新状态")]))),_:1})):(0,s.Q3)("",!0),ze.value?((0,s.uX)(),(0,s.Wv)(tt,{key:3,type:"success",onClick:it},{default:(0,s.k6)((()=>t[32]||(t[32]=[(0,s.eW)("标记为解决")]))),_:1})):(0,s.Q3)("",!0),Se.value?((0,s.uX)(),(0,s.Wv)(tt,{key:4,onClick:dt},{default:(0,s.k6)((()=>t[33]||(t[33]=[(0,s.eW)("关闭工单")]))),_:1})):(0,s.Q3)("",!0),Oe.value?((0,s.uX)(),(0,s.Wv)(tt,{key:5,onClick:pt},{default:(0,s.k6)((()=>t[34]||(t[34]=[(0,s.eW)("重新打开")]))),_:1})):(0,s.Q3)("",!0)])),_:1})])])),_:1}),(0,s.bF)(vt,{class:"content-card",shadow:"never"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",H,[(0,s.Lk)("h3",null,(0,l.v_)(Ge(be.type)),1)]),(0,s.Lk)("div",P,[(0,s.Lk)("pre",Y,(0,l.v_)(be.description),1)]),be.attachments&&be.attachments.length>0?((0,s.uX)(),(0,s.CE)("div",G,[t[35]||(t[35]=(0,s.Lk)("h4",null,"附件",-1)),(0,s.Lk)("div",J,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(be.attachments,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"attachment-item"},[(0,s.bF)(c,{href:e.url,target:"_blank",type:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.name)+" ("+(0,l.v_)(Me(e.size))+") ",1)])),_:2},1032,["href"])])))),128))])])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(vt,{class:"records-card",shadow:"never"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Z,[t[37]||(t[37]=(0,s.Lk)("h3",null,"处理记录",-1)),(0,s.bF)(tt,{size:"small",onClick:lt},{default:(0,s.k6)((()=>t[36]||(t[36]=[(0,s.eW)("添加备注")]))),_:1})]),(0,s.bF)(yt,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(be.records,((e,a)=>((0,s.uX)(),(0,s.Wv)(ft,{key:a,type:Je(e.type),color:Ze(e.type),timestamp:Ie(e.timestamp)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ee,[(0,s.Lk)("div",te,[(0,s.Lk)("span",ae,(0,l.v_)(et(e.type)),1),(0,s.Lk)("span",se,(0,l.v_)(e.user),1)]),(0,s.Lk)("div",le,(0,l.v_)(e.content),1),e.attachments&&e.attachments.length>0?((0,s.uX)(),(0,s.CE)("div",ne,[t[38]||(t[38]=(0,s.Lk)("div",{class:"attachments-header"},"附件：",-1)),(0,s.Lk)("div",oe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.attachments,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"attachment-item"},[(0,s.bF)(c,{href:e.url,target:"_blank",type:"primary",onClick:(0,n.D$)((t=>mt(e)),["prevent"])},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.name)+" ("+(0,l.v_)(Me(e.size))+") ",1)])),_:2},1032,["href","onClick"])])))),128))])])):(0,s.Q3)("",!0)])])),_:2},1032,["type","color","timestamp"])))),128))])),_:1})])),_:1})])),(0,s.bF)(wt,{modelValue:ge.value,"onUpdate:modelValue":t[4]||(t[4]=e=>ge.value=e),title:"添加处理记录",width:"500px"},{footer:(0,s.k6)((()=>[(0,s.Lk)("span",ue,[(0,s.bF)(tt,{onClick:t[3]||(t[3]=e=>ge.value=!1)},{default:(0,s.k6)((()=>t[39]||(t[39]=[(0,s.eW)("取消")]))),_:1}),(0,s.bF)(tt,{type:"primary",onClick:nt},{default:(0,s.k6)((()=>t[40]||(t[40]=[(0,s.eW)("提交")]))),_:1})])])),default:(0,s.k6)((()=>[(0,s.bF)(Lt,{model:Ce,ref_key:"recordFormRef",ref:Le},{default:(0,s.k6)((()=>[(0,s.bF)(_t,{label:"记录类型",prop:"type"},{default:(0,s.k6)((()=>[(0,s.bF)(gt,{modelValue:Ce.type,"onUpdate:modelValue":t[1]||(t[1]=e=>Ce.type=e)},{default:(0,s.k6)((()=>[(0,s.bF)(bt,{label:"处理过程记录",value:"process"}),(0,s.bF)(bt,{label:"内部沟通",value:"note"}),(0,s.bF)(bt,{label:"状态更新",value:"status"})])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(_t,{label:"内容",prop:"content"},{default:(0,s.k6)((()=>[(0,s.bF)(ht,{type:"textarea",modelValue:Ce.content,"onUpdate:modelValue":t[2]||(t[2]=e=>Ce.content=e),rows:"4",placeholder:"请输入处理过程或备注信息"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,s.bF)(wt,{modelValue:_e.value,"onUpdate:modelValue":t[8]||(t[8]=e=>_e.value=e),title:"转派工单",width:"500px"},{footer:(0,s.k6)((()=>[(0,s.Lk)("span",re,[(0,s.bF)(tt,{onClick:t[7]||(t[7]=e=>_e.value=!1)},{default:(0,s.k6)((()=>t[41]||(t[41]=[(0,s.eW)("取消")]))),_:1}),(0,s.bF)(tt,{type:"primary",onClick:ut},{default:(0,s.k6)((()=>t[42]||(t[42]=[(0,s.eW)("确认转派")]))),_:1})])])),default:(0,s.k6)((()=>[(0,s.bF)(Lt,{model:We,ref_key:"reassignFormRef",ref:we},{default:(0,s.k6)((()=>[(0,s.bF)(_t,{label:"转派给",prop:"assignee"},{default:(0,s.k6)((()=>[(0,s.bF)(gt,{modelValue:We.assignee,"onUpdate:modelValue":t[5]||(t[5]=e=>We.assignee=e),filterable:"",placeholder:"选择处理人"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(ye.value,(e=>((0,s.uX)(),(0,s.Wv)(bt,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(_t,{label:"转派原因",prop:"reason"},{default:(0,s.k6)((()=>[(0,s.bF)(ht,{type:"textarea",modelValue:We.reason,"onUpdate:modelValue":t[6]||(t[6]=e=>We.reason=e),rows:"3",placeholder:"请输入转派原因"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,s.bF)(wt,{modelValue:he.value,"onUpdate:modelValue":t[13]||(t[13]=e=>he.value=e),title:"更新工单状态",width:"500px"},{footer:(0,s.k6)((()=>[(0,s.Lk)("span",ve,[(0,s.bF)(tt,{onClick:t[12]||(t[12]=e=>he.value=!1)},{default:(0,s.k6)((()=>t[48]||(t[48]=[(0,s.eW)("取消")]))),_:1}),(0,s.bF)(tt,{type:"primary",onClick:Be},{default:(0,s.k6)((()=>t[49]||(t[49]=[(0,s.eW)("确认更新")]))),_:1})])])),default:(0,s.k6)((()=>[(0,s.bF)(Lt,{model:$e,ref_key:"statusFormRef",ref:Fe},{default:(0,s.k6)((()=>[(0,s.bF)(_t,{label:"新状态",prop:"status"},{default:(0,s.k6)((()=>[(0,s.bF)(gt,{modelValue:$e.status,"onUpdate:modelValue":t[9]||(t[9]=e=>$e.status=e)},{default:(0,s.k6)((()=>[(0,s.bF)(bt,{label:"处理中",value:"processing"}),(0,s.bF)(bt,{label:"待确认",value:"pending_confirmation"}),(0,s.bF)(bt,{label:"已解决",value:"resolved"}),(0,s.bF)(bt,{label:"已关闭",value:"closed"})])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(_t,{label:"状态说明",prop:"comment"},{default:(0,s.k6)((()=>[(0,s.bF)(ht,{type:"textarea",modelValue:$e.comment,"onUpdate:modelValue":t[10]||(t[10]=e=>$e.comment=e),rows:"3",placeholder:"请输入状态变更说明"},null,8,["modelValue"])])),_:1}),(0,s.bF)(_t,{label:"附件"},{default:(0,s.k6)((()=>[(0,s.bF)(Ft,{class:"status-upload",action:"#","auto-upload":!1,"on-change":Xe,"on-remove":Re,"file-list":$e.fileList,multiple:""},{tip:(0,s.k6)((()=>t[44]||(t[44]=[(0,s.Lk)("div",{class:"el-upload__tip"},"支持任意格式文件，单个文件不超过10MB",-1)]))),default:(0,s.k6)((()=>[(0,s.bF)(tt,{type:"primary"},{default:(0,s.k6)((()=>t[43]||(t[43]=[(0,s.eW)("选择文件")]))),_:1})])),_:1},8,["file-list"])])),_:1}),De.value?((0,s.uX)(),(0,s.CE)("div",ce,[(0,s.Lk)("div",ie,[t[46]||(t[46]=(0,s.Lk)("span",null,"文件预览",-1)),(0,s.bF)(tt,{type:"text",onClick:xe},{default:(0,s.k6)((()=>t[45]||(t[45]=[(0,s.eW)("关闭")]))),_:1})]),Ee.value?((0,s.uX)(),(0,s.CE)("div",de,[Ke(Ee.value)?((0,s.uX)(),(0,s.CE)("img",{key:0,src:Ve.value,class:"preview-image"},null,8,pe)):Ae(Ee.value)?((0,s.uX)(),(0,s.CE)("iframe",{key:1,src:Ve.value,class:"preview-pdf"},null,8,me)):((0,s.uX)(),(0,s.CE)("div",ke,[(0,s.bF)(Ct,null,{default:(0,s.k6)((()=>[(0,s.bF)((0,o.R1)(i.yoT))])),_:1}),(0,s.Lk)("span",null,(0,l.v_)(Ee.value.name),1),(0,s.bF)(tt,{type:"primary",size:"small",onClick:t[11]||(t[11]=e=>Ue(Ee.value))},{default:(0,s.k6)((()=>t[47]||(t[47]=[(0,s.eW)("下载")]))),_:1})]))])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}};var ye=a(6262);const be=(0,ye.A)(fe,[["__scopeId","data-v-73561016"]]),ge=be}}]);
//# sourceMappingURL=991.31b87057.js.map