"use strict";(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[853],{9853:(e,t,a)=>{a.r(t),a.d(t,{default:()=>me});var s=a(641),l=a(33),n=a(3751),o=a(953),r=a(5220),u=a(163),c=a(7918),i=a(8548);const d={class:"work-order-detail-container"},p={key:0,class:"loading-state"},m={key:1},k={class:"work-order-header"},v={class:"work-order-title"},f={class:"work-order-meta"},y={class:"meta-item"},g={class:"meta-value"},b={class:"meta-item"},_={class:"meta-value"},h={key:0,class:"meta-item"},w={class:"meta-value"},L={class:"meta-item"},F={class:"meta-value"},C={class:"meta-item"},W={class:"meta-value"},D={class:"meta-item"},E={class:"meta-value"},V={class:"meta-item"},X={class:"meta-value"},x={class:"meta-item"},R={class:"meta-value"},K={class:"meta-item"},U={class:"meta-value"},$={key:0,class:"meta-item"},T={class:"meta-value"},A={key:1,class:"meta-item"},B={class:"meta-value"},Q={key:2,class:"meta-item"},j={class:"meta-value"},z={class:"work-order-actions"},S={class:"card-header"},O={class:"content-body"},I={class:"description-content"},M={key:0,class:"attachments-section"},N={class:"attachments-list"},q={class:"card-header"},H={class:"record-item"},P={class:"record-header"},Y={class:"record-type"},G={class:"record-user"},J={class:"record-content"},Z={key:0,class:"record-attachments"},ee={class:"attachments-list"},te={class:"dialog-footer"},ae={class:"dialog-footer"},se={key:0,class:"preview-container"},le={class:"preview-header"},ne={key:0,class:"preview-content"},oe=["src"],re=["src"],ue={key:2,class:"preview-other"},ce={class:"dialog-footer"},ie={__name:"WorkOrderDetail",setup(e){const t=(0,r.rd)(),a=(0,r.lq)(),ie=(0,o.KR)(!0),de=(0,o.KR)([{id:1,name:"张三"},{id:2,name:"李四"},{id:3,name:"客服团队"}]),pe=(0,o.Kh)({id:"WO202307250001",subject:"客户反馈订单延迟问题",type:"exception",status:"pending",priority:"high",orderNo:"ORD202307250123",creator:"张三",assignee:"李四",createdAt:new Date(Date.now()-864e5),updatedAt:new Date,expectedCompletionTime:new Date(Date.now()+1728e5),exceptionType:"客户投诉",description:"客户反馈他的订单已经延迟3天未发货，客户情绪激动，需要尽快处理。客户电话：13800138000",attachments:[{name:"客户投诉截图.png",url:"#",size:524288},{name:"订单详情.pdf",url:"#",size:2097152}],records:[{type:"create",user:"张三",timestamp:new Date(Date.now()-864e5),content:"创建工单"},{type:"assign",user:"系统",timestamp:new Date(Date.now()-828e5),content:"工单已指派给李四"},{type:"note",user:"李四",timestamp:new Date(Date.now()-72e6),content:"已联系客户，告知原因是由于商品缺货，预计明天可以发货"},{type:"status",user:"李四",timestamp:new Date(Date.now()-648e5),content:"状态更新为：处理中"}]}),me=(0,o.KR)(!1),ke=(0,o.KR)(!1),ve=(0,o.KR)(!1),fe=(0,o.KR)(null),ye=(0,o.KR)(null),ge=(0,o.KR)(null),be=(0,o.Kh)({type:"process",content:""}),_e=(0,o.Kh)({assignee:null,reason:""}),he=(0,o.KR)(!1),we=(0,o.KR)(null),Le=(0,o.KR)(""),Fe=e=>{const t=e.size/1024/1024<10;return t?((De(e.raw)||Ee(e.raw))&&(Le.value=URL.createObjectURL(e.raw),we.value=e,he.value=!0),!0):(u.nk.error("文件大小不能超过 10MB!"),!1)},Ce=e=>{we.value&&we.value.uid===e.uid&&We()},We=()=>{Le.value&&URL.revokeObjectURL(Le.value),he.value=!1,we.value=null,Le.value=""},De=e=>e.type.startsWith("image/"),Ee=e=>"application/pdf"===e.type,Ve=e=>{const t=document.createElement("a");t.href=URL.createObjectURL(e.raw),t.download=e.name,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(t.href)},Xe=(0,o.Kh)({status:"processing",comment:"",fileList:[]}),xe=async()=>{if(Xe.comment.trim())try{const e=await Promise.all(Xe.fileList.map((async e=>({name:e.name,url:URL.createObjectURL(e.raw),size:e.size}))));pe.records.push({type:"status",user:"当前用户",timestamp:new Date,content:`状态更新为：${je(Xe.status)}。说明：${Xe.comment}`,attachments:e}),pe.status=Xe.status,pe.updatedAt=new Date,u.nk.success(`工单状态已更新为：${je(Xe.status)}`),ve.value=!1,We(),Xe.fileList=[]}catch(e){console.error("Failed to update status:",e),u.nk.error("更新状态失败")}else u.nk.warning("请输入状态变更说明")},Re=(0,s.EW)((()=>"pending"===pe.status)),Ke=(0,s.EW)((()=>["pending","processing"].includes(pe.status))),Ue=(0,s.EW)((()=>["processing","pending_confirmation"].includes(pe.status))),$e=(0,s.EW)((()=>["processing","pending_confirmation"].includes(pe.status))),Te=(0,s.EW)((()=>["resolved"].includes(pe.status))),Ae=(0,s.EW)((()=>"closed"===pe.status)),Be=e=>{if(!e)return"未设置";const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`},Qe=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB",je=e=>{const t={pending:"待处理",processing:"处理中",pending_confirmation:"待确认",resolved:"已解决",closed:"已关闭"};return t[e]||e},ze=e=>{const t={pending:"warning",processing:"primary",pending_confirmation:"info",resolved:"success",closed:"info"};return t[e]||"info"},Se=e=>{const t={exception:"异常订单处理",command:"指令执行",warning:"订单预警响应",value_added:"增值服务请求",other:"其他问题"};return t[e]||e},Oe=e=>{const t={urgent:"紧急",high:"高",medium:"中",low:"低"};return t[e]||e},Ie=e=>{const t={urgent:"danger",high:"warning",medium:"info",low:"success"};return t[e]||"info"},Me=e=>{const t={command:"指令内容",value_added:"服务要求",exception:"详细情况",warning:"详细情况",other:"详细情况"};return t[e]||"详细情况"},Ne=e=>{const t={create:"primary",assign:"info",note:"info",process:"warning",status:"success"};return t[e]||"info"},qe=e=>{const t={create:"#409EFF",assign:"#909399",note:"#E6A23C",process:"#409EFF",status:"#67C23A"};return t[e]||"#909399"},He=e=>{const t={create:"创建工单",assign:"指派工单",note:"内部备注",process:"处理记录",status:"状态更新"};return t[e]||e},Pe=async()=>{try{const e=a.params.id;console.log(`Loading work order: ${e}`),setTimeout((()=>{ie.value=!1}),1e3)}catch(e){console.error("Failed to load work order:",e),u.nk.error("加载工单数据失败"),ie.value=!1}},Ye=()=>{t.back()},Ge=e=>{t.push(`/order/detail/${e}`)},Je=()=>{be.type="process",be.content="",me.value=!0},Ze=()=>{be.content.trim()?(pe.records.push({type:be.type,user:"当前用户",timestamp:new Date,content:be.content}),u.nk.success("记录已添加"),me.value=!1,pe.updatedAt=new Date):u.nk.warning("请输入记录内容")},et=()=>{_e.assignee=null,_e.reason="",ke.value=!0},tt=()=>{if(!_e.assignee)return void u.nk.warning("请选择处理人");const e=de.value.find((e=>e.id===_e.assignee))?.name||"未知用户";pe.records.push({type:"assign",user:"当前用户",timestamp:new Date,content:`工单已转派给 ${e}。原因：${_e.reason||"无"}`}),pe.assignee=e,pe.updatedAt=new Date,u.nk.success(`工单已转派给 ${e}`),ke.value=!1},at=()=>{Xe.status="processing",Xe.comment="",ve.value=!0},st=()=>{c.s.confirm("确认开始处理该工单?","操作确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"info"}).then((()=>{pe.status="processing",pe.updatedAt=new Date,pe.records.push({type:"status",user:"当前用户",timestamp:new Date,content:"开始处理工单"}),u.nk.success("工单状态已更新为：处理中")})).catch((()=>{}))},lt=()=>{c.s.prompt("请输入解决方案","标记为已解决",{confirmButtonText:"确认",cancelButtonText:"取消",inputType:"textarea",inputValidator:e=>!!e.trim()||"解决方案不能为空"}).then((({value:e})=>{pe.status="resolved",pe.updatedAt=new Date,pe.records.push({type:"status",user:"当前用户",timestamp:new Date,content:`工单已解决。解决方案：${e}`}),u.nk.success("工单已标记为已解决")})).catch((()=>{}))},nt=()=>{c.s.confirm("确认关闭该工单?","操作确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{pe.status="closed",pe.updatedAt=new Date,pe.records.push({type:"status",user:"当前用户",timestamp:new Date,content:"工单已关闭"}),u.nk.success("工单已关闭")})).catch((()=>{}))},ot=()=>{c.s.prompt("请输入重新打开原因","重新打开工单",{confirmButtonText:"确认",cancelButtonText:"取消",inputType:"textarea",inputValidator:e=>!!e.trim()||"原因不能为空"}).then((({value:e})=>{pe.status="processing",pe.updatedAt=new Date,pe.records.push({type:"status",user:"当前用户",timestamp:new Date,content:`工单已重新打开。原因：${e}`}),u.nk.success("工单已重新打开")})).catch((()=>{}))},rt=e=>{const t=e.name.split(".").pop().toLowerCase(),a=["jpg","jpeg","png","gif","bmp","webp"].includes(t),s="pdf"===t;a||s?(Le.value=e.url,we.value=e,he.value=!0):window.open(e.url,"_blank")};return(0,s.sV)((()=>{Pe()})),(e,t)=>{const a=(0,s.g2)("el-page-header"),r=(0,s.g2)("el-skeleton"),u=(0,s.g2)("el-tag"),c=(0,s.g2)("el-link"),Pe=(0,s.g2)("el-button"),ut=(0,s.g2)("el-button-group"),ct=(0,s.g2)("el-card"),it=(0,s.g2)("el-timeline-item"),dt=(0,s.g2)("el-timeline"),pt=(0,s.g2)("el-option"),mt=(0,s.g2)("el-select"),kt=(0,s.g2)("el-form-item"),vt=(0,s.g2)("el-input"),ft=(0,s.g2)("el-form"),yt=(0,s.g2)("el-dialog"),gt=(0,s.g2)("el-upload"),bt=(0,s.g2)("el-icon");return(0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(a,{onBack:Ye,content:`工单详情: ${pe.subject||"加载中..."}`},null,8,["content"]),ie.value?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.bF)(r,{rows:10,animated:""})])):((0,s.uX)(),(0,s.CE)("div",m,[(0,s.bF)(ct,{class:"info-card",shadow:"never"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",k,[(0,s.Lk)("h2",v,(0,l.v_)(pe.subject),1),(0,s.bF)(u,{type:ze(pe.status),effect:"dark"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(je(pe.status)),1)])),_:1},8,["type"])]),(0,s.Lk)("div",f,[(0,s.Lk)("div",y,[t[14]||(t[14]=(0,s.Lk)("span",{class:"meta-label"},"工单号:",-1)),(0,s.Lk)("span",g,(0,l.v_)(pe.id),1)]),(0,s.Lk)("div",b,[t[15]||(t[15]=(0,s.Lk)("span",{class:"meta-label"},"工单类型:",-1)),(0,s.Lk)("span",_,(0,l.v_)(Se(pe.type)),1)]),pe.orderNo?((0,s.uX)(),(0,s.CE)("div",h,[t[16]||(t[16]=(0,s.Lk)("span",{class:"meta-label"},"关联订单号:",-1)),(0,s.Lk)("span",w,[(0,s.bF)(c,{onClick:t[0]||(t[0]=e=>Ge(pe.orderNo)),type:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(pe.orderNo),1)])),_:1})])])):(0,s.Q3)("",!0),(0,s.Lk)("div",L,[t[17]||(t[17]=(0,s.Lk)("span",{class:"meta-label"},"优先级:",-1)),(0,s.Lk)("span",F,[(0,s.bF)(u,{type:Ie(pe.priority),size:"small"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(Oe(pe.priority)),1)])),_:1},8,["type"])])]),(0,s.Lk)("div",C,[t[18]||(t[18]=(0,s.Lk)("span",{class:"meta-label"},"创建人:",-1)),(0,s.Lk)("span",W,(0,l.v_)(pe.creator),1)]),(0,s.Lk)("div",D,[t[19]||(t[19]=(0,s.Lk)("span",{class:"meta-label"},"处理人:",-1)),(0,s.Lk)("span",E,(0,l.v_)(pe.assignee||"未指派"),1)]),(0,s.Lk)("div",V,[t[20]||(t[20]=(0,s.Lk)("span",{class:"meta-label"},"创建时间:",-1)),(0,s.Lk)("span",X,(0,l.v_)(Be(pe.createdAt)),1)]),(0,s.Lk)("div",x,[t[21]||(t[21]=(0,s.Lk)("span",{class:"meta-label"},"期望完成时间:",-1)),(0,s.Lk)("span",R,(0,l.v_)(Be(pe.expectedCompletionTime)),1)]),(0,s.Lk)("div",K,[t[22]||(t[22]=(0,s.Lk)("span",{class:"meta-label"},"最后更新:",-1)),(0,s.Lk)("span",U,(0,l.v_)(Be(pe.updatedAt)),1)])]),"exception"===pe.type?((0,s.uX)(),(0,s.CE)("div",$,[t[23]||(t[23]=(0,s.Lk)("span",{class:"meta-label"},"异常类型:",-1)),(0,s.Lk)("span",T,(0,l.v_)(pe.exceptionType),1)])):(0,s.Q3)("",!0),"warning"===pe.type?((0,s.uX)(),(0,s.CE)("div",A,[t[24]||(t[24]=(0,s.Lk)("span",{class:"meta-label"},"预警来源:",-1)),(0,s.Lk)("span",B,(0,l.v_)(pe.warningSource),1)])):(0,s.Q3)("",!0),"value_added"===pe.type?((0,s.uX)(),(0,s.CE)("div",Q,[t[25]||(t[25]=(0,s.Lk)("span",{class:"meta-label"},"服务项目:",-1)),(0,s.Lk)("span",j,(0,l.v_)(pe.serviceItem),1)])):(0,s.Q3)("",!0),(0,s.Lk)("div",z,[(0,s.bF)(ut,null,{default:(0,s.k6)((()=>[Re.value?((0,s.uX)(),(0,s.Wv)(Pe,{key:0,type:"primary",onClick:st},{default:(0,s.k6)((()=>t[26]||(t[26]=[(0,s.eW)("开始处理")]))),_:1})):(0,s.Q3)("",!0),Ke.value?((0,s.uX)(),(0,s.Wv)(Pe,{key:1,onClick:et},{default:(0,s.k6)((()=>t[27]||(t[27]=[(0,s.eW)("转派")]))),_:1})):(0,s.Q3)("",!0),Ue.value?((0,s.uX)(),(0,s.Wv)(Pe,{key:2,onClick:at},{default:(0,s.k6)((()=>t[28]||(t[28]=[(0,s.eW)("更新状态")]))),_:1})):(0,s.Q3)("",!0),$e.value?((0,s.uX)(),(0,s.Wv)(Pe,{key:3,type:"success",onClick:lt},{default:(0,s.k6)((()=>t[29]||(t[29]=[(0,s.eW)("标记为解决")]))),_:1})):(0,s.Q3)("",!0),Te.value?((0,s.uX)(),(0,s.Wv)(Pe,{key:4,onClick:nt},{default:(0,s.k6)((()=>t[30]||(t[30]=[(0,s.eW)("关闭工单")]))),_:1})):(0,s.Q3)("",!0),Ae.value?((0,s.uX)(),(0,s.Wv)(Pe,{key:5,onClick:ot},{default:(0,s.k6)((()=>t[31]||(t[31]=[(0,s.eW)("重新打开")]))),_:1})):(0,s.Q3)("",!0)])),_:1})])])),_:1}),(0,s.bF)(ct,{class:"content-card",shadow:"never"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",S,[(0,s.Lk)("h3",null,(0,l.v_)(Me(pe.type)),1)]),(0,s.Lk)("div",O,[(0,s.Lk)("pre",I,(0,l.v_)(pe.description),1)]),pe.attachments&&pe.attachments.length>0?((0,s.uX)(),(0,s.CE)("div",M,[t[32]||(t[32]=(0,s.Lk)("h4",null,"附件",-1)),(0,s.Lk)("div",N,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(pe.attachments,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"attachment-item"},[(0,s.bF)(c,{href:e.url,target:"_blank",type:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.name)+" ("+(0,l.v_)(Qe(e.size))+") ",1)])),_:2},1032,["href"])])))),128))])])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(ct,{class:"records-card",shadow:"never"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",q,[t[34]||(t[34]=(0,s.Lk)("h3",null,"处理记录",-1)),(0,s.bF)(Pe,{size:"small",onClick:Je},{default:(0,s.k6)((()=>t[33]||(t[33]=[(0,s.eW)("添加备注")]))),_:1})]),(0,s.bF)(dt,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(pe.records,((e,a)=>((0,s.uX)(),(0,s.Wv)(it,{key:a,type:Ne(e.type),color:qe(e.type),timestamp:Be(e.timestamp)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",H,[(0,s.Lk)("div",P,[(0,s.Lk)("span",Y,(0,l.v_)(He(e.type)),1),(0,s.Lk)("span",G,(0,l.v_)(e.user),1)]),(0,s.Lk)("div",J,(0,l.v_)(e.content),1),e.attachments&&e.attachments.length>0?((0,s.uX)(),(0,s.CE)("div",Z,[t[35]||(t[35]=(0,s.Lk)("div",{class:"attachments-header"},"附件：",-1)),(0,s.Lk)("div",ee,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.attachments,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"attachment-item"},[(0,s.bF)(c,{href:e.url,target:"_blank",type:"primary",onClick:(0,n.D$)((t=>rt(e)),["prevent"])},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.name)+" ("+(0,l.v_)(Qe(e.size))+") ",1)])),_:2},1032,["href","onClick"])])))),128))])])):(0,s.Q3)("",!0)])])),_:2},1032,["type","color","timestamp"])))),128))])),_:1})])),_:1})])),(0,s.bF)(yt,{modelValue:me.value,"onUpdate:modelValue":t[4]||(t[4]=e=>me.value=e),title:"添加处理记录",width:"500px"},{footer:(0,s.k6)((()=>[(0,s.Lk)("span",te,[(0,s.bF)(Pe,{onClick:t[3]||(t[3]=e=>me.value=!1)},{default:(0,s.k6)((()=>t[36]||(t[36]=[(0,s.eW)("取消")]))),_:1}),(0,s.bF)(Pe,{type:"primary",onClick:Ze},{default:(0,s.k6)((()=>t[37]||(t[37]=[(0,s.eW)("提交")]))),_:1})])])),default:(0,s.k6)((()=>[(0,s.bF)(ft,{model:be,ref_key:"recordFormRef",ref:fe},{default:(0,s.k6)((()=>[(0,s.bF)(kt,{label:"记录类型",prop:"type"},{default:(0,s.k6)((()=>[(0,s.bF)(mt,{modelValue:be.type,"onUpdate:modelValue":t[1]||(t[1]=e=>be.type=e)},{default:(0,s.k6)((()=>[(0,s.bF)(pt,{label:"处理过程记录",value:"process"}),(0,s.bF)(pt,{label:"内部沟通",value:"note"}),(0,s.bF)(pt,{label:"状态更新",value:"status"})])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(kt,{label:"内容",prop:"content"},{default:(0,s.k6)((()=>[(0,s.bF)(vt,{type:"textarea",modelValue:be.content,"onUpdate:modelValue":t[2]||(t[2]=e=>be.content=e),rows:"4",placeholder:"请输入处理过程或备注信息"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,s.bF)(yt,{modelValue:ke.value,"onUpdate:modelValue":t[8]||(t[8]=e=>ke.value=e),title:"转派工单",width:"500px"},{footer:(0,s.k6)((()=>[(0,s.Lk)("span",ae,[(0,s.bF)(Pe,{onClick:t[7]||(t[7]=e=>ke.value=!1)},{default:(0,s.k6)((()=>t[38]||(t[38]=[(0,s.eW)("取消")]))),_:1}),(0,s.bF)(Pe,{type:"primary",onClick:tt},{default:(0,s.k6)((()=>t[39]||(t[39]=[(0,s.eW)("确认转派")]))),_:1})])])),default:(0,s.k6)((()=>[(0,s.bF)(ft,{model:_e,ref_key:"reassignFormRef",ref:ye},{default:(0,s.k6)((()=>[(0,s.bF)(kt,{label:"转派给",prop:"assignee"},{default:(0,s.k6)((()=>[(0,s.bF)(mt,{modelValue:_e.assignee,"onUpdate:modelValue":t[5]||(t[5]=e=>_e.assignee=e),filterable:"",placeholder:"选择处理人"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(de.value,(e=>((0,s.uX)(),(0,s.Wv)(pt,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(kt,{label:"转派原因",prop:"reason"},{default:(0,s.k6)((()=>[(0,s.bF)(vt,{type:"textarea",modelValue:_e.reason,"onUpdate:modelValue":t[6]||(t[6]=e=>_e.reason=e),rows:"3",placeholder:"请输入转派原因"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,s.bF)(yt,{modelValue:ve.value,"onUpdate:modelValue":t[13]||(t[13]=e=>ve.value=e),title:"更新工单状态",width:"500px"},{footer:(0,s.k6)((()=>[(0,s.Lk)("span",ce,[(0,s.bF)(Pe,{onClick:t[12]||(t[12]=e=>ve.value=!1)},{default:(0,s.k6)((()=>t[45]||(t[45]=[(0,s.eW)("取消")]))),_:1}),(0,s.bF)(Pe,{type:"primary",onClick:xe},{default:(0,s.k6)((()=>t[46]||(t[46]=[(0,s.eW)("确认更新")]))),_:1})])])),default:(0,s.k6)((()=>[(0,s.bF)(ft,{model:Xe,ref_key:"statusFormRef",ref:ge},{default:(0,s.k6)((()=>[(0,s.bF)(kt,{label:"新状态",prop:"status"},{default:(0,s.k6)((()=>[(0,s.bF)(mt,{modelValue:Xe.status,"onUpdate:modelValue":t[9]||(t[9]=e=>Xe.status=e)},{default:(0,s.k6)((()=>[(0,s.bF)(pt,{label:"处理中",value:"processing"}),(0,s.bF)(pt,{label:"待确认",value:"pending_confirmation"}),(0,s.bF)(pt,{label:"已解决",value:"resolved"}),(0,s.bF)(pt,{label:"已关闭",value:"closed"})])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(kt,{label:"状态说明",prop:"comment"},{default:(0,s.k6)((()=>[(0,s.bF)(vt,{type:"textarea",modelValue:Xe.comment,"onUpdate:modelValue":t[10]||(t[10]=e=>Xe.comment=e),rows:"3",placeholder:"请输入状态变更说明"},null,8,["modelValue"])])),_:1}),(0,s.bF)(kt,{label:"附件"},{default:(0,s.k6)((()=>[(0,s.bF)(gt,{class:"status-upload",action:"#","auto-upload":!1,"on-change":Fe,"on-remove":Ce,"file-list":Xe.fileList,multiple:""},{tip:(0,s.k6)((()=>t[41]||(t[41]=[(0,s.Lk)("div",{class:"el-upload__tip"},"支持任意格式文件，单个文件不超过10MB",-1)]))),default:(0,s.k6)((()=>[(0,s.bF)(Pe,{type:"primary"},{default:(0,s.k6)((()=>t[40]||(t[40]=[(0,s.eW)("选择文件")]))),_:1})])),_:1},8,["file-list"])])),_:1}),he.value?((0,s.uX)(),(0,s.CE)("div",se,[(0,s.Lk)("div",le,[t[43]||(t[43]=(0,s.Lk)("span",null,"文件预览",-1)),(0,s.bF)(Pe,{type:"text",onClick:We},{default:(0,s.k6)((()=>t[42]||(t[42]=[(0,s.eW)("关闭")]))),_:1})]),we.value?((0,s.uX)(),(0,s.CE)("div",ne,[De(we.value)?((0,s.uX)(),(0,s.CE)("img",{key:0,src:Le.value,class:"preview-image"},null,8,oe)):Ee(we.value)?((0,s.uX)(),(0,s.CE)("iframe",{key:1,src:Le.value,class:"preview-pdf"},null,8,re)):((0,s.uX)(),(0,s.CE)("div",ue,[(0,s.bF)(bt,null,{default:(0,s.k6)((()=>[(0,s.bF)((0,o.R1)(i.yoT))])),_:1}),(0,s.Lk)("span",null,(0,l.v_)(we.value.name),1),(0,s.bF)(Pe,{type:"primary",size:"small",onClick:t[11]||(t[11]=e=>Ve(we.value))},{default:(0,s.k6)((()=>t[44]||(t[44]=[(0,s.eW)("下载")]))),_:1})]))])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}};var de=a(6262);const pe=(0,de.A)(ie,[["__scopeId","data-v-1842d788"]]),me=pe}}]);
//# sourceMappingURL=853.faf48c99.js.map