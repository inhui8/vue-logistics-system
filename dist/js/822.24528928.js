"use strict";(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[822],{9822:(e,l,a)=>{a.r(l),a.d(l,{default:()=>m});var t=a(641),r=a(33),p=a(953),i=a(163);const u={class:"rating-dashboard-container"},o={class:"card-header"},d={class:"chart-placeholder large-chart"},n={class:"kpi-card good"},s={class:"kpi-value"},c={class:"kpi-value"},v={class:"kpi-value"},b={__name:"RatingDashboard",setup(e){const l=(0,p.KR)([{id:"supplier_1",name:"测试供应商A - 专做提框服务",type:"pickup"},{id:"supplier_2",name:"测试供应商B - FBA派送专家",type:"delivery"},{id:"supplier_3",name:"测试供应商C - 全能型选手",type:"both"},{id:"supplier_4",name:"测试供应商D - 区域小霸王",type:"delivery"},{id:"supplier_5",name:"测试供应商E - 新晋合作方",type:"pickup"}]),a=(0,p.KR)(["2024-Q1","2023-Q4","2023-Q3"]),b=(0,p.KR)({}),g={pickup:"提框",delivery:"派送",both:"综合"},k=e=>{const a=l.value.map((l=>{let a=85;"pickup"===l.type&&(a=88),l.name.includes("新晋")&&(a=75),"2023-Q4"===e&&(a+=5*Math.random()-2),"2023-Q3"===e&&(a+=8*Math.random()-4);const t=Math.max(60,Math.min(99.9,a+15*Math.random()-7.5)),r=Math.max(80,Math.min(99.9,1.05*t+10*Math.random()-8)),p=Math.max(.1,Math.min(5,.1*(100-t)+1*Math.random()-.5));return{supplierId:l.id,supplierName:l.name,type:l.type,typeLabel:g[l.type]||"未知",score:t,period:e,onTimeRate:r,damageRate:p}}));return a.sort(((e,l)=>l.score-e.score))},m=(0,p.Kh)({period:a.value[0],supplierType:""}),h=(0,p.KR)(!1),y=(0,p.KR)([]),_=(0,p.Kh)({currentPage:1,pageSize:10}),F=(0,t.EW)((()=>f.value.length)),f=(0,t.EW)((()=>y.value.filter((e=>!m.supplierType||e.type===m.supplierType)))),L=(0,t.EW)((()=>{const e=(_.currentPage-1)*_.pageSize,l=e+_.pageSize;return f.value.slice(e,l)})),R=(0,t.EW)((()=>{const e=f.value;if(0===e.length)return{averageScore:0,onTimeRate:0,damageRate:0};const l=e.reduce(((e,l)=>e+l.score),0)/e.length,a=e.reduce(((e,l)=>e+l.onTimeRate),0)/e.length,t=e.reduce(((e,l)=>e+l.damageRate),0)/e.length;return{averageScore:l,onTimeRate:a,damageRate:t}})),C=()=>{h.value=!0,_.currentPage=1,console.log(`查询评分: 周期=${m.period}, 类型=${m.supplierType}`),setTimeout((()=>{const e=m.period||a.value[0];b.value[e]||(console.log(`为周期 ${e} 生成模拟数据`),b.value[e]=k(e)),y.value=b.value[e],h.value=!1}),500)},w=e=>{_.currentPage=e},T=e=>e>=90?{color:"#67C23A"}:e>=80?{color:"#409EFF"}:e>=70?{color:"#E6A23C"}:{color:"#F56C6C"},x=e=>{console.log("查看供应商评分详情:",e),i.nk.info(`查看供应商 ${e.supplierName} 在 ${e.period} 的详细评分数据 (待实现)`)};return(0,t.sV)((()=>{C()})),(e,l)=>{const p=(0,t.g2)("el-option"),i=(0,t.g2)("el-select"),b=(0,t.g2)("el-form-item"),k=(0,t.g2)("el-button"),y=(0,t.g2)("el-form"),f=(0,t.g2)("el-table-column"),M=(0,t.g2)("el-table"),E=(0,t.g2)("el-pagination"),z=(0,t.g2)("el-col"),W=(0,t.g2)("el-row"),K=(0,t.g2)("el-card"),S=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",u,[(0,t.bF)(K,null,{header:(0,t.k6)((()=>[(0,t.Lk)("div",o,[l[3]||(l[3]=(0,t.Lk)("span",null,"供应商评分看板",-1)),(0,t.bF)(y,{inline:!0,model:m,size:"small",class:"dashboard-filter"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{label:"评分周期"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:m.period,"onUpdate:modelValue":l[0]||(l[0]=e=>m.period=e),placeholder:"选择周期",clearable:"",style:{width:"150px"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value,(e=>((0,t.uX)(),(0,t.Wv)(p,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(b,{label:"供应商类型"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:m.supplierType,"onUpdate:modelValue":l[1]||(l[1]=e=>m.supplierType=e),placeholder:"选择类型",clearable:"",style:{width:"150px"}},{default:(0,t.k6)((()=>[(0,t.bF)(p,{label:"提框",value:"pickup"}),(0,t.bF)(p,{label:"派送",value:"delivery"}),(0,t.bF)(p,{label:"综合",value:"both"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.bF)(k,{type:"primary",onClick:C},{default:(0,t.k6)((()=>l[2]||(l[2]=[(0,t.eW)("查询")]))),_:1})])),_:1})])),_:1},8,["model"])])])),default:(0,t.k6)((()=>[(0,t.bo)(((0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(W,{gutter:20},{default:(0,t.k6)((()=>[(0,t.bF)(z,{span:12},{default:(0,t.k6)((()=>[(0,t.Lk)("h4",null,"供应商评分排名 ("+(0,r.v_)(m.period||"最新")+")",1),(0,t.bF)(M,{data:L.value,style:{width:"100%"},height:"400px",border:"",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(f,{type:"index",label:"排名",width:"60",align:"center"}),(0,t.bF)(f,{prop:"supplierName",label:"供应商","show-overflow-tooltip":""}),(0,t.bF)(f,{prop:"score",label:"综合评分",width:"100",sortable:"",align:"center"},{default:(0,t.k6)((e=>[(0,t.Lk)("span",{style:(0,r.Tr)(T(e.row.score))},(0,r.v_)(e.row.score.toFixed(1)),5)])),_:1}),(0,t.bF)(f,{prop:"typeLabel",label:"类型",width:"80",align:"center"}),(0,t.bF)(f,{label:"操作",width:"80",align:"center"},{default:(0,t.k6)((e=>[(0,t.bF)(k,{text:"",type:"primary",size:"small",onClick:l=>x(e.row)},{default:(0,t.k6)((()=>l[4]||(l[4]=[(0,t.eW)("详情")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,t.bF)(E,{small:"",background:"",layout:"prev, pager, next",total:F.value,"page-size":_.pageSize,"current-page":_.currentPage,onCurrentChange:w,style:{"margin-top":"10px","justify-content":"center"}},null,8,["total","page-size","current-page"])])),_:1}),(0,t.bF)(z,{span:12},{default:(0,t.k6)((()=>[l[11]||(l[11]=(0,t.Lk)("h4",null,"评分趋势 / 对比分析 (模拟图表)",-1)),(0,t.Lk)("div",d,[l[5]||(l[5]=(0,t.eW)(" (此处集成图表库，展示整体评分趋势、按供应商类型对比、或选定供应商的维度得分雷达图等) ")),l[6]||(l[6]=(0,t.Lk)("br",null,null,-1)),l[7]||(l[7]=(0,t.Lk)("br",null,null,-1)),(0,t.eW)(" (当前筛选: "+(0,r.v_)(m.period||"最新")+", "+(0,r.v_)(m.supplierType?g[m.supplierType]:"所有类型")+") ",1)]),l[12]||(l[12]=(0,t.Lk)("h4",null,"关键绩效仪表盘 (模拟)",-1)),(0,t.bF)(W,{gutter:15,class:"kpi-dashboard"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{span:8},{default:(0,t.k6)((()=>[(0,t.Lk)("div",n,[(0,t.Lk)("div",s,(0,r.v_)(R.value.averageScore.toFixed(1)),1),l[8]||(l[8]=(0,t.Lk)("div",{class:"kpi-label"},"平均综合评分",-1))])])),_:1}),(0,t.bF)(z,{span:8},{default:(0,t.k6)((()=>[(0,t.Lk)("div",{class:(0,r.C4)(["kpi-card",R.value.onTimeRate>=95?"good":"warning"])},[(0,t.Lk)("div",c,(0,r.v_)(R.value.onTimeRate.toFixed(1))+"%",1),l[9]||(l[9]=(0,t.Lk)("div",{class:"kpi-label"},"平均准时率",-1))],2)])),_:1}),(0,t.bF)(z,{span:8},{default:(0,t.k6)((()=>[(0,t.Lk)("div",{class:(0,r.C4)(["kpi-card",R.value.damageRate<=1?"good":"bad"])},[(0,t.Lk)("div",v,(0,r.v_)(R.value.damageRate.toFixed(1))+"%",1),l[10]||(l[10]=(0,t.Lk)("div",{class:"kpi-label"},"平均货损率",-1))],2)])),_:1})])),_:1})])),_:1})])),_:1})])),[[S,h.value]])])),_:1})])}}};var g=a(6262);const k=(0,g.A)(b,[["__scopeId","data-v-7efae48c"]]),m=k}}]);
//# sourceMappingURL=822.24528928.js.map