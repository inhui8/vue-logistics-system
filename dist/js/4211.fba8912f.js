"use strict";(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[4211],{4211:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var l=a(641),d=a(33),n=a(3751);const i={class:"message-list-container"},s={class:"message-list-header"},o={class:"header-buttons"},r={class:"pagination"};function c(e,t,a,c,p,u){const b=(0,l.g2)("el-button"),k=(0,l.g2)("el-table-column"),m=(0,l.g2)("el-tag"),g=(0,l.g2)("el-table"),h=(0,l.g2)("el-tab-pane"),w=(0,l.g2)("el-tabs"),y=(0,l.g2)("el-pagination");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.Lk)("div",s,[t[23]||(t[23]=(0,l.Lk)("div",{class:"header-title"},"消息列表",-1)),(0,l.Lk)("div",o,[(0,l.bF)(b,{type:"primary",onClick:c.markAllRead,disabled:!c.hasUnread},{default:(0,l.k6)((()=>t[21]||(t[21]=[(0,l.eW)("全部标记已读")]))),_:1},8,["onClick","disabled"]),(0,l.bF)(b,{type:"danger",onClick:c.batchDelete,disabled:0===c.selectedMessages.length},{default:(0,l.k6)((()=>t[22]||(t[22]=[(0,l.eW)("批量删除")]))),_:1},8,["onClick","disabled"])])]),(0,l.bF)(w,{modelValue:c.activeTab,"onUpdate:modelValue":t[18]||(t[18]=e=>c.activeTab=e),onTabClick:c.handleTabClick},{default:(0,l.k6)((()=>[(0,l.bF)(h,{label:"全部",name:"all"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{data:c.messages,style:{width:"100%"},onSelectionChange:c.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(k,{type:"selection",width:"55"}),(0,l.bF)(k,{prop:"number",label:"单号",width:"180"}),(0,l.bF)(k,{prop:"type",label:"类型",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(m,{type:c.getTagType(e.type)},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(c.getTypeText(e.type)),1)])),_:2},1032,["type"])])),_:1}),(0,l.bF)(k,{prop:"title",label:"标题"}),(0,l.bF)(k,{prop:"createTime",label:"时间",width:"180"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,d.v_)(c.formatTime(e.createTime)),1)])),_:1}),(0,l.bF)(k,{prop:"orderStatus",label:"订单状态",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[0]||(t[0]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(m,{type:c.getOrderStatusType(e.orderStatus),size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(c.getOrderStatusText(e.orderStatus)),1)])),_:2},1032,["type"])])])),_:1}),(0,l.bF)(k,{prop:"isSystem",label:"发送方式",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,d.v_)(e.isSystem?"系统自动":"人工发送"),1)])),_:1}),(0,l.bF)(k,{prop:"read",label:"状态",width:"100"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[1]||(t[1]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(m,{type:e.read?"success":"warning",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.read?"已读":"未读"),1)])),_:2},1032,["type"])])])),_:1}),(0,l.bF)(k,{label:"操作",width:"150"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[2]||(t[2]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(b,{type:"text",onClick:t=>c.viewDetail(e)},{default:(0,l.k6)((()=>t[24]||(t[24]=[(0,l.eW)("查看")]))),_:2},1032,["onClick"]),(0,l.bF)(b,{type:"text",class:"delete-btn",onClick:t=>c.deleteMessage(e)},{default:(0,l.k6)((()=>t[25]||(t[25]=[(0,l.eW)("删除")]))),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onSelectionChange"])])),_:1}),(0,l.bF)(h,{label:"指令工单",name:"command"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{data:c.commandMessages,style:{width:"100%"},onSelectionChange:c.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(k,{type:"selection",width:"55"}),(0,l.bF)(k,{prop:"number",label:"单号",width:"180"}),(0,l.bF)(k,{prop:"title",label:"标题"}),(0,l.bF)(k,{prop:"createTime",label:"时间",width:"180"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,d.v_)(c.formatTime(e.createTime)),1)])),_:1}),(0,l.bF)(k,{prop:"orderStatus",label:"订单状态",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[3]||(t[3]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(m,{type:c.getOrderStatusType(e.orderStatus),size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(c.getOrderStatusText(e.orderStatus)),1)])),_:2},1032,["type"])])])),_:1}),(0,l.bF)(k,{prop:"isSystem",label:"发送方式",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,d.v_)(e.isSystem?"系统自动":"人工发送"),1)])),_:1}),(0,l.bF)(k,{prop:"read",label:"状态",width:"100"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[4]||(t[4]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(m,{type:e.read?"success":"warning",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.read?"已读":"未读"),1)])),_:2},1032,["type"])])])),_:1}),(0,l.bF)(k,{label:"操作",width:"150"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[5]||(t[5]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(b,{type:"text",onClick:t=>c.viewDetail(e)},{default:(0,l.k6)((()=>t[26]||(t[26]=[(0,l.eW)("查看")]))),_:2},1032,["onClick"]),(0,l.bF)(b,{type:"text",class:"delete-btn",onClick:t=>c.deleteMessage(e)},{default:(0,l.k6)((()=>t[27]||(t[27]=[(0,l.eW)("删除")]))),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onSelectionChange"])])),_:1}),(0,l.bF)(h,{label:"异常工单",name:"exception"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{data:c.exceptionMessages,style:{width:"100%"},onSelectionChange:c.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(k,{type:"selection",width:"55"}),(0,l.bF)(k,{prop:"number",label:"单号",width:"180"}),(0,l.bF)(k,{prop:"title",label:"标题"}),(0,l.bF)(k,{prop:"createTime",label:"时间",width:"180"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,d.v_)(c.formatTime(e.createTime)),1)])),_:1}),(0,l.bF)(k,{prop:"orderStatus",label:"订单状态",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[6]||(t[6]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(m,{type:c.getOrderStatusType(e.orderStatus),size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(c.getOrderStatusText(e.orderStatus)),1)])),_:2},1032,["type"])])])),_:1}),(0,l.bF)(k,{prop:"isSystem",label:"发送方式",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,d.v_)(e.isSystem?"系统自动":"人工发送"),1)])),_:1}),(0,l.bF)(k,{prop:"read",label:"状态",width:"100"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[7]||(t[7]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(m,{type:e.read?"success":"warning",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.read?"已读":"未读"),1)])),_:2},1032,["type"])])])),_:1}),(0,l.bF)(k,{label:"操作",width:"150"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[8]||(t[8]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(b,{type:"text",onClick:t=>c.viewDetail(e)},{default:(0,l.k6)((()=>t[28]||(t[28]=[(0,l.eW)("查看")]))),_:2},1032,["onClick"]),(0,l.bF)(b,{type:"text",class:"delete-btn",onClick:t=>c.deleteMessage(e)},{default:(0,l.k6)((()=>t[29]||(t[29]=[(0,l.eW)("删除")]))),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onSelectionChange"])])),_:1}),(0,l.bF)(h,{label:"增值服务",name:"value-added"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{data:c.valueAddedMessages,style:{width:"100%"},onSelectionChange:c.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(k,{type:"selection",width:"55"}),(0,l.bF)(k,{prop:"number",label:"单号",width:"180"}),(0,l.bF)(k,{prop:"title",label:"标题"}),(0,l.bF)(k,{prop:"createTime",label:"时间",width:"180"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,d.v_)(c.formatTime(e.createTime)),1)])),_:1}),(0,l.bF)(k,{prop:"orderStatus",label:"订单状态",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[9]||(t[9]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(m,{type:c.getOrderStatusType(e.orderStatus),size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(c.getOrderStatusText(e.orderStatus)),1)])),_:2},1032,["type"])])])),_:1}),(0,l.bF)(k,{prop:"isSystem",label:"发送方式",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,d.v_)(e.isSystem?"系统自动":"人工发送"),1)])),_:1}),(0,l.bF)(k,{prop:"read",label:"状态",width:"100"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[10]||(t[10]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(m,{type:e.read?"success":"warning",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.read?"已读":"未读"),1)])),_:2},1032,["type"])])])),_:1}),(0,l.bF)(k,{label:"操作",width:"150"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[11]||(t[11]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(b,{type:"text",onClick:t=>c.viewDetail(e)},{default:(0,l.k6)((()=>t[30]||(t[30]=[(0,l.eW)("查看")]))),_:2},1032,["onClick"]),(0,l.bF)(b,{type:"text",class:"delete-btn",onClick:t=>c.deleteMessage(e)},{default:(0,l.k6)((()=>t[31]||(t[31]=[(0,l.eW)("删除")]))),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onSelectionChange"])])),_:1}),(0,l.bF)(h,{label:"系统公告",name:"announcement"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{data:c.announcementMessages,style:{width:"100%"},onSelectionChange:c.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(k,{type:"selection",width:"55"}),(0,l.bF)(k,{prop:"number",label:"单号",width:"180"}),(0,l.bF)(k,{prop:"title",label:"标题"}),(0,l.bF)(k,{prop:"createTime",label:"时间",width:"180"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,d.v_)(c.formatTime(e.createTime)),1)])),_:1}),(0,l.bF)(k,{prop:"orderStatus",label:"订单状态",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[12]||(t[12]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(m,{type:c.getOrderStatusType(e.orderStatus),size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(c.getOrderStatusText(e.orderStatus)),1)])),_:2},1032,["type"])])])),_:1}),(0,l.bF)(k,{prop:"isSystem",label:"发送方式",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,d.v_)(e.isSystem?"系统自动":"人工发送"),1)])),_:1}),(0,l.bF)(k,{prop:"read",label:"状态",width:"100"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[13]||(t[13]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(m,{type:e.read?"success":"warning",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.read?"已读":"未读"),1)])),_:2},1032,["type"])])])),_:1}),(0,l.bF)(k,{label:"操作",width:"150"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[14]||(t[14]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(b,{type:"text",onClick:t=>c.viewDetail(e)},{default:(0,l.k6)((()=>t[32]||(t[32]=[(0,l.eW)("查看")]))),_:2},1032,["onClick"]),(0,l.bF)(b,{type:"text",class:"delete-btn",onClick:t=>c.deleteMessage(e)},{default:(0,l.k6)((()=>t[33]||(t[33]=[(0,l.eW)("删除")]))),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onSelectionChange"])])),_:1}),(0,l.bF)(h,{label:"管理员信息",name:"admin"},{default:(0,l.k6)((()=>[(0,l.bF)(g,{data:c.adminMessages,style:{width:"100%"},onSelectionChange:c.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(k,{type:"selection",width:"55"}),(0,l.bF)(k,{prop:"number",label:"单号",width:"180"}),(0,l.bF)(k,{prop:"title",label:"标题"}),(0,l.bF)(k,{prop:"createTime",label:"时间",width:"180"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,d.v_)(c.formatTime(e.createTime)),1)])),_:1}),(0,l.bF)(k,{prop:"orderStatus",label:"订单状态",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[15]||(t[15]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(m,{type:c.getOrderStatusType(e.orderStatus),size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(c.getOrderStatusText(e.orderStatus)),1)])),_:2},1032,["type"])])])),_:1}),(0,l.bF)(k,{prop:"isSystem",label:"发送方式",width:"120"},{default:(0,l.k6)((({row:e})=>[(0,l.eW)((0,d.v_)(e.isSystem?"系统自动":"人工发送"),1)])),_:1}),(0,l.bF)(k,{prop:"read",label:"状态",width:"100"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[16]||(t[16]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(m,{type:e.read?"success":"warning",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.read?"已读":"未读"),1)])),_:2},1032,["type"])])])),_:1}),(0,l.bF)(k,{label:"操作",width:"150"},{default:(0,l.k6)((({row:e})=>[(0,l.Lk)("div",{onClick:t[17]||(t[17]=(0,n.D$)((()=>{}),["stop"]))},[(0,l.bF)(b,{type:"text",onClick:t=>c.viewDetail(e)},{default:(0,l.k6)((()=>t[34]||(t[34]=[(0,l.eW)("查看")]))),_:2},1032,["onClick"]),(0,l.bF)(b,{type:"text",class:"delete-btn",onClick:t=>c.deleteMessage(e)},{default:(0,l.k6)((()=>t[35]||(t[35]=[(0,l.eW)("删除")]))),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","onSelectionChange"])])),_:1})])),_:1},8,["modelValue","onTabClick"]),(0,l.Lk)("div",r,[(0,l.bF)(y,{"current-page":c.currentPage,"onUpdate:currentPage":t[19]||(t[19]=e=>c.currentPage=e),"page-size":c.pageSize,"onUpdate:pageSize":t[20]||(t[20]=e=>c.pageSize=e),"page-sizes":[10,20,50,100],total:c.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:c.handleSizeChange,onCurrentChange:c.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])}var p=a(953),u=a(5220),b=a(163),k=a(7918),m=a(6340),g=a(3366);const h={name:"MessageList",setup(){const e=(0,u.rd)(),t=(0,p.KR)("all"),a=(0,p.KR)(1),d=(0,p.KR)(10),n=(0,p.KR)(100),i=(0,p.KR)([]),s=(0,p.KR)([{id:1,type:"command",number:"CMD20240315001",title:"新的指令工单",content:"您有一个新的指令工单需要处理",createTime:new Date,read:!1,isSystem:!0,orderStatus:"pending"},{id:2,type:"exception",number:"EXP20240315001",title:"异常工单提醒",content:"发现异常情况，请及时处理",createTime:new Date(Date.now()-18e5),read:!1,isSystem:!0,orderStatus:"processing"},{id:3,type:"value-added",number:"VAS20240315001",title:"增值服务通知",content:"您申请的增值服务已受理",createTime:new Date(Date.now()-36e5),read:!0,isSystem:!1,orderStatus:"completed"},{id:4,type:"announcement",number:"ANN20240315001",title:"系统维护通知",content:"系统将于今晚进行例行维护",createTime:new Date(Date.now()-72e5),read:!0,isSystem:!0,orderStatus:"scheduled"},{id:5,type:"admin",number:"ADM20240315001",title:"管理员通知",content:"请及时更新您的个人信息",createTime:new Date(Date.now()-864e5),read:!0,isSystem:!1,orderStatus:"resolved"}]),o=(0,l.EW)((()=>s.value.filter((e=>"command"===e.type)))),r=(0,l.EW)((()=>s.value.filter((e=>"exception"===e.type)))),c=(0,l.EW)((()=>s.value.filter((e=>"value-added"===e.type)))),h=(0,l.EW)((()=>s.value.filter((e=>"announcement"===e.type)))),w=(0,l.EW)((()=>s.value.filter((e=>"admin"===e.type)))),y=(0,l.EW)((()=>s.value.some((e=>!e.read)))),_=e=>{const t={command:"指令工单",exception:"异常工单","value-added":"增值服务",announcement:"系统公告",admin:"管理员信息"};return t[e]||"未知类型"},f=e=>{const t={command:"primary",exception:"danger","value-added":"success",announcement:"warning",admin:"info"};return t[e]||""},v=e=>{const t={pending:"待开始",processing:"处理中",scheduled:"已安排",completed:"已完成",resolved:"已解决",cancelled:"已取消"};return t[e]||"未知状态"},F=e=>{const t={pending:"info",processing:"warning",scheduled:"primary",completed:"success",resolved:"success",cancelled:"danger"};return t[e]||"info"},C=e=>{i.value=e},S=()=>{s.value.forEach((e=>{e.read=!0})),b.nk.success("已全部标记为已读")},T=()=>{k.s.confirm("确定要删除选中的消息吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=i.value.map((e=>e.id));s.value=s.value.filter((t=>!e.includes(t.id))),i.value=[],b.nk.success("删除成功")}))},W=t=>{e.push({path:"/messages/detail",query:{id:t.id}})},D=e=>{k.s.confirm("确定要删除这条消息吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{s.value=s.value.filter((t=>t.id!==e.id)),b.nk.success("删除成功")}))},x=e=>{d.value=e},z=e=>{a.value=e},L=(0,g.A)((()=>{console.log("Tab changed to:",t.value)}),200);return{activeTab:t,messages:s,commandMessages:o,exceptionMessages:r,valueAddedMessages:c,announcementMessages:h,adminMessages:w,currentPage:a,pageSize:d,total:n,selectedMessages:i,hasUnread:y,formatTime:m.f,getTypeText:_,getTagType:f,getOrderStatusText:v,getOrderStatusType:F,handleSelectionChange:C,handleTabClick:L,markAllRead:S,batchDelete:T,viewDetail:W,deleteMessage:D,handleSizeChange:x,handleCurrentChange:z}}};var w=a(6262);const y=(0,w.A)(h,[["render",c],["__scopeId","data-v-2535b02a"]]),_=y}}]);
//# sourceMappingURL=4211.fba8912f.js.map