{"version":3,"file":"js/2647.69dcec66.js","mappings":"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","sources":["webpack://vue-logistics-system/./src/views/Admin/ContractManagement/ContractTemplateManagement.vue","webpack://vue-logistics-system/./src/views/Admin/ContractManagement/ContractTemplateManagement.vue?19f7"],"sourcesContent":["<template>\r\n  <div class=\"contract-template-container\">\r\n    <el-card>\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>合同模板管理</span>\r\n           <el-button type=\"primary\" @click=\"handleUploadTemplate\">\r\n             <el-icon><Upload /></el-icon> 上传新模板\r\n           </el-button>\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 模板列表 -->\r\n       <el-table :data=\"templateList\" style=\"width: 100%\" border>\r\n         <el-table-column prop=\"name\" label=\"模板名称\" min-width=\"200\" show-overflow-tooltip />\r\n         <el-table-column prop=\"type\" label=\"适用类型\" width=\"150\">\r\n             <template #default=\"scope\">{{ formatContractType(scope.row.type) }}</template>\r\n         </el-table-column>\r\n         <el-table-column prop=\"version\" label=\"版本号\" width=\"100\" align=\"center\"/>\r\n         <el-table-column prop=\"uploader\" label=\"上传人\" width=\"120\" />\r\n         <el-table-column prop=\"uploadTime\" label=\"上传时间\" width=\"160\" sortable />\r\n         <el-table-column prop=\"fileSize\" label=\"文件大小\" width=\"120\" align=\"right\">\r\n             <template #default=\"scope\">{{ (scope.row.fileSize / 1024).toFixed(1) }} KB</template>\r\n         </el-table-column>\r\n        <el-table-column label=\"操作\" fixed=\"right\" width=\"220\">\r\n          <template #default=\"scope\">\r\n             <el-button text type=\"primary\" size=\"small\" :icon=\"Download\" @click=\"handleDownloadTemplate(scope.row)\">下载</el-button>\r\n             <el-button text type=\"info\" size=\"small\" :icon=\"Tickets\" @click=\"handleViewVersions(scope.row)\">历史版本</el-button> \r\n             <el-button text type=\"danger\" size=\"small\" :icon=\"Delete\" @click=\"handleDeleteTemplate(scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 无需分页，假设模板数量不多 -->\r\n\r\n      <!-- 上传模板弹窗 -->\r\n       <el-dialog\r\n         v-model=\"uploadDialogVisible\"\r\n         title=\"上传新模板\"\r\n         width=\"500px\"\r\n         :close-on-click-modal=\"false\"\r\n         @close=\"resetUploadForm\"\r\n       >\r\n         <el-form ref=\"uploadFormRef\" :model=\"uploadForm\" :rules=\"uploadFormRules\" label-width=\"100px\">\r\n           <el-form-item label=\"模板名称\" prop=\"name\">\r\n             <el-input v-model=\"uploadForm.name\" placeholder=\"例如：年度框架协议模板\" />\r\n           </el-form-item>\r\n           <el-form-item label=\"适用类型\" prop=\"type\">\r\n              <el-select v-model=\"uploadForm.type\" placeholder=\"选择模板适用的合同类型\" style=\"width: 100%;\">\r\n                 <el-option v-for=\"item in contractTypeOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n               </el-select>\r\n           </el-form-item>\r\n            <el-form-item label=\"版本号\" prop=\"version\">\r\n             <el-input v-model=\"uploadForm.version\" placeholder=\"例如：V1.0\" />\r\n           </el-form-item>\r\n           <el-form-item label=\"选择文件\" prop=\"file\">\r\n              <el-upload\r\n                 ref=\"uploadRef\"\r\n                 v-model:file-list=\"uploadForm.fileList\"\r\n                 action=\"#\" \r\n                 :limit=\"1\"\r\n                 :auto-upload=\"false\"\r\n                 :on-exceed=\"handleExceed\"\r\n                 :on-change=\"handleFileSelect\"\r\n               >\r\n                 <template #trigger>\r\n                    <el-button type=\"primary\">选择文件</el-button>\r\n                  </template>\r\n                 <template #tip>\r\n                   <div class=\"el-upload__tip text-red\">\r\n                      仅限上传 1 个文件 (如 .docx, .pdf)\r\n                    </div>\r\n                 </template>\r\n               </el-upload>\r\n           </el-form-item>\r\n         </el-form>\r\n         <template #footer>\r\n           <span class=\"dialog-footer\">\r\n             <el-button @click=\"uploadDialogVisible = false\">取消</el-button>\r\n             <el-button type=\"primary\" @click=\"submitUpload\" :loading=\"uploading\">确认上传</el-button>\r\n           </span>\r\n         </template>\r\n       </el-dialog>\r\n\r\n       <!-- 历史版本弹窗 (占位) -->\r\n        <el-dialog v-model=\"versionDialogVisible\" title=\"历史版本\" width=\"60%\">\r\n            <p>模板名称: {{ currentTemplate?.name }}</p>\r\n            <el-table :data=\"currentTemplate?.versions || []\" border size=\"small\" style=\"margin-top: 10px;\">\r\n                <el-table-column prop=\"version\" label=\"版本号\" width=\"100\"/>\r\n                <el-table-column prop=\"uploader\" label=\"上传人\" width=\"120\" />\r\n                <el-table-column prop=\"uploadTime\" label=\"上传时间\" width=\"160\" />\r\n                 <el-table-column prop=\"fileSize\" label=\"文件大小\" width=\"120\">\r\n                     <template #default=\"scope\">{{ (scope.row.fileSize / 1024).toFixed(1) }} KB</template>\r\n                 </el-table-column>\r\n                 <el-table-column label=\"操作\" width=\"100\">\r\n                     <template #default=\"scope\">\r\n                         <el-button text type=\"primary\" size=\"small\" :icon=\"Download\" @click=\"handleDownloadTemplate(scope.row, true)\">下载</el-button>\r\n                     </template>\r\n                 </el-table-column>\r\n            </el-table>\r\n            <template #footer>\r\n                <el-button @click=\"versionDialogVisible = false\">关闭</el-button>\r\n            </template>\r\n        </el-dialog>\r\n\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted } from 'vue';\r\nimport { ElMessage, ElMessageBox } from 'element-plus';\r\nimport { Upload, Download, Tickets, Delete } from '@element-plus/icons-vue';\r\n\r\n// --- 模拟数据 ---\r\nconst templateList = ref([]);\r\n\r\nconst contractTypeOptions = [\r\n    { value: 'framework', label: '年度框架协议' },\r\n    { value: 'transport', label: '单次运输合同' },\r\n    { value: 'warehouse', label: '仓储服务合同' },\r\n    { value: 'nda', label: '保密协议' }, // 新增类型\r\n    { value: 'other', label: '其他' },\r\n];\r\n\r\nconst generateMockTemplates = () => {\r\n  const mockData = [\r\n    {\r\n      id: 'tpl_1',\r\n      name: '年度运输框架协议模板',\r\n      type: 'framework',\r\n      version: 'V2.1',\r\n      uploader: '法务部A',\r\n      uploadTime: '2024-03-15 10:30:00',\r\n      fileUrl: '/path/to/template1_v2.1.docx',\r\n      fileSize: 120 * 1024,\r\n      versions: [\r\n           { id: 'tpl_1_v2.1', version: 'V2.1', uploader: '法务部A', uploadTime: '2024-03-15 10:30:00', fileSize: 120 * 1024, fileUrl: '/path/to/template1_v2.1.docx' },\r\n           { id: 'tpl_1_v2.0', version: 'V2.0', uploader: '法务部A', uploadTime: '2024-01-10 14:00:00', fileSize: 115 * 1024, fileUrl: '/path/to/template1_v2.0.docx' },\r\n           { id: 'tpl_1_v1.0', version: 'V1.0', uploader: '张三', uploadTime: '2023-05-20 09:00:00', fileSize: 100 * 1024, fileUrl: '/path/to/template1_v1.0.docx' },\r\n      ]\r\n    },\r\n    {\r\n      id: 'tpl_2',\r\n      name: '标准仓储服务合同模板',\r\n      type: 'warehouse',\r\n      version: 'V1.0',\r\n      uploader: '仓库主管B',\r\n      uploadTime: '2024-02-01 16:00:00',\r\n      fileUrl: '/path/to/template2_v1.0.pdf',\r\n      fileSize: 85 * 1024,\r\n       versions: [\r\n           { id: 'tpl_2_v1.0', version: 'V1.0', uploader: '仓库主管B', uploadTime: '2024-02-01 16:00:00', fileSize: 85 * 1024, fileUrl: '/path/to/template2_v1.0.pdf' },\r\n      ]\r\n    },\r\n     {\r\n      id: 'tpl_3',\r\n      name: '运输服务保密协议',\r\n      type: 'nda',\r\n      version: 'V1.1',\r\n      uploader: '法务部A',\r\n      uploadTime: '2024-04-10 11:00:00',\r\n      fileUrl: '/path/to/template3_v1.1.docx',\r\n      fileSize: 60 * 1024,\r\n       versions: [\r\n           { id: 'tpl_3_v1.1', version: 'V1.1', uploader: '法务部A', uploadTime: '2024-04-10 11:00:00', fileSize: 60 * 1024, fileUrl: '/path/to/template3_v1.1.docx' },\r\n            { id: 'tpl_3_v1.0', version: 'V1.0', uploader: '法务部A', uploadTime: '2023-11-01 15:20:00', fileSize: 58 * 1024, fileUrl: '/path/to/template3_v1.0.docx' },\r\n      ]\r\n    },\r\n  ];\r\n  templateList.value = mockData.sort((a,b) => new Date(b.uploadTime) - new Date(a.uploadTime));\r\n};\r\n\r\n// --- 上传弹窗 --- \r\nconst uploadDialogVisible = ref(false);\r\nconst uploadFormRef = ref(null);\r\nconst uploadRef = ref(null);\r\nconst uploading = ref(false);\r\nconst initialUploadForm = {\r\n    name: '',\r\n    type: '',\r\n    version: '',\r\n    fileList: [],\r\n    selectedFile: null,\r\n};\r\nconst uploadForm = reactive({ ...initialUploadForm });\r\n\r\nconst uploadFormRules = reactive({\r\n    name: [{ required: true, message: '请输入模板名称', trigger: 'blur' }],\r\n    type: [{ required: true, message: '请选择适用类型', trigger: 'change' }],\r\n    version: [{ required: true, message: '请输入版本号', trigger: 'blur' }],\r\n    file: [{ required: true, message: '请选择要上传的文件' }], // 校验 selectedFile\r\n});\r\n\r\n// --- 历史版本弹窗 ---\r\nconst versionDialogVisible = ref(false);\r\nconst currentTemplate = ref(null);\r\n\r\n\r\n// --- 方法 ---\r\nconst formatContractType = (type) => contractTypeOptions.find(opt => opt.value === type)?.label || type;\r\n\r\n// 打开上传弹窗\r\nconst handleUploadTemplate = () => {\r\n    uploadDialogVisible.value = true;\r\n};\r\n\r\n// 重置上传表单\r\nconst resetUploadForm = () => {\r\n    Object.assign(uploadForm, initialUploadForm);\r\n    uploadForm.fileList = [];\r\n    uploadForm.selectedFile = null;\r\n    uploadRef.value?.clearFiles(); // 清除 el-upload 的文件列表\r\n    uploadFormRef.value?.clearValidate();\r\n};\r\n\r\n// 处理文件超出限制\r\nconst handleExceed = (files) => {\r\n  uploadRef.value.clearFiles();\r\n  const file = files[0];\r\n  file.uid = Date.now() + Math.random(); // 手动生成 UID\r\n  uploadRef.value.handleStart(file); // 重新选择第一个文件\r\n   ElMessage.warning('只能上传一个文件，已替换为最新选择的文件');\r\n};\r\n\r\n// 处理文件选择\r\nconst handleFileSelect = (uploadFile, uploadFiles) => {\r\n    console.log('File selected:', uploadFile);\r\n    if (uploadFile.status === 'ready') { // 确保只处理新选择的文件\r\n        uploadForm.selectedFile = uploadFile; \r\n        // 手动触发表单文件校验\r\n         uploadFormRef.value?.validateField('file');\r\n    } else if(uploadFiles.length === 0) { // 文件被移除\r\n         uploadForm.selectedFile = null;\r\n         uploadFormRef.value?.validateField('file');\r\n    }\r\n     uploadForm.fileList = uploadFiles;\r\n};\r\n\r\n// 提交上传 (模拟)\r\nconst submitUpload = async () => {\r\n    if (!uploadFormRef.value) return;\r\n    \r\n    // 额外校验文件是否已选择\r\n    if (!uploadForm.selectedFile) {\r\n        uploadFormRules.file[0].required = true; // 确保校验规则生效\r\n        uploadFormRef.value?.validateField('file');\r\n        ElMessage.error('请选择要上传的模板文件');\r\n        return;\r\n    } else {\r\n         uploadFormRules.file[0].required = false; // 如果已选，则移除校验（避免显示错误）\r\n         uploadFormRef.value?.clearValidate('file');\r\n    }\r\n\r\n    try {\r\n        await uploadFormRef.value.validate();\r\n        uploading.value = true;\r\n        const fileData = uploadForm.selectedFile; \r\n\r\n        console.log('开始上传模板:', {\r\n            name: uploadForm.name,\r\n            type: uploadForm.type,\r\n            version: uploadForm.version,\r\n            fileName: fileData.name,\r\n            fileSize: fileData.size,\r\n        });\r\n\r\n        // 模拟 API 上传\r\n        setTimeout(() => {\r\n             const newTemplate = {\r\n                id: `tpl_${Date.now()}`,\r\n                name: uploadForm.name,\r\n                type: uploadForm.type,\r\n                version: uploadForm.version,\r\n                uploader: '当前用户',\r\n                uploadTime: new Date().toLocaleString(),\r\n                fileUrl: `/mock/path/${fileData.uid}/${fileData.name}`,\r\n                fileSize: fileData.size,\r\n                versions: [\r\n                     { id: `tpl_ver_${Date.now()}`, version: uploadForm.version, uploader: '当前用户', uploadTime: new Date().toLocaleString(), fileSize: fileData.size, fileUrl: `/mock/path/${fileData.uid}/${fileData.name}` }\r\n                ]\r\n             };\r\n             templateList.value.unshift(newTemplate); // 添加到列表顶部\r\n             templateList.value.sort((a,b) => new Date(b.uploadTime) - new Date(a.uploadTime)); // 重新排序\r\n             \r\n             uploading.value = false;\r\n             uploadDialogVisible.value = false;\r\n             ElMessage.success('模板上传成功');\r\n        }, 1500);\r\n\r\n    } catch (error) {\r\n        console.log('表单验证失败:', error);\r\n        ElMessage.error('请检查表单信息是否完整');\r\n    }\r\n};\r\n\r\n// 下载模板 (模拟)\r\nconst handleDownloadTemplate = (row/*, isVersion = false*/) => {\r\n    console.log(`下载模板: ${row.name} (版本: ${row.version}), URL: ${row.fileUrl}`);\r\n    ElMessage.success(`开始下载模板 ${row.name} ${row.version} (模拟)`);\r\n    // window.open(row.fileUrl, '_blank');\r\n};\r\n\r\n// 查看历史版本\r\nconst handleViewVersions = (row) => {\r\n    currentTemplate.value = JSON.parse(JSON.stringify(row));\r\n    versionDialogVisible.value = true;\r\n};\r\n\r\n// 删除模板 (模拟)\r\nconst handleDeleteTemplate = (row) => {\r\n     ElMessageBox.confirm(`确定要删除模板 \"${row.name}\" (版本: ${row.version}) 吗? 这将删除所有历史版本。`, '确认删除', {\r\n        confirmButtonText: '确认删除',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n      })\r\n      .then(() => {\r\n         console.log('删除模板:', row.id);\r\n         const index = templateList.value.findIndex(t => t.id === row.id);\r\n         if (index !== -1) {\r\n            templateList.value.splice(index, 1);\r\n            ElMessage.success('模板已删除');\r\n         } else {\r\n             ElMessage.error('删除失败: 未找到模板');\r\n         }\r\n       })\r\n      .catch(() => {});\r\n};\r\n\r\n// --- 生命周期 ---\r\nonMounted(() => {\r\n  generateMockTemplates();\r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.contract-template-container {\r\n  padding: 20px;\r\n}\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.el-table {\r\n  margin-top: 15px;\r\n}\r\n.dialog-footer {\r\n    text-align: right;\r\n}\r\n.el-upload__tip {\r\n    color: #909399;\r\n    margin-top: 5px;\r\n}\r\n.text-red {\r\n     color: #f56c6c;\r\n}\r\n</style> ","import script from \"./ContractTemplateManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ContractTemplateManagement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ContractTemplateManagement.vue?vue&type=style&index=0&id=69b7607c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-69b7607c\"]])\n\nexport default __exports__"],"names":["templateList","ref","contractTypeOptions","value","label","generateMockTemplates","mockData","id","name","type","version","uploader","uploadTime","fileUrl","fileSize","versions","sort","a","b","Date","uploadDialogVisible","uploadFormRef","uploadRef","uploading","initialUploadForm","fileList","selectedFile","uploadForm","reactive","uploadFormRules","required","message","trigger","file","versionDialogVisible","currentTemplate","formatContractType","find","opt","handleUploadTemplate","resetUploadForm","Object","assign","clearFiles","clearValidate","handleExceed","files","uid","now","Math","random","handleStart","ElMessage","warning","handleFileSelect","uploadFile","uploadFiles","console","log","status","validateField","length","submitUpload","async","error","validate","fileData","fileName","size","setTimeout","newTemplate","toLocaleString","unshift","success","handleDownloadTemplate","row","handleViewVersions","JSON","parse","stringify","handleDeleteTemplate","ElMessageBox","confirm","confirmButtonText","cancelButtonText","then","index","findIndex","t","splice","catch","onMounted","__exports__"],"sourceRoot":""}