{"version":3,"file":"js/7714.8dfd54e2.js","mappings":"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","sources":["webpack://vue-logistics-system/./src/views/Admin/RatingManagement/RatingIndicatorConfig.vue","webpack://vue-logistics-system/./src/views/Admin/RatingManagement/RatingIndicatorConfig.vue?59e6"],"sourcesContent":["<template>\r\n  <div class=\"rating-config-container\">\r\n    <el-card>\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>评分维度与指标配置</span>\r\n           <el-button type=\"primary\" @click=\"saveConfig\" :loading=\"saving\">保存配置</el-button>\r\n        </div>\r\n      </template>\r\n\r\n      <el-form label-width=\"100px\">\r\n          <el-form-item label=\"评分周期\">\r\n             <el-radio-group v-model=\"config.periodType\">\r\n               <el-radio label=\"monthly\">月度</el-radio>\r\n               <el-radio label=\"quarterly\">季度</el-radio>\r\n               <el-radio label=\"yearly\" disabled>年度 (待支持)</el-radio>\r\n             </el-radio-group>\r\n          </el-form-item>\r\n      </el-form>\r\n\r\n      <el-divider>评分维度与指标</el-divider>\r\n\r\n      <div v-for=\"(dimension, dimIndex) in config.dimensions\" :key=\"dimension.id\" class=\"dimension-block\">\r\n          <div class=\"dimension-header\">\r\n              <el-input v-model=\"dimension.name\" placeholder=\"维度名称\" style=\"width: 200px; margin-right: 10px;\"/>\r\n              <el-input-number v-model=\"dimension.weight\" :min=\"0\" :max=\"100\" :step=\"5\" size=\"small\" controls-position=\"right\" style=\"width: 120px; margin-right: 20px;\" /> %\r\n              <el-button type=\"danger\" :icon=\"Delete\" circle size=\"small\" @click=\"removeDimension(dimIndex)\" />\r\n          </div>\r\n          \r\n          <div class=\"indicators-list\">\r\n              <div v-for=\"(indicator, indIndex) in dimension.indicators\" :key=\"indicator.id\" class=\"indicator-item\">\r\n                  <el-input v-model=\"indicator.name\" placeholder=\"指标名称\" size=\"small\" style=\"width: 250px; margin-right: 10px;\"/>\r\n                   <el-tooltip content=\"指标描述或计算方式 (可选)\" placement=\"top\">\r\n                     <el-input v-model=\"indicator.description\" placeholder=\"指标描述\" size=\"small\" style=\"width: 300px; margin-right: 10px;\"/>\r\n                   </el-tooltip>\r\n                   <el-input-number v-model=\"indicator.weight\" :min=\"0\" :max=\"100\" :step=\"1\" size=\"small\" controls-position=\"right\" style=\"width: 100px; margin-right: 10px;\" /> %\r\n                   <el-button type=\"danger\" :icon=\"Delete\" plain circle size=\"small\" @click=\"removeIndicator(dimIndex, indIndex)\" />\r\n              </div>\r\n              <el-button type=\"primary\" link :icon=\"Plus\" @click=\"addIndicator(dimIndex)\">添加指标</el-button>\r\n          </div>\r\n      </div>\r\n\r\n       <el-button type=\"success\" :icon=\"Plus\" @click=\"addDimension\" style=\"margin-top: 20px;\">添加维度</el-button>\r\n\r\n       <el-alert type=\"warning\" show-icon :closable=\"false\" style=\"margin-top: 20px;\">\r\n         <p>请确保所有维度的权重之和为 100%。当前总权重: <strong>{{ totalDimensionWeight }}%</strong></p>\r\n         <p v-for=\"(dim, index) in config.dimensions\" :key=\"'dim_alert_'+index\">\r\n           维度 \"{{ dim.name || '未命名维度' }}\" 下指标权重之和: <strong>{{ calculateIndicatorWeightSum(dim) }}%</strong> (应为 100%)\r\n         </p>\r\n       </el-alert>\r\n\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, computed, onMounted } from 'vue';\r\nimport { ElMessage, ElMessageBox } from 'element-plus';\r\nimport { Plus, Delete } from '@element-plus/icons-vue';\r\n\r\n// --- 模拟配置数据 ---\r\nconst config = reactive({\r\n  periodType: 'quarterly', // 默认季度\r\n  dimensions: []\r\n});\r\n\r\nconst saving = ref(false);\r\n\r\n// 加载模拟的初始配置\r\nconst loadMockConfig = () => {\r\n    config.periodType = 'quarterly';\r\n    config.dimensions = [\r\n        {\r\n            id: `dim_${Date.now()}_1`,\r\n            name: '时效性',\r\n            weight: 40,\r\n            indicators: [\r\n                { id: `ind_${Date.now()}_1_1`, name: '准时提货率', description: '按约定时间完成提货的比例', weight: 50 },\r\n                { id: `ind_${Date.now()}_1_2`, name: '准时送达率', description: '按约定时间完成送达的比例', weight: 50 },\r\n            ]\r\n        },\r\n        {\r\n            id: `dim_${Date.now()}_2`,\r\n            name: '服务质量',\r\n            weight: 30,\r\n            indicators: [\r\n                { id: `ind_${Date.now()}_2_1`, name: '货损率', description: '运输过程中货物损坏的比例', weight: 40 },\r\n                { id: `ind_${Date.now()}_2_2`, name: '客户投诉率', description: '因服务问题导致客户投诉的比例', weight: 30 },\r\n                { id: `ind_${Date.now()}_2_3`, name: 'POD返回及时率', description: '签收单按时返回的比例', weight: 30 },\r\n            ]\r\n        },\r\n         {\r\n            id: `dim_${Date.now()}_3`,\r\n            name: '成本控制',\r\n            weight: 20,\r\n            indicators: [\r\n                { id: `ind_${Date.now()}_3_1`, name: '报价竞争力', description: '与其他供应商相比的价格优势', weight: 70 },\r\n                { id: `ind_${Date.now()}_3_2`, name: '附加费用合理性', description: '额外费用的发生频率和合理性', weight: 30 },\r\n            ]\r\n        },\r\n          {\r\n            id: `dim_${Date.now()}_4`,\r\n            name: '合规与配合度',\r\n            weight: 10,\r\n            indicators: [\r\n                { id: `ind_${Date.now()}_4_1`, name: '证照齐全有效', description: '车辆、司机证照是否符合要求', weight: 50 },\r\n                { id: `ind_${Date.now()}_4_2`, name: '系统操作规范性', description: '是否按要求使用供应商门户系统', weight: 50 },\r\n            ]\r\n        }\r\n    ];\r\n};\r\n\r\n// --- 计算属性 ---\r\n// 计算维度总权重\r\nconst totalDimensionWeight = computed(() => {\r\n  return config.dimensions.reduce((sum, dim) => sum + (dim.weight || 0), 0);\r\n});\r\n\r\n// 计算单个维度下指标权重之和\r\nconst calculateIndicatorWeightSum = (dimension) => {\r\n  return dimension.indicators.reduce((sum, ind) => sum + (ind.weight || 0), 0);\r\n};\r\n\r\n// --- 方法 ---\r\n// 添加维度\r\nconst addDimension = () => {\r\n  config.dimensions.push({\r\n    id: `dim_${Date.now()}`,\r\n    name: '新维度',\r\n    weight: 0,\r\n    indicators: []\r\n  });\r\n};\r\n\r\n// 移除维度\r\nconst removeDimension = (index) => {\r\n  ElMessageBox.confirm(`确定要删除维度 \"${config.dimensions[index].name || '未命名维度'}\" 吗?`, '确认删除', { type: 'warning' })\r\n    .then(() => {\r\n      config.dimensions.splice(index, 1);\r\n    })\r\n    .catch(() => {});\r\n};\r\n\r\n// 添加指标\r\nconst addIndicator = (dimIndex) => {\r\n  config.dimensions[dimIndex].indicators.push({\r\n    id: `ind_${Date.now()}`,\r\n    name: '新指标',\r\n    description: '',\r\n    weight: 0\r\n  });\r\n};\r\n\r\n// 移除指标\r\nconst removeIndicator = (dimIndex, indIndex) => {\r\n   const dimension = config.dimensions[dimIndex];\r\n   // const indicator = dimension.indicators[indIndex]; // 变量未使用，注释掉\r\n   // 简单确认，不提示名称\r\n    dimension.indicators.splice(indIndex, 1);\r\n};\r\n\r\n// 验证配置\r\nconst validateConfig = () => {\r\n    if (totalDimensionWeight.value !== 100) {\r\n        ElMessage.error('所有维度的权重之和必须为 100%');\r\n        return false;\r\n    }\r\n    for (const dim of config.dimensions) {\r\n        if (!dim.name) {\r\n             ElMessage.error('存在未命名的维度');\r\n             return false;\r\n        }\r\n        if (calculateIndicatorWeightSum(dim) !== 100) {\r\n             ElMessage.error(`维度 \"${dim.name}\" 下的指标权重之和必须为 100%`);\r\n            return false;\r\n        }\r\n        for (const ind of dim.indicators) {\r\n             if (!ind.name) {\r\n                 ElMessage.error(`维度 \"${dim.name}\" 下存在未命名的指标`);\r\n                 return false;\r\n             }\r\n        }\r\n    }\r\n    return true;\r\n};\r\n\r\n// 保存配置 (模拟)\r\nconst saveConfig = () => {\r\n  if (!validateConfig()) {\r\n      return;\r\n  }\r\n  saving.value = true;\r\n  console.log('保存评分配置:', JSON.parse(JSON.stringify(config)));\r\n  // 模拟 API 调用\r\n  setTimeout(() => {\r\n    saving.value = false;\r\n    ElMessage.success('评分配置已保存');\r\n  }, 1000);\r\n};\r\n\r\n// --- 生命周期 ---\r\nonMounted(() => {\r\n  loadMockConfig(); // 加载初始模拟数据\r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.rating-config-container {\r\n  padding: 20px;\r\n}\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.dimension-block {\r\n    border: 1px solid #ebeef5;\r\n    border-radius: 4px;\r\n    padding: 15px;\r\n    margin-bottom: 20px;\r\n    background-color: #fafafa;\r\n}\r\n.dimension-header {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 15px;\r\n    padding-bottom: 10px;\r\n    border-bottom: 1px solid #e4e7ed;\r\n}\r\n.dimension-header .el-input {\r\n    font-weight: bold;\r\n}\r\n.indicators-list {\r\n    padding-left: 20px;\r\n}\r\n.indicator-item {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n/* 调整 Alert 样式 */\r\n.el-alert {\r\n    line-height: 1.6;\r\n}\r\n.el-alert p {\r\n    margin: 5px 0;\r\n}\r\n</style> ","import script from \"./RatingIndicatorConfig.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./RatingIndicatorConfig.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./RatingIndicatorConfig.vue?vue&type=style&index=0&id=5d2ae824&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5d2ae824\"]])\n\nexport default __exports__"],"names":["config","reactive","periodType","dimensions","saving","ref","loadMockConfig","id","Date","now","name","weight","indicators","description","totalDimensionWeight","computed","reduce","sum","dim","calculateIndicatorWeightSum","dimension","ind","addDimension","push","removeDimension","index","ElMessageBox","confirm","type","then","splice","catch","addIndicator","dimIndex","removeIndicator","indIndex","validateConfig","value","ElMessage","error","saveConfig","console","log","JSON","parse","stringify","setTimeout","success","onMounted","__exports__"],"sourceRoot":""}