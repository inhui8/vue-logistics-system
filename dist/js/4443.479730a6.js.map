{"version":3,"file":"js/4443.479730a6.js","mappings":"iWAmSA,MAAMA,GAAgBC,EAAAA,EAAAA,IAAI,CACxB,CAAEC,GAAI,aAAcC,KAAM,mBAC1B,CAAED,GAAI,aAAcC,KAAM,oBAC1B,CAAED,GAAI,aAAcC,KAAM,oBAItBC,GAAcH,EAAAA,EAAAA,IAAI,CACtB,CAAEC,GAAI,WAAYC,KAAM,MAAOE,MAAO,cAAeC,WAAY,cACjE,CAAEJ,GAAI,WAAYC,KAAM,MAAOE,MAAO,cAAeC,WAAY,cACjE,CAAEJ,GAAI,WAAYC,KAAM,MAAOE,MAAO,cAAeC,WAAY,cACjE,CAAEJ,GAAI,WAAYC,KAAM,MAAOE,MAAO,cAAeC,WAAY,cACjE,CAAEJ,GAAI,WAAYC,KAAM,MAAOE,MAAO,cAAeC,WAAY,gBAG7DC,GAAcN,EAAAA,EAAAA,IAAI,IAElBO,EAAuBA,CAACC,EAAQ,MACpC,MAAMC,EAAS,CAAC,gBAAiB,wBAAyB,gBAAiB,eAAgB,qBACrFC,EAAS,CAAC,UAAW,UAAW,UAAW,UAAW,WACtDC,EAAO,CAAC,oBAAqB,oBAAqB,oBAAqB,oBAAqB,qBAC5FC,EAAS,CAAC,KAAM,KAAM,KAAM,KAAM,MAClCC,EAAe,CAAC,oBAAqB,2BAA4B,mBACjEC,EAAW,CAAC,YAAa,cAAe,UAAW,eACnDC,EAAY,CAAC,eAAgB,YAAa,UAC1CC,EAAW,GAEjB,IAAK,IAAIC,EAAI,EAAGA,EAAIT,EAAOS,IAAK,CAC9B,MAAMC,EAAWnB,EAAcoB,MAAMC,KAAKC,MAAMD,KAAKE,SAAWvB,EAAcoB,MAAMI,SAC9EC,EAAqBrB,EAAYgB,MAAMM,QAAOC,GAAKA,EAAErB,aAAea,EAASjB,KAC7E0B,EAAkBH,EAAmBD,OAAS,EAAI,CAACC,EAAmBJ,KAAKC,MAAMD,KAAKE,SAAWE,EAAmBD,UAAY,GAChIK,EAAO,GACTR,KAAKE,SAAW,IAAKM,EAAKC,KAAKd,EAAUK,KAAKC,MAAMD,KAAKE,SAAWP,EAAUQ,UAC9EH,KAAKE,SAAW,IAAOM,EAAKL,OAAS,GAAGK,EAAKC,KAAKd,EAAUK,KAAKC,MAAMD,KAAKE,SAAWP,EAAUQ,UAErGP,EAASa,KAAK,CACZ5B,GAAI,WAAWgB,EAAI,IACnBa,YAAa,GAAGpB,EAAOU,KAAKC,MAAMD,KAAKE,SAAWZ,EAAOa,WAAWQ,OAAOd,GAAGe,SAAS,EAAE,OACzF3B,WAAYa,EAASjB,GACrBgC,aAAcf,EAAShB,KACvBgC,aAAczB,EAAOW,KAAKC,MAAMD,KAAKE,SAAWb,EAAOc,SACvDY,IAAK,GAAGxB,EAAKS,KAAKC,MAAMD,KAAKE,SAAWX,EAAKY,WAAWN,IACxDmB,MAAOxB,EAAOQ,KAAKC,MAAMD,KAAKE,SAAWV,EAAOW,SAChDc,aAAc,IAAIC,KAAKA,KAAKC,MAAQnB,KAAKC,MAAsB,EAAhBD,KAAKE,SAAe,IAAM,GAAK,GAAK,GAAK,MAAOkB,cAAcC,MAAM,KAAK,GACxHC,OAAQ5B,EAASM,KAAKC,MAAMD,KAAKE,SAAWR,EAASS,SACrDoB,YAAa9B,EAAaO,KAAKC,MAAMD,KAAKE,SAAWT,EAAaU,SAClEqB,mBAAoB,IAAI,IAAIC,IAAIjB,IAChCkB,UAAWnB,EAAgBoB,KAAIrB,GAAKA,EAAEzB,KACtC+C,YAAarB,EAAgBoB,KAAIrB,GAAKA,EAAExB,OAAM+C,KAAK,MACnDC,YAAa9B,KAAKE,SAAW,GAAM,OAAOS,OAAOX,KAAKE,UAAU6B,MAAM,EAAG,MAAQ,MAErF,CACA,OAAOnC,CAAQ,EAIXoC,EAAqB,CACzB,CAAEjC,MAAO,oBAAqBkC,MAAO,SACrC,CAAElC,MAAO,2BAA4BkC,MAAO,UAC5C,CAAElC,MAAO,kBAAmBkC,MAAO,QAG/BC,EAA2B,CAC/B,CAAEnC,MAAO,eAAgBkC,MAAO,MAChC,CAAElC,MAAO,YAAakC,MAAO,SAC7B,CAAElC,MAAO,SAAUkC,MAAO,UAGtBE,EAAgB,CACpB,CAAEpC,MAAO,YAAakC,MAAO,MAC7B,CAAElC,MAAO,cAAekC,MAAO,OAC/B,CAAElC,MAAO,UAAWkC,MAAO,SAC3B,CAAElC,MAAO,cAAekC,MAAO,OAI3BG,GAAaC,EAAAA,EAAAA,IAAS,CAC1BpD,WAAY,GACZyB,YAAa,GACba,YAAa,GACbD,OAAQ,KAGJgB,GAAaD,EAAAA,EAAAA,IAAS,CAC1BE,YAAa,EACbC,SAAU,KAGNC,GAAgBC,EAAAA,EAAAA,KAAS,IACtBC,EAAqB5C,MAAMI,SAG9BwC,GAAuBD,EAAAA,EAAAA,KAAS,IAC7BxD,EAAYa,MAAMM,QAAOuC,IAC9B,MAAMC,GAAgBT,EAAWnD,YAAa2D,EAAQ3D,aAAemD,EAAWnD,WAC1E6D,GAAaV,EAAW1B,aAAckC,EAAQlC,aAAaqC,SAASX,EAAW1B,aAC/EsC,GAAmBZ,EAAWb,aAAcqB,EAAQrB,cAAgBa,EAAWb,YAC/E0B,GAAcb,EAAWd,QAASsB,EAAQtB,SAAWc,EAAWd,OACtE,OAAOuB,GAAiBC,GAAcE,GAAoBC,CAAW,MAInEC,GAAsBR,EAAAA,EAAAA,KAAS,KACnC,MAAMS,GAASb,EAAWC,YAAc,GAAKD,EAAWE,SAClDY,EAAMD,EAAQb,EAAWE,SAC/B,OAAOG,EAAqB5C,MAAMgC,MAAMoB,EAAOC,EAAI,IAI/CC,GAAgBzE,EAAAA,EAAAA,KAAI,GACpB0E,GAAc1E,EAAAA,EAAAA,IAAI,IAClB2E,GAAa3E,EAAAA,EAAAA,KAAI,GACjB4E,GAAiB5E,EAAAA,EAAAA,IAAI,MACrB6E,GAAY7E,EAAAA,EAAAA,IAAI,SAGhB8E,EAAmB,CACvB7E,GAAI,KACJ6B,YAAa,GACbzB,WAAY,GACZ6B,aAAc,GACdC,IAAK,GACLC,MAAO,GACPC,aAAc,GACdK,OAAQ,YACRC,YAAa,kBACbC,mBAAoB,GACpBE,UAAW,GACXI,YAAa,IAET6B,GAActB,EAAAA,EAAAA,IAAS,IAAKqB,IAG5BE,GAAYvB,EAAAA,EAAAA,IAAS,CACzBpD,WAAY,CAAC,CAAE4E,UAAU,EAAMC,QAAS,WAAYC,QAAS,WAC7DrD,YAAa,CAAC,CAAEmD,UAAU,EAAMC,QAAS,SAAUC,QAAS,SAC5DzC,OAAQ,CAAC,CAAEuC,UAAU,EAAMC,QAAS,QAASC,QAAS,WACtDxC,YAAa,CAAC,CAAEsC,UAAU,EAAMC,QAAS,YAAaC,QAAS,aAI3DC,GAAmBtB,EAAAA,EAAAA,KAAS,IAC3BiB,EAAY1E,WACVF,EAAYgB,MAAMM,QAAO4D,GAAUA,EAAOhF,aAAe0E,EAAY1E,aADxC,KAKhCiF,EAAqBnE,GAAUiC,EAAmBmC,MAAKC,GAAOA,EAAIrE,QAAUA,KAAQkC,OAASlC,EAC7FsE,EAAgBtE,GAAUoC,EAAcgC,MAAKC,GAAOA,EAAIrE,QAAUA,KAAQkC,OAASlC,EACnFuE,EAAaC,GAAQrC,EAAyBiC,MAAKC,GAAOA,EAAIrE,QAAUwE,KAAMtC,OAASsC,EACvFC,EAAoBlD,IACxB,OAAQA,GACN,IAAK,YAAa,MAAO,UACzB,IAAK,cAAe,MAAO,UAC3B,IAAK,UAAW,MAAO,SACvB,IAAK,cAAe,MAAO,OAC3B,QAAS,MAAO,OAClB,EAIImD,EAAeA,KACnBnC,EAAWC,YAAc,CAAC,EAItBmC,EAAoBC,IACxBrC,EAAWE,SAAWmC,EACtBrC,EAAWC,YAAc,CAAC,EAEtBqC,EAAuBC,IAC3BvC,EAAWC,YAAcsC,CAAO,EAI5BC,EAAYA,KAChBC,OAAOC,OAAOrB,EAAasB,KAAKC,MAAMD,KAAKE,UAAUzB,MACrD0B,EAAAA,EAAAA,KAAS,KACP5B,EAAezD,OAAOsF,eAAe,IAEvC5B,EAAU1D,MAAQ,OAAO,EAIrBuF,EAAmBA,KACvBR,IACAvB,EAAWxD,OAAQ,EACnBuD,EAAYvD,MAAQ,SACpBsD,EAActD,OAAQ,CAAI,EAItBwF,EAAqBC,IACzBV,IACAvB,EAAWxD,OAAQ,EACnBuD,EAAYvD,MAAQ,SACpBgF,OAAOC,OAAOrB,EAAasB,KAAKC,MAAMD,KAAKE,UAAUK,KACrD7B,EAAYnC,mBAAqBmC,EAAYnC,oBAAsB,GACnEmC,EAAYjC,UAAYiC,EAAYjC,WAAa,GACjD2B,EAActD,OAAQ,EACtB0D,EAAU1D,MAAQ,OAAO,EAIrB0F,GAASC,EAAAA,EAAAA,MAGTC,EAAiBH,IACrBI,QAAQC,IAAI,wBAAyBL,EAAI3G,GAAI,SAAU2G,EAAI9E,aAE3D+E,EAAOhF,KAAK,CAAE3B,KAAM,mBAAoBgH,MAAO,CAAEC,UAAWP,EAAI3G,MAEhEmH,EAAAA,GAAUC,KAAK,SAAST,EAAI9E,4BAA4B,EAIpDwF,EAAuBV,IAC1BW,EAAAA,EAAaC,QAAQ,WAAWZ,EAAI9E,iBAAkB,KAAM,CAAE2F,KAAM,YACjEC,MAAK,KACJV,QAAQC,IAAI,QAASL,EAAI3G,IACzB,MAAM0H,EAAQrH,EAAYa,MAAMyG,WAAUC,GAAKA,EAAE5H,KAAO2G,EAAI3G,MAC7C,IAAX0H,GACFrH,EAAYa,MAAM2G,OAAOH,EAAO,GAElCP,EAAAA,GAAUW,QAAQ,OAAO,IAG1BC,OAAM,IAAMZ,EAAAA,GAAUC,KAAK,SAAQ,EAInCY,EAAoBA,KACxB/B,IACAzB,EAActD,OAAQ,CAAK,EAIvB+G,EAAeC,UACnB,GAAKvD,EAAezD,MACpB,UACQyD,EAAezD,MAAMiH,WAE3B,MAAMC,EAAkBlI,EAAYgB,MAAMM,QAAOC,GAAKqD,EAAYjC,WAAWqB,SAASzC,EAAEzB,MAClF+C,EAAcqF,EAAgBtF,KAAIrB,GAAKA,EAAExB,OAAM+C,KAAK,MACpDhB,EAAelC,EAAcoB,MAAMoE,MAAK+C,GAAKA,EAAErI,KAAO8E,EAAY1E,cAAaH,MAAQ,GAEvFqI,EAAc,IACfxD,EACH/B,YAAaA,EACbf,aAAcA,GAGhB,GAAI0C,EAAWxD,MAAO,CACpB6F,QAAQC,IAAI,QAASsB,GACrB,MAAMZ,EAAQrH,EAAYa,MAAMyG,WAAUC,GAAKA,EAAE5H,KAAOsI,EAAYtI,MACrD,IAAX0H,GACFrH,EAAYa,MAAM2G,OAAOH,EAAO,EAAGY,GAErCnB,EAAAA,GAAUW,QAAQ,OACpB,KAAO,CACL,MAAMS,EAAa,IAAKD,EAAatI,GAAI,WAAWqC,KAAKC,SACzDyE,QAAQC,IAAI,QAASuB,GACrBlI,EAAYa,MAAMsH,QAAQD,GAC1BpB,EAAAA,GAAUW,QAAQ,OACpB,CACAtD,EAActD,OAAQ,CAExB,CAAE,MAAOuH,GAGP,GAFA1B,QAAQC,IAAI,UAAWyB,GAEnBA,GAA0B,kBAAVA,EAAoB,CACtC,MAAMC,EAAkBxC,OAAOyC,KAAKF,GAAO,GACvC,CAAC,aAAc,eAAevE,SAASwE,GACxC9D,EAAU1D,MAAQ,QACV,CAAC,eAAegD,SAASwE,KACjC9D,EAAU1D,MAAQ,UAGvB,CACAiG,EAAAA,GAAUsB,MAAM,cAClB,G,OAIFG,EAAAA,EAAAA,KAAU,KACRvI,EAAYa,MAAQZ,GAAsB,I,8mWC1jB5C,MAAMuI,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,G","sources":["webpack://vue-logistics-system/./src/views/Admin/VehicleManagement/VehicleList.vue","webpack://vue-logistics-system/./src/views/Admin/VehicleManagement/VehicleList.vue?80ee"],"sourcesContent":["<template>\r\n  <div class=\"vehicle-list-container\">\r\n    <el-card>\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>车辆档案列表</span>\r\n           <el-button type=\"primary\" @click=\"handleAddVehicle\">\r\n             <el-icon><Plus /></el-icon> 新增车辆\r\n           </el-button>\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 筛选区域 -->\r\n      <el-form :inline=\"true\" :model=\"filterForm\" class=\"filter-form\">\r\n         <el-form-item label=\"供应商\">\r\n            <el-select v-model=\"filterForm.supplierId\" placeholder=\"选择供应商\" clearable filterable>\r\n             <el-option\r\n                v-for=\"supplier in mockSuppliers\" \r\n                :key=\"supplier.id\"\r\n                :label=\"supplier.name\"\r\n                :value=\"supplier.id\"\r\n              />\r\n            </el-select>\r\n         </el-form-item>\r\n         <el-form-item label=\"车牌号\">\r\n           <el-input v-model=\"filterForm.plateNumber\" placeholder=\"输入车牌号\" clearable />\r\n         </el-form-item>\r\n        <el-form-item label=\"服务类型\">\r\n          <el-select v-model=\"filterForm.serviceType\" placeholder=\"选择服务类型\" clearable>\r\n             <el-option\r\n                v-for=\"item in serviceTypeOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              />\r\n          </el-select>\r\n        </el-form-item>\r\n         <el-form-item label=\"状态\">\r\n            <el-select v-model=\"filterForm.status\" placeholder=\"选择状态\" clearable>\r\n              <el-option\r\n                 v-for=\"item in statusOptions\"\r\n                 :key=\"item.value\"\r\n                 :label=\"item.label\"\r\n                 :value=\"item.value\"\r\n               />\r\n            </el-select>\r\n         </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleSearch\">查询</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <!-- 车辆列表 -->\r\n      <el-table :data=\"filteredVehicleList\" style=\"width: 100%\" border>\r\n        <el-table-column prop=\"plateNumber\" label=\"车牌号\" width=\"120\" fixed />\r\n        <el-table-column prop=\"supplierName\" label=\"所属供应商\" width=\"200\" show-overflow-tooltip />\r\n        <el-table-column prop=\"vehicleModel\" label=\"车辆型号\" width=\"150\" show-overflow-tooltip />\r\n         <el-table-column prop=\"serviceType\" label=\"主要服务类型\" width=\"140\">\r\n            <template #default=\"scope\">\r\n              {{ formatServiceType(scope.row.serviceType) }}\r\n            </template>\r\n         </el-table-column>\r\n         <el-table-column prop=\"classificationTags\" label=\"分类标签\" width=\"180\">\r\n            <template #default=\"scope\">\r\n               <el-tag v-for=\"tag in scope.row.classificationTags\" :key=\"tag\" size=\"small\" style=\"margin-right: 5px;\">\r\n                 {{ formatTag(tag) }}\r\n               </el-tag>\r\n            </template>\r\n         </el-table-column>\r\n          <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\r\n            <template #default=\"scope\">\r\n               <el-tag :type=\"getStatusTagType(scope.row.status)\">\r\n                 {{ formatStatus(scope.row.status) }}\r\n               </el-tag>\r\n            </template>\r\n         </el-table-column>\r\n        <el-table-column prop=\"driverNames\" label=\"当前关联司机\" width=\"150\" show-overflow-tooltip />\r\n        <el-table-column prop=\"gpsDeviceId\" label=\"GPS 设备 ID\" width=\"150\" show-overflow-tooltip />\r\n        <el-table-column label=\"操作\" fixed=\"right\" width=\"200\">\r\n          <template #default=\"scope\">\r\n             <el-button text type=\"primary\" size=\"small\" @click=\"handleEditVehicle(scope.row)\">编辑</el-button>\r\n             <el-button text type=\"info\" size=\"small\" @click=\"handleViewGps(scope.row)\">查看GPS</el-button>\r\n             <el-button text type=\"danger\" size=\"small\" @click=\"handleDeleteVehicle(scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页 -->\r\n       <el-pagination\r\n          style=\"margin-top: 20px; justify-content: flex-end;\"\r\n          background\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"totalVehicles\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :page-size=\"pagination.pageSize\"\r\n          :current-page=\"pagination.currentPage\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n\r\n      <!-- 新增/编辑车辆弹窗 -->\r\n       <el-dialog\r\n         v-model=\"dialogVisible\"\r\n         :title=\"dialogTitle\"\r\n         width=\"70%\"\r\n         @close=\"handleDialogClose\"\r\n         :close-on-click-modal=\"false\"\r\n       >\r\n         <el-form\r\n           ref=\"vehicleFormRef\"\r\n           :model=\"vehicleForm\"\r\n           :rules=\"formRules\"\r\n           label-width=\"120px\"\r\n         >\r\n           <el-tabs v-model=\"activeTab\">\r\n              <el-tab-pane label=\"基本信息\" name=\"basic\">\r\n                 <el-row :gutter=\"20\">\r\n                    <el-col :span=\"8\">\r\n                      <el-form-item label=\"所属供应商\" prop=\"supplierId\">\r\n                         <el-select v-model=\"vehicleForm.supplierId\" placeholder=\"选择供应商\" filterable style=\"width: 100%;\">\r\n                           <el-option\r\n                              v-for=\"supplier in mockSuppliers\" \r\n                              :key=\"supplier.id\"\r\n                              :label=\"supplier.name\"\r\n                              :value=\"supplier.id\"\r\n                              :disabled=\"isEditMode\" />\r\n                         </el-select>\r\n                      </el-form-item>\r\n                    </el-col>\r\n                   <el-col :span=\"8\">\r\n                     <el-form-item label=\"车牌号\" prop=\"plateNumber\">\r\n                       <el-input v-model=\"vehicleForm.plateNumber\" placeholder=\"请输入车牌号\" :disabled=\"isEditMode\"/>\r\n                     </el-form-item>\r\n                   </el-col>\r\n                    <el-col :span=\"8\">\r\n                     <el-form-item label=\"车辆型号\" prop=\"vehicleModel\">\r\n                       <el-input v-model=\"vehicleForm.vehicleModel\" placeholder=\"如：Volvo VNL 760\" />\r\n                     </el-form-item>\r\n                   </el-col>\r\n                 </el-row>\r\n                 <el-row :gutter=\"20\">\r\n                   <el-col :span=\"8\">\r\n                     <el-form-item label=\"车辆识别代码(VIN)\" prop=\"vin\">\r\n                       <el-input v-model=\"vehicleForm.vin\" placeholder=\"请输入 VIN\" />\r\n                     </el-form-item>\r\n                   </el-col>\r\n                   <el-col :span=\"8\">\r\n                     <el-form-item label=\"颜色\" prop=\"color\">\r\n                       <el-input v-model=\"vehicleForm.color\" placeholder=\"如：白色\" />\r\n                     </el-form-item>\r\n                   </el-col>\r\n                    <el-col :span=\"8\">\r\n                     <el-form-item label=\"购买日期\" prop=\"purchaseDate\">\r\n                        <el-date-picker\r\n                          v-model=\"vehicleForm.purchaseDate\"\r\n                          type=\"date\"\r\n                          placeholder=\"选择日期\"\r\n                          style=\"width: 100%;\"\r\n                          value-format=\"YYYY-MM-DD\"\r\n                         />\r\n                     </el-form-item>\r\n                   </el-col>\r\n                 </el-row>\r\n                 <el-row :gutter=\"20\">\r\n                    <el-col :span=\"8\">\r\n                      <el-form-item label=\"状态\" prop=\"status\">\r\n                         <el-select v-model=\"vehicleForm.status\" placeholder=\"选择车辆状态\" style=\"width: 100%;\">\r\n                            <el-option\r\n                              v-for=\"item in statusOptions\"\r\n                              :key=\"item.value\"\r\n                              :label=\"item.label\"\r\n                              :value=\"item.value\"\r\n                            />\r\n                         </el-select>\r\n                      </el-form-item>\r\n                    </el-col>\r\n                 </el-row>\r\n                 <el-divider>证照信息 (占位)</el-divider>\r\n                  <el-row :gutter=\"20\">\r\n                    <el-col :span=\"8\">\r\n                       <el-form-item label=\"行驶证注册日期\">\r\n                         <el-date-picker type=\"date\" disabled placeholder=\"待实现\" style=\"width: 100%;\"/>\r\n                       </el-form-item>\r\n                    </el-col>\r\n                     <el-col :span=\"8\">\r\n                       <el-form-item label=\"年检有效期\">\r\n                         <el-date-picker type=\"date\" disabled placeholder=\"待实现\" style=\"width: 100%;\"/>\r\n                       </el-form-item>\r\n                    </el-col>\r\n                     <el-col :span=\"8\">\r\n                       <el-form-item label=\"保险到期日\">\r\n                         <el-date-picker type=\"date\" disabled placeholder=\"待实现\" style=\"width: 100%;\"/>\r\n                       </el-form-item>\r\n                    </el-col>\r\n                  </el-row>\r\n                   <el-row>\r\n                      <el-col :span=\"24\">\r\n                        <el-form-item label=\"相关证照上传\">\r\n                          <el-button link type=\"primary\" disabled>点击上传 (待实现)</el-button>\r\n                        </el-form-item>\r\n                      </el-col>\r\n                   </el-row>\r\n\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"服务与分类\" name=\"service\">\r\n                  <el-row :gutter=\"20\">\r\n                    <el-col :span=\"12\">\r\n                      <el-form-item label=\"主要服务类型\" prop=\"serviceType\">\r\n                        <el-radio-group v-model=\"vehicleForm.serviceType\">\r\n                          <el-radio\r\n                             v-for=\"item in serviceTypeOptions\"\r\n                             :key=\"item.value\"\r\n                             :label=\"item.value\"\r\n                          >{{ item.label }}</el-radio>\r\n                        </el-radio-group>\r\n                      </el-form-item>\r\n                    </el-col>\r\n                  </el-row>\r\n                  <el-row>\r\n                     <el-col :span=\"24\">\r\n                       <el-form-item label=\"分类标签\" prop=\"classificationTags\">\r\n                         <el-checkbox-group v-model=\"vehicleForm.classificationTags\">\r\n                            <el-checkbox\r\n                              v-for=\"tag in classificationTagOptions\"\r\n                              :key=\"tag.value\"\r\n                              :label=\"tag.value\"\r\n                              border\r\n                              size=\"small\"\r\n                             >{{ tag.label }}</el-checkbox>\r\n                         </el-checkbox-group>\r\n                       </el-form-item>\r\n                     </el-col>\r\n                  </el-row>\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"司机与GPS\" name=\"driverGps\">\r\n                   <el-row :gutter=\"20\">\r\n                      <el-col :span=\"12\">\r\n                         <el-form-item label=\"关联驾驶员\" prop=\"driverIds\">\r\n                            <el-select\r\n                              v-model=\"vehicleForm.driverIds\"\r\n                              multiple\r\n                              filterable\r\n                              placeholder=\"选择驾驶员 (同供应商)\"\r\n                              style=\"width: 100%;\"\r\n                              :disabled=\"!vehicleForm.supplierId\">\r\n                             <el-option\r\n                                v-for=\"driver in availableDrivers\"\r\n                                :key=\"driver.id\"\r\n                                :label=\"driver.name + ' (' + driver.phone + ')'\"\r\n                                :value=\"driver.id\"\r\n                              />\r\n                            </el-select>\r\n                            <el-text type=\"info\" size=\"small\" v-if=\"!vehicleForm.supplierId\">请先在\"基本信息\"标签页选择供应商</el-text>\r\n                         </el-form-item>\r\n                      </el-col>\r\n                     <el-col :span=\"12\">\r\n                       <el-form-item label=\"GPS 设备 ID\" prop=\"gpsDeviceId\">\r\n                         <el-input v-model=\"vehicleForm.gpsDeviceId\" placeholder=\"输入绑定的 GPS 设备 ID\" />\r\n                       </el-form-item>\r\n                     </el-col>\r\n                   </el-row>\r\n                   <el-row>\r\n                      <el-col :span=\"24\">\r\n                         <el-form-item label=\"GPS 设备信息\">\r\n                           <el-text type=\"info\">型号: (待实现), SIM: (待实现)</el-text>\r\n                         </el-form-item>\r\n                      </el-col>\r\n                   </el-row>\r\n              </el-tab-pane>\r\n           </el-tabs>\r\n         </el-form>\r\n         <template #footer>\r\n           <span class=\"dialog-footer\">\r\n             <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n             <el-button type=\"primary\" @click=\"handleSubmit\">确认</el-button>\r\n           </span>\r\n         </template>\r\n       </el-dialog>\r\n\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, computed, nextTick, onMounted } from 'vue';\r\nimport { ElMessage, ElMessageBox } from 'element-plus';\r\nimport { Plus } from '@element-plus/icons-vue';\r\nimport { useRouter } from 'vue-router';\r\n\r\n// --- 模拟数据 ---\r\n// 假设的供应商列表 (应从 SupplierList 或 API 获取)\r\nconst mockSuppliers = ref([\r\n  { id: 'supplier_1', name: '测试供应商A - 专做提框服务' },\r\n  { id: 'supplier_2', name: '测试供应商B - FBA派送专家' },\r\n  { id: 'supplier_3', name: '测试供应商C - 全能型选手' },\r\n]);\r\n\r\n// 假设的驾驶员列表 (应从 DriverList 或 API 获取)\r\nconst mockDrivers = ref([\r\n  { id: 'driver_1', name: '张师傅', phone: '13111111111', supplierId: 'supplier_1' },\r\n  { id: 'driver_2', name: '李师傅', phone: '13222222222', supplierId: 'supplier_1' },\r\n  { id: 'driver_3', name: '王司机', phone: '13333333333', supplierId: 'supplier_2' },\r\n  { id: 'driver_4', name: '赵司机', phone: '13444444444', supplierId: 'supplier_3' },\r\n  { id: 'driver_5', name: '孙师傅', phone: '13555555555', supplierId: 'supplier_3' },\r\n]);\r\n\r\nconst allVehicles = ref([]);\r\n\r\nconst generateMockVehicles = (count = 25) => {\r\n  const models = ['Volvo VNL 760', 'Freightliner Cascadia', 'Kenworth T680', 'Ford Transit', 'Mercedes Sprinter'];\r\n  const plates = ['AZ12345', 'CA98765', 'NY55555', 'TX13579', 'FL24680'];\r\n  const vins = ['1V9X8Y7Z6A5B4C3D2', '2F8G7H6J5K4L3M2N1', '3K9L8M7N6P5Q4R3S2', '4T7U6V5W4X3Y2Z1A0', '5B1C2D3E4F5G6H7J8'];\r\n  const colors = ['白色', '红色', '蓝色', '黑色', '银色'];\r\n  const serviceTypes = ['port_to_warehouse', 'warehouse_to_destination', 'general_purpose'];\r\n  const statuses = ['available', 'maintenance', 'on_trip', 'deactivated'];\r\n  const tagValues = ['refrigerated', 'tail_lift', 'hazmat'];\r\n  const mockData = [];\r\n\r\n  for (let i = 0; i < count; i++) {\r\n    const supplier = mockSuppliers.value[Math.floor(Math.random() * mockSuppliers.value.length)];\r\n    const driversForSupplier = mockDrivers.value.filter(d => d.supplierId === supplier.id);\r\n    const assignedDrivers = driversForSupplier.length > 0 ? [driversForSupplier[Math.floor(Math.random() * driversForSupplier.length)]] : []; // 随机关联一个司机\r\n    const tags = [];\r\n    if (Math.random() > 0.7) tags.push(tagValues[Math.floor(Math.random() * tagValues.length)]);\r\n    if (Math.random() > 0.8 && tags.length < 2) tags.push(tagValues[Math.floor(Math.random() * tagValues.length)]);\r\n\r\n    mockData.push({\r\n      id: `vehicle_${i + 1}`,\r\n      plateNumber: `${plates[Math.floor(Math.random() * plates.length)]}${String(i).padStart(3,'0')}`,\r\n      supplierId: supplier.id,\r\n      supplierName: supplier.name,\r\n      vehicleModel: models[Math.floor(Math.random() * models.length)],\r\n      vin: `${vins[Math.floor(Math.random() * vins.length)]}${i}`,\r\n      color: colors[Math.floor(Math.random() * colors.length)],\r\n      purchaseDate: new Date(Date.now() - Math.floor(Math.random() * 5 * 365 * 24 * 60 * 60 * 1000)).toISOString().split('T')[0],\r\n      status: statuses[Math.floor(Math.random() * statuses.length)],\r\n      serviceType: serviceTypes[Math.floor(Math.random() * serviceTypes.length)],\r\n      classificationTags: [...new Set(tags)], // 去重\r\n      driverIds: assignedDrivers.map(d => d.id),\r\n      driverNames: assignedDrivers.map(d => d.name).join(', '),\r\n      gpsDeviceId: Math.random() > 0.3 ? `GPS-${String(Math.random()).slice(2, 12)}` : null,\r\n    });\r\n  }\r\n  return mockData;\r\n};\r\n\r\n// --- 选项数据 ---\r\nconst serviceTypeOptions = [\r\n  { value: 'port_to_warehouse', label: '码头到仓库' },\r\n  { value: 'warehouse_to_destination', label: '仓库到目的地' },\r\n  { value: 'general_purpose', label: '通用型' },\r\n];\r\n\r\nconst classificationTagOptions = [\r\n  { value: 'refrigerated', label: '冷藏' },\r\n  { value: 'tail_lift', label: '带升降尾板' },\r\n  { value: 'hazmat', label: '危险品资质' },\r\n];\r\n\r\nconst statusOptions = [\r\n  { value: 'available', label: '可用' },\r\n  { value: 'maintenance', label: '维修中' },\r\n  { value: 'on_trip', label: '执行任务中' },\r\n  { value: 'deactivated', label: '停用' },\r\n];\r\n\r\n// --- 筛选与分页 ---\r\nconst filterForm = reactive({\r\n  supplierId: '',\r\n  plateNumber: '',\r\n  serviceType: '',\r\n  status: '',\r\n});\r\n\r\nconst pagination = reactive({\r\n  currentPage: 1,\r\n  pageSize: 10,\r\n});\r\n\r\nconst totalVehicles = computed(() => {\r\n  return filteredVehiclesData.value.length;\r\n});\r\n\r\nconst filteredVehiclesData = computed(() => {\r\n  return allVehicles.value.filter(vehicle => {\r\n    const supplierMatch = filterForm.supplierId ? vehicle.supplierId === filterForm.supplierId : true;\r\n    const plateMatch = filterForm.plateNumber ? vehicle.plateNumber?.includes(filterForm.plateNumber) : true;\r\n    const serviceTypeMatch = filterForm.serviceType ? vehicle.serviceType === filterForm.serviceType : true;\r\n    const statusMatch = filterForm.status ? vehicle.status === filterForm.status : true;\r\n    return supplierMatch && plateMatch && serviceTypeMatch && statusMatch;\r\n  });\r\n});\r\n\r\nconst filteredVehicleList = computed(() => {\r\n  const start = (pagination.currentPage - 1) * pagination.pageSize;\r\n  const end = start + pagination.pageSize;\r\n  return filteredVehiclesData.value.slice(start, end);\r\n});\r\n\r\n// --- 弹窗与表单 ---\r\nconst dialogVisible = ref(false);\r\nconst dialogTitle = ref('');\r\nconst isEditMode = ref(false);\r\nconst vehicleFormRef = ref(null);\r\nconst activeTab = ref('basic');\r\n\r\n// 表单数据模型\r\nconst initialFormState = {\r\n  id: null,\r\n  plateNumber: '',\r\n  supplierId: '',\r\n  vehicleModel: '',\r\n  vin: '',\r\n  color: '',\r\n  purchaseDate: '',\r\n  status: 'available',\r\n  serviceType: 'general_purpose',\r\n  classificationTags: [],\r\n  driverIds: [],\r\n  gpsDeviceId: ''\r\n};\r\nconst vehicleForm = reactive({ ...initialFormState });\r\n\r\n// 表单验证规则\r\nconst formRules = reactive({\r\n  supplierId: [{ required: true, message: '请选择所属供应商', trigger: 'change' }],\r\n  plateNumber: [{ required: true, message: '请输入车牌号', trigger: 'blur' }],\r\n  status: [{ required: true, message: '请选择状态', trigger: 'change' }],\r\n  serviceType: [{ required: true, message: '请选择主要服务类型', trigger: 'change' }],\r\n});\r\n\r\n// 可选司机列表 (根据所选供应商过滤)\r\nconst availableDrivers = computed(() => {\r\n  if (!vehicleForm.supplierId) return [];\r\n  return mockDrivers.value.filter(driver => driver.supplierId === vehicleForm.supplierId);\r\n});\r\n\r\n// --- 方法 ---\r\nconst formatServiceType = (value) => serviceTypeOptions.find(opt => opt.value === value)?.label || value;\r\nconst formatStatus = (value) => statusOptions.find(opt => opt.value === value)?.label || value;\r\nconst formatTag = (tag) => classificationTagOptions.find(opt => opt.value === tag)?.label || tag;\r\nconst getStatusTagType = (status) => {\r\n  switch (status) {\r\n    case 'available': return 'success';\r\n    case 'maintenance': return 'warning';\r\n    case 'on_trip': return 'danger';\r\n    case 'deactivated': return 'info';\r\n    default: return 'info';\r\n  }\r\n};\r\n\r\n// 搜索\r\nconst handleSearch = () => {\r\n  pagination.currentPage = 1;\r\n};\r\n\r\n// 分页\r\nconst handleSizeChange = (newSize) => {\r\n  pagination.pageSize = newSize;\r\n  pagination.currentPage = 1;\r\n};\r\nconst handleCurrentChange = (newPage) => {\r\n  pagination.currentPage = newPage;\r\n};\r\n\r\n// 重置表单\r\nconst resetForm = () => {\r\n  Object.assign(vehicleForm, JSON.parse(JSON.stringify(initialFormState)));\r\n  nextTick(() => {\r\n    vehicleFormRef.value?.clearValidate();\r\n  });\r\n  activeTab.value = 'basic';\r\n};\r\n\r\n// 新增\r\nconst handleAddVehicle = () => {\r\n  resetForm();\r\n  isEditMode.value = false;\r\n  dialogTitle.value = '新增车辆档案';\r\n  dialogVisible.value = true;\r\n};\r\n\r\n// 编辑\r\nconst handleEditVehicle = (row) => {\r\n  resetForm();\r\n  isEditMode.value = true;\r\n  dialogTitle.value = '编辑车辆档案';\r\n  Object.assign(vehicleForm, JSON.parse(JSON.stringify(row)));\r\n  vehicleForm.classificationTags = vehicleForm.classificationTags || [];\r\n  vehicleForm.driverIds = vehicleForm.driverIds || [];\r\n  dialogVisible.value = true;\r\n  activeTab.value = 'basic';\r\n};\r\n\r\n// Get router instance\r\nconst router = useRouter();\r\n\r\n// 查看GPS (Updated)\r\nconst handleViewGps = (row) => {\r\n  console.log('查看GPS for vehicle ID:', row.id, 'Plate:', row.plateNumber);\r\n  // Use router to navigate to the GPS tracking page with vehicleId as query param\r\n  router.push({ name: 'AdminGpsTracking', query: { vehicleId: row.id } });\r\n  // Keep the message for now, can be removed later\r\n  ElMessage.info(`正在跳转到 ${row.plateNumber} 的GPS实时监控页面...`);\r\n};\r\n\r\n// 删除\r\nconst handleDeleteVehicle = (row) => {\r\n   ElMessageBox.confirm(`确定要删除车辆 ${row.plateNumber} 吗?`, '警告', { type: 'warning' })\r\n     .then(() => {\r\n       console.log('删除车辆:', row.id);\r\n       const index = allVehicles.value.findIndex(v => v.id === row.id);\r\n       if (index !== -1) {\r\n         allVehicles.value.splice(index, 1);\r\n       }\r\n       ElMessage.success('删除成功');\r\n       // handleSearch(); // 可选：删除后刷新当前页\r\n     })\r\n     .catch(() => ElMessage.info('取消删除'));\r\n};\r\n\r\n// 弹窗关闭\r\nconst handleDialogClose = () => {\r\n  resetForm();\r\n  dialogVisible.value = false;\r\n};\r\n\r\n// 提交\r\nconst handleSubmit = async () => {\r\n  if (!vehicleFormRef.value) return;\r\n  try {\r\n    await vehicleFormRef.value.validate();\r\n    // 获取关联司机姓名 (用于列表展示)\r\n    const selectedDrivers = mockDrivers.value.filter(d => vehicleForm.driverIds?.includes(d.id));\r\n    const driverNames = selectedDrivers.map(d => d.name).join(', ');\r\n    const supplierName = mockSuppliers.value.find(s => s.id === vehicleForm.supplierId)?.name || '';\r\n\r\n    const vehicleData = { \r\n      ...vehicleForm, \r\n      driverNames: driverNames, \r\n      supplierName: supplierName \r\n    };\r\n\r\n    if (isEditMode.value) {\r\n      console.log('更新车辆:', vehicleData);\r\n      const index = allVehicles.value.findIndex(v => v.id === vehicleData.id);\r\n      if (index !== -1) {\r\n        allVehicles.value.splice(index, 1, vehicleData);\r\n      }\r\n      ElMessage.success('更新成功');\r\n    } else {\r\n      const newVehicle = { ...vehicleData, id: `vehicle_${Date.now()}` };\r\n      console.log('新增车辆:', newVehicle);\r\n      allVehicles.value.unshift(newVehicle);\r\n      ElMessage.success('新增成功');\r\n    }\r\n    dialogVisible.value = false;\r\n    // handleSearch(); // 可选：提交后刷新\r\n  } catch (error) {\r\n    console.log('表单验证失败:', error);\r\n    // 检查是哪个 tab 的校验失败，并切换过去 (可选)\r\n    if (error && typeof error === 'object') {\r\n      const firstErrorField = Object.keys(error)[0];\r\n      if (['supplierId', 'plateNumber'].includes(firstErrorField)) {\r\n         activeTab.value = 'basic';\r\n      } else if (['serviceType'].includes(firstErrorField)) {\r\n         activeTab.value = 'service';\r\n      }\r\n      // 可以添加更多判断\r\n    }\r\n    ElMessage.error('请检查表单填写是否正确');\r\n  }\r\n};\r\n\r\n// --- 生命周期 ---\r\nonMounted(() => {\r\n  allVehicles.value = generateMockVehicles();\r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.vehicle-list-container {\r\n  padding: 20px;\r\n}\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.filter-form .el-form-item {\r\n  margin-bottom: 10px; /* 减少筛选表单项间距 */\r\n}\r\n.el-table {\r\n  margin-top: 15px;\r\n}\r\n.dialog-footer button:first-child {\r\n  margin-right: 10px;\r\n}\r\n.el-button .el-icon {\r\n  margin-right: 5px;\r\n}\r\n.el-tabs {\r\n  margin-top: -10px; /* 减少 tab 和上面元素的间距 */\r\n}\r\n</style> ","import script from \"./VehicleList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./VehicleList.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./VehicleList.vue?vue&type=style&index=0&id=567f3ad6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-567f3ad6\"]])\n\nexport default __exports__"],"names":["mockSuppliers","ref","id","name","mockDrivers","phone","supplierId","allVehicles","generateMockVehicles","count","models","plates","vins","colors","serviceTypes","statuses","tagValues","mockData","i","supplier","value","Math","floor","random","length","driversForSupplier","filter","d","assignedDrivers","tags","push","plateNumber","String","padStart","supplierName","vehicleModel","vin","color","purchaseDate","Date","now","toISOString","split","status","serviceType","classificationTags","Set","driverIds","map","driverNames","join","gpsDeviceId","slice","serviceTypeOptions","label","classificationTagOptions","statusOptions","filterForm","reactive","pagination","currentPage","pageSize","totalVehicles","computed","filteredVehiclesData","vehicle","supplierMatch","plateMatch","includes","serviceTypeMatch","statusMatch","filteredVehicleList","start","end","dialogVisible","dialogTitle","isEditMode","vehicleFormRef","activeTab","initialFormState","vehicleForm","formRules","required","message","trigger","availableDrivers","driver","formatServiceType","find","opt","formatStatus","formatTag","tag","getStatusTagType","handleSearch","handleSizeChange","newSize","handleCurrentChange","newPage","resetForm","Object","assign","JSON","parse","stringify","nextTick","clearValidate","handleAddVehicle","handleEditVehicle","row","router","useRouter","handleViewGps","console","log","query","vehicleId","ElMessage","info","handleDeleteVehicle","ElMessageBox","confirm","type","then","index","findIndex","v","splice","success","catch","handleDialogClose","handleSubmit","async","validate","selectedDrivers","s","vehicleData","newVehicle","unshift","error","firstErrorField","keys","onMounted","__exports__"],"sourceRoot":""}