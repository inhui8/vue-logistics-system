"use strict";(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[998],{1018:(e,l,a)=>{a.d(l,{A:()=>C});var t=a(641),i=a(33);const r={class:"history-container"},o={class:"filter-section"},n={class:"history-list"},s={class:"history-item"},d={class:"history-header"},u={class:"operation-type"},c={class:"field-name"},p={class:"history-content"},v={key:0,class:"old-value"},m={class:"value"},k={key:1,class:"new-value"},f={class:"value"},y={class:"history-footer"},b={class:"operator"},g={key:0,class:"remark"};function h(e,l,a,h,T,L){const F=(0,t.g2)("el-option"),x=(0,t.g2)("el-select"),C=(0,t.g2)("el-form-item"),_=(0,t.g2)("el-date-picker"),V=(0,t.g2)("el-button"),P=(0,t.g2)("el-form"),w=(0,t.g2)("el-timeline-item"),E=(0,t.g2)("el-timeline"),X=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(X,{title:"历史记录",modelValue:h.dialogVisible,"onUpdate:modelValue":l[3]||(l[3]=e=>h.dialogVisible=e),width:"800px","close-on-click-modal":!1},{default:(0,t.k6)((()=>[(0,t.Lk)("div",r,[(0,t.Lk)("div",o,[(0,t.bF)(P,{inline:!0,model:h.filterForm},{default:(0,t.k6)((()=>[(0,t.bF)(C,{label:"操作类型"},{default:(0,t.k6)((()=>[(0,t.bF)(x,{modelValue:h.filterForm.operationType,"onUpdate:modelValue":l[0]||(l[0]=e=>h.filterForm.operationType=e),placeholder:"请选择",clearable:""},{default:(0,t.k6)((()=>[(0,t.bF)(F,{label:"新增",value:"add"}),(0,t.bF)(F,{label:"修改",value:"edit"}),(0,t.bF)(F,{label:"删除",value:"delete"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(C,{label:"字段"},{default:(0,t.k6)((()=>[(0,t.bF)(x,{modelValue:h.filterForm.field,"onUpdate:modelValue":l[1]||(l[1]=e=>h.filterForm.field=e),placeholder:"请选择",clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(h.fieldOptions,(e=>((0,t.uX)(),(0,t.Wv)(F,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(C,{label:"时间范围"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{modelValue:h.filterForm.dateRange,"onUpdate:modelValue":l[2]||(l[2]=e=>h.filterForm.dateRange=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},null,8,["modelValue"])])),_:1}),(0,t.bF)(C,null,{default:(0,t.k6)((()=>[(0,t.bF)(V,{type:"primary",onClick:h.handleFilter},{default:(0,t.k6)((()=>l[4]||(l[4]=[(0,t.eW)("查询")]))),_:1},8,["onClick"]),(0,t.bF)(V,{onClick:h.resetFilter},{default:(0,t.k6)((()=>l[5]||(l[5]=[(0,t.eW)("重置")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),(0,t.Lk)("div",n,[(0,t.bF)(E,null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(h.filteredHistory,((e,a)=>((0,t.uX)(),(0,t.Wv)(w,{key:a,timestamp:e.time,type:h.getTimelineType(e.operationType)},{default:(0,t.k6)((()=>[(0,t.Lk)("div",s,[(0,t.Lk)("div",d,[(0,t.Lk)("span",u,(0,i.v_)(h.getOperationTypeText(e.operationType)),1),(0,t.Lk)("span",c,(0,i.v_)(h.getFieldLabel(e.field)),1)]),(0,t.Lk)("div",p,[e.oldValue?((0,t.uX)(),(0,t.CE)("div",v,[l[6]||(l[6]=(0,t.Lk)("span",{class:"label"},"原值：",-1)),(0,t.Lk)("span",m,(0,i.v_)(e.oldValue),1)])):(0,t.Q3)("",!0),e.newValue?((0,t.uX)(),(0,t.CE)("div",k,[l[7]||(l[7]=(0,t.Lk)("span",{class:"label"},"新值：",-1)),(0,t.Lk)("span",f,(0,i.v_)(e.newValue),1)])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",y,[(0,t.Lk)("span",b,"操作人："+(0,i.v_)(e.operator),1),e.remark?((0,t.uX)(),(0,t.CE)("span",g,"备注："+(0,i.v_)(e.remark),1)):(0,t.Q3)("",!0)])])])),_:2},1032,["timestamp","type"])))),128))])),_:1})])])])),_:1},8,["modelValue"])}var T=a(953);const L={name:"HistoryRecordDialog",props:{visible:{type:Boolean,default:!1},trainData:{type:Object,default:()=>({})}},emits:["update:visible"],setup(e,{emit:l}){const a=(0,t.EW)({get:()=>e.visible,set:e=>l("update:visible",e)}),i=(0,T.KR)({operationType:"",field:"",dateRange:[]}),r=[{label:"车次号",value:"trainNumber"},{label:"装车类型",value:"loadingType"},{label:"发货类型",value:"deliveryType"},{label:"车牌号",value:"carNumber"},{label:"装车人",value:"loader"},{label:"码头号",value:"dockNumber"},{label:"仓库备注",value:"warehouseRemarks"},{label:"驾驶证号",value:"driverLicense"},{label:"车牌号",value:"licensePlate"},{label:"司机电话",value:"driverPhone"},{label:"供应商",value:"supplier"},{label:"实际托盘数",value:"actualPallets"},{label:"托盘合并",value:"palletsMerged"},{label:"配送费用",value:"deliveryCost"},{label:"标签",value:"tags"},{label:"备注",value:"memo"}],o=(0,T.KR)([{time:"2024-03-20 10:00:00",operationType:"edit",field:"loadingType",oldValue:"整车",newValue:"零担",operator:"张三",remark:"客户要求变更装车方式"},{time:"2024-03-20 09:30:00",operationType:"add",field:"tags",newValue:"异常",operator:"李四",remark:"车辆故障，需要延迟装车"},{time:"2024-03-20 09:00:00",operationType:"edit",field:"driverPhone",oldValue:"13800138000",newValue:"13800138001",operator:"王五",remark:"司机联系方式更新"}]),n=(0,t.EW)((()=>{let e=[...o.value];if(i.value.operationType&&(e=e.filter((e=>e.operationType===i.value.operationType))),i.value.field&&(e=e.filter((e=>e.field===i.value.field))),i.value.dateRange&&2===i.value.dateRange.length){const[l,a]=i.value.dateRange;e=e.filter((e=>{const t=e.time.split(" ")[0];return t>=l&&t<=a}))}return e})),s=e=>{const l={add:"success",edit:"warning",delete:"danger"};return l[e]||"info"},d=e=>{const l={add:"新增",edit:"修改",delete:"删除"};return l[e]||e},u=e=>{const l=r.find((l=>l.value===e));return l?l.label:e},c=()=>{},p=()=>{i.value={operationType:"",field:"",dateRange:[]}};return{dialogVisible:a,filterForm:i,fieldOptions:r,filteredHistory:n,getTimelineType:s,getOperationTypeText:d,getFieldLabel:u,handleFilter:c,resetFilter:p}}};var F=a(6262);const x=(0,F.A)(L,[["render",h],["__scopeId","data-v-b5efb454"]]),C=x},6629:(e,l,a)=>{a.d(l,{A:()=>w});var t=a(641),i=a(33);const r={class:"gps-container"},o={class:"map-container"},n={class:"route-map",viewBox:"0 0 800 400",preserveAspectRatio:"xMidYMid meet"},s=["d"],d=["cx","cy","fill"],u=["x","y"],c={key:0},p=["cx","cy"],v=["cx","cy"],m={class:"track-info"},k={class:"info-header"},f={class:"timeline"},y={class:"time-display"},b={class:"track-points"},g=["onClick"],h={class:"point-time"},T={class:"point-info"},L={class:"point-name"},F={class:"point-address"};function x(e,l,a,x,C,_){const V=(0,t.g2)("el-button"),P=(0,t.g2)("el-slider"),w=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(w,{title:"GPS轨迹",modelValue:x.dialogVisible,"onUpdate:modelValue":l[1]||(l[1]=e=>x.dialogVisible=e),width:"1000px","close-on-click-modal":!1},{default:(0,t.k6)((()=>[(0,t.Lk)("div",r,[(0,t.Lk)("div",o,[((0,t.uX)(),(0,t.CE)("svg",n,[l[2]||(l[2]=(0,t.Lk)("rect",{width:"100%",height:"100%",fill:"#f5f7fa"},null,-1)),(0,t.Lk)("path",{d:x.routePath,fill:"none",stroke:"#409EFF","stroke-width":"4","stroke-dasharray":"5,5"},null,8,s),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(x.trackPoints,((e,l)=>((0,t.uX)(),(0,t.CE)("g",{key:l},[(0,t.Lk)("circle",{cx:e.x,cy:e.y,r:"8",fill:x.getStatusColor(e.status),stroke:"white","stroke-width":"2"},null,8,d),(0,t.Lk)("text",{x:e.x,y:e.y-15,"text-anchor":"middle",fill:"#303133","font-size":"12"},(0,i.v_)(e.name),9,u)])))),128)),x.currentPoint?((0,t.uX)(),(0,t.CE)("g",c,[(0,t.Lk)("circle",{cx:x.currentPoint.x,cy:x.currentPoint.y,r:"6",fill:"#409EFF",stroke:"white","stroke-width":"2"},null,8,p),(0,t.Lk)("circle",{cx:x.currentPoint.x,cy:x.currentPoint.y,r:"3",fill:"white"},null,8,v)])):(0,t.Q3)("",!0)]))]),(0,t.Lk)("div",m,[(0,t.Lk)("div",k,[l[4]||(l[4]=(0,t.Lk)("h3",null,"轨迹信息",-1)),(0,t.bF)(V,{type:"primary",size:"small",onClick:x.startTrackPlay},{default:(0,t.k6)((()=>l[3]||(l[3]=[(0,t.eW)("开始播放")]))),_:1},8,["onClick"])]),(0,t.Lk)("div",f,[(0,t.bF)(P,{modelValue:x.currentTimeIndex,"onUpdate:modelValue":l[0]||(l[0]=e=>x.currentTimeIndex=e),min:0,max:x.trackPoints.length-1,"format-tooltip":x.formatTimeTooltip,onChange:x.handleTimeChange},null,8,["modelValue","max","format-tooltip","onChange"]),(0,t.Lk)("div",y,(0,i.v_)(x.currentTime),1)]),(0,t.Lk)("div",b,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(x.trackPoints,((e,l)=>((0,t.uX)(),(0,t.CE)("div",{key:l,class:(0,i.C4)(["track-point-item",{active:x.currentTimeIndex===l}]),onClick:e=>x.handlePointClick(l)},[(0,t.Lk)("div",h,(0,i.v_)(e.time),1),(0,t.Lk)("div",T,[(0,t.Lk)("div",L,(0,i.v_)(e.name),1),(0,t.Lk)("div",F,(0,i.v_)(e.address),1)]),(0,t.Lk)("div",{class:(0,i.C4)(["point-status",e.status])},(0,i.v_)(x.getStatusText(e.status)),3)],10,g)))),128))])])])])),_:1},8,["modelValue"])}var C=a(953);const _={name:"GpsTrackDialog",props:{visible:{type:Boolean,default:!1},trainData:{type:Object,default:()=>({})}},emits:["update:visible"],setup(e,{emit:l}){const a=(0,t.EW)({get:()=>e.visible,set:e=>l("update:visible",e)}),i=(0,C.KR)([{time:"2024-03-20 08:00:00",name:"洛杉矶仓库",address:"1234 Warehouse Ave, Los Angeles, CA 90001",status:"completed",x:100,y:300},{time:"2024-03-20 09:30:00",name:"凤凰城中转站",address:"5678 Distribution Center Blvd, Phoenix, AZ 85001",status:"completed",x:300,y:250},{time:"2024-03-20 11:00:00",name:"达拉斯配送点",address:"9012 Delivery Center Rd, Dallas, TX 75201",status:"current",x:500,y:200},{time:"2024-03-20 13:00:00",name:"休斯顿仓库",address:"3456 Logistics Way, Houston, TX 77001",status:"pending",x:700,y:150}]),r=(0,C.KR)(0),o=(0,C.KR)(!1);let n=null;const s=(0,t.EW)((()=>i.value[r.value]?.time||"")),d=(0,t.EW)((()=>i.value[r.value])),u=(0,t.EW)((()=>{const e=i.value;if(e.length<2)return"";let l=`M ${e[0].x} ${e[0].y}`;for(let a=1;a<e.length;a++)l+=` L ${e[a].x} ${e[a].y}`;return l})),c=e=>{const l={completed:"#67c23a",current:"#409eff",pending:"#909399"};return l[e]||l.pending},p=()=>{o.value?v():(o.value=!0,n=setInterval((()=>{r.value<i.value.length-1?r.value++:v()}),2e3))},v=()=>{o.value=!1,n&&(clearInterval(n),n=null)},m=e=>{r.value=e},k=e=>{r.value=e},f=e=>i.value[e]?.time||"",y=e=>{const l={completed:"已完成",current:"当前位置",pending:"待到达"};return l[e]||e};return(0,t.wB)(a,(e=>{e||v()})),{dialogVisible:a,trackPoints:i,currentTimeIndex:r,currentTime:s,currentPoint:d,routePath:u,startTrackPlay:p,handleTimeChange:m,handlePointClick:k,formatTimeTooltip:f,getStatusText:y,getStatusColor:c}}};var V=a(6262);const P=(0,V.A)(_,[["render",x],["__scopeId","data-v-5e446ba0"]]),w=P}}]);
//# sourceMappingURL=998.57062ebc.js.map