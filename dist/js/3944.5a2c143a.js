"use strict";(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[3944],{3944:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var l=a(641),o=a(953),n=a(33),r=a(7918),u=a(163),i=a(8548);const s={class:"contract-list-container"},d={class:"card-header"},c={key:0},p={style:{"margin-left":"5px"}},m={class:"dialog-footer"},g={__name:"ContractList",setup(e){const t=(0,o.KR)([{id:"supplier_1",name:"测试供应商A - 专做提框服务"},{id:"supplier_2",name:"测试供应商B - FBA派送专家"},{id:"supplier_3",name:"测试供应商C - 全能型选手"}]),a=(0,o.KR)([]),g=[{value:"framework",label:"年度框架协议"},{value:"transport",label:"单次运输合同"},{value:"warehouse",label:"仓储服务合同"},{value:"spot_quote",label:"临时报价协议"},{value:"other",label:"其他"}],b=[{value:"draft",label:"草稿",tag:"info"},{value:"pending_review",label:"待审核",tag:"warning"},{value:"active",label:"生效中",tag:"success"},{value:"expired",label:"已到期",tag:"default"},{value:"terminated",label:"已终止",tag:"danger"},{value:"rejected",label:"已驳回",tag:"danger"}],f=(e=40)=>{const a=["年度运输框架协议","旺季仓储服务合同","专线运输协议","临时加车协议"],l=["张三","李四","王五"],o=[],n=new Date;for(let r=0;r<e;r++){const e=t.value[Math.floor(Math.random()*t.value.length)],u=g[Math.floor(Math.random()*g.length)].value,i=b[Math.floor(Math.random()*b.length)].value,s=new Date(n.getTime()-Math.floor(180*Math.random()*24*60*60*1e3));let d,c;"framework"===u?(d=new Date(s.getFullYear(),s.getMonth()+1,1),c=new Date(d.getFullYear()+1,d.getMonth(),d.getDate()-1)):(d=new Date(s.getTime()+Math.floor(7*Math.random()*24*60*60*1e3)),c=new Date(d.getTime()+24*(60*Math.random()+30)*60*60*1e3));let p=[];if(Math.random()>.3){const e=Math.floor(3*Math.random())+1;for(let t=0;t<e;t++)p.push({name:`合同附件_${r}_${t+1}.pdf`,url:`/path/to/mock/file_${r}_${t}.pdf`,size:1024*Math.floor(2048*Math.random()+512)})}let m=[{timestamp:s.toLocaleString(),operator:l[Math.floor(Math.random()*l.length)],action:"创建合同",status:"draft",type:"info"}];"draft"!==i&&m.push({timestamp:new Date(s.getTime()+36e5).toLocaleString(),operator:"系统",action:"提交审核",status:"pending_review",type:"primary"}),"active"!==i&&"expired"!==i&&"terminated"!==i||m.push({timestamp:new Date(s.getTime()+864e5).toLocaleString(),operator:"审批经理",action:"审核通过",status:"active",type:"success"}),"rejected"===i&&m.push({timestamp:new Date(s.getTime()+864e5).toLocaleString(),operator:"审批经理",action:"审核驳回",status:"rejected",comment:"条款不清",type:"danger"}),"terminated"===i&&m.push({timestamp:new Date(c.getTime()-864e6).toLocaleString(),operator:"法务部",action:"手动终止",status:"terminated",comment:"协商一致",type:"danger"});let f=i;"terminated"!==i&&new Date(c)<n&&(f="expired"),o.push({id:`CON-${String(s.getFullYear())}${String(r+1e3).slice(1)}`,contractNumber:`CON-${String(s.getFullYear())}${String(r+1e3).slice(1)}`,contractName:`${e.name} ${a[Math.floor(Math.random()*a.length)]} ${s.getFullYear()}`,supplierId:e.id,supplierName:e.name,contractType:u,amount:"framework"===u?null:parseFloat((5e4*Math.random()+5e3).toFixed(2)),effectiveDate:d.toISOString().split("T")[0],expiryDate:c.toISOString().split("T")[0],status:f,content:`这是合同 ${r+1} 的主要内容摘要...`,creator:l[Math.floor(Math.random()*l.length)],createdAt:s.toLocaleString(),attachments:p,statusHistory:m.sort(((e,t)=>new Date(e.timestamp)-new Date(t.timestamp))),uploadFiles:[]})}return o},v=(0,o.Kh)({keyword:"",supplierId:"",contractType:"",status:"",validityRange:[]}),k=(0,o.Kh)({currentPage:1,pageSize:10}),h=(0,l.EW)((()=>y.value.length)),y=(0,l.EW)((()=>a.value.filter((e=>{const t=!v.keyword||(e.contractNumber.includes(v.keyword)||e.contractName.includes(v.keyword)),a=!v.supplierId||e.supplierId===v.supplierId,l=!v.contractType||e.contractType===v.contractType,o=!v.status||e.status===v.status,n=!v.validityRange||2!==v.validityRange.length||e.effectiveDate<=v.validityRange[1]&&e.expiryDate>=v.validityRange[0];return t&&a&&l&&o&&n})))),F=(0,l.EW)((()=>{const e=(k.currentPage-1)*k.pageSize,t=e+k.pageSize;return y.value.slice(e,t).sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)))})),w=(0,o.KR)(!1),_=(0,o.KR)(""),D=(0,o.KR)(!1),C=(0,o.KR)(null),V=(0,o.KR)(!1),W={id:null,contractNumber:"",contractName:"",supplierId:"",contractType:"",amount:null,effectiveDate:"",expiryDate:"",content:"",status:"draft",attachments:[],statusHistory:[],uploadFiles:[]},x=(0,o.Kh)({...W}),M=(0,o.Kh)({contractName:[{required:!0,message:"请输入合同名称",trigger:"blur"}],supplierId:[{required:!0,message:"请选择供应商",trigger:"change"}],contractType:[{required:!0,message:"请选择合同类型",trigger:"change"}],effectiveDate:[{required:!0,message:"请选择生效日期",trigger:"change"}],expiryDate:[{required:!0,message:"请选择到期日期",trigger:"change"}]}),S=e=>g.find((t=>t.value===e))?.label||e,N=e=>b.find((t=>t.value===e))?.label||e,T=e=>b.find((t=>t.value===e))?.tag||"info",$=()=>{k.currentPage=1},I=e=>{k.pageSize=e,k.currentPage=1},z=e=>{k.currentPage=e},R=()=>{Object.assign(x,W),x.uploadFiles=[],(0,l.dY)((()=>{C.value?.clearValidate()}))},X=e=>"draft"===e.status||"rejected"===e.status,K=e=>"active"===e.status,Y=e=>{if("terminated"===e.status)return!1;const t=new Date(e.expiryDate),a=new Date,l=new Date(a.setDate(a.getDate()+30));return t<=l},L=()=>{R(),D.value=!0,_.value="新增合同",w.value=!0},U=e=>{R(),D.value=!0,_.value="编辑合同",Object.assign(x,JSON.parse(JSON.stringify(e))),x.uploadFiles=x.attachments.map((e=>({name:e.name,status:"success",uid:Date.now()+Math.random(),raw:{type:"application/pdf"}}))),w.value=!0},H=e=>{R(),D.value=!1,_.value="合同详情",Object.assign(x,JSON.parse(JSON.stringify(e))),w.value=!0},O=e=>{r.s.confirm(`确定要将合同 "${e.contractName}" 提交审核吗?`,"确认提交",{type:"warning"}).then((()=>{console.log("提交审核:",e.id);const t=a.value.findIndex((t=>t.id===e.id));-1!==t&&"draft"===a.value[t].status?(a.value[t].status="pending_review",a.value[t].statusHistory||(a.value[t].statusHistory=[]),a.value[t].statusHistory.push({timestamp:(new Date).toLocaleString(),operator:"当前用户",action:"提交审核",status:"pending_review",type:"primary"}),u.nk.success("提交审核成功")):u.nk.error("操作失败或状态不允许提交")})).catch((()=>{}))},E=e=>{H(e),u.nk.info("显示审核操作区域 (待实现)")},j=e=>{console.log("为合同上传附件:",e.id),u.nk.info(`触发 ${e.contractNumber} 的附件上传操作 (待实现)`)},Q=e=>{e.attachments&&0!==e.attachments.length?(console.log("下载合同附件:",e.id,e.attachments),u.nk.success(`开始下载 ${e.attachments.length} 个附件 (模拟)`)):u.nk.warning("该合同没有附件可供下载")},A=e=>{console.log("下载单个附件:",e),u.nk.success(`开始下载文件 ${e.name} (模拟)`)},q=e=>{x.attachments&&(x.attachments.splice(e,1),u.nk.success("附件已移除 (未保存)"))},B=e=>{console.log("查看合同历史:",e.id),H(e),u.nk.info("已在详情中展示状态历史 (附件变更历史待实现)")},P=e=>{r.s.prompt("请输入终止原因 (可选)","确认终止合同",{confirmButtonText:"确认终止",cancelButtonText:"取消",type:"warning"}).then((({value:t})=>{console.log("终止合同:",e.id,"原因:",t);const l=a.value.findIndex((t=>t.id===e.id));-1!==l&&"active"===a.value[l].status?(a.value[l].status="terminated",a.value[l].statusHistory||(a.value[l].statusHistory=[]),a.value[l].statusHistory.push({timestamp:(new Date).toLocaleString(),operator:"当前用户",action:"终止合同",status:"terminated",comment:t,type:"danger"}),u.nk.success("合同已终止")):u.nk.error("操作失败或合同状态不符")})).catch((()=>{}))},J=e=>{console.log("发起合同续签:",e.id),u.nk.info(`基于合同 ${e.contractNumber} 发起续签流程 (待实现)`)},Z=(e,t)=>{console.log("File changed:",e,t),x.uploadFiles=t},G=(e,t)=>{console.log("File removed:",e,t),x.uploadFiles=t},ee=async()=>{if(C.value)try{await C.value.validate(),V.value=!0;const e=x.uploadFiles.filter((e=>"ready"===e.status||"success"===e.status)).map((e=>({name:e.name,url:`/mock/path/${e.uid}/${e.name}`,size:e.size})));let t=[];t=x.id?x.uploadFiles.map((e=>({name:e.name,url:e.url||`/mock/path/${e.uid}/${e.name}`,size:e.size||1e3*Math.random()*1024}))):e;const l={...x,attachments:t};if(delete l.uploadFiles,l.id){console.log("更新合同:",l);const e=a.value.findIndex((e=>e.id===l.id));-1!==e?(Object.assign(a.value[e],l),a.value[e].statusHistory||(a.value[e].statusHistory=[]),a.value[e].statusHistory.push({timestamp:(new Date).toLocaleString(),operator:"当前用户",action:"编辑合同内容",type:"info"}),u.nk.success("合同更新成功")):u.nk.error("更新失败: 未找到合同")}else{const e=`CON-${String((new Date).getFullYear())}${String(Date.now()).slice(-4)}`,t={...l,id:e,contractNumber:l.contractNumber||e,status:"draft",creator:"当前用户",createdAt:(new Date).toLocaleString(),statusHistory:[{timestamp:(new Date).toLocaleString(),operator:"当前用户",action:"创建合同",status:"draft",type:"info"}]};console.log("新增合同:",t),a.value.unshift(t),u.nk.success("合同新增成功")}w.value=!1}catch(e){console.log("表单验证失败:",e),u.nk.error("请检查表单填写是否正确")}finally{V.value=!1}};return(0,l.sV)((()=>{a.value=f()})),(e,a)=>{const r=(0,l.g2)("el-icon"),u=(0,l.g2)("el-button"),f=(0,l.g2)("el-input"),y=(0,l.g2)("el-form-item"),W=(0,l.g2)("el-option"),te=(0,l.g2)("el-select"),ae=(0,l.g2)("el-date-picker"),le=(0,l.g2)("el-form"),oe=(0,l.g2)("el-table-column"),ne=(0,l.g2)("el-tag"),re=(0,l.g2)("el-dropdown-item"),ue=(0,l.g2)("el-dropdown-menu"),ie=(0,l.g2)("el-dropdown"),se=(0,l.g2)("el-table"),de=(0,l.g2)("el-pagination"),ce=(0,l.g2)("el-col"),pe=(0,l.g2)("el-row"),me=(0,l.g2)("el-input-number"),ge=(0,l.g2)("el-empty"),be=(0,l.g2)("el-timeline-item"),fe=(0,l.g2)("el-timeline"),ve=(0,l.g2)("el-upload"),ke=(0,l.g2)("el-dialog"),he=(0,l.g2)("el-card");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.bF)(he,null,{header:(0,l.k6)((()=>[(0,l.Lk)("div",d,[a[17]||(a[17]=(0,l.Lk)("span",null,"合同列表",-1)),(0,l.bF)(u,{type:"primary",onClick:L},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,o.R1)(i.FWt))])),_:1}),a[16]||(a[16]=(0,l.eW)(" 新增合同 "))])),_:1})])])),default:(0,l.k6)((()=>[(0,l.bF)(le,{inline:!0,model:v,class:"filter-form"},{default:(0,l.k6)((()=>[(0,l.bF)(y,{label:"合同编号/名称"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:v.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>v.keyword=e),placeholder:"输入编号或名称关键字",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(y,{label:"供应商"},{default:(0,l.k6)((()=>[(0,l.bF)(te,{modelValue:v.supplierId,"onUpdate:modelValue":a[1]||(a[1]=e=>v.supplierId=e),placeholder:"选择供应商",clearable:"",filterable:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.value,(e=>((0,l.uX)(),(0,l.Wv)(W,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(y,{label:"合同类型"},{default:(0,l.k6)((()=>[(0,l.bF)(te,{modelValue:v.contractType,"onUpdate:modelValue":a[2]||(a[2]=e=>v.contractType=e),placeholder:"选择类型",clearable:""},{default:(0,l.k6)((()=>[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(g,(e=>(0,l.bF)(W,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(y,{label:"合同状态"},{default:(0,l.k6)((()=>[(0,l.bF)(te,{modelValue:v.status,"onUpdate:modelValue":a[3]||(a[3]=e=>v.status=e),placeholder:"选择状态",clearable:""},{default:(0,l.k6)((()=>[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(b,(e=>(0,l.bF)(W,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(y,{label:"有效期"},{default:(0,l.k6)((()=>[(0,l.bF)(ae,{modelValue:v.validityRange,"onUpdate:modelValue":a[4]||(a[4]=e=>v.validityRange=e),type:"daterange","range-separator":"至","start-placeholder":"生效开始","end-placeholder":"到期结束","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),(0,l.bF)(y,null,{default:(0,l.k6)((()=>[(0,l.bF)(u,{type:"primary",onClick:$},{default:(0,l.k6)((()=>a[18]||(a[18]=[(0,l.eW)("查询")]))),_:1})])),_:1})])),_:1},8,["model"]),(0,l.bF)(se,{data:F.value,style:{width:"100%"},border:""},{default:(0,l.k6)((()=>[(0,l.bF)(oe,{prop:"contractNumber",label:"合同编号",width:"160",fixed:"left",sortable:""}),(0,l.bF)(oe,{prop:"contractName",label:"合同名称","min-width":"220","show-overflow-tooltip":""}),(0,l.bF)(oe,{prop:"supplierName",label:"供应商",width:"200","show-overflow-tooltip":""}),(0,l.bF)(oe,{prop:"contractType",label:"合同类型",width:"130"},{default:(0,l.k6)((e=>[(0,l.eW)((0,n.v_)(S(e.row.contractType)),1)])),_:1}),(0,l.bF)(oe,{prop:"amount",label:"合同金额 (USD)",width:"150",align:"right"},{default:(0,l.k6)((e=>[(0,l.eW)((0,n.v_)(e.row.amount?e.row.amount.toFixed(2):"-"),1)])),_:1}),(0,l.bF)(oe,{prop:"effectiveDate",label:"生效日期",width:"120",sortable:""}),(0,l.bF)(oe,{prop:"expiryDate",label:"到期日期",width:"120",sortable:""}),(0,l.bF)(oe,{prop:"status",label:"状态",width:"120",align:"center"},{default:(0,l.k6)((e=>[(0,l.bF)(ne,{type:T(e.row.status)},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(N(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),(0,l.bF)(oe,{prop:"creator",label:"创建人",width:"100"}),(0,l.bF)(oe,{prop:"createdAt",label:"创建时间",width:"160"}),(0,l.bF)(oe,{label:"附件数",width:"80",align:"center"},{default:(0,l.k6)((e=>[(0,l.eW)((0,n.v_)(e.row.attachments?.length||0),1)])),_:1}),(0,l.bF)(oe,{label:"操作",fixed:"right",width:"280"},{default:(0,l.k6)((e=>[(0,l.bF)(u,{text:"",type:"primary",size:"small",onClick:t=>H(e.row)},{default:(0,l.k6)((()=>a[19]||(a[19]=[(0,l.eW)("详情")]))),_:2},1032,["onClick"]),X(e.row)?((0,l.uX)(),(0,l.Wv)(u,{key:0,text:"",type:"warning",size:"small",onClick:t=>U(e.row)},{default:(0,l.k6)((()=>a[20]||(a[20]=[(0,l.eW)("编辑")]))),_:2},1032,["onClick"])):(0,l.Q3)("",!0),"draft"===e.row.status?((0,l.uX)(),(0,l.Wv)(u,{key:1,text:"",type:"success",size:"small",onClick:t=>O(e.row)},{default:(0,l.k6)((()=>a[21]||(a[21]=[(0,l.eW)("提交审核")]))),_:2},1032,["onClick"])):(0,l.Q3)("",!0),(0,l.bF)(ie,{size:"small",style:{"margin-left":"8px"}},{dropdown:(0,l.k6)((()=>[(0,l.bF)(ue,null,{default:(0,l.k6)((()=>[(0,l.bF)(re,{onClick:t=>j(e.row),icon:(0,o.R1)(i._OO)},{default:(0,l.k6)((()=>a[23]||(a[23]=[(0,l.eW)("上传附件")]))),_:2},1032,["onClick","icon"]),(0,l.bF)(re,{onClick:t=>Q(e.row),icon:(0,o.R1)(i.f5X),disabled:!e.row.attachments||0===e.row.attachments.length},{default:(0,l.k6)((()=>a[24]||(a[24]=[(0,l.eW)("下载附件")]))),_:2},1032,["onClick","icon","disabled"]),(0,l.bF)(re,{onClick:t=>B(e.row),icon:(0,o.R1)(i.e7F)},{default:(0,l.k6)((()=>a[25]||(a[25]=[(0,l.eW)("查看历史")]))),_:2},1032,["onClick","icon"]),K(e.row)?((0,l.uX)(),(0,l.Wv)(re,{key:0,onClick:t=>P(e.row),divided:"",icon:(0,o.R1)(i.BZj)},{default:(0,l.k6)((()=>a[26]||(a[26]=[(0,l.eW)("终止合同")]))),_:2},1032,["onClick","icon"])):(0,l.Q3)("",!0),Y(e.row)?((0,l.uX)(),(0,l.Wv)(re,{key:1,onClick:t=>J(e.row),icon:(0,o.R1)(i.kyK)},{default:(0,l.k6)((()=>a[27]||(a[27]=[(0,l.eW)("发起续签")]))),_:2},1032,["onClick","icon"])):(0,l.Q3)("",!0),"pending_review"===e.row.status?((0,l.uX)(),(0,l.Wv)(re,{key:2,onClick:t=>E(e.row),divided:"",icon:(0,o.R1)(i.rW7)},{default:(0,l.k6)((()=>a[28]||(a[28]=[(0,l.eW)("审核合同")]))),_:2},1032,["onClick","icon"])):(0,l.Q3)("",!0)])),_:2},1024)])),default:(0,l.k6)((()=>[(0,l.bF)(u,{text:"",type:"info",size:"small"},{default:(0,l.k6)((()=>[a[22]||(a[22]=(0,l.eW)("更多")),(0,l.bF)(r,{class:"el-icon--right"},{default:(0,l.k6)((()=>[(0,l.bF)((0,o.R1)(i.yd$))])),_:1})])),_:1})])),_:2},1024)])),_:1})])),_:1},8,["data"]),(0,l.bF)(de,{style:{"margin-top":"20px","justify-content":"flex-end"},background:"",layout:"total, sizes, prev, pager, next, jumper",total:h.value,"page-sizes":[10,20,50,100],"page-size":k.pageSize,"current-page":k.currentPage,onSizeChange:I,onCurrentChange:z},null,8,["total","page-size","current-page"]),(0,l.bF)(ke,{modelValue:w.value,"onUpdate:modelValue":a[15]||(a[15]=e=>w.value=e),title:_.value,width:"70%",top:"5vh","close-on-click-modal":!1,onClose:R},{footer:(0,l.k6)((()=>[(0,l.Lk)("span",m,[(0,l.bF)(u,{onClick:a[14]||(a[14]=e=>w.value=!1)},{default:(0,l.k6)((()=>a[33]||(a[33]=[(0,l.eW)("取消")]))),_:1}),D.value?((0,l.uX)(),(0,l.Wv)(u,{key:0,type:"primary",onClick:ee,loading:V.value},{default:(0,l.k6)((()=>a[34]||(a[34]=[(0,l.eW)("确认")]))),_:1},8,["loading"])):(0,l.Q3)("",!0)])])),default:(0,l.k6)((()=>[(0,l.bF)(le,{ref_key:"contractFormRef",ref:C,model:x,rules:M,"label-width":"100px"},{default:(0,l.k6)((()=>[(0,l.bF)(pe,{gutter:20},{default:(0,l.k6)((()=>[(0,l.bF)(ce,{span:12},{default:(0,l.k6)((()=>[(0,l.bF)(y,{label:"合同名称",prop:"contractName"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:x.contractName,"onUpdate:modelValue":a[5]||(a[5]=e=>x.contractName=e),placeholder:"输入合同名称",disabled:!D.value},null,8,["modelValue","disabled"])])),_:1})])),_:1}),(0,l.bF)(ce,{span:12},{default:(0,l.k6)((()=>[(0,l.bF)(y,{label:"合同编号",prop:"contractNumber"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:x.contractNumber,"onUpdate:modelValue":a[6]||(a[6]=e=>x.contractNumber=e),placeholder:"系统自动生成或手动输入",disabled:!D.value},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(pe,{gutter:20},{default:(0,l.k6)((()=>[(0,l.bF)(ce,{span:12},{default:(0,l.k6)((()=>[(0,l.bF)(y,{label:"供应商",prop:"supplierId"},{default:(0,l.k6)((()=>[(0,l.bF)(te,{modelValue:x.supplierId,"onUpdate:modelValue":a[7]||(a[7]=e=>x.supplierId=e),placeholder:"选择供应商",filterable:"",style:{width:"100%"},disabled:!D.value},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.value,(e=>((0,l.uX)(),(0,l.Wv)(W,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1}),(0,l.bF)(ce,{span:12},{default:(0,l.k6)((()=>[(0,l.bF)(y,{label:"合同类型",prop:"contractType"},{default:(0,l.k6)((()=>[(0,l.bF)(te,{modelValue:x.contractType,"onUpdate:modelValue":a[8]||(a[8]=e=>x.contractType=e),placeholder:"选择类型",style:{width:"100%"},disabled:!D.value},{default:(0,l.k6)((()=>[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(g,(e=>(0,l.bF)(W,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(pe,{gutter:20},{default:(0,l.k6)((()=>[(0,l.bF)(ce,{span:12},{default:(0,l.k6)((()=>[(0,l.bF)(y,{label:"生效日期",prop:"effectiveDate"},{default:(0,l.k6)((()=>[(0,l.bF)(ae,{modelValue:x.effectiveDate,"onUpdate:modelValue":a[9]||(a[9]=e=>x.effectiveDate=e),type:"date",placeholder:"选择日期",style:{width:"100%"},"value-format":"YYYY-MM-DD",disabled:!D.value},null,8,["modelValue","disabled"])])),_:1})])),_:1}),(0,l.bF)(ce,{span:12},{default:(0,l.k6)((()=>[(0,l.bF)(y,{label:"到期日期",prop:"expiryDate"},{default:(0,l.k6)((()=>[(0,l.bF)(ae,{modelValue:x.expiryDate,"onUpdate:modelValue":a[10]||(a[10]=e=>x.expiryDate=e),type:"date",placeholder:"选择日期",style:{width:"100%"},"value-format":"YYYY-MM-DD",disabled:!D.value},null,8,["modelValue","disabled"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(y,{label:"合同金额 (USD)"},{default:(0,l.k6)((()=>[(0,l.bF)(me,{modelValue:x.amount,"onUpdate:modelValue":a[11]||(a[11]=e=>x.amount=e),precision:2,step:1e3,placeholder:"可选",style:{width:"250px"},disabled:!D.value},null,8,["modelValue","disabled"])])),_:1}),(0,l.bF)(y,{label:"合同内容/条款"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:x.content,"onUpdate:modelValue":a[12]||(a[12]=e=>x.content=e),type:"textarea",rows:5,placeholder:"输入合同主要内容或条款摘要",disabled:!D.value},null,8,["modelValue","disabled"])])),_:1}),D.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(y,{key:0,label:"附件列表"},{default:(0,l.k6)((()=>[x.attachments&&x.attachments.length>0?((0,l.uX)(),(0,l.CE)("div",c,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(x.attachments,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"attachment-item"},[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,o.R1)(i.yoT))])),_:1}),(0,l.Lk)("span",p,(0,n.v_)(e.name)+" ("+(0,n.v_)((e.size/1024).toFixed(1))+" KB)",1),(0,l.bF)(u,{text:"",type:"primary",size:"small",onClick:t=>A(e),style:{"margin-left":"15px"}},{default:(0,l.k6)((()=>a[29]||(a[29]=[(0,l.eW)("下载")]))),_:2},1032,["onClick"]),(0,l.bF)(u,{text:"",type:"danger",size:"small",onClick:e=>q(t)},{default:(0,l.k6)((()=>a[30]||(a[30]=[(0,l.eW)("删除")]))),_:2},1032,["onClick"])])))),128))])):((0,l.uX)(),(0,l.Wv)(ge,{key:1,description:"暂无附件","image-size":50}))])),_:1})),!D.value&&x.statusHistory&&x.statusHistory.length>0?((0,l.uX)(),(0,l.Wv)(y,{key:1,label:"状态历史"},{default:(0,l.k6)((()=>[(0,l.bF)(fe,{style:{"margin-top":"10px"}},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(x.statusHistory,((e,t)=>((0,l.uX)(),(0,l.Wv)(be,{key:t,timestamp:e.timestamp,type:e.type||"primary"},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.operator)+" "+(0,n.v_)(e.action)+" "+(0,n.v_)(e.status?`(状态变为: ${N(e.status)})`:"")+" "+(0,n.v_)(e.comment?`- ${e.comment}`:""),1)])),_:2},1032,["timestamp","type"])))),128))])),_:1})])),_:1})):(0,l.Q3)("",!0),D.value?((0,l.uX)(),(0,l.Wv)(y,{key:2,label:"上传附件"},{default:(0,l.k6)((()=>[(0,l.bF)(ve,{"file-list":x.uploadFiles,"onUpdate:fileList":a[13]||(a[13]=e=>x.uploadFiles=e),action:"#","auto-upload":!1,multiple:"","on-change":Z,"on-remove":G},{tip:(0,l.k6)((()=>a[32]||(a[32]=[(0,l.Lk)("div",{class:"el-upload__tip"}," 可以将合同扫描件等文件上传 ",-1)]))),default:(0,l.k6)((()=>[(0,l.bF)(u,{type:"primary"},{default:(0,l.k6)((()=>a[31]||(a[31]=[(0,l.eW)("选择文件")]))),_:1})])),_:1},8,["file-list"])])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])),_:1})])}}};var b=a(6262);const f=(0,b.A)(g,[["__scopeId","data-v-3be2f37d"]]),v=f}}]);
//# sourceMappingURL=3944.5a2c143a.js.map