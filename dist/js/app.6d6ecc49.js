(()=>{"use strict";var e={218:(e,a,l)=>{l.d(a,{A:()=>D});var t=l(641),n=l(3751),i=l(33);const o={key:0,class:"modal"},r={class:"modal-content"},s={key:0},d={key:1},u={class:"form-group"},p={class:"form-group"},m={class:"form-group"},c=["min"],b={class:"form-group"},v=["value"],g={key:2,class:"form-group remaining-slots-info"},h={key:0},k={class:"slot-count"},f={class:"slot-count"},y={key:1,class:"closed-info"},C={class:"form-group"},w={class:"form-group"},T={class:"form-group"},F={class:"form-actions"};function L(e,a,l,L,S,V){return l.visible?((0,t.uX)(),(0,t.CE)("div",o,[(0,t.Lk)("div",r,[l.editMode?((0,t.uX)(),(0,t.CE)("h2",s,"编辑预约信息")):((0,t.uX)(),(0,t.CE)("h2",d,"创建预约信息")),(0,t.Lk)("div",u,[a[10]||(a[10]=(0,t.Lk)("label",{for:"trainNumber"},[(0,t.eW)("车次号:"),(0,t.Lk)("span",{class:"required"},"*")],-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",id:"trainNumber","onUpdate:modelValue":a[0]||(a[0]=e=>S.localAppointment.trainNumber=e),placeholder:"输入车次号",required:""},null,512),[[n.Jo,S.localAppointment.trainNumber]])]),(0,t.Lk)("div",p,[a[11]||(a[11]=(0,t.Lk)("label",{for:"supplierName"},[(0,t.eW)("供应商名称："),(0,t.Lk)("span",{class:"required"},"*")],-1)),(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>S.localAppointment.supplierName=e),placeholder:"输入供应商名称",required:""},null,512),[[n.Jo,S.localAppointment.supplierName]])]),(0,t.Lk)("div",m,[a[12]||(a[12]=(0,t.Lk)("label",{for:"appointmentDate"},[(0,t.eW)("预约日期："),(0,t.Lk)("span",{class:"required"},"*")],-1)),(0,t.bo)((0,t.Lk)("input",{type:"date","onUpdate:modelValue":a[2]||(a[2]=e=>S.localAppointment.appointmentDate=e),required:"",min:l.minDate},null,8,c),[[n.Jo,S.localAppointment.appointmentDate]])]),(0,t.Lk)("div",b,[a[14]||(a[14]=(0,t.Lk)("label",{for:"appointmentTime"},[(0,t.eW)("预约时间段："),(0,t.Lk)("span",{class:"required"},"*")],-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>S.localAppointment.appointmentTime=e),required:""},[a[13]||(a[13]=(0,t.Lk)("option",{disabled:"",value:""},"请选择时间",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(l.availableTimeSlots,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e,value:e},(0,i.v_)(e),9,v)))),128))],512),[[n.u1,S.localAppointment.appointmentTime]])]),S.localAppointment.appointmentDate&&S.localAppointment.appointmentTime?((0,t.uX)(),(0,t.CE)("div",g,[V.remainingSlots.isOpen?((0,t.uX)(),(0,t.CE)("span",h,[a[15]||(a[15]=(0,t.eW)(" 当前时间段剩余可预约: ")),(0,t.Lk)("span",k,"卡板 "+(0,i.v_)(V.remainingSlots.pallet),1),a[16]||(a[16]=(0,t.eW)(" / ")),(0,t.Lk)("span",f,"地板 "+(0,i.v_)(V.remainingSlots.floor),1)])):((0,t.uX)(),(0,t.CE)("span",y," 该日期或时间段当前不开放预约 "))])):(0,t.Q3)("",!0),(0,t.Lk)("div",C,[a[17]||(a[17]=(0,t.Lk)("label",{for:"driverPhone"},[(0,t.eW)("司机电话"),(0,t.Lk)("span",{class:"required"},"*")],-1)),(0,t.bo)((0,t.Lk)("input",{type:"tel","onUpdate:modelValue":a[4]||(a[4]=e=>S.localAppointment.driverPhone=e),placeholder:"输入司机电话",required:""},null,512),[[n.Jo,S.localAppointment.driverPhone]])]),(0,t.Lk)("div",w,[a[19]||(a[19]=(0,t.Lk)("label",{for:"cargoType"},[(0,t.eW)("货物类型："),(0,t.Lk)("span",{class:"required"},"*")],-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>S.localAppointment.cargoType=e),required:""},a[18]||(a[18]=[(0,t.Lk)("option",{disabled:"",value:""},"请选择货物类型",-1),(0,t.Lk)("option",{value:"地板"},"地板",-1),(0,t.Lk)("option",{value:"卡板"},"卡板",-1)]),512),[[n.u1,S.localAppointment.cargoType]])]),(0,t.Lk)("div",T,[a[21]||(a[21]=(0,t.Lk)("label",{for:"loadType"},[(0,t.eW)("装柜类型："),(0,t.Lk)("span",{class:"required"},"*")],-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>S.localAppointment.loadType=e),required:""},a[20]||(a[20]=[(0,t.Lk)("option",{disabled:"",value:""},"请选择装柜类型",-1),(0,t.Lk)("option",{value:"liveload"},"Liveload",-1),(0,t.Lk)("option",{value:"drop"},"Drop",-1)]),512),[[n.u1,S.localAppointment.loadType]])]),(0,t.Lk)("div",F,[(0,t.Lk)("button",{class:"btn-save",onClick:a[7]||(a[7]=(...e)=>V.saveOrUpdate&&V.saveOrUpdate(...e))},"保存"),l.editMode?((0,t.uX)(),(0,t.CE)("button",{key:0,class:"btn-delete",onClick:a[8]||(a[8]=(...e)=>V.deleteAppointment&&V.deleteAppointment(...e))},"删除")):(0,t.Q3)("",!0),(0,t.Lk)("button",{class:"btn-cancel",onClick:a[9]||(a[9]=(...e)=>V.close&&V.close(...e))},"取消")])])])):(0,t.Q3)("",!0)}const S={name:"AppointmentModal",props:{visible:{type:Boolean,required:!0},currentAppointment:{type:Object,required:!0},editMode:{type:Boolean,required:!0},minDate:{type:String,required:!0},availableTimeSlots:{type:Array,required:!0},appointments:{type:Array,required:!0},appointmentSettings:{type:Object,required:!0}},emits:["save","update","delete","close"],data(){return{localAppointment:{}}},computed:{remainingSlots(){const e=this.localAppointment.appointmentDate,a=this.localAppointment.appointmentTime;if(!e||!a)return{pallet:"-",floor:"-"};const l=a.substring(0,2)+":00",t=this.appointmentSettings[e]||{isOpen:!1,timeSlots:{}},n=t.isOpen,i=t.timeSlots[l]||{pallet:0,floor:0},o=n&&i.pallet||0,r=n&&i.floor||0;let s=0,d=0;this.appointments.forEach((l=>{l.appointmentDate!==e||l.appointmentTime!==a||this.editMode&&l.id===this.localAppointment.id||("卡板"===l.cargoType?s++:"地板"===l.cargoType&&d++)}));const u=Math.max(0,o-s),p=Math.max(0,r-d);return n?{pallet:u,floor:p,isOpen:!0}:{pallet:0,floor:0,isOpen:!1}}},watch:{currentAppointment:{handler(e){this.localAppointment=JSON.parse(JSON.stringify(e||{}))},immediate:!0,deep:!0}},methods:{validateForm(){const e=this.localAppointment;return e.trainNumber&&e.supplierName&&e.appointmentDate&&e.appointmentTime&&e.driverPhone&&e.cargoType&&e.loadType},saveOrUpdate(){this.validateForm()?this.remainingSlots.isOpen?"卡板"===this.localAppointment.cargoType&&this.remainingSlots.pallet<=0?alert("当前时间段卡板预约已满！"):"地板"===this.localAppointment.cargoType&&this.remainingSlots.floor<=0?alert("当前时间段地板预约已满！"):this.editMode?this.$emit("update",{...this.localAppointment}):this.$emit("save",{...this.localAppointment}):alert("该日期或时间段当前不开放预约"):alert("所有字段都是必填的！")},deleteAppointment(){this.$emit("delete",this.localAppointment.id)},close(){this.$emit("close")}}};var V=l(6262);const _=(0,V.A)(S,[["render",L],["__scopeId","data-v-0305f464"]]),D=_},1178:e=>{e.exports=JSON.parse('[{"prop":"trainNumber","label":"车次号","width":140,"sortable":true,"filterType":"text"},{"prop":"issueDate","label":"出单日期","width":120,"sortable":true,"filterType":"date"},{"prop":"issuer","label":"出单人","width":100,"sortable":true,"filterType":"text"},{"prop":"loadingType","label":"装车类型","width":120,"sortable":true,"filterType":"select","filterOptions":[{"label":"卡板","value":"卡板"},{"label":"地板","value":"地板"},{"label":"混装","value":"混装"},{"label":"快递","value":"快递"}]},{"prop":"deliveryType","label":"派送类型","width":120,"sortable":true,"filterType":"select","filterOptions":[{"label":"整车","value":"整车"},{"label":"散板","value":"散板"},{"label":"一提多卸","value":"一提多卸"},{"label":"多提一卸","value":"多提一卸"},{"label":"多提多卸","value":"多提多卸"},{"label":"快递","value":"快递"}]},{"prop":"deliveryArea","label":"派送区域","width":120,"sortable":true,"filterType":"select","filterOptions":[{"label":"Local","value":"Local"},{"label":"中长途","value":"中长途"},{"label":"长途","value":"长途"}]},{"prop":"PrepareStartTime","label":"备货开始时间","width":"160","sortable":true,"editable":true,"type":"datetime"},{"prop":"PrepareFinishTime","label":"备货完成时间","width":"160","sortable":true,"editable":true,"type":"datetime"},{"prop":"PreparePerson","label":"备货人","width":100,"sortable":true,"filterType":"text"},{"prop":"driverRegisterTime","label":"司机登记时间","width":160,"sortable":true,"filterType":"datetime"},{"prop":"loadingStartTime","label":"装车开始时间","width":160,"sortable":true,"filterType":"datetime"},{"prop":"loadingEndTime","label":"装车结束时间","width":160,"sortable":true,"filterType":"datetime"},{"prop":"carNumber","label":"车厢号","width":100,"sortable":true,"filterType":"text"},{"prop":"loader","label":"装车人","width":100,"sortable":true,"filterType":"text"},{"prop":"dockNumber","label":"DOCK号","width":120,"sortable":true,"filterType":"text"},{"prop":"loadingStatus","label":"装车状态","width":120,"sortable":true,"filterType":"select","type":"status","options":[{"value":"未装车","type":"info"},{"value":"已登记","type":"warning"},{"value":"装车中","type":"warning"},{"value":"装车完成","type":"success"},{"value":"交仓中","type":"warning"},{"value":"交仓完成","type":"success"},{"value":"POD回传","type":"success"}],"filterOptions":[{"label":"未装车","value":"未装车"},{"label":"已登记","value":"已登记"},{"label":"装车中","value":"装车中"},{"label":"装车完成","value":"装车完成"},{"label":"交仓中","value":"交仓中"},{"label":"交仓完成","value":"交仓完成"},{"label":"POD回传","value":"POD回传"}]},{"prop":"warehouseRemarks","label":"调度备注","width":150,"sortable":false,"filterType":"text"},{"prop":"driverLicense","label":"司机驾照","width":120,"sortable":true,"filterType":"text"},{"prop":"driverName","label":"司机名字","width":120,"sortable":true,"filterType":"text"},{"prop":"licensePlate","label":"司机车牌号","width":120,"sortable":true,"filterType":"text"},{"prop":"driverPhone","label":"司机电话","width":120,"sortable":true,"filterType":"text"},{"prop":"OPName","label":"出单人","width":120,"sortable":true,"filterType":"text"},{"prop":"supplier","label":"提货供应商","width":150,"sortable":true,"filterType":"text"},{"prop":"actualPallets","label":"实际出库板数","width":140,"sortable":true,"filterType":"number"},{"prop":"palletsMerged","label":"合板数量","width":120,"sortable":true,"filterType":"number"},{"prop":"loadingAppointmentTime","label":"装车预约时间","width":160,"sortable":true,"filterType":"datetime"},{"prop":"weight","label":"重量","width":100,"sortable":true,"filterType":"number"},{"prop":"cubicMeter","label":"方数","width":100,"sortable":true,"filterType":"number"},{"prop":"totalPallets","label":"总板数","width":100,"sortable":true,"filterType":"number"},{"prop":"deliveryCost","label":"派送成本","width":120,"sortable":true,"filterType":"number"},{"prop":"Memo","label":"Memo","width":120,"sortable":true,"filterType":"text"},{"prop":"Followup","label":"跟进记录","width":120,"sortable":true,"filterType":"text"},{"prop":"DriverStartTime","label":"司机出发时间","width":120,"sortable":true,"filterType":"datetime"},{"prop":"operation","label":"操作","width":150,"fixed":"right","sortable":false,"type":"operation"}]')},2998:(e,a,l)=>{l.d(a,{A:()=>b});var t=l(641),n=l(33);const i={class:"groupable-table-container"},o={key:0,class:"el-icon-caret-right"},r={class:"group-title"},s={key:1,class:"group-count"},d={key:0,class:"pagination-container"};function u(e,a,l,u,p,m){const c=(0,t.g2)("el-table-column"),b=(0,t.g2)("el-table"),v=(0,t.g2)("el-pagination");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.bF)(b,(0,t.v6)({data:u.tableData,"row-key":l.rowKey,"tree-props":{children:"children"},"row-class-name":u.getRowClassName,"default-expand-all":l.defaultExpandAll,onSelectionChange:u.handleSelectionChange,onCellClick:u.handleCellClick},e.$attrs),{default:(0,t.k6)((()=>[l.showSelection?((0,t.uX)(),(0,t.Wv)(c,{key:0,type:"selection",selectable:e=>!e.isGroup,width:"55"},null,8,["selectable"])):(0,t.Q3)("",!0),l.showGroupColumn?((0,t.uX)(),(0,t.Wv)(c,{key:1,label:l.groupColumnLabel,width:l.groupColumnWidth,fixed:l.groupColumnFixed},{default:(0,t.k6)((e=>[e.row.isGroup?((0,t.uX)(),(0,t.CE)("div",{key:0,class:(0,n.C4)(["group-name",`group-level-${e.row.groupLevel||1}`])},[e.row.children&&e.row.children.length?((0,t.uX)(),(0,t.CE)("i",o)):(0,t.Q3)("",!0),(0,t.Lk)("span",r,(0,n.v_)(e.row.groupName),1),e.row.count?((0,t.uX)(),(0,t.CE)("span",s,"("+(0,n.v_)(e.row.count)+")",1)):(0,t.Q3)("",!0)],2)):(0,t.Q3)("",!0)])),_:1},8,["label","width","fixed"])):(0,t.Q3)("",!0),(0,t.RG)(e.$slots,"default",{},void 0,!0)])),_:3},16,["data","row-key","row-class-name","default-expand-all","onSelectionChange","onCellClick"]),l.showPagination?((0,t.uX)(),(0,t.CE)("div",d,[(0,t.bF)(v,{"current-page":l.currentPage,"page-sizes":l.pageSizes,"page-size":l.pageSize,total:l.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"])])):(0,t.Q3)("",!0)])}const p={name:"GroupableTable",props:{data:{type:Array,required:!0},rowKey:{type:String,default:"id"},groupFields:{type:Array,default:()=>[]},showSelection:{type:Boolean,default:!0},showGroupColumn:{type:Boolean,default:!0},groupColumnLabel:{type:String,default:"分组"},groupColumnWidth:{type:[String,Number],default:180},groupColumnFixed:{type:[String,Boolean],default:"left"},defaultExpandAll:{type:Boolean,default:!0},showPagination:{type:Boolean,default:!0},currentPage:{type:Number,default:1},pageSize:{type:Number,default:20},pageSizes:{type:Array,default:()=>[10,20,50,100]},total:{type:Number,default:0}},emits:["selection-change","cell-click","size-change","current-change","cell-dbl-click","cell-edit-confirm","tag-close"],setup(e,{emit:a}){const l=(0,t.EW)((()=>(e.groupFields&&e.groupFields.length,e.data))),n=({row:e})=>{let a=[];return e.isGroup?(a.push("group-row"),a.push(`group-level-${e.groupLevel||1}`)):e.parentGroupKey&&(a.push("data-item"),a.push(`data-parent-group-${e.parentGroupKey}`)),a.join(" ")},i=e=>{a("selection-change",e)},o=(e,l,t,n)=>{a("cell-click",e,l,t,n)},r=e=>{a("size-change",e)},s=e=>{a("current-change",e)};return{tableData:l,getRowClassName:n,handleSelectionChange:i,handleCellClick:o,handleSizeChange:r,handleCurrentChange:s}}};var m=l(6262);const c=(0,m.A)(p,[["render",u],["__scopeId","data-v-26a30527"]]),b=c},3344:(e,a,l)=>{l.d(a,{A:()=>b});var t=l(641);const n={class:"filter-panel"},i={class:"filter-list"},o={class:"filter-buttons"},r={class:"filter-logic"},s={class:"dialog-footer"};function d(e,a,l,d,u,p){const m=(0,t.g2)("el-option"),c=(0,t.g2)("el-select"),b=(0,t.g2)("el-date-picker"),v=(0,t.g2)("el-input"),g=(0,t.g2)("el-button"),h=(0,t.g2)("el-radio"),k=(0,t.g2)("el-radio-group"),f=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(f,{modelValue:d.dialogVisible,"onUpdate:modelValue":a[1]||(a[1]=e=>d.dialogVisible=e),title:"高级筛选",width:"900px","close-on-click-modal":!1,onClose:d.handleClose},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",s,[(0,t.bF)(g,{onClick:d.handleCancel},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("取消")]))),_:1},8,["onClick"]),(0,t.bF)(g,{type:"primary",onClick:d.handleConfirm},{default:(0,t.k6)((()=>a[8]||(a[8]=[(0,t.eW)("应用筛选")]))),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",n,[(0,t.Lk)("div",i,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.filters,((e,l)=>((0,t.uX)(),(0,t.CE)("div",{key:l,class:"filter-item"},[(0,t.bF)(c,{modelValue:e.field,"onUpdate:modelValue":a=>e.field=a,placeholder:"选择筛选字段",class:"filter-field"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.filterFields,(e=>((0,t.uX)(),(0,t.Wv)(m,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,t.bF)(c,{modelValue:e.operator,"onUpdate:modelValue":a=>e.operator=a,placeholder:"选择操作符",class:"filter-operator"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{label:"等于",value:"eq"}),(0,t.bF)(m,{label:"不等于",value:"neq"}),(0,t.bF)(m,{label:"包含",value:"contains"}),(0,t.bF)(m,{label:"不包含",value:"notContains"}),(0,t.bF)(m,{label:"开始于",value:"startsWith"}),(0,t.bF)(m,{label:"结束于",value:"endsWith"}),(0,t.bF)(m,{label:"大于",value:"gt"}),(0,t.bF)(m,{label:"大于等于",value:"gte"}),(0,t.bF)(m,{label:"小于",value:"lt"}),(0,t.bF)(m,{label:"小于等于",value:"lte"}),(0,t.bF)(m,{label:"在列表中",value:"in"}),(0,t.bF)(m,{label:"不在列表中",value:"notIn"})])),_:2},1032,["modelValue","onUpdate:modelValue"]),"date"===d.getFieldType(e.field)?((0,t.uX)(),(0,t.Wv)(b,{key:0,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,type:"date",placeholder:"选择日期",class:"filter-value"},null,8,["modelValue","onUpdate:modelValue"])):"datetime"===d.getFieldType(e.field)?((0,t.uX)(),(0,t.Wv)(b,{key:1,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,type:"datetime",placeholder:"选择日期时间",class:"filter-value"},null,8,["modelValue","onUpdate:modelValue"])):"select"===d.getFieldType(e.field)?((0,t.uX)(),(0,t.Wv)(c,{key:2,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:"选择筛选值",class:"filter-value"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.getFieldOptions(e.field),(e=>((0,t.uX)(),(0,t.Wv)(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])):((0,t.uX)(),(0,t.Wv)(v,{key:3,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:"输入筛选值",class:"filter-value"},null,8,["modelValue","onUpdate:modelValue"])),(0,t.bF)(g,{type:"danger",size:"small",onClick:e=>d.removeFilter(l),class:"filter-delete-btn"},{default:(0,t.k6)((()=>a[2]||(a[2]=[(0,t.eW)("删除")]))),_:2},1032,["onClick"])])))),128))]),(0,t.Lk)("div",o,[(0,t.bF)(g,{type:"primary",icon:"el-icon-plus",onClick:d.addFilter},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)("添加筛选条件")]))),_:1},8,["onClick"]),(0,t.bF)(g,{icon:"el-icon-refresh",onClick:d.resetFilters},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("重置筛选")]))),_:1},8,["onClick"])]),(0,t.Lk)("div",r,[(0,t.bF)(k,{modelValue:d.filterLogic,"onUpdate:modelValue":a[0]||(a[0]=e=>d.filterLogic=e)},{default:(0,t.k6)((()=>[(0,t.bF)(h,{label:"and"},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("满足所有条件 (AND)")]))),_:1}),(0,t.bF)(h,{label:"or"},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("满足任一条件 (OR)")]))),_:1})])),_:1},8,["modelValue"])])])])),_:1},8,["modelValue","onClose"])}var u=l(953);const p={name:"FilterPanel",props:{visible:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},existingFilters:{type:Array,default:()=>[]},existingLogic:{type:String,default:"and"}},emits:["update:visible","apply-filters","cancel"],setup(e,{emit:a}){const l=(0,t.EW)({get:()=>e.visible,set:e=>a("update:visible",e)}),n=(0,u.KR)(e.existingLogic),i=(0,t.EW)((()=>e.columns.map((e=>({label:e.label,prop:e.prop,type:e.filterType||"text",options:e.filterOptions||[]}))))),o=(0,u.KR)(e.existingFilters.length>0?[...e.existingFilters]:[{field:"",operator:"eq",value:""}]),r=e=>{const a=i.value.find((a=>a.prop===e));return a?a.type:"text"},s=e=>{const a=i.value.find((a=>a.prop===e));return a?a.options:[]},d=()=>{o.value.push({field:"",operator:"eq",value:""})},p=e=>{o.value.splice(e,1),0===o.value.length&&d()},m=()=>{o.value=[{field:"",operator:"eq",value:""}],n.value="and"},c=()=>{l.value=!1},b=()=>{l.value=!1,a("cancel")},v=()=>{const e=o.value.filter((e=>e.field&&e.operator&&""!==e.value));a("apply-filters",{filters:e,logic:n.value}),l.value=!1};return{dialogVisible:l,filterLogic:n,filterFields:i,filters:o,getFieldType:r,getFieldOptions:s,addFilter:d,removeFilter:p,resetFilters:m,handleClose:c,handleCancel:b,handleConfirm:v}}};var m=l(6262);const c=(0,m.A)(p,[["render",d],["__scopeId","data-v-08dd25ee"]]),b=c},6340:(e,a,l)=>{function t(e){if(!e)return"";const a=new Date,l=new Date(e),t=a-l;return t<6e4?"刚刚":t<36e5?`${Math.floor(t/6e4)}分钟前`:t<864e5?`${Math.floor(t/36e5)}小时前`:t<2592e6?`${Math.floor(t/864e5)}天前`:l.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}l.d(a,{f:()=>t})},7530:(e,a,l)=>{var t=l(3751),n=l(641),i=l(33);const o={id:"app"},r={class:"header"},s={class:"logo-container"},d={class:"header-right"},u={class:"main-container"},p={class:"custom-menu"},m={class:"submenu"},c={class:"submenu"},b={class:"submenu"},v={class:"submenu"},g={class:"submenu submenu-level-2"},h={class:"submenu"},k={class:"submenu"},f={class:"submenu"},y={class:"submenu submenu-level-2"},C={class:"submenu submenu-level-2"},w={class:"submenu"},T={class:"submenu submenu-level-2"},F={class:"submenu submenu-level-2"},L={class:"submenu submenu-level-2"},S={class:"submenu"},V={class:"submenu"},_={class:"submenu"},D={class:"submenu"},A={class:"main-content"},N={class:"breadcrumb"},M={class:"content-wrapper"};function P(e,a,l,P,x,W){const E=(0,n.g2)("MessageNotification"),R=(0,n.g2)("el-dropdown-item"),I=(0,n.g2)("el-dropdown-menu"),O=(0,n.g2)("el-dropdown"),U=(0,n.g2)("el-breadcrumb-item"),K=(0,n.g2)("el-breadcrumb"),z=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",r,[(0,n.Lk)("div",s,[(0,n.Q3)("",!0),a[69]||(a[69]=(0,n.Lk)("h1",{class:"logo-text"},"物流管理系统",-1))]),(0,n.Lk)("div",d,[(0,n.bF)(E),(0,n.bF)(O,{trigger:"click"},{dropdown:(0,n.k6)((()=>[(0,n.bF)(I,null,{default:(0,n.k6)((()=>[(0,n.bF)(R,{icon:"el-icon-user"},{default:(0,n.k6)((()=>a[70]||(a[70]=[(0,n.eW)("个人中心")]))),_:1}),(0,n.bF)(R,{icon:"el-icon-setting"},{default:(0,n.k6)((()=>a[71]||(a[71]=[(0,n.eW)("系统设置")]))),_:1}),(0,n.bF)(R,{divided:"",icon:"el-icon-switch-button"},{default:(0,n.k6)((()=>a[72]||(a[72]=[(0,n.eW)("退出登录")]))),_:1})])),_:1})])),default:(0,n.k6)((()=>[a[73]||(a[73]=(0,n.Lk)("span",{class:"user-info"},[(0,n.Lk)("img",{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",class:"user-avatar"}),(0,n.Lk)("span",{class:"username"},"管理员"),(0,n.Lk)("i",{class:"el-icon-arrow-down"})],-1))])),_:1})])]),(0,n.Lk)("div",u,[(0,n.Lk)("div",{class:(0,i.C4)(["sidebar",{collapsed:x.isCollapsed}])},[(0,n.Lk)("div",p,[(0,n.Lk)("div",{class:(0,i.C4)(["menu-item",{active:"/"===x.activeMenu}]),onClick:a[0]||(a[0]=e=>W.navigateTo("/"))},a[74]||(a[74]=[(0,n.Lk)("i",{class:"el-icon-s-home menu-icon"},null,-1),(0,n.Lk)("span",{class:"menu-title"},"首页",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["menu-item",{active:x.activeMenu.startsWith("/overseas")||x.activeMenu.startsWith("/fbx")||x.activeMenu.startsWith("/dockyard")||"/newfbx"===x.activeMenu||"/lastmile/appointment"===x.activeMenu}]),onClick:a[1]||(a[1]=e=>W.toggleSubmenu("overseas"))},[a[75]||(a[75]=(0,n.Lk)("i",{class:"el-icon-ship menu-icon"},null,-1)),a[76]||(a[76]=(0,n.Lk)("span",{class:"menu-title"},"海外操作",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("overseas")}])},null,2)],2),(0,n.bo)((0,n.Lk)("div",m,[(0,n.Lk)("div",{class:"submenu-item",onClick:a[2]||(a[2]=e=>W.navigateTo("/dockyard"))},a[77]||(a[77]=[(0,n.Lk)("span",{class:"submenu-title"},"码头停车图",-1)])),(0,n.Lk)("div",{class:"submenu-item",onClick:a[3]||(a[3]=e=>W.navigateTo("/newfbx"))},a[78]||(a[78]=[(0,n.Lk)("span",{class:"submenu-title"},"FBX管理",-1)])),(0,n.Lk)("div",{class:"submenu-item",onClick:a[4]||(a[4]=e=>W.navigateTo("/lastmile/appointment"))},a[79]||(a[79]=[(0,n.Lk)("span",{class:"submenu-title"},"货量统筹",-1)]))],512),[[t.aG,x.expandedMenus.includes("overseas")]]),(0,n.Lk)("div",{class:(0,i.C4)(["menu-item highlight",{active:x.activeMenu.startsWith("/tms")||"/dispatch/outgoing-batch"===x.activeMenu||"/appointment/list"===x.activeMenu||"/supplier/appointment-management"===x.activeMenu}]),onClick:a[5]||(a[5]=e=>W.toggleSubmenu("lastmile"))},[a[80]||(a[80]=(0,n.Lk)("i",{class:"el-icon-office-building menu-icon"},null,-1)),a[81]||(a[81]=(0,n.Lk)("span",{class:"menu-title"},"尾程仓管",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("lastmile")}])},null,2)],2),(0,n.bo)((0,n.Lk)("div",c,[(0,n.Lk)("div",{class:"submenu-item",onClick:a[6]||(a[6]=e=>W.navigateTo("/dispatch/outgoing-batch"))},a[82]||(a[82]=[(0,n.Lk)("span",{class:"submenu-title"},"出库批次",-1)])),(0,n.Lk)("div",{class:"submenu-item",onClick:a[7]||(a[7]=e=>W.navigateTo("/appointment/list"))},a[83]||(a[83]=[(0,n.Lk)("span",{class:"submenu-title"},"预约出库",-1)])),(0,n.Lk)("div",{class:"submenu-item",onClick:a[8]||(a[8]=e=>W.navigateTo("/supplier/appointment-management"))},a[84]||(a[84]=[(0,n.Lk)("span",{class:"submenu-title"},"平台预约管理",-1)]))],512),[[t.aG,x.expandedMenus.includes("lastmile")]]),(0,n.Lk)("div",{class:(0,i.C4)(["menu-item",{active:x.activeMenu.startsWith("/admin/quote-management/amazon-warehouse")}]),onClick:a[9]||(a[9]=e=>W.toggleSubmenu("supplier-appointment"))},[a[85]||(a[85]=(0,n.Lk)("i",{class:"el-icon-date menu-icon"},null,-1)),a[86]||(a[86]=(0,n.Lk)("span",{class:"menu-title"},"基础资料",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("supplier-appointment")}])},null,2)],2),(0,n.bo)((0,n.Lk)("div",b,[(0,n.Lk)("div",{class:"submenu-item",onClick:a[10]||(a[10]=e=>W.navigateTo("/admin/quote-management/amazon-warehouse"))},a[87]||(a[87]=[(0,n.Lk)("span",{class:"submenu-title"},"平台地址",-1)]))],512),[[t.aG,x.expandedMenus.includes("supplier-appointment")]]),(0,n.Lk)("div",{class:(0,i.C4)(["menu-item",{active:x.activeMenu.startsWith("/inventory")||"/dispatch/delivery-trains"===x.activeMenu||x.activeMenu.startsWith("/load-appointment")}]),onClick:a[11]||(a[11]=e=>W.toggleSubmenu("inventory"))},[a[88]||(a[88]=(0,n.Lk)("i",{class:"el-icon-box menu-icon"},null,-1)),a[89]||(a[89]=(0,n.Lk)("span",{class:"menu-title"},"车辆派送",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("inventory")}])},null,2)],2),(0,n.bo)((0,n.Lk)("div",v,[(0,n.Lk)("div",{class:"submenu-item",onClick:a[12]||(a[12]=e=>W.navigateTo("/dispatch/delivery-trains"))},a[90]||(a[90]=[(0,n.Lk)("span",{class:"submenu-title"},"派送车次",-1)])),(0,n.Lk)("div",{class:"submenu-item",onClick:a[13]||(a[13]=e=>W.navigateTo("/tms/driver-check-in"))},a[91]||(a[91]=[(0,n.Lk)("span",{class:"submenu-title"},"司机登记",-1)])),(0,n.Lk)("div",{class:"submenu-item","data-has-children":"true",onClick:a[14]||(a[14]=e=>W.toggleSubmenu("load-appointment"))},[a[92]||(a[92]=(0,n.Lk)("span",{class:"submenu-title"},"提货预约",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("load-appointment")}])},null,2)]),(0,n.bo)((0,n.Lk)("div",g,[(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/load-appointment/manage"===x.activeMenu}]),onClick:a[15]||(a[15]=e=>W.navigateTo("/load-appointment/manage"))},a[93]||(a[93]=[(0,n.Lk)("span",{class:"submenu-title"},"预约日历",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/load-appointment/settings"===x.activeMenu}]),onClick:a[16]||(a[16]=e=>W.navigateTo("/load-appointment/settings"))},a[94]||(a[94]=[(0,n.Lk)("span",{class:"submenu-title"},"预约设置",-1)]),2)],512),[[t.aG,x.expandedMenus.includes("load-appointment")]])],512),[[t.aG,x.expandedMenus.includes("inventory")]]),(0,n.Lk)("div",{class:(0,i.C4)(["menu-item",{active:x.activeMenu.startsWith("/supplier/mobile-app")}]),onClick:a[17]||(a[17]=e=>W.toggleSubmenu("supplier-mobile-app"))},[a[95]||(a[95]=(0,n.Lk)("i",{class:"el-icon-mobile-phone menu-icon"},null,-1)),a[96]||(a[96]=(0,n.Lk)("span",{class:"menu-title"},"手机APP端",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("supplier-mobile-app")}])},null,2)],2),(0,n.bo)((0,n.Lk)("div",h,[(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/supplier/mobile-app/driver-dispatch"===x.activeMenu}]),onClick:a[18]||(a[18]=e=>W.navigateTo("/supplier/mobile-app/driver-dispatch"))},a[97]||(a[97]=[(0,n.Lk)("span",{class:"submenu-title"},"车辆派送",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/supplier/mobile-app/stocking"===x.activeMenu}]),onClick:a[19]||(a[19]=e=>W.navigateTo("/supplier/mobile-app/stocking"))},a[98]||(a[98]=[(0,n.Lk)("span",{class:"submenu-title"},"备货",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/supplier/mobile-app/outbound"===x.activeMenu}]),onClick:a[20]||(a[20]=e=>W.navigateTo("/supplier/mobile-app/outbound"))},a[99]||(a[99]=[(0,n.Lk)("span",{class:"submenu-title"},"出库",-1)]),2)],512),[[t.aG,x.expandedMenus.includes("supplier-mobile-app")]])]),(0,n.Lk)("div",{class:(0,i.C4)(["menu-item",{active:x.activeMenu.startsWith("/work-order")}]),onClick:a[21]||(a[21]=e=>W.toggleSubmenu("work-order"))},[a[100]||(a[100]=(0,n.Lk)("i",{class:"el-icon-document menu-icon"},null,-1)),a[101]||(a[101]=(0,n.Lk)("span",{class:"menu-title"},"工单管理",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("work-order")}])},null,2)],2),(0,n.bo)((0,n.Lk)("div",k,[(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/work-order/command"===x.activeMenu}]),onClick:a[22]||(a[22]=e=>W.navigateTo("/work-order/command"))},a[102]||(a[102]=[(0,n.Lk)("span",{class:"submenu-title"},"指令工单",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/work-order/exception"===x.activeMenu}]),onClick:a[23]||(a[23]=e=>W.navigateTo("/work-order/exception"))},a[103]||(a[103]=[(0,n.Lk)("span",{class:"submenu-title"},"异常工单",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/work-order/alert"===x.activeMenu}]),onClick:a[24]||(a[24]=e=>W.navigateTo("/work-order/alert"))},a[104]||(a[104]=[(0,n.Lk)("span",{class:"submenu-title"},"订单预警",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/work-order/value-added"===x.activeMenu}]),onClick:a[25]||(a[25]=e=>W.navigateTo("/work-order/value-added"))},a[105]||(a[105]=[(0,n.Lk)("span",{class:"submenu-title"},"增值服务",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/work-order/analysis"===x.activeMenu}]),onClick:a[26]||(a[26]=e=>W.navigateTo("/work-order/analysis"))},a[106]||(a[106]=[(0,n.Lk)("span",{class:"submenu-title"},"工单分析",-1)]),2)],512),[[t.aG,x.expandedMenus.includes("work-order")]]),(0,n.Lk)("div",{class:(0,i.C4)(["menu-item",{active:x.activeMenu.startsWith("/messages")}]),onClick:a[27]||(a[27]=e=>W.toggleSubmenu("messages"))},[a[107]||(a[107]=(0,n.Lk)("i",{class:"el-icon-message menu-icon"},null,-1)),a[108]||(a[108]=(0,n.Lk)("span",{class:"menu-title"},"消息中心",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("messages")}])},null,2)],2),(0,n.bo)((0,n.Lk)("div",f,[(0,n.Lk)("div",{class:"submenu-item","data-has-children":"true",onClick:a[28]||(a[28]=e=>W.toggleSubmenu("internal-message"))},[a[109]||(a[109]=(0,n.Lk)("i",{class:"el-icon-chat-dot-round menu-icon",style:{"margin-right":"5px","font-size":"16px"}},null,-1)),a[110]||(a[110]=(0,n.Lk)("span",{class:"submenu-title"},"站内信管理",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("internal-message")}])},null,2)]),(0,n.bo)((0,n.Lk)("div",y,[(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/messages/list"===x.activeMenu}]),onClick:a[29]||(a[29]=e=>W.navigateTo("/messages/list"))},a[111]||(a[111]=[(0,n.Lk)("span",{class:"submenu-title"},"消息列表",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/messages/manage"===x.activeMenu}]),onClick:a[30]||(a[30]=e=>W.navigateTo("/messages/manage"))},a[112]||(a[112]=[(0,n.Lk)("span",{class:"submenu-title"},"消息管理配置",-1)]),2)],512),[[t.aG,x.expandedMenus.includes("internal-message")]]),(0,n.Lk)("div",{class:"submenu-item","data-has-children":"true",onClick:a[31]||(a[31]=(0,t.D$)((e=>W.toggleSubmenu("email-management")),["stop"]))},[a[113]||(a[113]=(0,n.Lk)("i",{class:"el-icon-message menu-icon",style:{"margin-right":"5px","font-size":"16px"}},null,-1)),a[114]||(a[114]=(0,n.Lk)("span",{class:"submenu-title"},"邮件管理",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("email-management")}])},null,2)]),(0,n.bo)((0,n.Lk)("div",C,[(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/messages/email-management/accounts"===x.activeMenu}]),onClick:a[32]||(a[32]=e=>W.navigateTo("/messages/email-management/accounts"))},a[115]||(a[115]=[(0,n.Lk)("span",{class:"submenu-title"},"邮箱账号",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/messages/email-management/templates"===x.activeMenu}]),onClick:a[33]||(a[33]=e=>W.navigateTo("/messages/email-management/templates"))},a[116]||(a[116]=[(0,n.Lk)("span",{class:"submenu-title"},"邮件模板",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/messages/email-management/logs"===x.activeMenu}]),onClick:a[34]||(a[34]=e=>W.navigateTo("/messages/email-management/logs"))},a[117]||(a[117]=[(0,n.Lk)("span",{class:"submenu-title"},"邮件记录",-1)]),2)],512),[[t.aG,x.expandedMenus.includes("email-management")]])],512),[[t.aG,x.expandedMenus.includes("messages")]]),(0,n.Lk)("div",{class:(0,i.C4)(["menu-item",{active:x.activeMenu.startsWith("/supplier")}]),onClick:a[35]||(a[35]=e=>W.toggleSubmenu("supplier"))},[a[118]||(a[118]=(0,n.Lk)("i",{class:"el-icon-s-shop menu-icon"},null,-1)),a[119]||(a[119]=(0,n.Lk)("span",{class:"menu-title"},"供应商门户",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("supplier")}])},null,2)],2),(0,n.bo)((0,n.Lk)("div",w,[(0,n.Lk)("div",{class:"submenu-item","data-has-children":"true",onClick:a[36]||(a[36]=e=>W.toggleSubmenu("supplier-order"))},[a[120]||(a[120]=(0,n.Lk)("span",{class:"submenu-title"},"订单管理",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("supplier-order")}])},null,2)]),(0,n.bo)((0,n.Lk)("div",T,[(0,n.Lk)("div",{class:"submenu-item",onClick:a[37]||(a[37]=e=>W.navigateTo("/supplier/order/seas-order"))},a[121]||(a[121]=[(0,n.Lk)("span",{class:"submenu-title"},"海柜订单",-1)])),(0,n.Lk)("div",{class:"submenu-item",onClick:a[38]||(a[38]=e=>W.navigateTo("/supplier/order/delivery-order"))},a[122]||(a[122]=[(0,n.Lk)("span",{class:"submenu-title"},"派送订单",-1)]))],512),[[t.aG,x.expandedMenus.includes("supplier-order")]]),(0,n.Lk)("div",{class:"submenu-item","data-has-children":"true",onClick:a[39]||(a[39]=e=>W.toggleSubmenu("supplier-quote"))},[a[123]||(a[123]=(0,n.Lk)("span",{class:"submenu-title"},"报价管理",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("supplier-quote")}])},null,2)]),(0,n.bo)((0,n.Lk)("div",F,[(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/quote-management/fixed-quote"===x.activeMenu}]),onClick:a[40]||(a[40]=e=>W.navigateTo("/admin/quote-management/fixed-quote"))},a[124]||(a[124]=[(0,n.Lk)("span",{class:"submenu-title"},"固定报价",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/quote-management/inquiry"===x.activeMenu}]),onClick:a[41]||(a[41]=e=>W.navigateTo("/admin/quote-management/inquiry"))},a[125]||(a[125]=[(0,n.Lk)("span",{class:"submenu-title"},"单次询价",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/quote-management/bidding"===x.activeMenu}]),onClick:a[42]||(a[42]=e=>W.navigateTo("/admin/quote-management/bidding"))},a[126]||(a[126]=[(0,n.Lk)("span",{class:"submenu-title"},"竞价管理",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/quote-management/comparison-history"===x.activeMenu}]),onClick:a[43]||(a[43]=e=>W.navigateTo("/admin/quote-management/comparison-history"))},a[127]||(a[127]=[(0,n.Lk)("span",{class:"submenu-title"},"对比与历史",-1)]),2)],512),[[t.aG,x.expandedMenus.includes("supplier-quote")]]),(0,n.Lk)("div",{class:"submenu-item","data-has-children":"true",onClick:a[44]||(a[44]=e=>W.toggleSubmenu("supplier-rating"))},[a[128]||(a[128]=(0,n.Lk)("span",{class:"submenu-title"},"评分管理",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("supplier-rating")}])},null,2)]),(0,n.bo)((0,n.Lk)("div",L,[(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/rating-management/dashboard"===x.activeMenu}]),onClick:a[45]||(a[45]=e=>W.navigateTo("/admin/rating-management/dashboard"))},a[129]||(a[129]=[(0,n.Lk)("span",{class:"submenu-title"},"评分看板",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/rating-management/field-rule-config"===x.activeMenu}]),onClick:a[46]||(a[46]=e=>W.navigateTo("/admin/rating-management/field-rule-config"))},a[130]||(a[130]=[(0,n.Lk)("span",{class:"submenu-title"},"字段规则配置",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/rating-management/metric-rule-config"===x.activeMenu}]),onClick:a[47]||(a[47]=e=>W.navigateTo("/admin/rating-management/metric-rule-config"))},a[131]||(a[131]=[(0,n.Lk)("span",{class:"submenu-title"},"指标规则配置",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/rating-management/indicator-config"===x.activeMenu}]),onClick:a[48]||(a[48]=e=>W.navigateTo("/admin/rating-management/indicator-config"))},a[132]||(a[132]=[(0,n.Lk)("span",{class:"submenu-title"},"指标配置",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/rating-management/rules-config"===x.activeMenu}]),onClick:a[49]||(a[49]=e=>W.navigateTo("/admin/rating-management/rules-config"))},a[133]||(a[133]=[(0,n.Lk)("span",{class:"submenu-title"},"规则配置",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/rating-management/supplier-deduction-details"===x.activeMenu}]),onClick:a[50]||(a[50]=e=>W.navigateTo("/admin/rating-management/supplier-deduction-details"))},a[134]||(a[134]=[(0,n.Lk)("span",{class:"submenu-title"},"扣分详情",-1)]),2)],512),[[t.aG,x.expandedMenus.includes("supplier-rating")]]),(0,n.Lk)("div",{class:(0,i.C4)(["menu-item",{active:x.activeMenu.startsWith("/admin")}]),onClick:a[51]||(a[51]=e=>W.toggleSubmenu("admin"))},[a[135]||(a[135]=(0,n.Lk)("i",{class:"el-icon-setting menu-icon"},null,-1)),a[136]||(a[136]=(0,n.Lk)("span",{class:"menu-title"},"后台管理",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("admin")}])},null,2)],2),(0,n.bo)((0,n.Lk)("div",S,[(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/supplier-management"===x.activeMenu}]),onClick:a[52]||(a[52]=e=>W.navigateTo("/admin/supplier-management"))},a[137]||(a[137]=[(0,n.Lk)("span",{class:"submenu-title"},"供应商管理",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/role-management"===x.activeMenu}]),onClick:a[53]||(a[53]=e=>W.navigateTo("/admin/role-management"))},a[138]||(a[138]=[(0,n.Lk)("span",{class:"submenu-title"},"角色管理",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/operation-log"===x.activeMenu}]),onClick:a[54]||(a[54]=e=>W.navigateTo("/admin/operation-log"))},a[139]||(a[139]=[(0,n.Lk)("span",{class:"submenu-title"},"操作日志",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/vehicle-management"===x.activeMenu}]),onClick:a[55]||(a[55]=e=>W.navigateTo("/admin/vehicle-management"))},a[140]||(a[140]=[(0,n.Lk)("span",{class:"submenu-title"},"车辆档案",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/driver-management"===x.activeMenu}]),onClick:a[56]||(a[56]=e=>W.navigateTo("/admin/driver-management"))},a[141]||(a[141]=[(0,n.Lk)("span",{class:"submenu-title"},"驾驶员管理",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/gps-tracking"===x.activeMenu}]),onClick:a[57]||(a[57]=e=>W.navigateTo("/admin/gps-tracking"))},a[142]||(a[142]=[(0,n.Lk)("span",{class:"submenu-title"},"GPS 实时监控",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/alert-management"===x.activeMenu}]),onClick:a[58]||(a[58]=e=>W.navigateTo("/admin/alert-management"))},a[143]||(a[143]=[(0,n.Lk)("span",{class:"submenu-title"},"异常预警",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/table-demo"===x.activeMenu}]),onClick:a[59]||(a[59]=e=>W.navigateTo("/table-demo"))},a[144]||(a[144]=[(0,n.Lk)("span",{class:"submenu-title"},"表格示例",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["menu-item",{active:x.activeMenu.startsWith("/admin/contract-management")}]),onClick:a[60]||(a[60]=e=>W.toggleSubmenu("admin-contract"))},[a[145]||(a[145]=(0,n.Lk)("i",{class:"el-icon-document menu-icon"},null,-1)),a[146]||(a[146]=(0,n.Lk)("span",{class:"menu-title"},"合同管理",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("admin-contract")}])},null,2)],2),(0,n.bo)((0,n.Lk)("div",V,[(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/contract-management/list"===x.activeMenu}]),onClick:a[61]||(a[61]=e=>W.navigateTo("/admin/contract-management/list"))},a[147]||(a[147]=[(0,n.Lk)("span",{class:"submenu-title"},"合同列表",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/contract-management/templates"===x.activeMenu}]),onClick:a[62]||(a[62]=e=>W.navigateTo("/admin/contract-management/templates"))},a[148]||(a[148]=[(0,n.Lk)("span",{class:"submenu-title"},"合同模板",-1)]),2)],512),[[t.aG,x.expandedMenus.includes("admin-contract")]]),(0,n.Lk)("div",{class:(0,i.C4)(["menu-item",{active:x.activeMenu.startsWith("/admin/tag-management")||x.activeMenu.startsWith("/admin/tags")||x.activeMenu.startsWith("/admin/tag-groups")}]),onClick:a[63]||(a[63]=e=>W.toggleSubmenu("admin-tag"))},[a[149]||(a[149]=(0,n.Lk)("i",{class:"el-icon-price-tag menu-icon"},null,-1)),a[150]||(a[150]=(0,n.Lk)("span",{class:"menu-title"},"标签管理",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("admin-tag")}])},null,2)],2),(0,n.bo)((0,n.Lk)("div",_,[(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/tags"===x.activeMenu}]),onClick:a[64]||(a[64]=e=>W.navigateTo("/admin/tags"))},a[151]||(a[151]=[(0,n.Lk)("span",{class:"submenu-title"},"标签管理",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/tag-groups"===x.activeMenu}]),onClick:a[65]||(a[65]=e=>W.navigateTo("/admin/tag-groups"))},a[152]||(a[152]=[(0,n.Lk)("span",{class:"submenu-title"},"标签分组",-1)]),2),(0,n.Lk)("div",{class:(0,i.C4)(["submenu-item",{active:"/admin/tag-management-new/list"===x.activeMenu}]),onClick:a[66]||(a[66]=e=>W.navigateTo("/admin/tag-management-new/list"))},a[153]||(a[153]=[(0,n.Lk)("span",{class:"submenu-title"},"标签管理新",-1)]),2)],512),[[t.aG,x.expandedMenus.includes("admin-tag")]])],512),[[t.aG,x.expandedMenus.includes("admin")]]),(0,n.Lk)("div",{class:(0,i.C4)(["menu-item",{active:x.activeMenu.startsWith("/test")}]),onClick:a[67]||(a[67]=e=>W.toggleSubmenu("test"))},[a[154]||(a[154]=(0,n.Lk)("i",{class:"el-icon-setting menu-icon"},null,-1)),a[155]||(a[155]=(0,n.Lk)("span",{class:"menu-title"},"测试",-1)),(0,n.Lk)("i",{class:(0,i.C4)(["menu-arrow menu-arrow-icon",{"is-open":x.expandedMenus.includes("test")}])},null,2)],2),(0,n.bo)((0,n.Lk)("div",D,[(0,n.Lk)("div",{class:"submenu-item",onClick:a[68]||(a[68]=e=>W.navigateTo("/newfbx-visactor"))},a[156]||(a[156]=[(0,n.Lk)("span",{class:"submenu-title"},"FBX管理(Visactor)",-1)]))],512),[[t.aG,x.expandedMenus.includes("test")]])],512),[[t.aG,x.expandedMenus.includes("supplier")]])],2),(0,n.Lk)("div",A,[(0,n.Lk)("div",N,[(0,n.bF)(K,{separator:"/"},{default:(0,n.k6)((()=>[(0,n.bF)(U,{to:{path:"/"}},{default:(0,n.k6)((()=>a[157]||(a[157]=[(0,n.eW)("首页")]))),_:1}),e.$route.meta&&e.$route.meta.parentTitle?((0,n.uX)(),(0,n.Wv)(U,{key:0},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.$route.meta.parentTitle),1)])),_:1})):(0,n.Q3)("",!0),e.$route.meta&&e.$route.meta.title?((0,n.uX)(),(0,n.Wv)(U,{key:1},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.$route.meta.title),1)])),_:1})):(0,n.Q3)("",!0)])),_:1})]),(0,n.Lk)("div",M,[(0,n.bF)(z)])])])])}const x={class:"message-notification"},W={class:"message-list"},E={class:"message-header"},R={class:"message-number"},I={class:"message-time"},O=["onClick"],U={class:"message-title"},K={class:"message-summary"},z={class:"message-order-status"},X={class:"message-footer"},B={class:"message-source"},$={class:"message-header"},G={class:"message-number"},q={class:"message-time"},J=["onClick"],Q={class:"message-title"},H={class:"message-summary"},j={class:"message-order-status"},Y={class:"message-footer"},Z={class:"message-source"},ee={class:"message-header"},ae={class:"message-number"},le={class:"message-time"},te=["onClick"],ne={class:"message-title"},ie={class:"message-summary"},oe={class:"message-footer"},re={class:"message-source"},se={class:"message-header"},de={class:"message-number"},ue={class:"message-time"},pe=["onClick"],me={class:"message-title"},ce={class:"message-summary"},be={class:"message-footer"},ve={class:"message-source"},ge={class:"message-header"},he={class:"message-number"},ke={class:"message-time"},fe=["onClick"],ye={class:"message-title"},Ce={class:"message-summary"},we={class:"message-footer"},Te={class:"message-source"},Fe={class:"message-header"},Le={class:"message-number"},Se={class:"message-time"},Ve=["onClick"],_e={class:"message-title"},De={class:"message-summary"},Ae={class:"message-footer"},Ne={class:"message-source"};function Me(e,a,l,t,o,r){const s=(0,n.g2)("Bell"),d=(0,n.g2)("el-icon"),u=(0,n.g2)("el-button"),p=(0,n.g2)("el-badge"),m=(0,n.g2)("el-tag"),c=(0,n.g2)("el-tab-pane"),b=(0,n.g2)("el-tabs"),v=(0,n.g2)("el-drawer");return(0,n.uX)(),(0,n.CE)("div",x,[(0,n.bF)(p,{value:t.unreadCount,max:99,class:"badge"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{type:"text",onClick:t.toggleMessageList},{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.bF)(s)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["value"]),(0,n.bF)(v,{title:"消息通知",modelValue:t.drawerVisible,"onUpdate:modelValue":a[1]||(a[1]=e=>t.drawerVisible=e),direction:"rtl",size:"50%","before-close":t.handleClose},{default:(0,n.k6)((()=>[(0,n.Lk)("div",W,[(0,n.bF)(b,{modelValue:t.activeTab,"onUpdate:modelValue":a[0]||(a[0]=e=>t.activeTab=e)},{default:(0,n.k6)((()=>[(0,n.bF)(c,{label:"全部",name:"all"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.messages,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:(0,i.C4)(["message-item",{unread:!e.read}])},[(0,n.Lk)("div",E,[(0,n.Lk)("span",{class:(0,i.C4)(["message-type",e.type])},(0,i.v_)(t.getTypeText(e.type)),3),(0,n.Lk)("span",R,"单号："+(0,i.v_)(e.number),1),(0,n.Lk)("span",I,(0,i.v_)(t.formatTime(e.createTime)),1)]),(0,n.Lk)("div",{class:"message-content",onClick:a=>t.handleMessageClick(e)},[(0,n.Lk)("h4",U,(0,i.v_)(e.title),1),(0,n.Lk)("p",K,(0,i.v_)(e.summary),1),(0,n.Lk)("div",z,[(0,n.bF)(m,{size:"small",type:t.getOrderStatusType(e.orderStatus)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(t.getOrderStatusText(e.orderStatus)),1)])),_:2},1032,["type"])])],8,O),(0,n.Lk)("div",X,[(0,n.Lk)("span",B,(0,i.v_)(e.isSystem?"系统自动":"人工发送"),1),(0,n.Lk)("span",{class:(0,i.C4)(["message-status",{unread:!e.read}])},(0,i.v_)(e.read?"已读":"未读"),3)])],2)))),128))])),_:1}),(0,n.bF)(c,{label:"指令工单",name:"command"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.commandMessages,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:(0,i.C4)(["message-item",{unread:!e.read}])},[(0,n.Lk)("div",$,[a[2]||(a[2]=(0,n.Lk)("span",{class:"message-type command"},"指令工单",-1)),(0,n.Lk)("span",G,"单号："+(0,i.v_)(e.number),1),(0,n.Lk)("span",q,(0,i.v_)(t.formatTime(e.createTime)),1)]),(0,n.Lk)("div",{class:"message-content",onClick:a=>t.handleMessageClick(e)},[(0,n.Lk)("h4",Q,(0,i.v_)(e.title),1),(0,n.Lk)("p",H,(0,i.v_)(e.summary),1),(0,n.Lk)("div",j,[(0,n.bF)(m,{size:"small",type:t.getOrderStatusType(e.orderStatus)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(t.getOrderStatusText(e.orderStatus)),1)])),_:2},1032,["type"])])],8,J),(0,n.Lk)("div",Y,[(0,n.Lk)("span",Z,(0,i.v_)(e.isSystem?"系统自动":"人工发送"),1),(0,n.Lk)("span",{class:(0,i.C4)(["message-status",{unread:!e.read}])},(0,i.v_)(e.read?"已读":"未读"),3)])],2)))),128))])),_:1}),(0,n.bF)(c,{label:"异常工单",name:"exception"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.exceptionMessages,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:(0,i.C4)(["message-item",{unread:!e.read}])},[(0,n.Lk)("div",ee,[a[3]||(a[3]=(0,n.Lk)("span",{class:"message-type exception"},"异常工单",-1)),(0,n.Lk)("span",ae,"单号："+(0,i.v_)(e.number),1),(0,n.Lk)("span",le,(0,i.v_)(t.formatTime(e.createTime)),1)]),(0,n.Lk)("div",{class:"message-content",onClick:a=>t.handleMessageClick(e)},[(0,n.Lk)("h4",ne,(0,i.v_)(e.title),1),(0,n.Lk)("p",ie,(0,i.v_)(e.summary),1)],8,te),(0,n.Lk)("div",oe,[(0,n.Lk)("span",re,(0,i.v_)(e.isSystem?"系统自动":"人工发送"),1),(0,n.Lk)("span",{class:(0,i.C4)(["message-status",{unread:!e.read}])},(0,i.v_)(e.read?"已读":"未读"),3)])],2)))),128))])),_:1}),(0,n.bF)(c,{label:"增值服务",name:"value-added"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.valueAddedMessages,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:(0,i.C4)(["message-item",{unread:!e.read}])},[(0,n.Lk)("div",se,[a[4]||(a[4]=(0,n.Lk)("span",{class:"message-type value-added"},"增值服务",-1)),(0,n.Lk)("span",de,"单号："+(0,i.v_)(e.number),1),(0,n.Lk)("span",ue,(0,i.v_)(t.formatTime(e.createTime)),1)]),(0,n.Lk)("div",{class:"message-content",onClick:a=>t.handleMessageClick(e)},[(0,n.Lk)("h4",me,(0,i.v_)(e.title),1),(0,n.Lk)("p",ce,(0,i.v_)(e.summary),1)],8,pe),(0,n.Lk)("div",be,[(0,n.Lk)("span",ve,(0,i.v_)(e.isSystem?"系统自动":"人工发送"),1),(0,n.Lk)("span",{class:(0,i.C4)(["message-status",{unread:!e.read}])},(0,i.v_)(e.read?"已读":"未读"),3)])],2)))),128))])),_:1}),(0,n.bF)(c,{label:"系统公告",name:"announcement"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.announcementMessages,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:(0,i.C4)(["message-item",{unread:!e.read}])},[(0,n.Lk)("div",ge,[a[5]||(a[5]=(0,n.Lk)("span",{class:"message-type announcement"},"系统公告",-1)),(0,n.Lk)("span",he,"单号："+(0,i.v_)(e.number),1),(0,n.Lk)("span",ke,(0,i.v_)(t.formatTime(e.createTime)),1)]),(0,n.Lk)("div",{class:"message-content",onClick:a=>t.handleMessageClick(e)},[(0,n.Lk)("h4",ye,(0,i.v_)(e.title),1),(0,n.Lk)("p",Ce,(0,i.v_)(e.summary),1)],8,fe),(0,n.Lk)("div",we,[(0,n.Lk)("span",Te,(0,i.v_)(e.isSystem?"系统自动":"人工发送"),1),(0,n.Lk)("span",{class:(0,i.C4)(["message-status",{unread:!e.read}])},(0,i.v_)(e.read?"已读":"未读"),3)])],2)))),128))])),_:1}),(0,n.bF)(c,{label:"管理员信息",name:"admin"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.adminMessages,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:(0,i.C4)(["message-item",{unread:!e.read}])},[(0,n.Lk)("div",Fe,[a[6]||(a[6]=(0,n.Lk)("span",{class:"message-type admin"},"管理员信息",-1)),(0,n.Lk)("span",Le,"单号："+(0,i.v_)(e.number),1),(0,n.Lk)("span",Se,(0,i.v_)(t.formatTime(e.createTime)),1)]),(0,n.Lk)("div",{class:"message-content",onClick:a=>t.handleMessageClick(e)},[(0,n.Lk)("h4",_e,(0,i.v_)(e.title),1),(0,n.Lk)("p",De,(0,i.v_)(e.summary),1)],8,Ve),(0,n.Lk)("div",Ae,[(0,n.Lk)("span",Ne,(0,i.v_)(e.isSystem?"系统自动":"人工发送"),1),(0,n.Lk)("span",{class:(0,i.C4)(["message-status",{unread:!e.read}])},(0,i.v_)(e.read?"已读":"未读"),3)])],2)))),128))])),_:1})])),_:1},8,["modelValue"])])])),_:1},8,["modelValue","before-close"])])}var Pe=l(953),xe=l(5220),We=l(8548),Ee=l(6340),Re=l(3366);const Ie={name:"MessageNotification",components:{Bell:We.IrQ},setup(){const e=(0,xe.rd)(),a=(0,Pe.KR)(!1),l=(0,Pe.KR)("all"),t=(0,Pe.KR)([{id:1,type:"command",number:"CMD20240315001",title:"新的指令工单",summary:"您有一个新的指令工单需要处理",createTime:new Date,read:!1,isSystem:!0,orderStatus:"pending"},{id:2,type:"exception",number:"EXP20240315001",title:"异常工单提醒",summary:"发现异常情况，请及时处理",createTime:new Date(Date.now()-18e5),read:!1,isSystem:!0,orderStatus:"processing"},{id:3,type:"value-added",number:"VAS20240315001",title:"增值服务通知",summary:"您申请的增值服务已受理",createTime:new Date(Date.now()-36e5),read:!0,isSystem:!1,orderStatus:"completed"},{id:4,type:"announcement",number:"ANN20240315001",title:"系统维护通知",summary:"系统将于今晚进行例行维护",createTime:new Date(Date.now()-72e5),read:!0,isSystem:!0,orderStatus:"scheduled"},{id:5,type:"admin",number:"ADM20240315001",title:"管理员通知",summary:"请及时更新您的个人信息",createTime:new Date(Date.now()-864e5),read:!0,isSystem:!1,orderStatus:"resolved"}]),i=(0,n.EW)((()=>t.value.filter((e=>!e.read)).length)),o=(0,n.EW)((()=>t.value.filter((e=>"command"===e.type)))),r=(0,n.EW)((()=>t.value.filter((e=>"exception"===e.type)))),s=(0,n.EW)((()=>t.value.filter((e=>"value-added"===e.type)))),d=(0,n.EW)((()=>t.value.filter((e=>"announcement"===e.type)))),u=(0,n.EW)((()=>t.value.filter((e=>"admin"===e.type)))),p=e=>{const a={command:"指令工单",exception:"异常工单","value-added":"增值服务",announcement:"系统公告",admin:"管理员信息"};return a[e]||"未知类型"},m=e=>{const a={pending:"待开始",processing:"处理中",scheduled:"已安排",completed:"已完成",resolved:"已解决",cancelled:"已取消"};return a[e]||"未知状态"},c=e=>{const a={pending:"info",processing:"warning",scheduled:"primary",completed:"success",resolved:"success",cancelled:"danger"};return a[e]||"info"},b=(0,Re.A)((()=>{a.value=!a.value}),200),v=(0,Re.A)((e=>{e()}),200),g=(0,Re.A)((a=>{a.read=!0,e.push({path:"/messages/detail",query:{id:a.id}})}),200);return{drawerVisible:a,activeTab:l,messages:t,unreadCount:i,commandMessages:o,exceptionMessages:r,valueAddedMessages:s,announcementMessages:d,adminMessages:u,formatTime:Ee.f,getTypeText:p,getOrderStatusText:m,getOrderStatusType:c,toggleMessageList:b,handleClose:v,handleMessageClick:g}}};var Oe=l(6262);const Ue=(0,Oe.A)(Ie,[["render",Me],["__scopeId","data-v-76c7ce19"]]),Ke=Ue,ze={name:"App",components:{MessageNotification:Ke},data(){return{isCollapsed:!1,activeMenu:"/",expandedMenus:[]}},methods:{toggleCollapse(){this.isCollapsed=!this.isCollapsed},toggleSubmenu(e){const a=this.expandedMenus.indexOf(e);-1===a?this.expandedMenus.push(e):this.expandedMenus.splice(a,1)},navigateTo(e){this.activeMenu=e,this.$router.push(e)},updateExpandedMenus(e){this.expandedMenus=this.getMenuParents(e,!0),console.log("Updated expanded menus for path",e,":",this.expandedMenus)},getMenuParents(e,a=!1){const l=[],t=this.getMenuHierarchy();let n=a?this.findMenuKeyByPath(e):e;if(!n)return l;let i=t[n];while(i)l.includes(i)||l.unshift(i),i=t[i];return Object.prototype.hasOwnProperty.call(t,n)&&(l.includes(n)||l.push(n)),[...new Set(l)]},findMenuKeyByPath(e){const a={"/dockyard":"overseas","/newfbx":"overseas","/lastmile/appointment":"overseas","/dispatch/outgoing-batch":"lastmile","/appointment/list":"lastmile","/supplier/appointment-management":"lastmile","/admin/quote-management/amazon-warehouse":"supplier-appointment","/dispatch/delivery-trains":"inventory","/tms/driver-check-in":"inventory","/load-appointment/manage":"load-appointment","/load-appointment/settings":"load-appointment","/supplier/mobile-app/driver-dispatch":"supplier-mobile-app","/supplier/mobile-app/stocking":"supplier-mobile-app","/supplier/mobile-app/outbound":"supplier-mobile-app","/work-order/command":"work-order","/work-order/exception":"work-order","/work-order/alert":"work-order","/work-order/value-added":"work-order","/work-order/analysis":"work-order","/messages/list":"internal-message","/messages/manage":"internal-message","/messages/email-management/accounts":"email-management","/messages/email-management/templates":"email-management","/messages/email-management/logs":"email-management","/supplier/order/seas-order":"supplier-order","/supplier/order/delivery-order":"supplier-order","/admin/quote-management/fixed-quote":"supplier-quote","/admin/quote-management/inquiry":"supplier-quote","/admin/quote-management/bidding":"supplier-quote","/admin/quote-management/comparison-history":"supplier-quote","/admin/rating-management/dashboard":"supplier-rating","/admin/rating-management/field-rule-config":"supplier-rating","/admin/rating-management/metric-rule-config":"supplier-rating","/admin/rating-management/indicator-config":"supplier-rating","/admin/rating-management/rules-config":"supplier-rating","/admin/rating-management/supplier-deduction-details":"supplier-rating","/admin/supplier-management":"admin","/admin/role-management":"admin","/admin/operation-log":"admin","/admin/vehicle-management":"admin","/admin/driver-management":"admin","/admin/gps-tracking":"admin","/admin/alert-management":"admin","/table-demo":"admin","/admin/contract-management/list":"admin-contract","/admin/contract-management/templates":"admin-contract","/admin/tags":"admin-tag","/admin/tag-groups":"admin-tag","/admin/tag-management-new/list":"admin-tag","/newfbx-visactor":"test"};if(a[e])return a[e];let l=null,t=0;for(const i in a)e.startsWith(i)&&i.length>t&&(t=i.length,l=a[i]);if(l)return l;const n=this.getMenuHierarchy();for(const i in n)if(e===`/${i}`)return i;return null},getMenuHierarchy(){return{overseas:null,lastmile:null,"supplier-appointment":null,inventory:null,"supplier-mobile-app":null,"work-order":null,messages:null,supplier:null,admin:null,test:null,"load-appointment":"inventory","internal-message":"messages","email-management":"messages","supplier-order":"supplier","supplier-quote":"supplier","supplier-rating":"supplier","admin-contract":"admin","admin-tag":"admin"}}},created(){this.activeMenu=this.$route.path,this.updateExpandedMenus(this.$route.path)},watch:{$route(e){this.activeMenu=e.path,this.updateExpandedMenus(e.path)}}},Xe=(0,Oe.A)(ze,[["render",P]]),Be=Xe,$e={class:"home-container"},Ge={class:"dashboard"},qe={class:"card-footer"},Je={class:"card-footer"};function Qe(e,a,l,t,i,o){const r=(0,n.g2)("router-link"),s=(0,n.g2)("el-card"),d=(0,n.g2)("el-col"),u=(0,n.g2)("el-row");return(0,n.uX)(),(0,n.CE)("div",$e,[a[7]||(a[7]=(0,n.Lk)("h1",null,"联宇物流系统",-1)),(0,n.Lk)("div",Ge,[(0,n.bF)(u,{gutter:20},{default:(0,n.k6)((()=>[(0,n.bF)(d,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(s,{class:"dashboard-card"},{default:(0,n.k6)((()=>[a[1]||(a[1]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"FBX预约管理")],-1)),a[2]||(a[2]=(0,n.Lk)("div",{class:"card-content"},[(0,n.Lk)("div",{class:"stat-item"},[(0,n.Lk)("div",{class:"stat-label"},"今日预约"),(0,n.Lk)("div",{class:"stat-value"},"12")]),(0,n.Lk)("div",{class:"stat-item"},[(0,n.Lk)("div",{class:"stat-label"},"待处理"),(0,n.Lk)("div",{class:"stat-value"},"35")]),(0,n.Lk)("div",{class:"stat-item"},[(0,n.Lk)("div",{class:"stat-label"},"已完成"),(0,n.Lk)("div",{class:"stat-value"},"128")])],-1)),(0,n.Lk)("div",qe,[(0,n.bF)(r,{to:"/fbx",class:"view-more"},{default:(0,n.k6)((()=>a[0]||(a[0]=[(0,n.eW)("查看更多")]))),_:1})])])),_:1})])),_:1}),(0,n.bF)(d,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(s,{class:"dashboard-card"},{default:(0,n.k6)((()=>[a[4]||(a[4]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"海柜停车图")],-1)),a[5]||(a[5]=(0,n.Lk)("div",{class:"card-content"},[(0,n.Lk)("div",{class:"stat-item"},[(0,n.Lk)("div",{class:"stat-label"},"当前停靠"),(0,n.Lk)("div",{class:"stat-value"},"8")]),(0,n.Lk)("div",{class:"stat-item"},[(0,n.Lk)("div",{class:"stat-label"},"今日到达"),(0,n.Lk)("div",{class:"stat-value"},"3")]),(0,n.Lk)("div",{class:"stat-item"},[(0,n.Lk)("div",{class:"stat-label"},"明日预计"),(0,n.Lk)("div",{class:"stat-value"},"5")])],-1)),(0,n.Lk)("div",Je,[(0,n.bF)(r,{to:"/ockyard",class:"view-more"},{default:(0,n.k6)((()=>a[3]||(a[3]=[(0,n.eW)("查看更多")]))),_:1})])])),_:1})])),_:1}),(0,n.bF)(d,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(s,{class:"dashboard-card"},{default:(0,n.k6)((()=>a[6]||(a[6]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"系统概览")],-1),(0,n.Lk)("div",{class:"card-content"},[(0,n.Lk)("div",{class:"stat-item"},[(0,n.Lk)("div",{class:"stat-label"},"用户数"),(0,n.Lk)("div",{class:"stat-value"},"24")]),(0,n.Lk)("div",{class:"stat-item"},[(0,n.Lk)("div",{class:"stat-label"},"今日操作"),(0,n.Lk)("div",{class:"stat-value"},"156")]),(0,n.Lk)("div",{class:"stat-item"},[(0,n.Lk)("div",{class:"stat-label"},"系统消息"),(0,n.Lk)("div",{class:"stat-value"},"3")])],-1),(0,n.Lk)("div",{class:"card-footer"},[(0,n.Lk)("a",{href:"#",class:"view-more"},"查看更多")],-1)]))),_:1})])),_:1})])),_:1})])])}const He={name:"HomeView"},je=(0,Oe.A)(He,[["render",Qe],["__scopeId","data-v-065e645d"]]),Ye=je,Ze={class:"appointment-management"},ea={class:"card-header"},aa={class:"header-buttons"},la={class:"search-area"},ta={class:"view-management"},na=["onDblclick"],ia={key:1},oa=["onDblclick"],ra={key:1},sa=["onDblclick"],da={key:1},ua=["onDblclick"],pa={key:1},ma=["onDblclick"],ca={key:1},ba=["onDblclick"],va={key:1},ga=["onDblclick"],ha={key:1},ka=["onDblclick"],fa={key:1},ya=["onDblclick"],Ca=["onDblclick"],wa=["onDblclick"],Ta={key:1},Fa=["onDblclick"],La={key:1},Sa={class:"dialog-footer"},Va={class:"view-options-menu"},_a={class:"group-settings"},Da={class:"group-level"},Aa={class:"group-level"},Na={class:"group-level"},Ma={class:"dialog-footer"},Pa={class:"sort-settings"},xa={class:"sort-actions"},Wa={class:"dialog-footer"},Ea={class:"column-settings"},Ra={class:"column-settings-header"},Ia={class:"column-list"},Oa={class:"dialog-footer"};function Ua(e,a,l,o,r,s){const d=(0,n.g2)("el-button"),u=(0,n.g2)("el-option"),p=(0,n.g2)("el-select"),m=(0,n.g2)("el-form-item"),c=(0,n.g2)("el-input"),b=(0,n.g2)("el-form"),v=(0,n.g2)("el-radio-button"),g=(0,n.g2)("el-radio-group"),h=(0,n.g2)("el-tag"),k=(0,n.g2)("el-table-column"),f=(0,n.g2)("el-date-picker"),y=(0,n.g2)("el-dropdown-item"),C=(0,n.g2)("el-dropdown-menu"),w=(0,n.g2)("el-dropdown"),T=(0,n.g2)("groupable-table"),F=(0,n.g2)("el-card"),L=(0,n.g2)("el-dialog"),S=(0,n.g2)("filter-panel"),V=(0,n.g2)("el-checkbox"),_=(0,n.g2)("el-checkbox-group"),D=(0,n.gN)("focus"),A=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",Ze,[(0,n.bF)(F,{class:"box-card"},{header:(0,n.k6)((()=>[(0,n.Lk)("div",ea,[a[56]||(a[56]=(0,n.Lk)("span",null,"预约管理",-1)),(0,n.Lk)("div",aa,[(0,n.bF)(d,{type:"primary",size:"small",onClick:s.handleAdd},{default:(0,n.k6)((()=>a[54]||(a[54]=[(0,n.eW)("添加预约")]))),_:1},8,["onClick"]),(0,n.bF)(d,{type:"info",size:"small",onClick:s.showLogs},{default:(0,n.k6)((()=>a[55]||(a[55]=[(0,n.eW)("操作日志")]))),_:1},8,["onClick"])])])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",la,[(0,n.bF)(b,{inline:!0,model:r.searchForm,class:"demo-form-inline"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{label:"平台"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{modelValue:r.searchForm.platform,"onUpdate:modelValue":a[0]||(a[0]=e=>r.searchForm.platform=e),placeholder:"请选择平台",style:{width:"200px"}},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"全部",value:""}),(0,n.bF)(u,{label:"Amazon",value:"Amazon"}),(0,n.bF)(u,{label:"Walmart",value:"Walmart"}),(0,n.bF)(u,{label:"eBay",value:"eBay"}),(0,n.bF)(u,{label:"Shopify",value:"Shopify"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"仓库代码"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{modelValue:r.searchForm.warehouseCode,"onUpdate:modelValue":a[1]||(a[1]=e=>r.searchForm.warehouseCode=e),placeholder:"请输入仓库代码"},null,8,["modelValue"])])),_:1}),(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,{type:"primary",onClick:s.handleSearch},{default:(0,n.k6)((()=>a[57]||(a[57]=[(0,n.eW)("查询")]))),_:1},8,["onClick"]),(0,n.bF)(d,{onClick:s.resetForm},{default:(0,n.k6)((()=>a[58]||(a[58]=[(0,n.eW)("重置")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),(0,n.Lk)("div",ta,[a[64]||(a[64]=(0,n.Lk)("span",{class:"view-label"},null,-1)),(0,n.bF)(g,{modelValue:r.currentView,"onUpdate:modelValue":a[2]||(a[2]=e=>r.currentView=e),size:"small",class:"status-view-group"},{default:(0,n.k6)((()=>[(0,n.bF)(v,{value:"all"},{default:(0,n.k6)((()=>[(0,n.eW)("全部("+(0,i.v_)(s.total)+")",1)])),_:1}),(0,n.bF)(v,{value:"unused"},{default:(0,n.k6)((()=>[(0,n.eW)("未使用("+(0,i.v_)(s.getStatusCount("unused"))+")",1)])),_:1}),(0,n.bF)(v,{value:"used"},{default:(0,n.k6)((()=>[(0,n.eW)("已使用("+(0,i.v_)(s.getStatusCount("used"))+")",1)])),_:1}),(0,n.bF)(v,{value:"amazon_deleted"},{default:(0,n.k6)((()=>[(0,n.eW)("亚马逊删约("+(0,i.v_)(s.getStatusCount("amazon_deleted"))+")",1)])),_:1}),(0,n.bF)(v,{value:"deleted"},{default:(0,n.k6)((()=>[(0,n.eW)("删约("+(0,i.v_)(s.getStatusCount("deleted"))+")",1)])),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.customViews,(e=>((0,n.uX)(),(0,n.Wv)(v,{key:e.id,label:e.id,onContextmenu:(0,t.D$)((a=>s.handleContextMenu(a,e)),["prevent"])},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.name),1)])),_:2},1032,["label","onContextmenu"])))),128))])),_:1},8,["modelValue"]),(0,n.bF)(d,{type:"text",size:"small",onClick:s.handleSaveView},{default:(0,n.k6)((()=>a[59]||(a[59]=[(0,n.eW)("新增视图")]))),_:1},8,["onClick"]),(0,n.bF)(d,{type:"text",size:"small",onClick:s.showGroupModal},{default:(0,n.k6)((()=>a[60]||(a[60]=[(0,n.eW)("高级分组")]))),_:1},8,["onClick"]),(0,n.bF)(d,{type:"text",size:"small",onClick:s.showSortModal},{default:(0,n.k6)((()=>a[61]||(a[61]=[(0,n.eW)("高级排序")]))),_:1},8,["onClick"]),(0,n.bF)(d,{type:"text",size:"small",onClick:s.showFilterPanel},{default:(0,n.k6)((()=>a[62]||(a[62]=[(0,n.eW)("筛选")]))),_:1},8,["onClick"]),(0,n.bF)(d,{type:"text",size:"small",onClick:s.showColumnSettings},{default:(0,n.k6)((()=>a[63]||(a[63]=[(0,n.eW)("字段配置")]))),_:1},8,["onClick"])]),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(T,{ref:"mainTable",data:r.displayData,"row-key":"id","group-fields":r.groupField?[r.groupField]:[],"show-selection":!0,"show-group-column":!!r.groupField,"group-column-label":r.groupField?s.getGroupColumnLabel(r.groupField):"分组","default-expand-all":!1,"show-pagination":!0,"current-page":r.currentPage,"page-size":r.pageSize,"page-sizes":[10,20,50,100],total:s.total,onSelectionChange:s.handleSelectionChange,onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange,onCellClick:s.handleCellClick,onCellDblclick:s.handleCellDbClick,style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)(k,{prop:"platform",label:"平台",width:"100"},{default:(0,n.k6)((e=>[(0,n.bF)(h,{type:s.getPlatformType(e.row.platform)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.row.platform),1)])),_:2},1032,["type"])])),_:1}),(0,n.bF)(k,{prop:"warehouseCode",label:"仓库代码",width:"120"},{default:(0,n.k6)((e=>[e.row.isGroup?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"editable-cell",onDblclick:a=>s.handleCellDbClick(e.row,"warehouseCode")},[r.editingCell.rowId===e.row.id&&"warehouseCode"===r.editingCell.prop?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(c,{key:0,modelValue:r.editingCell.value,"onUpdate:modelValue":a[3]||(a[3]=e=>r.editingCell.value=e),size:"small",onBlur:a=>s.handleCellEditConfirm(e.row,"warehouseCode"),onKeyup:(0,t.jR)((a=>s.handleCellEditConfirm(e.row,"warehouseCode")),["enter"])},null,8,["modelValue","onBlur","onKeyup"])),[[D]]):((0,n.uX)(),(0,n.CE)("span",ia,(0,i.v_)(e.row.warehouseCode),1))],40,na))])),_:1}),(0,n.bF)(k,{prop:"account",label:"预约账户",width:"120"},{default:(0,n.k6)((e=>[e.row.isGroup?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"editable-cell",onDblclick:a=>s.handleCellDbClick(e.row,"account")},[r.editingCell.rowId===e.row.id&&"account"===r.editingCell.prop?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(c,{key:0,modelValue:r.editingCell.value,"onUpdate:modelValue":a[4]||(a[4]=e=>r.editingCell.value=e),size:"small",onBlur:a=>s.handleCellEditConfirm(e.row,"account"),onKeyup:(0,t.jR)((a=>s.handleCellEditConfirm(e.row,"account")),["enter"])},null,8,["modelValue","onBlur","onKeyup"])),[[D]]):((0,n.uX)(),(0,n.CE)("span",ra,(0,i.v_)(e.row.account),1))],40,oa))])),_:1}),(0,n.bF)(k,{prop:"appointmentId",label:"预约号",width:"150"},{default:(0,n.k6)((e=>[e.row.isGroup?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"editable-cell",onDblclick:a=>s.handleCellDbClick(e.row,"appointmentId")},[r.editingCell.rowId===e.row.id&&"appointmentId"===r.editingCell.prop?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(c,{key:0,modelValue:r.editingCell.value,"onUpdate:modelValue":a[5]||(a[5]=e=>r.editingCell.value=e),size:"small",onBlur:a=>s.handleCellEditConfirm(e.row,"appointmentId"),onKeyup:(0,t.jR)((a=>s.handleCellEditConfirm(e.row,"appointmentId")),["enter"])},null,8,["modelValue","onBlur","onKeyup"])),[[D]]):((0,n.uX)(),(0,n.CE)("span",da,(0,i.v_)(e.row.appointmentId),1))],40,sa))])),_:1}),(0,n.bF)(k,{prop:"pcNumber",label:"PC号",width:"120"},{default:(0,n.k6)((e=>[e.row.isGroup?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"editable-cell",onDblclick:a=>s.handleCellDbClick(e.row,"pcNumber")},[r.editingCell.rowId===e.row.id&&"pcNumber"===r.editingCell.prop?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(c,{key:0,modelValue:r.editingCell.value,"onUpdate:modelValue":a[6]||(a[6]=e=>r.editingCell.value=e),size:"small",onBlur:a=>s.handleCellEditConfirm(e.row,"pcNumber"),onKeyup:(0,t.jR)((a=>s.handleCellEditConfirm(e.row,"pcNumber")),["enter"])},null,8,["modelValue","onBlur","onKeyup"])),[[D]]):((0,n.uX)(),(0,n.CE)("span",pa,(0,i.v_)(e.row.pcNumber),1))],40,ua))])),_:1}),(0,n.bF)(k,{prop:"crdd",label:"CRDD",width:"160"},{default:(0,n.k6)((e=>[e.row.isGroup?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"editable-cell",onDblclick:a=>s.handleCellDbClick(e.row,"crdd")},[r.editingCell.rowId===e.row.id&&"crdd"===r.editingCell.prop?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(f,{key:0,modelValue:r.editingCell.value,"onUpdate:modelValue":a[7]||(a[7]=e=>r.editingCell.value=e),type:"datetime",size:"small","value-format":"YYYY-MM-DD HH:mm:ss",onBlur:a=>s.handleCellEditConfirm(e.row,"crdd")},null,8,["modelValue","onBlur"])),[[D]]):((0,n.uX)(),(0,n.CE)("span",ca,(0,i.v_)(e.row.crdd),1))],40,ma))])),_:1}),(0,n.bF)(k,{prop:"appointmentType",label:"预约类型",width:"120"},{default:(0,n.k6)((e=>[e.row.isGroup?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"editable-cell",onDblclick:a=>s.handleCellDbClick(e.row,"appointmentType")},[r.editingCell.rowId===e.row.id&&"appointmentType"===r.editingCell.prop?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(p,{key:0,modelValue:r.editingCell.value,"onUpdate:modelValue":a[8]||(a[8]=e=>r.editingCell.value=e),size:"small",onBlur:a=>s.handleCellEditConfirm(e.row,"appointmentType"),onChange:a=>s.handleCellEditConfirm(e.row,"appointmentType")},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"地板",value:"floor"}),(0,n.bF)(u,{label:"卡板",value:"pallet"})])),_:2},1032,["modelValue","onBlur","onChange"])),[[D]]):((0,n.uX)(),(0,n.CE)("span",va,(0,i.v_)("floor"===e.row.appointmentType?"地板":"卡板"),1))],40,ba))])),_:1}),(0,n.bF)(k,{prop:"appointmentTime",label:"预约时间",width:"160"},{default:(0,n.k6)((e=>[e.row.isGroup?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"editable-cell",onDblclick:a=>s.handleCellDbClick(e.row,"appointmentTime")},[r.editingCell.rowId===e.row.id&&"appointmentTime"===r.editingCell.prop?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(f,{key:0,modelValue:r.editingCell.value,"onUpdate:modelValue":a[9]||(a[9]=e=>r.editingCell.value=e),type:"datetime",size:"small",onBlur:a=>s.handleCellEditConfirm(e.row,"appointmentTime")},null,8,["modelValue","onBlur"])),[[D]]):((0,n.uX)(),(0,n.CE)("span",ha,(0,i.v_)(e.row.appointmentTime),1))],40,ga))])),_:1}),(0,n.bF)(k,{prop:"earliestAppointmentTime",label:"最早预约时间",width:"160"},{default:(0,n.k6)((e=>[e.row.isGroup?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"editable-cell",onDblclick:a=>s.handleCellDbClick(e.row,"earliestAppointmentTime")},[r.editingCell.rowId===e.row.id&&"earliestAppointmentTime"===r.editingCell.prop?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(f,{key:0,modelValue:r.editingCell.value,"onUpdate:modelValue":a[10]||(a[10]=e=>r.editingCell.value=e),type:"datetime",size:"small",onBlur:a=>s.handleCellEditConfirm(e.row,"earliestAppointmentTime")},null,8,["modelValue","onBlur"])),[[D]]):((0,n.uX)(),(0,n.CE)("span",fa,(0,i.v_)(e.row.earliestAppointmentTime),1))],40,ka))])),_:1}),(0,n.bF)(k,{prop:"status",label:"状态",width:"120"},{default:(0,n.k6)((e=>[e.row.isGroup?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"editable-cell",onDblclick:a=>s.handleCellDbClick(e.row,"status")},[r.editingCell.rowId===e.row.id&&"status"===r.editingCell.prop?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(p,{key:0,modelValue:r.editingCell.value,"onUpdate:modelValue":a[11]||(a[11]=e=>r.editingCell.value=e),size:"small",onBlur:a=>s.handleCellEditConfirm(e.row,"status"),onChange:a=>s.handleCellEditConfirm(e.row,"status")},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"未使用",value:"unused"}),(0,n.bF)(u,{label:"已使用",value:"used"}),(0,n.bF)(u,{label:"亚马逊删约",value:"amazon_deleted"}),(0,n.bF)(u,{label:"删约",value:"deleted"})])),_:2},1032,["modelValue","onBlur","onChange"])),[[D]]):((0,n.uX)(),(0,n.Wv)(h,{key:1,type:s.getStatusType(e.row.status)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(s.getStatusText(e.row.status)),1)])),_:2},1032,["type"]))],40,ya))])),_:1}),(0,n.bF)(k,{prop:"abnormalStatus",label:"异常状态",width:"120"},{default:(0,n.k6)((e=>[e.row.isGroup?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"editable-cell",onDblclick:a=>s.handleCellDbClick(e.row,"abnormalStatus")},[r.editingCell.rowId===e.row.id&&"abnormalStatus"===r.editingCell.prop?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(p,{key:0,modelValue:r.editingCell.value,"onUpdate:modelValue":a[12]||(a[12]=e=>r.editingCell.value=e),size:"small",onBlur:a=>s.handleCellEditConfirm(e.row,"abnormalStatus"),onChange:a=>s.handleCellEditConfirm(e.row,"abnormalStatus")},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"正常",value:"normal"}),(0,n.bF)(u,{label:"NCNS",value:"ncns"}),(0,n.bF)(u,{label:"卖约",value:"sold"}),(0,n.bF)(u,{label:"亚马逊删约",value:"amazon_deleted"}),(0,n.bF)(u,{label:"其他异常",value:"other"})])),_:2},1032,["modelValue","onBlur","onChange"])),[[D]]):((0,n.uX)(),(0,n.Wv)(h,{key:1,type:s.getAbnormalStatusType(e.row.abnormalStatus)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(s.getAbnormalStatusText(e.row.abnormalStatus)),1)])),_:2},1032,["type"]))],40,Ca))])),_:1}),(0,n.bF)(k,{prop:"followUpRecord",label:"跟进记录","min-width":"150"},{default:(0,n.k6)((e=>[e.row.isGroup?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"editable-cell",onDblclick:a=>s.handleCellDbClick(e.row,"followUpRecord")},[r.editingCell.rowId===e.row.id&&"followUpRecord"===r.editingCell.prop?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(c,{key:0,modelValue:r.editingCell.value,"onUpdate:modelValue":a[13]||(a[13]=e=>r.editingCell.value=e),type:"textarea",size:"small",onBlur:a=>s.handleCellEditConfirm(e.row,"followUpRecord"),onKeyup:(0,t.jR)((a=>s.handleCellEditConfirm(e.row,"followUpRecord")),["enter"])},null,8,["modelValue","onBlur","onKeyup"])),[[D]]):((0,n.uX)(),(0,n.CE)("span",Ta,(0,i.v_)(e.row.followUpRecord),1))],40,wa))])),_:1}),(0,n.bF)(k,{prop:"memo",label:"Memo","min-width":"150"},{default:(0,n.k6)((e=>[e.row.isGroup?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:"editable-cell",onDblclick:a=>s.handleCellDbClick(e.row,"memo")},[r.editingCell.rowId===e.row.id&&"memo"===r.editingCell.prop?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(c,{key:0,modelValue:r.editingCell.value,"onUpdate:modelValue":a[14]||(a[14]=e=>r.editingCell.value=e),type:"textarea",size:"small",onBlur:a=>s.handleCellEditConfirm(e.row,"memo"),onKeyup:(0,t.jR)((a=>s.handleCellEditConfirm(e.row,"memo")),["enter"])},null,8,["modelValue","onBlur","onKeyup"])),[[D]]):((0,n.uX)(),(0,n.CE)("span",La,(0,i.v_)(e.row.memo),1))],40,Fa))])),_:1}),(0,n.bF)(k,{label:"操作",width:"180",fixed:"right"},{default:(0,n.k6)((e=>[(0,n.bF)(d,{size:"small",onClick:a=>s.handleDetail(e.row)},{default:(0,n.k6)((()=>a[65]||(a[65]=[(0,n.eW)("详情")]))),_:2},1032,["onClick"]),(0,n.bF)(w,{onCommand:s.handleCommand,style:{"margin-left":"10px"}},{dropdown:(0,n.k6)((()=>[(0,n.bF)(C,null,{default:(0,n.k6)((()=>[(0,n.bF)(y,{command:{action:"edit",row:e.row}},{default:(0,n.k6)((()=>a[67]||(a[67]=[(0,n.eW)("修改预约")]))),_:2},1032,["command"]),(0,n.bF)(y,{command:{action:"followUp",row:e.row}},{default:(0,n.k6)((()=>a[68]||(a[68]=[(0,n.eW)("跟进记录")]))),_:2},1032,["command"]),(0,n.bF)(y,{command:{action:"delete",row:e.row}},{default:(0,n.k6)((()=>a[69]||(a[69]=[(0,n.eW)("删除")]))),_:2},1032,["command"]),(0,n.bF)(y,{command:{action:"createPC",row:e.row}},{default:(0,n.k6)((()=>a[70]||(a[70]=[(0,n.eW)("创建PC")]))),_:2},1032,["command"]),(0,n.bF)(y,{command:{action:"statistics",row:e.row}},{default:(0,n.k6)((()=>a[71]||(a[71]=[(0,n.eW)("货量统计")]))),_:2},1032,["command"])])),_:2},1024)])),default:(0,n.k6)((()=>[(0,n.bF)(d,{size:"small"},{default:(0,n.k6)((()=>a[66]||(a[66]=[(0,n.eW)(" 更多"),(0,n.Lk)("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)]))),_:1})])),_:2},1032,["onCommand"])])),_:1})])),_:1},8,["data","group-fields","show-group-column","group-column-label","current-page","page-size","total","onSelectionChange","onSizeChange","onCurrentChange","onCellClick","onCellDblclick"])),[[A,r.loading]])])),_:1}),(0,n.bF)(L,{modelValue:r.formDialogVisible,"onUpdate:modelValue":a[28]||(a[28]=e=>r.formDialogVisible=e),title:s.dialogTitle,width:"60%","before-close":s.handleCloseDialog,"destroy-on-close":""},{footer:(0,n.k6)((()=>[(0,n.Lk)("span",Sa,[(0,n.bF)(d,{onClick:s.handleCloseDialog},{default:(0,n.k6)((()=>a[72]||(a[72]=[(0,n.eW)("取消")]))),_:1},8,["onClick"]),(0,n.bF)(d,{type:"primary",onClick:s.handleSubmitForm},{default:(0,n.k6)((()=>a[73]||(a[73]=[(0,n.eW)("保存")]))),_:1},8,["onClick"])])])),default:(0,n.k6)((()=>[(0,n.bF)(b,{model:r.currentAppointment,ref:"appointmentFormRef","label-width":"120px"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{label:"平台",prop:"platform",rules:{required:!0,message:"请选择平台",trigger:"change"}},{default:(0,n.k6)((()=>[(0,n.bF)(p,{modelValue:r.currentAppointment.platform,"onUpdate:modelValue":a[15]||(a[15]=e=>r.currentAppointment.platform=e),placeholder:"请选择平台"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"Amazon",value:"Amazon"}),(0,n.bF)(u,{label:"Walmart",value:"Walmart"}),(0,n.bF)(u,{label:"eBay",value:"eBay"}),(0,n.bF)(u,{label:"Shopify",value:"Shopify"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"仓库代码",prop:"warehouseCode",rules:{required:!0,message:"请输入仓库代码",trigger:"blur"}},{default:(0,n.k6)((()=>[(0,n.bF)(c,{modelValue:r.currentAppointment.warehouseCode,"onUpdate:modelValue":a[16]||(a[16]=e=>r.currentAppointment.warehouseCode=e),placeholder:"请输入仓库代码"},null,8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"预约账户",prop:"account"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{modelValue:r.currentAppointment.account,"onUpdate:modelValue":a[17]||(a[17]=e=>r.currentAppointment.account=e),placeholder:"请输入预约账户"},null,8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"预约号",prop:"appointmentId",rules:{required:!0,message:"请输入预约号",trigger:"blur"}},{default:(0,n.k6)((()=>[(0,n.bF)(c,{modelValue:r.currentAppointment.appointmentId,"onUpdate:modelValue":a[18]||(a[18]=e=>r.currentAppointment.appointmentId=e),placeholder:"请输入预约号"},null,8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"PC号",prop:"pcNumber"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{modelValue:r.currentAppointment.pcNumber,"onUpdate:modelValue":a[19]||(a[19]=e=>r.currentAppointment.pcNumber=e),placeholder:"请输入PC号"},null,8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"CRDD",prop:"crdd"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:r.currentAppointment.crdd,"onUpdate:modelValue":a[20]||(a[20]=e=>r.currentAppointment.crdd=e),type:"datetime",placeholder:"选择CRDD","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"预约类型",prop:"appointmentType"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{modelValue:r.currentAppointment.appointmentType,"onUpdate:modelValue":a[21]||(a[21]=e=>r.currentAppointment.appointmentType=e),placeholder:"请选择预约类型"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"地板",value:"floor"}),(0,n.bF)(u,{label:"卡板",value:"pallet"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"预约时间",prop:"appointmentTime"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:r.currentAppointment.appointmentTime,"onUpdate:modelValue":a[22]||(a[22]=e=>r.currentAppointment.appointmentTime=e),type:"datetime",placeholder:"选择预约时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"最早预约时间",prop:"earliestAppointmentTime"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:r.currentAppointment.earliestAppointmentTime,"onUpdate:modelValue":a[23]||(a[23]=e=>r.currentAppointment.earliestAppointmentTime=e),type:"datetime",placeholder:"选择最早预约时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"状态",prop:"status",rules:{required:!0,message:"请选择状态",trigger:"change"}},{default:(0,n.k6)((()=>[(0,n.bF)(p,{modelValue:r.currentAppointment.status,"onUpdate:modelValue":a[24]||(a[24]=e=>r.currentAppointment.status=e),placeholder:"请选择状态"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"未使用",value:"unused"}),(0,n.bF)(u,{label:"已使用",value:"used"}),(0,n.bF)(u,{label:"亚马逊删约",value:"amazon_deleted"}),(0,n.bF)(u,{label:"删约",value:"deleted"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"异常状态",prop:"abnormalStatus"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{modelValue:r.currentAppointment.abnormalStatus,"onUpdate:modelValue":a[25]||(a[25]=e=>r.currentAppointment.abnormalStatus=e),placeholder:"请选择异常状态"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"正常",value:"normal"}),(0,n.bF)(u,{label:"NCNS",value:"ncns"}),(0,n.bF)(u,{label:"卖约",value:"sold"}),(0,n.bF)(u,{label:"亚马逊删约",value:"amazon_deleted"}),(0,n.bF)(u,{label:"其他异常",value:"other"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"跟进记录",prop:"followUpRecord"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{type:"textarea",modelValue:r.currentAppointment.followUpRecord,"onUpdate:modelValue":a[26]||(a[26]=e=>r.currentAppointment.followUpRecord=e),placeholder:"请输入跟进记录"},null,8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"Memo",prop:"memo"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{type:"textarea",modelValue:r.currentAppointment.memo,"onUpdate:modelValue":a[27]||(a[27]=e=>r.currentAppointment.memo=e),placeholder:"请输入Memo"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title","before-close"]),(0,n.bF)(S,{visible:r.filterPanelVisible,"onUpdate:visible":a[29]||(a[29]=e=>r.filterPanelVisible=e),columns:s.tableColumns,"existing-filters":r.activeFilters,"existing-logic":r.filterLogic,onApplyFilters:s.applyFilters,onCancel:s.cancelFilters},null,8,["visible","columns","existing-filters","existing-logic","onApplyFilters","onCancel"]),(0,n.bF)(L,{title:"保存视图",modelValue:r.saveViewDialogVisible,"onUpdate:modelValue":a[33]||(a[33]=e=>r.saveViewDialogVisible=e),width:"500px"},{footer:(0,n.k6)((()=>[(0,n.bF)(d,{onClick:a[32]||(a[32]=e=>r.saveViewDialogVisible=!1)},{default:(0,n.k6)((()=>a[74]||(a[74]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(d,{type:"primary",onClick:s.saveView},{default:(0,n.k6)((()=>a[75]||(a[75]=[(0,n.eW)("确定")]))),_:1},8,["onClick"])])),default:(0,n.k6)((()=>[(0,n.bF)(b,{model:r.viewForm,"label-width":"100px"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{label:"视图名称",required:""},{default:(0,n.k6)((()=>[(0,n.bF)(c,{modelValue:r.viewForm.name,"onUpdate:modelValue":a[30]||(a[30]=e=>r.viewForm.name=e),placeholder:"请输入视图名称"},null,8,["modelValue"])])),_:1}),(0,n.bF)(m,{label:"显示字段"},{default:(0,n.k6)((()=>[(0,n.bF)(_,{modelValue:r.viewForm.columns,"onUpdate:modelValue":a[31]||(a[31]=e=>r.viewForm.columns=e)},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.tableColumns,(e=>((0,n.uX)(),(0,n.Wv)(V,{key:e.prop,label:e.prop},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,n.bF)(L,{title:"视图操作",modelValue:r.viewOptionsDialogVisible,"onUpdate:modelValue":a[37]||(a[37]=e=>r.viewOptionsDialogVisible=e),width:"300px"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Va,[(0,n.Lk)("div",{class:"view-option-item",onClick:a[34]||(a[34]=(...e)=>s.handleRenameView&&s.handleRenameView(...e))},a[76]||(a[76]=[(0,n.Lk)("i",{class:"el-icon-edit"},null,-1),(0,n.Lk)("span",null,"重命名视图",-1)])),(0,n.Lk)("div",{class:"view-option-item",onClick:a[35]||(a[35]=(...e)=>s.handleCopyView&&s.handleCopyView(...e))},a[77]||(a[77]=[(0,n.Lk)("i",{class:"el-icon-document-copy"},null,-1),(0,n.Lk)("span",null,"复制视图",-1)])),(0,n.Lk)("div",{class:"view-option-item",onClick:a[36]||(a[36]=(...e)=>s.handleDeleteView&&s.handleDeleteView(...e))},a[78]||(a[78]=[(0,n.Lk)("i",{class:"el-icon-delete"},null,-1),(0,n.Lk)("span",null,"删除视图",-1)]))])])),_:1},8,["modelValue"]),(0,n.bF)(L,{title:"重命名视图",modelValue:r.renameViewDialogVisible,"onUpdate:modelValue":a[40]||(a[40]=e=>r.renameViewDialogVisible=e),width:"500px"},{footer:(0,n.k6)((()=>[(0,n.bF)(d,{onClick:a[39]||(a[39]=e=>r.renameViewDialogVisible=!1)},{default:(0,n.k6)((()=>a[79]||(a[79]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(d,{type:"primary",onClick:s.saveRenameView},{default:(0,n.k6)((()=>a[80]||(a[80]=[(0,n.eW)("确定")]))),_:1},8,["onClick"])])),default:(0,n.k6)((()=>[(0,n.bF)(b,{model:r.renameForm,"label-width":"100px"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{label:"视图名称",required:""},{default:(0,n.k6)((()=>[(0,n.bF)(c,{modelValue:r.renameForm.name,"onUpdate:modelValue":a[38]||(a[38]=e=>r.renameForm.name=e),placeholder:"请输入视图名称"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,n.bF)(L,{title:"分组设置",modelValue:r.groupModalVisible,"onUpdate:modelValue":a[45]||(a[45]=e=>r.groupModalVisible=e),width:"500px"},{footer:(0,n.k6)((()=>[(0,n.Lk)("span",Ma,[(0,n.bF)(d,{onClick:a[44]||(a[44]=e=>r.groupModalVisible=!1)},{default:(0,n.k6)((()=>a[84]||(a[84]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(d,{type:"danger",onClick:s.clearGroupSettings},{default:(0,n.k6)((()=>a[85]||(a[85]=[(0,n.eW)("清除分组")]))),_:1},8,["onClick"]),(0,n.bF)(d,{type:"primary",onClick:s.applyGroupSettings},{default:(0,n.k6)((()=>a[86]||(a[86]=[(0,n.eW)("应用")]))),_:1},8,["onClick"])])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",_a,[(0,n.Lk)("div",Da,[a[81]||(a[81]=(0,n.Lk)("span",{class:"group-level-label"},"一级分组：",-1)),(0,n.bF)(p,{modelValue:r.groupSettings.level1,"onUpdate:modelValue":a[41]||(a[41]=e=>r.groupSettings.level1=e),placeholder:"选择字段",style:{width:"280px"},clearable:""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.groupableFields,(e=>((0,n.uX)(),(0,n.Wv)(u,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,n.Lk)("div",Aa,[a[82]||(a[82]=(0,n.Lk)("span",{class:"group-level-label"},"二级分组：",-1)),(0,n.bF)(p,{modelValue:r.groupSettings.level2,"onUpdate:modelValue":a[42]||(a[42]=e=>r.groupSettings.level2=e),placeholder:"选择字段",style:{width:"280px"},clearable:""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.groupableFields,(e=>((0,n.uX)(),(0,n.Wv)(u,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,n.Lk)("div",Na,[a[83]||(a[83]=(0,n.Lk)("span",{class:"group-level-label"},"三级分组：",-1)),(0,n.bF)(p,{modelValue:r.groupSettings.level3,"onUpdate:modelValue":a[43]||(a[43]=e=>r.groupSettings.level3=e),placeholder:"选择字段",style:{width:"280px"},clearable:""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.groupableFields,(e=>((0,n.uX)(),(0,n.Wv)(u,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])])])),_:1},8,["modelValue"]),(0,n.bF)(L,{title:"排序设置",modelValue:r.sortModalVisible,"onUpdate:modelValue":a[47]||(a[47]=e=>r.sortModalVisible=e),width:"500px"},{footer:(0,n.k6)((()=>[(0,n.Lk)("span",Wa,[(0,n.bF)(d,{onClick:a[46]||(a[46]=e=>r.sortModalVisible=!1)},{default:(0,n.k6)((()=>a[89]||(a[89]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(d,{type:"danger",onClick:s.clearSortSettings},{default:(0,n.k6)((()=>a[90]||(a[90]=[(0,n.eW)("清除排序")]))),_:1},8,["onClick"]),(0,n.bF)(d,{type:"primary",onClick:s.applySortSettings},{default:(0,n.k6)((()=>a[91]||(a[91]=[(0,n.eW)("应用")]))),_:1},8,["onClick"])])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",Pa,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.sortSettings,((e,l)=>((0,n.uX)(),(0,n.CE)("div",{key:l,class:"sort-item"},[(0,n.bF)(p,{modelValue:e.field,"onUpdate:modelValue":a=>e.field=a,placeholder:"选择字段",style:{width:"200px"},clearable:""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.sortableFields,(e=>((0,n.uX)(),(0,n.Wv)(u,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,n.bF)(p,{modelValue:e.direction,"onUpdate:modelValue":a=>e.direction=a,placeholder:"排序方向",style:{width:"120px"}},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"升序",value:"asc"}),(0,n.bF)(u,{label:"降序",value:"desc"})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,n.bF)(d,{type:"danger",size:"small",onClick:e=>s.removeSortField(l)},{default:(0,n.k6)((()=>a[87]||(a[87]=[(0,n.eW)("删除")]))),_:2},1032,["onClick"])])))),128)),(0,n.Lk)("div",xa,[(0,n.bF)(d,{type:"primary",plain:"",onClick:s.addSortField},{default:(0,n.k6)((()=>a[88]||(a[88]=[(0,n.eW)("添加排序字段")]))),_:1},8,["onClick"])])])])),_:1},8,["modelValue"]),(0,n.bF)(L,{title:"字段配置",modelValue:r.columnSettingsVisible,"onUpdate:modelValue":a[50]||(a[50]=e=>r.columnSettingsVisible=e),width:"600px"},{footer:(0,n.k6)((()=>[(0,n.Lk)("span",Oa,[(0,n.bF)(d,{onClick:a[49]||(a[49]=e=>r.columnSettingsVisible=!1)},{default:(0,n.k6)((()=>a[95]||(a[95]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(d,{type:"primary",onClick:s.applyColumnSettings},{default:(0,n.k6)((()=>a[96]||(a[96]=[(0,n.eW)("确定")]))),_:1},8,["onClick"])])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",Ea,[(0,n.Lk)("div",Ra,[(0,n.bF)(V,{modelValue:r.allColumnsSelected,"onUpdate:modelValue":a[48]||(a[48]=e=>r.allColumnsSelected=e),onChange:s.handleSelectAllColumns},{default:(0,n.k6)((()=>a[92]||(a[92]=[(0,n.eW)("全选")]))),_:1},8,["modelValue","onChange"]),(0,n.bF)(d,{type:"primary",size:"small",onClick:s.resetColumnSettings},{default:(0,n.k6)((()=>a[93]||(a[93]=[(0,n.eW)("重置")]))),_:1},8,["onClick"])]),(0,n.Lk)("div",Ia,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.columnSettingsList,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.prop,class:"column-item"},[a[94]||(a[94]=(0,n.Lk)("span",{class:"drag-handle"},"≡",-1)),(0,n.bF)(V,{modelValue:e.visible,"onUpdate:modelValue":a=>e.visible=a},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.label),1)])),_:2},1032,["modelValue","onUpdate:modelValue"])])))),128))])])])),_:1},8,["modelValue"]),(0,n.bo)((0,n.Lk)("div",{class:"context-menu",style:(0,i.Tr)({left:r.contextMenuX+"px",top:r.contextMenuY+"px"})},[(0,n.Lk)("div",{class:"context-menu-item",onClick:a[51]||(a[51]=(...e)=>s.handleCopyView&&s.handleCopyView(...e))},a[97]||(a[97]=[(0,n.Lk)("span",null,"复制视图",-1)])),(0,n.Lk)("div",{class:"context-menu-item",onClick:a[52]||(a[52]=(...e)=>s.handleRenameView&&s.handleRenameView(...e))},a[98]||(a[98]=[(0,n.Lk)("span",null,"重命名",-1)])),(0,n.Lk)("div",{class:"context-menu-item",onClick:a[53]||(a[53]=(...e)=>s.handleDeleteView&&s.handleDeleteView(...e))},a[99]||(a[99]=[(0,n.Lk)("span",null,"删除",-1)]))],4),[[t.aG,r.contextMenuVisible]])])}var Ka=l(163),za=l(7918),Xa=l(2998),Ba=l(3344);const $a={name:"AppointmentManagement",components:{GroupableTable:Xa.A,FilterPanel:Ba.A},directives:{focus:{mounted(e){e.focus()}}},data(){return{searchForm:{platform:"",warehouseCode:""},tableData:[{id:"1",platform:"Amazon",warehouseCode:"ONT9",account:"Acc1",appointmentId:"AP001",appointmentTime:"2024-07-30 10:00:00",earliestAppointmentTime:"2024-07-29 09:00:00",status:"unused",followUpRecord:"首次录入",memo:"加急",pcNumber:"PC001",crdd:"2024-07-28 00:00:00",appointmentType:"floor"},{id:"2",platform:"Amazon",warehouseCode:"LAX9",account:"Acc2",appointmentId:"AP002",appointmentTime:"2024-07-31 14:30:00",earliestAppointmentTime:"2024-07-30 08:00:00",status:"used",followUpRecord:"已送达",memo:"",pcNumber:"PC002",crdd:"2024-07-29 12:00:00",appointmentType:"pallet"},{id:"3",platform:"Walmart",warehouseCode:"WMT-CA1",account:"Acc3",appointmentId:"AP003",appointmentTime:"2024-08-01 11:00:00",earliestAppointmentTime:"2024-07-31 10:00:00",status:"amazon_deleted",followUpRecord:"联系客户重新预约",memo:"货多",pcNumber:"PC003",crdd:"2024-07-30 08:30:00",appointmentType:"floor"},{id:"4",platform:"Amazon",warehouseCode:"ONT8",account:"Acc1",appointmentId:"AP004",appointmentTime:"2024-08-02 16:00:00",earliestAppointmentTime:"2024-08-01 14:00:00",status:"deleted",followUpRecord:"客户取消",memo:"",pcNumber:"PC004",crdd:"2024-07-31 15:00:00",appointmentType:"pallet"}],displayData:[],loading:!1,selectedRows:[],currentView:"all",customViews:[],saveViewDialogVisible:!1,viewOptionsDialogVisible:!1,renameViewDialogVisible:!1,viewForm:{name:"",columns:[]},currentEditingView:null,renameForm:{name:""},editingCell:{rowId:null,prop:null,value:null},currentPage:1,pageSize:10,filterPanelVisible:!1,activeFilters:[],filterLogic:"and",groupField:"",groupModalVisible:!1,groupSettings:{level1:"",level2:"",level3:""},sortModalVisible:!1,sortSettings:[{field:"",direction:"asc"}],columnSettingsVisible:!1,allColumnsSelected:!0,columnSettingsList:[],contextMenuVisible:!1,contextMenuX:0,contextMenuY:0,formDialogVisible:!1,dialogMode:"add",currentAppointment:{id:null,platform:"",warehouseCode:"",account:"",appointmentId:"",appointmentTime:"",earliestAppointmentTime:"",status:"unused",abnormalStatus:"normal",followUpRecord:"",memo:"",pcNumber:"",crdd:"",appointmentType:"floor"}}},computed:{dialogTitle(){return"add"===this.dialogMode?"新增预约":"修改预约"},total(){return this.tableData.length},tableColumns(){return[{prop:"platform",label:"平台",width:100,sortable:!0,filterType:"select",filterOptions:[{label:"Amazon",value:"Amazon"},{label:"Walmart",value:"Walmart"},{label:"eBay",value:"eBay"},{label:"Shopify",value:"Shopify"}]},{prop:"warehouseCode",label:"仓库代码",width:120,sortable:!0},{prop:"account",label:"预约账户",width:120,sortable:!0},{prop:"appointmentId",label:"预约号",width:150,sortable:!0},{prop:"pcNumber",label:"PC号",width:120,sortable:!0},{prop:"crdd",label:"CRDD",width:160,sortable:!0,filterType:"datetime"},{prop:"appointmentType",label:"预约类型",width:120,sortable:!0,filterType:"select",filterOptions:[{label:"地板",value:"floor"},{label:"卡板",value:"pallet"}]},{prop:"appointmentTime",label:"预约时间",width:160,sortable:!0,filterType:"datetime"},{prop:"earliestAppointmentTime",label:"最早预约时间",width:160,sortable:!0,filterType:"datetime"},{prop:"status",label:"状态",width:120,sortable:!0,filterType:"select",filterOptions:[{label:"未使用",value:"unused"},{label:"已使用",value:"used"},{label:"亚马逊删约",value:"amazon_deleted"},{label:"删约",value:"deleted"}]},{prop:"abnormalStatus",label:"异常状态",width:120,sortable:!0,filterType:"select",filterOptions:[{label:"正常",value:"normal"},{label:"NCNS",value:"ncns"},{label:"卖约",value:"sold"},{label:"亚马逊删约",value:"amazon_deleted"},{label:"其他异常",value:"other"}]},{prop:"followUpRecord",label:"跟进记录",minWidth:150,sortable:!1},{prop:"memo",label:"Memo",minWidth:150,sortable:!1},{prop:"operation",label:"操作",width:180,sortable:!1,fixed:"right"}]},groupableFields(){return this.tableColumns.filter((e=>e.sortable&&"operation"!==e.prop))},sortableFields(){return this.tableColumns.filter((e=>e.sortable))},hasGroupedData(){return this.displayData.some((e=>e.isGroup))}},methods:{getPlatformType(e){const a={Amazon:"",Walmart:"success",eBay:"warning",Shopify:"info"};return a[e]||"info"},getStatusType(e){const a={unused:"info",used:"success",amazon_deleted:"danger",deleted:"warning"};return a[e]||"info"},getStatusText(e){const a={unused:"未使用",used:"已使用",amazon_deleted:"亚马逊删约",deleted:"删约"};return a[e]||"未知"},getStatusCount(e){return this.tableData.filter((a=>a.status===e)).length},getGroupColumnLabel(e){const a=this.tableColumns.find((a=>a.prop===e));return a?a.label:"分组"},handleSearch(){console.log("搜索条件：",this.searchForm),this.refreshDisplayData()},resetForm(){this.searchForm={platform:"",warehouseCode:""},this.handleSearch()},refreshDisplayData(){this.loading=!0,setTimeout((()=>{let e=[...this.tableData];"all"!==this.currentView&&["unused","used","amazon_deleted","deleted"].includes(this.currentView)&&(e=e.filter((e=>e.status===this.currentView))),this.activeFilters.length>0&&(e=this.applyDataFilters(e)),this.groupField&&(e=this.applyGrouping(e,this.groupField));const a=this.customViews.find((e=>e.id===this.currentView));a&&a.config,this.displayData=e,this.loading=!1}),300)},applyDataFilters(e){return 0===this.activeFilters.length?e:e.filter((e=>{const a=this.activeFilters.map((a=>{const{field:l,operator:t,value:n}=a;if(!l||!t)return!0;const i=e[l];switch(t){case"eq":return i===n;case"neq":return i!==n;case"contains":return String(i).includes(String(n));case"notContains":return!String(i).includes(String(n));case"startsWith":return String(i).startsWith(String(n));case"endsWith":return String(i).endsWith(String(n));case"gt":return i>n;case"gte":return i>=n;case"lt":return i<n;case"lte":return i<=n;case"in":return!!Array.isArray(n)&&n.includes(i);case"notIn":return!Array.isArray(n)||!n.includes(i);default:return!0}}));return"and"===this.filterLogic?a.every(Boolean):a.some(Boolean)}))},applyGrouping(e,a){if(!a)return e;const l=[],t={};return e.forEach((e=>{const n=e[a]||"未设置";t[n]||(t[n]={id:`group_${n}`,isGroup:!0,groupLevel:1,groupName:n,groupField:a,count:0,children:[]},l.push(t[n])),t[n].children.push(e),t[n].count++})),l},handleSelectionChange(e){this.selectedRows=e},handleCellClick(e,a){console.log("单元格点击:",e,a.property)},handleCellDbClick(e,a){!e.isGroup&&["platform","warehouseCode","account","appointmentId","appointmentTime","earliestAppointmentTime","status","followUpRecord","memo"].includes(a)&&(this.editingCell={rowId:e.id,prop:a,value:e[a]})},handleCellEditConfirm(e,a){this.editingCell.rowId===e.id&&this.editingCell.prop===a&&(e[a]=this.editingCell.value,this.editingCell={rowId:null,prop:null,value:null},Ka.nk.success("修改成功"))},handleAdd(){this.dialogMode="add",this.currentAppointment={id:null,platform:"",warehouseCode:"",account:"",appointmentId:"",appointmentTime:"",earliestAppointmentTime:"",status:"unused",abnormalStatus:"normal",followUpRecord:"",memo:"",pcNumber:"",crdd:"",appointmentType:"floor"},this.formDialogVisible=!0},showLogs(){Ka.nk.info("操作日志功能待实现")},handleDetail(){Ka.nk.info("详情功能待实现")},handleCommand(e){const{action:a,row:l}=e;"edit"===a?this.handleEdit(l):"followUp"===a?this.handleFollowUp(l):"delete"===a?this.handleDelete(l):"createPC"===a&&this.handleCreatePC(l)},handleEdit(e){this.dialogMode="edit",this.currentAppointment=JSON.parse(JSON.stringify(e)),this.formDialogVisible=!0},handleFollowUp(){Ka.nk.info("跟进记录功能待实现")},handleDelete(e){za.s.confirm("确定要删除该条预约记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const a=this.tableData.findIndex((a=>a.id===e.id));-1!==a&&(this.tableData.splice(a,1),this.refreshDisplayData(),Ka.nk.success("删除成功"))})).catch((()=>{}))},handleCreatePC(){Ka.nk.info("创建PC功能待实现")},handleSizeChange(e){this.pageSize=e},handleCurrentChange(e){this.currentPage=e},handleCloseDialog(){this.formDialogVisible=!1},handleSubmitForm(){if(this.currentAppointment.platform&&this.currentAppointment.appointmentId){if("add"===this.dialogMode){const e=String(Date.now());this.tableData.unshift({...this.currentAppointment,id:e}),Ka.nk.success("添加成功")}else{const e=this.tableData.findIndex((e=>e.id===this.currentAppointment.id));-1!==e&&(this.tableData.splice(e,1,{...this.currentAppointment}),Ka.nk.success("修改成功"))}this.refreshDisplayData(),this.handleCloseDialog()}else Ka.nk.error("请完善必填项")},showFilterPanel(){this.filterPanelVisible=!0},applyFilters(e,a){this.activeFilters=e,this.filterLogic=a,this.refreshDisplayData()},cancelFilters(){},handleSaveView(){this.viewForm={name:"",columns:this.tableColumns.map((e=>e.prop))},this.saveViewDialogVisible=!0},saveView(){if(!this.viewForm.name)return void Ka.nk.error("请输入视图名称");const e={id:`custom_${Date.now()}`,name:this.viewForm.name,config:{columns:this.viewForm.columns,filters:[...this.activeFilters],filterLogic:this.filterLogic,groupField:this.groupField,sortSettings:[...this.sortSettings]}};this.customViews.push(e),this.saveViewDialogVisible=!1,this.currentView=e.id,Ka.nk.success("视图保存成功")},showGroupModal(){this.groupSettings={level1:this.groupField||"",level2:"",level3:""},this.groupModalVisible=!0},clearGroupSettings(){this.groupSettings={level1:"",level2:"",level3:""}},applyGroupSettings(){this.groupField=this.groupSettings.level1,this.groupModalVisible=!1,this.refreshDisplayData()},showSortModal(){this.sortModalVisible=!0},addSortField(){this.sortSettings.push({field:"",direction:"asc"})},removeSortField(e){this.sortSettings.splice(e,1),0===this.sortSettings.length&&this.sortSettings.push({field:"",direction:"asc"})},clearSortSettings(){this.sortSettings=[{field:"",direction:"asc"}]},applySortSettings(){this.sortModalVisible=!1,this.refreshDisplayData()},showColumnSettings(){this.columnSettingsList=JSON.parse(JSON.stringify(this.tableColumns)),this.allColumnsSelected=this.columnSettingsList.every((e=>!1!==e.visible)),this.columnSettingsVisible=!0},handleSelectAllColumns(e){this.columnSettingsList.forEach((a=>{a.visible=e}))},resetColumnSettings(){this.columnSettingsList=JSON.parse(JSON.stringify(this.tableColumns)),this.allColumnsSelected=!0},applyColumnSettings(){this.tableColumns.forEach((e=>{const a=this.columnSettingsList.find((a=>a.prop===e.prop));a&&(e.visible=a.visible)})),this.columnSettingsVisible=!1,Ka.nk.success("字段配置已应用")},handleContextMenu(e,a){e.preventDefault(),this.currentEditingView=a,this.contextMenuX=e.clientX,this.contextMenuY=e.clientY,this.contextMenuVisible=!0,document.addEventListener("click",this.closeContextMenu,{once:!0})},closeContextMenu(){this.contextMenuVisible=!1},handleRenameView(){this.currentEditingView&&(this.renameForm.name=this.currentEditingView.name,this.viewOptionsDialogVisible=!1,this.contextMenuVisible=!1,this.renameViewDialogVisible=!0)},saveRenameView(){if(!this.renameForm.name)return void Ka.nk.error("请输入视图名称");const e=this.customViews.find((e=>e.id===this.currentEditingView.id));e&&(e.name=this.renameForm.name,Ka.nk.success("视图重命名成功")),this.renameViewDialogVisible=!1},handleCopyView(){if(!this.currentEditingView)return;const e=JSON.parse(JSON.stringify(this.currentEditingView));e.id=`custom_${Date.now()}`,e.name=`${e.name} (复制)`,this.customViews.push(e),this.viewOptionsDialogVisible=!1,this.contextMenuVisible=!1,Ka.nk.success("视图复制成功")},handleDeleteView(){this.currentEditingView&&za.s.confirm("确定要删除该视图吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=this.customViews.findIndex((e=>e.id===this.currentEditingView.id));-1!==e&&(this.customViews.splice(e,1),this.currentView===this.currentEditingView.id&&(this.currentView="all"),Ka.nk.success("视图删除成功")),this.viewOptionsDialogVisible=!1,this.contextMenuVisible=!1})).catch((()=>{}))},getAbnormalStatusType(e){const a={normal:"success",ncns:"danger",sold:"warning",amazon_deleted:"danger",other:"info"};return a[e]||"info"},getAbnormalStatusText(e){const a={normal:"正常",ncns:"NCNS",sold:"卖约",amazon_deleted:"亚马逊删约",other:"其他异常"};return a[e]||"未知"}},created(){this.displayData=[...this.tableData]},mounted(){this.refreshDisplayData()},watch:{currentView(){this.refreshDisplayData()}}},Ga=(0,Oe.A)($a,[["render",Ua],["__scopeId","data-v-0c0a6902"]]),qa=Ga,Ja={class:"create-outbound-pc-container-inner"},Qa={style:{display:"flex","align-items":"center",width:"100%"}},Ha={class:"tab-toolbar"},ja={class:"summary-text"},Ya={class:"dialog-footer"},Za={__name:"CreateOutbound",emits:["cancel","save"],setup(e,{expose:a,emit:l}){const t=l,o=(0,Pe.KR)(null),r=(0,Pe.KR)({destination:"Amazon-GEU2",deliveryMethod:"卡车派送",palletQuantity:2,departureDate:null,apptDate:null,supplier:null,bookingStatus:"unconfirmed",loadingType:"pallet",shippingType:"ftl",bookingParty:"self",deliveryCost:null,bookingNumber:null,remarks:null}),s=(0,n.EW)((()=>r.value.destination&&r.value.destination.toLowerCase().includes("amazon"))),d=(0,Pe.KR)("stocked"),u=(0,Pe.KR)(null),p=(0,Pe.KR)([]),m=(0,Pe.KR)([]),c=(0,Pe.KR)(!1),b=(0,Pe.KR)([{id:"appt1",appointmentNumber:"APPT_12345",destination:"Amazon-ABQ2",appointmentTime:"2024-07-25 10:00",crdd:"2024-07-28 15:00",status:"未使用"},{id:"appt2",appointmentNumber:"APPT_67890",destination:"Amazon-ONT8",appointmentTime:"2024-07-26 14:30",crdd:"2024-07-29 09:30",status:"未使用"},{id:"appt3",appointmentNumber:"APPT_11223",destination:"Amazon-ABQ2",appointmentTime:"2024-07-27 09:00",crdd:"2024-07-30 11:00",status:"已使用"}]),v=(0,n.EW)((()=>{let e=0,a=0,l=0;return m.value.forEach((t=>{e+=Number(t.pieces)||0,a+=Number(t.volume)||0,l+=Number(t.weight)||0})),{pieces:e,volume:a,weight:l}})),g=e=>{console.log("Setting stocked items in CreateOutbound:",e),m.value=e},h=e=>{p.value=e},k=e=>{za.s.confirm("确定要删除这条明细吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const a=m.value.findIndex((a=>a.id===e.id));-1!==a&&(m.value.splice(a,1),(0,Ka.nk)({type:"success",message:"删除成功!"}))})).catch((()=>{}))},f=()=>{0!==p.value.length?za.s.confirm(`确定要删除选中的 ${p.value.length} 条明细吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=p.value.map((e=>e.id));m.value=m.value.filter((a=>!e.includes(a.id))),(0,Ka.nk)({type:"success",message:"批量删除成功!"}),u.value?.clearSelection()})).catch((()=>{})):Ka.nk.warning("请先选择要删除的明细")},y=()=>{c.value=!0},C=e=>{if("未使用"===e.status){if(r.value.bookingNumber=e.appointmentNumber,e.appointmentTime){const a=e.appointmentTime.split(" ")[0];r.value.apptDate=a}else r.value.apptDate=null;c.value=!1,Ka.nk.success(`已选择预约号: ${e.appointmentNumber}`)}else Ka.nk.warning("该预约已被使用，请选择其他预约。")},w=async()=>{try{const e=await(o.value?.validate());if(!e)return void Ka.nk.error("请检查基础信息表单是否填写完整且正确！");if(0===m.value.length)return void Ka.nk.error("出库明细不能为空！");const a={basicInfo:r.value,details:m.value};console.log("Submitting data:",a),t("save",a)}catch(e){console.error("Validation or submission error:",e)}};return a({setStockedItems:g,submit:w}),(e,a)=>{const l=(0,n.g2)("el-input"),t=(0,n.g2)("el-form-item"),p=(0,n.g2)("el-col"),g=(0,n.g2)("el-row"),w=(0,n.g2)("el-date-picker"),T=(0,n.g2)("el-option"),F=(0,n.g2)("el-select"),L=(0,n.g2)("el-radio"),S=(0,n.g2)("el-radio-group"),V=(0,n.g2)("el-button"),_=(0,n.g2)("el-form"),D=(0,n.g2)("el-card"),A=(0,n.g2)("el-table-column"),N=(0,n.g2)("el-table"),M=(0,n.g2)("el-tab-pane"),P=(0,n.g2)("el-tabs"),x=(0,n.g2)("el-tag"),W=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)("div",Ja,[(0,n.bF)(D,{class:"section-card basic-info-card"},{header:(0,n.k6)((()=>a[16]||(a[16]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"基础信息")],-1)]))),default:(0,n.k6)((()=>[(0,n.bF)(_,{ref_key:"basicInfoForm",ref:o,model:r.value,"label-width":"100px",size:"small"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{gutter:20},{default:(0,n.k6)((()=>[(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"目的地",prop:"destination"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:r.value.destination,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value.destination=e),placeholder:"Amazon-GEU2"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"派送方式",prop:"deliveryMethod"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:r.value.deliveryMethod,"onUpdate:modelValue":a[1]||(a[1]=e=>r.value.deliveryMethod=e),placeholder:"卡车派送"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"卡板数量",prop:"palletQuantity"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:r.value.palletQuantity,"onUpdate:modelValue":a[2]||(a[2]=e=>r.value.palletQuantity=e),modelModifiers:{number:!0},placeholder:"2",type:"number"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(g,{gutter:20},{default:(0,n.k6)((()=>[(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"发车日期",prop:"departureDate"},{default:(0,n.k6)((()=>[(0,n.bF)(w,{modelValue:r.value.departureDate,"onUpdate:modelValue":a[3]||(a[3]=e=>r.value.departureDate=e),type:"date",placeholder:"请选择日期",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"APPT",prop:"apptDate"},{default:(0,n.k6)((()=>[(0,n.bF)(w,{modelValue:r.value.apptDate,"onUpdate:modelValue":a[4]||(a[4]=e=>r.value.apptDate=e),type:"date",placeholder:"请选择日期",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"供应商",prop:"supplier",required:""},{default:(0,n.k6)((()=>[(0,n.bF)(F,{modelValue:r.value.supplier,"onUpdate:modelValue":a[5]||(a[5]=e=>r.value.supplier=e),placeholder:"请选择",style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)(T,{label:"供应商A",value:"A"}),(0,n.bF)(T,{label:"供应商B",value:"B"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(g,{gutter:20},{default:(0,n.k6)((()=>[(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"预约状态",prop:"bookingStatus",required:""},{default:(0,n.k6)((()=>[(0,n.bF)(S,{modelValue:r.value.bookingStatus,"onUpdate:modelValue":a[6]||(a[6]=e=>r.value.bookingStatus=e)},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:"unconfirmed"},{default:(0,n.k6)((()=>a[17]||(a[17]=[(0,n.eW)("未确认")]))),_:1}),(0,n.bF)(L,{label:"confirmed"},{default:(0,n.k6)((()=>a[18]||(a[18]=[(0,n.eW)("已确认")]))),_:1}),(0,n.bF)(L,{label:"overbooked"},{default:(0,n.k6)((()=>a[19]||(a[19]=[(0,n.eW)("爆仓")]))),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"装车类型",prop:"loadingType",required:""},{default:(0,n.k6)((()=>[(0,n.bF)(S,{modelValue:r.value.loadingType,"onUpdate:modelValue":a[7]||(a[7]=e=>r.value.loadingType=e)},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:"pallet"},{default:(0,n.k6)((()=>a[20]||(a[20]=[(0,n.eW)("卡板")]))),_:1}),(0,n.bF)(L,{label:"floor"},{default:(0,n.k6)((()=>a[21]||(a[21]=[(0,n.eW)("地板")]))),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"运输类型",prop:"shippingType",required:""},{default:(0,n.k6)((()=>[(0,n.bF)(S,{modelValue:r.value.shippingType,"onUpdate:modelValue":a[8]||(a[8]=e=>r.value.shippingType=e)},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:"ftl"},{default:(0,n.k6)((()=>a[22]||(a[22]=[(0,n.eW)("FTL")]))),_:1}),(0,n.bF)(L,{label:"ltl"},{default:(0,n.k6)((()=>a[23]||(a[23]=[(0,n.eW)("LTL")]))),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(g,{gutter:20},{default:(0,n.k6)((()=>[(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"预约方",prop:"bookingParty",required:""},{default:(0,n.k6)((()=>[(0,n.bF)(S,{modelValue:r.value.bookingParty,"onUpdate:modelValue":a[9]||(a[9]=e=>r.value.bookingParty=e)},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:"self"},{default:(0,n.k6)((()=>a[24]||(a[24]=[(0,n.eW)("自有约")]))),_:1}),(0,n.bF)(L,{label:"supplier"},{default:(0,n.k6)((()=>a[25]||(a[25]=[(0,n.eW)("供应商约")]))),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"派送成本",prop:"deliveryCost"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:r.value.deliveryCost,"onUpdate:modelValue":a[10]||(a[10]=e=>r.value.deliveryCost=e),placeholder:"请输入"},{append:(0,n.k6)((()=>a[26]||(a[26]=[(0,n.eW)("USD")]))),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"预约号",prop:"bookingNumber"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Qa,[(0,n.bF)(l,{modelValue:r.value.bookingNumber,"onUpdate:modelValue":a[11]||(a[11]=e=>r.value.bookingNumber=e),placeholder:"请输入或选择预约",style:{"flex-grow":"1"}},null,8,["modelValue"]),s.value&&"self"===r.value.bookingParty?((0,n.uX)(),(0,n.Wv)(V,{key:0,type:"primary",plain:"",size:"small",onClick:y,style:{"margin-left":"8px","flex-shrink":"0"}},{default:(0,n.k6)((()=>a[27]||(a[27]=[(0,n.eW)(" 选择预约 ")]))),_:1})):(0,n.Q3)("",!0)])])),_:1})])),_:1})])),_:1}),(0,n.bF)(g,{gutter:20},{default:(0,n.k6)((()=>[(0,n.bF)(p,{span:8},{default:(0,n.k6)((()=>[(0,n.bF)(t,{label:"备注",prop:"remarks"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:r.value.remarks,"onUpdate:modelValue":a[12]||(a[12]=e=>r.value.remarks=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n.bF)(p,{span:8}),(0,n.bF)(p,{span:8})])),_:1})])),_:1},8,["model"])])),_:1}),(0,n.bF)(D,{class:"section-card outbound-details-card"},{header:(0,n.k6)((()=>a[28]||(a[28]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"出库明细")],-1)]))),default:(0,n.k6)((()=>[(0,n.bF)(P,{modelValue:d.value,"onUpdate:modelValue":a[13]||(a[13]=e=>d.value=e),type:"card"},{default:(0,n.k6)((()=>[(0,n.bF)(M,{label:"已入库",name:"stocked"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Ha,[(0,n.bF)(V,{size:"small",type:"danger",plain:"",onClick:f},{default:(0,n.k6)((()=>a[29]||(a[29]=[(0,n.eW)("批量删除")]))),_:1}),(0,n.Lk)("span",ja,"合计: "+(0,i.v_)(v.value.pieces)+" PCS, "+(0,i.v_)(v.value.volume)+" CBM, "+(0,i.v_)(v.value.weight)+" lbs",1)]),(0,n.bF)(N,{ref_key:"stockedTable",ref:u,data:m.value,style:{width:"100%"},size:"small",onSelectionChange:h},{default:(0,n.k6)((()=>[(0,n.bF)(A,{type:"selection",width:"55"}),(0,n.bF)(A,{prop:"waybillNo",label:"运单号"}),(0,n.bF)(A,{prop:"containerNo",label:"柜号"}),(0,n.bF)(A,{prop:"palletNo",label:"卡板号"}),(0,n.bF)(A,{prop:"location",label:"库位"}),(0,n.bF)(A,{label:"件重体"},{default:(0,n.k6)((e=>[(0,n.Lk)("div",null,"件数: "+(0,i.v_)(e.row.pieces),1),(0,n.Lk)("div",null,"重量(lbs): "+(0,i.v_)(e.row.weight),1),(0,n.Lk)("div",null,"体积: "+(0,i.v_)(e.row.volume),1)])),_:1}),(0,n.bF)(A,{label:"操作",width:"100"},{default:(0,n.k6)((e=>[(0,n.bF)(V,{type:"text",size:"small",onClick:a=>k(e.row)},{default:(0,n.k6)((()=>a[30]||(a[30]=[(0,n.eW)("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,n.bF)(M,{label:"待入库",name:"pending"},{default:(0,n.k6)((()=>a[31]||(a[31]=[(0,n.Lk)("div",{style:{padding:"20px","text-align":"center",color:"#909399"}},"待入库功能待实现",-1)]))),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(W,{modelValue:c.value,"onUpdate:modelValue":a[15]||(a[15]=e=>c.value=e),title:"选择预约",width:"75%","append-to-body":"","destroy-on-close":""},{footer:(0,n.k6)((()=>[(0,n.Lk)("span",Ya,[(0,n.bF)(V,{onClick:a[14]||(a[14]=e=>c.value=!1),size:"small"},{default:(0,n.k6)((()=>a[33]||(a[33]=[(0,n.eW)("取消")]))),_:1})])])),default:(0,n.k6)((()=>[(0,n.bF)(N,{data:b.value,style:{width:"100%"},size:"small",border:""},{default:(0,n.k6)((()=>[(0,n.bF)(A,{prop:"appointmentNumber",label:"预约号",width:"180"}),(0,n.bF)(A,{prop:"destination",label:"目的地",width:"180"}),(0,n.bF)(A,{prop:"appointmentTime",label:"预约时间",width:"160"}),(0,n.bF)(A,{prop:"crdd",label:"CRDD",width:"160"}),(0,n.bF)(A,{prop:"status",label:"使用状态",width:"100"},{default:(0,n.k6)((e=>[(0,n.bF)(x,{type:"未使用"===e.row.status?"success":"info",size:"small"},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.row.status),1)])),_:2},1032,["type"])])),_:1}),(0,n.bF)(A,{label:"操作",width:"80",fixed:"right"},{default:(0,n.k6)((e=>[(0,n.bF)(V,{type:"primary",size:"small",onClick:a=>C(e.row)},{default:(0,n.k6)((()=>a[32]||(a[32]=[(0,n.eW)("选择")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1},8,["modelValue"])])}}},el=(0,Oe.A)(Za,[["__scopeId","data-v-0a1779e2"]]),al=el,ll={class:"appointment-list"},tl={class:"header-tabs"},nl={class:"filter-container"},il={class:"filter-row top-row"},ol={class:"filter-row bottom-row"},rl={class:"pagination-summary-container"},sl={class:"summary-section"},dl={class:"dialog-footer"},ul={__name:"AppointmentList",setup(e){const a=(0,Pe.KR)("inStock"),l=(0,Pe.Kh)({vehicleDelivery:"truck",warehouse:"warehouse2",destination:"",courier:"placeholder",shipmentStatus:"placeholder",systemNoType:"placeholder",search:"",hasPlatformAddress:"",isSendOrder:"all"}),t=(0,Pe.KR)(1),o=(0,Pe.KR)(10),r=(0,Pe.KR)(null),s=(0,Pe.KR)([]),d=(0,Pe.KR)(!1),u=(0,Pe.KR)(""),p=(0,Pe.KR)(null),m=(0,Pe.KR)([{orderNo:"TO25042300021",createTime:"2025/04/28 19:12:02",trackingRecord:"到达分拨中心",platformCode:"SCK8",productChannel:"限时转-卡派/卡派",shipmentLabel:"需预约",expectedCartons:"20",receivedCartons:"0",totalWeightKg:"253",totalVolume:"0.93",location:"P14",devanningCompletionTime:"2025/04/29 08:00:00",warehouseAge:"1",customerName:"广东联宇物流有限公司",containerNo:"DEMU1234567",deliveryLFD:"2025/05/05",platform:"Amazon",stateProvince:"CA",city:"Moreno Valley",postalCode:"92551",addressLine1:"123 Amazon Way",addressLine2:"",contactPerson:"张三",contactPhone:"(555) 111-2222",email:"zhangsan@example.com",customerServiceRep:"客服小王",lianyuChannel:"美西快线",appointmentStatus:"待确认",memo:"客户要求优先处理",palletCount:"1",shipmentId:"FBA17XYZ888",routeName:"美西专线A",trackingCode:"1Z999AA10123456784",remarks:"第一次合作"},{orderNo:"LW25042800891",createTime:"2025/04/28 17:31:17",trackingRecord:"已签收",platformCode:"XLX7",productChannel:"标准快递/快递",shipmentLabel:"",expectedCartons:"547",receivedCartons:"547",totalWeightKg:"17765.51",totalVolume:"85.33",location:"P17,P19,P18",devanningCompletionTime:"2025/04/29 10:30:00",warehouseAge:"3",customerName:"LINK TRANS LOGISTICS INC",containerNo:"FCIU7654321",deliveryLFD:"2025/05/10",platform:"Walmart",stateProvince:"TX",city:"Dallas",postalCode:"75201",addressLine1:"456 Commerce St",addressLine2:"Suite 200",contactPerson:"Li Si",contactPhone:"(555) 333-4444",email:"lisi@linktrans.com",customerServiceRep:"Agent Lee",lianyuChannel:"华南特惠",appointmentStatus:"已预约",memo:"",palletCount:"15",shipmentId:"WM987DEF456",routeName:"内陆卡车线B",trackingCode:"9405511899561234567890",remarks:"大货量客户"},{orderNo:"LW25042800875",createTime:"2025/04/28 09:50:58",trackingRecord:"派送中",platformCode:"POC1",productChannel:"T2/卡派",shipmentLabel:"加急",expectedCartons:"150",receivedCartons:"150",totalWeightKg:"1001",totalVolume:"4",location:"D23",devanningCompletionTime:"2025/04/28 15:00:00",warehouseAge:"2",customerName:"Happy link international group corp",containerNo:"MSKU9876543",deliveryLFD:"2025/05/02",platform:"Shopify",stateProvince:"NY",city:"New York",postalCode:"10001",addressLine1:"789 Fashion Ave",addressLine2:"",contactPerson:"Wang Wu",contactPhone:"(555) 555-6666",email:"wangwu@happylink.com",customerServiceRep:"客服小赵",lianyuChannel:"美东直送",appointmentStatus:"已完成",memo:"尽快派送",palletCount:"5",shipmentId:"SHOP112233",routeName:"美东空运线",trackingCode:"DT1234567890US",remarks:""},{orderNo:"TO25042300022",createTime:"2025/04/29 10:05:11",trackingRecord:"已揽收",platformCode:"ONT8",productChannel:"经济卡派/卡派",shipmentLabel:"",expectedCartons:"50",receivedCartons:"50",totalWeightKg:"550.5",totalVolume:"3.5",location:"A01",devanningCompletionTime:"2025/04/30 09:15:00",warehouseAge:"0",customerName:"测试客户A",containerNo:"TEST1111111",deliveryLFD:"2025/05/08",platform:"Amazon",stateProvince:"CA",city:"Ontario",postalCode:"91761",addressLine1:"987 Test Dr",addressLine2:"",contactPerson:"Test A",contactPhone:"(555) 777-8888",email:"testa@example.com",customerServiceRep:"客服小李",lianyuChannel:"美西经济",appointmentStatus:"无需预约",memo:"测试数据1",palletCount:"2",shipmentId:"FBA18ABC999",routeName:"美西本地派",trackingCode:"1Z999AA20298765432",remarks:"加急"},{orderNo:"TO25042300023",createTime:"2025/04/29 11:20:35",trackingRecord:"运输中",platformCode:"LGB3",productChannel:"限时转-卡派/卡派",shipmentLabel:"危险品",expectedCartons:"5",receivedCartons:"5",totalWeightKg:"88",totalVolume:"0.6",location:"C12",devanningCompletionTime:"2025/04/30 14:00:00",warehouseAge:"1",customerName:"测试客户B",containerNo:"TEST2222222",deliveryLFD:"2025/05/06",platform:"Amazon",stateProvince:"CA",city:"Long Beach",postalCode:"90806",addressLine1:"555 Ocean Blvd",addressLine2:"",contactPerson:"Test B",contactPhone:"(555) 123-4567",email:"testb@example.com",customerServiceRep:"客服小王",lianyuChannel:"美西快线",appointmentStatus:"已预约",memo:"内含电池",palletCount:"1",shipmentId:"FBA19LMN777",routeName:"美西专线B",trackingCode:"1Z999AA30312345678",remarks:"小心轻放"},{orderNo:"LW25042800892",createTime:"2025/04/29 14:55:01",trackingRecord:"到达派送点",platformCode:"FTW1",productChannel:"标准快递/快递",shipmentLabel:"",expectedCartons:"200",receivedCartons:"198",totalWeightKg:"2500",totalVolume:"15",location:"E05, E06",devanningCompletionTime:"2025/04/30 16:30:00",warehouseAge:"4",customerName:"测试客户C Inc.",containerNo:"TEST3333333",deliveryLFD:"2025/05/12",platform:"Walmart",stateProvince:"TX",city:"Fort Worth",postalCode:"76107",addressLine1:"100 Main St",addressLine2:"",contactPerson:"Test C",contactPhone:"(555) 987-6543",email:"testc@example.com",customerServiceRep:"Agent Smith",lianyuChannel:"华南特惠",appointmentStatus:"待派送",memo:"少两箱，待核实",palletCount:"8",shipmentId:"WM765GHI321",routeName:"内陆卡车线C",trackingCode:"9405511899569876543210",remarks:"部分破损"},{orderNo:"TO25042300024",createTime:"2025/04/30 09:00:00",trackingRecord:"待入库",platformCode:"MEM1",productChannel:"限时转-卡派/卡派",shipmentLabel:"",expectedCartons:"30",receivedCartons:"0",totalWeightKg:"400",totalVolume:"2.8",location:"",devanningCompletionTime:"",warehouseAge:"0",customerName:"测试客户D",containerNo:"TEST4444444",deliveryLFD:"2025/05/09",platform:"Amazon",stateProvince:"TN",city:"Memphis",postalCode:"38118",addressLine1:"300 Elvis Presley Blvd",addressLine2:"",contactPerson:"Test D",contactPhone:"(555) 111-9999",email:"testd@example.com",customerServiceRep:"客服小张",lianyuChannel:"美中专线",appointmentStatus:"待确认",memo:"",palletCount:"2",shipmentId:"FBA20JKL666",routeName:"美中线路",trackingCode:"1Z999AA40411223344",remarks:"新客户"},{orderNo:"LW25042800893",createTime:"2025/04/30 10:15:45",trackingRecord:"待清关",platformCode:"JFK8",productChannel:"标准快递/快递",shipmentLabel:"需打托",expectedCartons:"100",receivedCartons:"100",totalWeightKg:"1200",totalVolume:"9.5",location:"F10",devanningCompletionTime:"2025/05/01 11:00:00",warehouseAge:"1",customerName:"测试客户E LLC",containerNo:"TEST5555555",deliveryLFD:"2025/05/15",platform:"Ebay",stateProvince:"NJ",city:"Carteret",postalCode:"07008",addressLine1:"1 Progress Plaza",addressLine2:"",contactPerson:"Test E",contactPhone:"(555) 222-8888",email:"teste@example.com",customerServiceRep:"Agent Jones",lianyuChannel:"美东经济",appointmentStatus:"已完成",memo:"打托费待确认",palletCount:"4",shipmentId:"EBAY556677",routeName:"美东本地派送",trackingCode:"940551189956111222333",remarks:""},{orderNo:"TO25042300025",createTime:"2025/04/30 15:30:20",trackingRecord:"转运中",platformCode:"CLT2",productChannel:"T2/卡派",shipmentLabel:"",expectedCartons:"80",receivedCartons:"80",totalWeightKg:"950",totalVolume:"7.2",location:"G01",devanningCompletionTime:"2025/05/01 14:45:00",warehouseAge:"2",customerName:"测试客户F",containerNo:"TEST6666666",deliveryLFD:"2025/05/11",platform:"Amazon",stateProvince:"NC",city:"Charlotte",postalCode:"28214",addressLine1:"800 Amazon Rd",addressLine2:"Dock 5",contactPerson:"Test F",contactPhone:"(555) 333-7777",email:"testf@example.com",customerServiceRep:"客服小刘",lianyuChannel:"美东直送",appointmentStatus:"已预约",memo:"",palletCount:"3",shipmentId:"FBA21MNO555",routeName:"美东南线路",trackingCode:"1Z999AA50544332211",remarks:"按时派送"},{orderNo:"LW25042800894",createTime:"2025/04/30 16:00:55",trackingRecord:"清关完成",platformCode:"ORD5",productChannel:"经济卡派/卡派",shipmentLabel:"超重",expectedCartons:"120",receivedCartons:"120",totalWeightKg:"1800",totalVolume:"12",location:"H20",devanningCompletionTime:"2025/05/01 17:00:00",warehouseAge:"0",customerName:"测试客户G Solutions",containerNo:"TEST7777777",deliveryLFD:"2025/05/14",platform:"Target",stateProvince:"IL",city:"Joliet",postalCode:"60433",addressLine1:"1 Target Plaza",addressLine2:"",contactPerson:"Test G",contactPhone:"(555) 444-6666",email:"testg@example.com",customerServiceRep:"客服小钱",lianyuChannel:"美中经济",appointmentStatus:"待确认",memo:"需叉车",palletCount:"6",shipmentId:"TGT889900",routeName:"美中专线",trackingCode:"940551189956777888999",remarks:"预约电话联系"}]),c=(0,n.EW)((()=>m.value.length)),b=(0,n.EW)((()=>{const e=(t.value-1)*o.value,a=e+o.value;return m.value.slice(e,a)})),v=(0,n.EW)((()=>{let e=0,a=0,l=0;return m.value.forEach((t=>{e+=parseFloat(t.palletCount)||0,a+=parseFloat(t.totalVolume)||0,l+=parseFloat(t.totalWeightKg)||0})),{totalPallets:e,totalVolume:a,totalWeightKg:l}})),g=e=>{o.value=e,t.value=1},h=e=>{t.value=e},k=()=>{const e=r.value?.getSelectionRows();if(console.log("Add item clicked. Selection from table ref:",e),!e||0===e.length)return void Ka.nk.warning("请先在表格中选择要加入的项！");const a=s.value.map((e=>e.orderNo));let l=0;e.forEach((e=>{a.includes(e.orderNo)||(s.value.push(e),l++)})),l>0?(Ka.nk.success(`${l} 项已成功加入待创建列表！`),r.value?.clearSelection()):Ka.nk.info("选中的项已在待创建列表中。"),console.log("Items for creation:",s.value)},f=e=>{0!==s.value.length?(u.value=e,d.value=!0,(0,n.dY)((()=>{if(p.value){const a=s.value.map(((e,a)=>({id:a+1,waybillNo:e.orderNo,containerNo:e.containerNo,palletNo:`KB-${e.orderNo.slice(-5)}`,location:e.location,pieces:parseInt(e.expectedCartons)||0,weight:2.20462*parseFloat(e.totalWeightKg)||0,volume:parseFloat(e.totalVolume)||0})));p.value.setStockedItems(a),Ka.nk.info(`已将 ${a.length} 项加载到创建${"dispatch"===e?"派送":"调拨"}表单。`)}else console.error("CreateOutboundPC component reference not found.")}))):Ka.nk.warning('请先"加入"需要创建的项！')},y=()=>{f("dispatch")},C=()=>{f("transfer")},w=()=>{d.value=!1},T=e=>{console.log("Save data from dialog:",e),Ka.nk.success("创建成功！"),s.value=[],w()},F=()=>{p.value?"function"===typeof p.value.submit?p.value.submit():(console.warn("CreateOutboundPC does not have a submit method. Implement save logic."),w()):console.error("Cannot save, CreateOutboundPC component reference not found.")};return(e,s)=>{const m=(0,n.g2)("el-tab-pane"),f=(0,n.g2)("el-tabs"),L=(0,n.g2)("el-option"),S=(0,n.g2)("el-select"),V=(0,n.g2)("el-input"),_=(0,n.g2)("el-button"),D=(0,n.g2)("el-icon"),A=(0,n.g2)("el-table-column"),N=(0,n.g2)("el-table"),M=(0,n.g2)("el-pagination"),P=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)("div",ll,[(0,n.Lk)("div",tl,[(0,n.bF)(f,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e)},{default:(0,n.k6)((()=>[(0,n.bF)(m,{label:"已入库",name:"inStock"}),(0,n.bF)(m,{label:"待入库",name:"pending"})])),_:1},8,["modelValue"])]),(0,n.Lk)("div",nl,[(0,n.Lk)("div",il,[(0,n.bF)(S,{modelValue:l.vehicleDelivery,"onUpdate:modelValue":s[1]||(s[1]=e=>l.vehicleDelivery=e),placeholder:"卡车派送",class:"filter-item"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:"卡车派送",value:"truck"})])),_:1},8,["modelValue"]),(0,n.bF)(S,{modelValue:l.warehouse,"onUpdate:modelValue":s[2]||(s[2]=e=>l.warehouse=e),placeholder:"美西二号仓",class:"filter-item"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:"美西二号仓",value:"warehouse2"})])),_:1},8,["modelValue"]),(0,n.bF)(S,{modelValue:l.destination,"onUpdate:modelValue":s[3]||(s[3]=e=>l.destination=e),placeholder:"目的地：请选择",class:"filter-item"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:"清关",value:"customs"})])),_:1},8,["modelValue"]),(0,n.bF)(S,{modelValue:l.courier,"onUpdate:modelValue":s[4]||(s[4]=e=>l.courier=e),placeholder:"快递商",class:"filter-item"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:"快递商",value:"placeholder"})])),_:1},8,["modelValue"]),(0,n.bF)(S,{modelValue:l.shipmentStatus,"onUpdate:modelValue":s[5]||(s[5]=e=>l.shipmentStatus=e),placeholder:"运单状态",class:"filter-item"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:"运单状态",value:"placeholder"})])),_:1},8,["modelValue"]),(0,n.bF)(S,{modelValue:l.systemNoType,"onUpdate:modelValue":s[6]||(s[6]=e=>l.systemNoType=e),placeholder:"系统SO号",class:"filter-item"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:"系统SO号",value:"placeholder"})])),_:1},8,["modelValue"]),(0,n.bF)(V,{modelValue:l.search,"onUpdate:modelValue":s[7]||(s[7]=e=>l.search=e),placeholder:"搜索系统SO号/自有单号",class:"filter-item filter-search-input"},null,8,["modelValue"]),(0,n.bF)(S,{modelValue:l.hasPlatformAddress,"onUpdate:modelValue":s[8]||(s[8]=e=>l.hasPlatformAddress=e),placeholder:"是否包含平台地址",class:"filter-item"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:"是",value:"yes"}),(0,n.bF)(L,{label:"否",value:"no"})])),_:1},8,["modelValue"]),(0,n.bF)(S,{modelValue:l.isSendOrder,"onUpdate:modelValue":s[9]||(s[9]=e=>l.isSendOrder=e),placeholder:"是否SEND订单: 全部",class:"filter-item"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:"全部",value:"all"}),(0,n.bF)(L,{label:"是",value:"yes"}),(0,n.bF)(L,{label:"否",value:"no"})])),_:1},8,["modelValue"]),(0,n.bF)(_,{type:"primary",class:"filter-item filter-button-query"},{default:(0,n.k6)((()=>s[13]||(s[13]=[(0,n.eW)("查询")]))),_:1}),(0,n.bF)(D,{class:"filter-item settings-icon"},{default:(0,n.k6)((()=>[(0,n.bF)((0,Pe.R1)(We.B5R))])),_:1})]),(0,n.Lk)("div",ol,[(0,n.bF)(_,{class:"filter-item filter-button-add",onClick:k},{default:(0,n.k6)((()=>s[14]||(s[14]=[(0,n.eW)("加入")]))),_:1}),(0,n.bF)(_,{class:"filter-item",onClick:y},{default:(0,n.k6)((()=>s[15]||(s[15]=[(0,n.eW)("创建派送")]))),_:1}),(0,n.bF)(_,{class:"filter-item",onClick:C},{default:(0,n.k6)((()=>s[16]||(s[16]=[(0,n.eW)("创建调拨")]))),_:1}),(0,n.bF)(_,{class:"filter-item",disabled:""},{default:(0,n.k6)((()=>s[17]||(s[17]=[(0,n.eW)("批量添加跟进记录")]))),_:1})])]),(0,n.bF)(N,{ref_key:"mainTableRef",ref:r,data:b.value,style:{width:"100%","margin-top":"15px"},"row-key":"orderNo"},{default:(0,n.k6)((()=>[(0,n.bF)(A,{type:"selection",width:"55","reserve-selection":"true"}),(0,n.bF)(A,{prop:"orderNo",label:"运单号",width:"150",fixed:"left"}),(0,n.bF)(A,{prop:"createTime",label:"创建时间",width:"160"}),(0,n.bF)(A,{prop:"trackingRecord",label:"跟进记录",width:"150"}),(0,n.bF)(A,{prop:"platformCode",label:"平台代码",width:"100"}),(0,n.bF)(A,{prop:"productChannel",label:"产品渠道",width:"180"}),(0,n.bF)(A,{prop:"shipmentLabel",label:"运单标签",width:"100"}),(0,n.bF)(A,{prop:"expectedCartons",label:"预计箱数",width:"90"}),(0,n.bF)(A,{prop:"receivedCartons",label:"入库箱数",width:"90"}),(0,n.bF)(A,{prop:"totalWeightKg",label:"总重量(kg)",width:"110"}),(0,n.bF)(A,{prop:"totalVolume",label:"总体积",width:"90"}),(0,n.bF)(A,{prop:"location",label:"库位",width:"120"}),(0,n.bF)(A,{prop:"devanningCompletionTime",label:"拆柜完成时间",width:"160"}),(0,n.bF)(A,{prop:"warehouseAge",label:"库龄",width:"70"}),(0,n.bF)(A,{prop:"customerName",label:"客户名称",width:"200"}),(0,n.bF)(A,{prop:"containerNo",label:"柜号",width:"120"}),(0,n.bF)(A,{prop:"deliveryLFD",label:"派送LFD",width:"120"}),(0,n.bF)(A,{prop:"platform",label:"平台",width:"100"}),(0,n.bF)(A,{prop:"stateProvince",label:"州/省",width:"80"}),(0,n.bF)(A,{prop:"city",label:"城市",width:"120"}),(0,n.bF)(A,{prop:"postalCode",label:"邮编",width:"100"}),(0,n.bF)(A,{prop:"addressLine1",label:"地址行1",width:"250"}),(0,n.bF)(A,{prop:"addressLine2",label:"地址行2",width:"150"}),(0,n.bF)(A,{prop:"contactPerson",label:"联系人",width:"100"}),(0,n.bF)(A,{prop:"contactPhone",label:"联系电话",width:"150"}),(0,n.bF)(A,{prop:"email",label:"邮箱",width:"180"}),(0,n.bF)(A,{prop:"customerServiceRep",label:"客服人员",width:"100"}),(0,n.bF)(A,{prop:"lianyuChannel",label:"联宇渠道",width:"120"}),(0,n.bF)(A,{prop:"appointmentStatus",label:"预约派送状态",width:"120"}),(0,n.bF)(A,{prop:"memo",label:"MEMO",width:"150"}),(0,n.bF)(A,{prop:"palletCount",label:"卡板数量",width:"90"}),(0,n.bF)(A,{prop:"shipmentId",label:"货件编号",width:"150"}),(0,n.bF)(A,{prop:"routeName",label:"线路名称",width:"120"}),(0,n.bF)(A,{prop:"trackingCode",label:"追踪编码",width:"200"}),(0,n.bF)(A,{prop:"remarks",label:"备注",width:"200"}),(0,n.bF)(A,{label:"操作",fixed:"right",width:"80"},{default:(0,n.k6)((()=>[(0,n.bF)(_,{type:"text"},{default:(0,n.k6)((()=>s[18]||(s[18]=[(0,n.eW)("更多...")]))),_:1})])),_:1})])),_:1},8,["data"]),(0,n.Lk)("div",rl,[(0,n.Lk)("div",sl," 统计 卡板数量: "+(0,i.v_)(v.value.totalPallets.toFixed(2))+" 体积: "+(0,i.v_)(v.value.totalVolume.toFixed(2))+" 重量(kg): "+(0,i.v_)(v.value.totalWeightKg.toFixed(2)),1),(0,n.bF)(M,{"current-page":t.value,"onUpdate:currentPage":s[10]||(s[10]=e=>t.value=e),"page-size":o.value,"onUpdate:pageSize":s[11]||(s[11]=e=>o.value=e),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:c.value,onSizeChange:g,onCurrentChange:h},null,8,["current-page","page-size","total"])]),(0,n.bF)(P,{modelValue:d.value,"onUpdate:modelValue":s[12]||(s[12]=e=>d.value=e),title:"dispatch"===u.value?"创建派送":"创建调拨",width:"80%",top:"5vh","before-close":w,"destroy-on-close":"","append-to-body":""},{footer:(0,n.k6)((()=>[(0,n.Lk)("span",dl,[(0,n.bF)(_,{onClick:w},{default:(0,n.k6)((()=>s[19]||(s[19]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(_,{type:"primary",onClick:F},{default:(0,n.k6)((()=>s[20]||(s[20]=[(0,n.eW)("确定")]))),_:1})])])),default:(0,n.k6)((()=>[(0,n.bF)(al,{ref_key:"createOutboundRef",ref:p,onSave:T,onCancel:w},null,512)])),_:1},8,["modelValue","title"])])}}},pl=(0,Oe.A)(ul,[["__scopeId","data-v-830df254"]]),ml=pl;var cl=l(7660),bl=(l(5323),l(432)),vl=l.n(bl),gl=l(9595),hl=l(1178);const kl={class:"table-surely-demo"},fl={class:"filter-bar"},yl={class:"filter-row"},Cl={class:"action-buttons"},wl={class:"view-management"},Tl={class:"view-tools"},Fl={class:"table-container"},Ll={class:"expanded-row-content"},Sl={class:"expanded-info"},Vl={class:"info-item"},_l={class:"info-value"},Dl={class:"info-item"},Al={class:"info-value"},Nl={class:"info-item"},Ml={class:"info-value"},Pl={class:"info-item"},xl={class:"info-value"},Wl={class:"info-item"},El={class:"info-value"},Rl={class:"info-item"},Il={class:"info-value"},Ol={class:"info-item"},Ul={class:"info-value"},Kl={class:"info-item"},zl={class:"info-value"},Xl={class:"info-item"},Bl={class:"info-value"},$l={class:"info-item"},Gl={class:"info-value"},ql={class:"group-content"},Jl={class:"group-text"},Ql={class:"group-count"},Hl={key:1},jl={key:1,class:"cell-wrapper"},Yl={key:0,class:"cell-editor"},Zl=["onClick","onDblclick"],et=["onMouseenter"],at={key:0,class:"cell-wrapper"},lt={class:"cell-content"},tt={key:2,class:"cell-wrapper"},nt=["onMouseenter"],it={class:"grouping-content"},ot={class:"sorting-content"},rt={class:"sort-item"},st={class:"sort-item"},dt={class:"sort-item"},ut={class:"column-settings-dialog"},pt={class:"column-settings-header"},mt={class:"column-list-container"},ct={class:"column-item"},bt={class:"filter-dialog-content"},vt={class:"filter-logic-row"},gt={class:"filter-conditions"},ht={class:"add-condition-row"},kt={class:"edit-confirm-content"},ft={class:"edit-value"},yt={class:"edit-dialog-content"},Ct="tableSurelyDemoViews_v2",wt={__name:"TableSurelyDemo",setup(e){const a=hl.map((e=>({...e,key:e.prop,dataIndex:e.prop,title:e.label,width:e.width,fixed:e.fixed,sorter:e.sortable?(a,l)=>{const t=a[e.prop],n=l[e.prop];return"number"===typeof t?t-n:t<n?-1:t>n?1:0}:void 0}))),l=(0,Pe.KR)({warehouse:"",dateType:"create",dateRange:[],searchType:"trainNumber",searchText:""}),o=(0,Pe.KR)(!1),r=(0,Pe.KR)([]),s=(0,Pe.KR)([]),d=(0,Pe.KR)(1),u=(0,Pe.KR)(10),p=(0,Pe.KR)(0),m=(0,Pe.KR)([]),c=(0,Pe.KR)([]),b=(0,Pe.KR)([]),v=(0,Pe.KR)([]),g=(0,Pe.KR)([]),h=(0,Pe.KR)("all"),k=(0,Pe.KR)([]),f=(0,Pe.Kh)({visible:!1,viewName:""}),y=(0,Pe.Kh)({visible:!1,targetViewId:null,newName:""}),C=(0,Pe.Kh)({visible:!1,top:0,left:0,targetViewId:null}),w=(0,Pe.Kh)({all:0}),T=(0,Pe.KR)({visible:!1,form:{firstLevel:"",secondLevel:"",thirdLevel:""}}),F={firstSort:{field:"",order:"ascend"},secondSort:{field:"",order:"ascend"},thirdSort:{field:"",order:"ascend"}},L=(0,Pe.KR)({visible:!1,form:{...F}}),S=(0,Pe.KR)({visible:!1,settingsList:[]}),V=(0,Pe.Kh)({visible:!1,conditions:[],logic:"and"}),_=(0,Pe.KR)([]),D=(0,Pe.KR)("and"),A=(0,n.EW)((()=>a.filter((e=>"operation"!==e.prop)))),N=(0,n.EW)((()=>a.filter((e=>["supplier","loadingStatus","loadingType","deliveryType","issuer"].includes(e.prop))))),M=(0,n.EW)((()=>a.filter((e=>e.sortable&&"operation"!==e.prop)))),P=(0,n.EW)((()=>({current:d.value,pageSize:u.value,total:p.value,showSizeChanger:!0,showTotal:e=>`共 ${e} 条数据`}))),x=(0,n.EW)((()=>({selectedRowKeys:m.value,onChange(e,a){m.value=e,E(a.filter((e=>!e.isGroup)))},getCheckboxProps(e){return{disabled:e.isGroup}}}))),W=(0,n.EW)((()=>c.value.filter((e=>!1!==e.visible)))),E=e=>{console.log("Selected rows:",e)},R=()=>{c.value=a.map((e=>({...e,visible:!0})))},I=()=>{try{const e=localStorage.getItem(Ct);e&&(k.value=JSON.parse(e))}catch(e){console.error("加载视图失败:",e),Ka.nk.error("加载视图失败"),k.value=[]}},O=()=>{try{const e=JSON.stringify(k.value);localStorage.setItem(Ct,e)}catch(e){console.error("保存视图失败:",e),Ka.nk.error("保存视图失败，请重试")}},U=()=>{f.viewName="",f.visible=!0},K=()=>{const e=f.viewName.trim();if(!e)return void Ka.nk.warning("请输入视图名称");if(k.value.some((a=>a.name===e)))return void Ka.nk.warning("视图名称已存在");const a={filters:JSON.parse(JSON.stringify(_.value)),filterLogic:D.value,sorting:{...L.value.form},grouping:{...T.value.form},columns:c.value.map((e=>({key:e.key,visible:e.visible})))},l={id:`custom-${Date.now()}`,name:e,config:a};k.value.push(l),O(),f.visible=!1,h.value=l.id,Ka.nk.success("视图保存成功")},z=e=>{if(_.value=e.filters?JSON.parse(JSON.stringify(e.filters)):[],D.value=e.filterLogic||"and",L.value.form=e.sorting?{...e.sorting}:{field:"",order:"ascend"},T.value.form=e.grouping?{...e.grouping}:{firstLevel:"",secondLevel:"",thirdLevel:""},e.columns){const l=new Map(e.columns.map((e=>[e.key,e.visible])));c.value=a.map((e=>({...e,visible:!l.has(e.key)||l.get(e.key)})))}else R();V.conditions=JSON.parse(JSON.stringify(_.value)),V.logic=D.value},X=()=>{l.value={warehouse:"",dateType:"create",dateRange:[],searchType:"trainNumber",searchText:""},_.value=[],D.value="and",L.value.form={field:"",order:"ascend"},T.value.form={firstLevel:"",secondLevel:"",thirdLevel:""},R(),V.conditions=[],V.logic="and"};(0,n.wB)(h,((e,a)=>{if(e===a)return;const l=k.value.find((a=>a.id===e));"all"===e?X():l?z(l.config):(console.warn(`View ID not found: ${e}, resetting to default.`),X(),h.value="all"),d.value=1,J()}));const B=(e,a)=>{e.preventDefault(),e.stopPropagation(),C.targetViewId=a,C.top=e.clientY,C.left=e.clientX,C.visible=!0;const l=()=>{C.visible=!1,C.targetViewId=null,window.removeEventListener("click",l),window.removeEventListener("contextmenu",l)};(0,n.dY)((()=>{window.addEventListener("click",l),window.addEventListener("contextmenu",l)}))},$=async()=>{const e=C.targetViewId;if(e)try{await za.s.confirm("确定要删除此视图吗？","删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"});const a=k.value.findIndex((a=>a.id===e));if(-1===a)return void Ka.nk.error("未找到要删除的视图");h.value===e&&(h.value="all"),k.value.splice(a,1),O(),Ka.nk.success("视图已删除")}catch(a){}finally{C.visible=!1,C.targetViewId=null}},G=()=>{const e=C.targetViewId;if(!e)return;const a=k.value.find((a=>a.id===e));a?(y.targetViewId=e,y.newName=a.name,y.visible=!0,C.visible=!1,C.targetViewId=null):Ka.nk.error("未找到要重命名的视图")},q=()=>{const e=y.newName?.trim();if(!e)return void Ka.nk.warning("请输入新的视图名称");const a=y.targetViewId,l=k.value.findIndex((e=>e.id===a));if(-1===l)return void Ka.nk.error("未找到要重命名的视图");const t=k.value.some((l=>l.id!==a&&l.name===e));t?Ka.nk.warning("视图名称已存在"):(k.value[l]={...k.value[l],name:e},O(),y.visible=!1,Ka.nk.success("视图已重命名"))},J=()=>{o.value=!0,setTimeout((()=>{r.value=[...gl],b.value=[...r.value];let e=b.value;_.value.length>0&&(e=e.filter(re)),w.all=e.length,me();const{firstSort:l,secondSort:t,thirdSort:n}=L.value.form;if((l?.field||t?.field||n?.field)&&e.sort(se),v.value.length>0)g.value=v.value.map((e=>a.find((a=>a.key===e)))),s.value=Q(e);else{const a=(d.value-1)*u.value,l=a+u.value;s.value=e.slice(a,l)}o.value=!1}),300)},Q=(e,a=0,l="")=>{if(a>=v.value.length)return e;const t=v.value[a],n=g.value[a],i=n?.title||t,o=new Map;e.forEach((e=>{const a=e[t]??"未分组";o.has(a)||o.set(a,[]),o.get(a).push(e)}));const r=[];return o.forEach(((e,n)=>{const o=`${l?l+"-":""}group-${t}-${n}`,s=`${i}: ${n}`,d={id:o,isGroup:!0,groupName:s,groupLevel:a+1,count:e.length,_disableCheckbox:!0,parentGroupKey:l,expanded:!1,children:[]};r.push(d);const u=Q(e,a+1,o);d.children=u,r.push(...u)})),r};(0,n.sV)((()=>{I(),R();const e=h.value,a=k.value.find((a=>a.id===e));"all"===e||a||(console.warn(`Initial view ID ${e} not found, defaulting to 'all'.`),h.value="all"),"all"===h.value?(X(),J()):a&&(z(a.config),J())}));const H=()=>{T.value.visible=!0},j=()=>{me(),L.value.visible=!0},Y=()=>{V.conditions=JSON.parse(JSON.stringify(_.value)),V.logic=D.value,0===V.conditions.length&&ae(),V.visible=!0},Z=()=>{S.value.settingsList=c.value.map((e=>({key:e.key,title:e.title,visible:!1!==e.visible}))),S.value.visible=!0},ee=()=>{const e=V.conditions.filter((e=>e.field&&e.operator&&""!==e.value&&null!==e.value&&void 0!==e.value));_.value=JSON.parse(JSON.stringify(e)),D.value=V.logic,V.visible=!1,d.value=1,J()},ae=()=>{V.conditions.push({field:"",operator:"",value:""})},le=e=>{V.conditions.splice(e,1)},te=()=>{const{firstLevel:e,secondLevel:l,thirdLevel:t}=T.value.form,n=[e,l,t].filter(Boolean);0!==n.length?(v.value=n,g.value=n.map((e=>a.find((a=>a.key===e)))),d.value=1,J(),T.value.visible=!1,Ka.nk.success("分组已应用")):Ka.nk.warning("请至少选择一个分组字段")},ne=()=>{me();const{firstSort:e,secondSort:a,thirdSort:l}=L.value.form,t=[e,a,l].some((e=>e&&e.field));t?(d.value=1,J(),L.value.visible=!1,Ka.nk.success("排序已应用")):Ka.nk.warning("请至少选择一个排序字段")},ie=()=>{const e=S.value.settingsList.filter((e=>e.visible)).length;0!==e?(c.value=S.value.settingsList.map((e=>{const l=a.find((a=>a.key===e.key));return l?{...l,visible:e.visible}:null})).filter((e=>null!==e)),S.value.visible=!1):console.warn("请至少选择一个字段显示")},oe=(e=!0)=>{R(),S.value.visible&&(S.value.settingsList=c.value.map((e=>({key:e.key,title:e.title,visible:!1!==e.visible})))),e&&console.log("字段配置已恢复默认")},re=e=>{if(!_.value||0===_.value.length)return!0;const a=_.value.map((a=>{const l=e[a.field],t=a.value;if(void 0===l||null===l)return!1;switch(a.operator){case"eq":return String(l).toLowerCase()===String(t).toLowerCase();case"neq":return String(l).toLowerCase()!==String(t).toLowerCase();case"contains":return String(l).toLowerCase().includes(String(t).toLowerCase());case"notContains":return!String(l).toLowerCase().includes(String(t).toLowerCase());case"gt":return Number(l)>Number(t);case"gte":return Number(l)>=Number(t);case"lt":return Number(l)<Number(t);case"lte":return Number(l)<=Number(t);default:return!0}}));return"or"===D.value?a.some((e=>e)):a.every((e=>e))},se=(e,a)=>{const l=["firstSort","secondSort","thirdSort"].map((e=>L.value.form[e])).filter((e=>e&&e.field));for(const t of l){const l=e[t.field],n=a[t.field];if(l===n)continue;if("number"===typeof l&&"number"===typeof n)return"ascend"===t.order?l-n:n-l;const i=String(l||""),o=String(n||"");if(i<o)return"ascend"===t.order?-1:1;if(i>o)return"ascend"===t.order?1:-1}return 0},de=e=>{const a={未装车:"info",已登记:"warning",装车中:"warning",装车完成:"success",交仓中:"warning",交仓完成:"success",POD回传:"success"};return a[e]||"info"},ue=()=>{T.value.form={firstLevel:"",secondLevel:"",thirdLevel:""},v.value=[],g.value=[],J(),T.value.visible=!1,Ka.nk.success("已清除分组设置")},pe=()=>{L.value.form={...F},J(),L.value.visible=!1,Ka.nk.success("已清除排序设置")},me=()=>{L.value.form?["firstSort","secondSort","thirdSort"].forEach((e=>{L.value.form[e]||(L.value.form[e]={field:"",order:"ascend"})})):L.value.form={...F}},ce=(0,Pe.KR)({id:null,field:null,value:""}),be=(0,Pe.KR)({visible:!1,title:"",fieldLabel:"",value:"",isTextarea:!1,record:null,field:null}),ve=(0,Pe.KR)({visible:!1,oldValue:"",newValue:"",record:null,field:""}),ge=e=>["driverRegisterTime","loadingStartTime","loadingEndTime","carNumber","loader","dockNumber","loadingStatus","warehouseRemarks","driverLicense","licensePlate"].includes(e),he=(e,a)=>{ge(a)&&(ce.value={id:e.id,field:a,value:e[a]||""})},ke=(e,a)=>{ge(a)&&(ce.value={id:null,field:null,value:""},be.value={visible:!0,title:`编辑${a}`,fieldLabel:a,value:e[a]||"",isTextarea:"warehouseRemarks"===a,record:e,field:a})},fe=(e,a)=>{ce.value.id===e.id&&ce.value.field===a&&(ce.value.value!==e[a]?ve.value={visible:!0,oldValue:e[a],newValue:ce.value.value,record:e,field:a}:Ce())},ye=(e,a)=>{ce.value.id===e.id&&ce.value.field===a&&(ce.value.value!==e[a]?ve.value={visible:!0,oldValue:e[a],newValue:ce.value.value,record:e,field:a}:Ce())},Ce=()=>{ce.value={id:null,field:null,value:""},ve.value.visible=!1},we=()=>{ve.value.record&&ve.value.field&&(ve.value.record[ve.value.field]=ve.value.newValue,ve.value.visible=!1,ce.value={id:null,field:null,value:""},Ka.nk.success("保存成功"))},Te=()=>{be.value.record&&be.value.field&&(be.value.record[be.value.field]=be.value.value,be.value.visible=!1,Ka.nk.success("保存成功"))},Fe=(0,Pe.KR)({id:null,field:null,timer:null}),Le=(e,a)=>{Fe.value.timer&&clearTimeout(Fe.value.timer),Fe.value.timer=setTimeout((()=>{Fe.value={id:e.id,field:a,timer:null}}),700)},Se=()=>{Fe.value.timer&&clearTimeout(Fe.value.timer),Fe.value={id:null,field:null,timer:null}},Ve=(0,Pe.KR)([]),_e=(e,a,l)=>{if(e&&e.current!==d.value&&(d.value=e.current),e&&e.pageSize!==u.value&&(u.value=e.pageSize,d.value=1),l&&l.column){const e=l.field,a=l.order;L.value.form={...L.value.form,firstSort:{field:e,order:a}},J()}};return(e,a)=>{const r=(0,n.g2)("el-option"),d=(0,n.g2)("el-select"),u=(0,n.g2)("el-date-picker"),p=(0,n.g2)("el-input"),m=(0,n.g2)("el-button"),c=(0,n.g2)("el-radio-button"),b=(0,n.g2)("el-radio-group"),v=(0,n.g2)("el-tag"),g=(0,n.g2)("el-form-item"),F=(0,n.g2)("el-form"),_=(0,n.g2)("el-dialog"),D=(0,n.g2)("el-icon"),E=(0,n.g2)("el-checkbox");return(0,n.uX)(),(0,n.CE)("div",kl,[(0,n.Lk)("div",fl,[(0,n.Lk)("div",yl,[(0,n.bF)(d,{modelValue:l.value.warehouse,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.warehouse=e),placeholder:"仓库",size:"small",class:"filter-item"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{label:"美西二号仓",value:"west2"}),(0,n.bF)(r,{label:"美西一号仓",value:"west1"})])),_:1},8,["modelValue"]),(0,n.bF)(d,{modelValue:l.value.dateType,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.dateType=e),placeholder:"日期类型",size:"small",class:"filter-item"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{label:"创建日期",value:"create"}),(0,n.bF)(r,{label:"更新日期",value:"update"})])),_:1},8,["modelValue"]),(0,n.bF)(u,{modelValue:l.value.dateRange,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.dateRange=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small",class:"date-range-picker"},null,8,["modelValue"]),(0,n.bF)(d,{modelValue:l.value.searchType,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.searchType=e),placeholder:"搜索类型",size:"small",class:"filter-item"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{label:"车次号",value:"trainNumber"}),(0,n.bF)(r,{label:"出单日期",value:"issueDate"}),(0,n.bF)(r,{label:"出单人",value:"issuer"}),(0,n.bF)(r,{label:"装车类型",value:"loadingType"}),(0,n.bF)(r,{label:"派送类型",value:"deliveryType"}),(0,n.bF)(r,{label:"司机登记时间",value:"driverRegisterTime"}),(0,n.bF)(r,{label:"装车开始时间",value:"loadingStartTime"}),(0,n.bF)(r,{label:"装车结束时间",value:"loadingEndTime"}),(0,n.bF)(r,{label:"车厢号",value:"carNumber"}),(0,n.bF)(r,{label:"装车人",value:"loader"}),(0,n.bF)(r,{label:"DOCK号",value:"dockNumber"}),(0,n.bF)(r,{label:"装车状态",value:"loadingStatus"}),(0,n.bF)(r,{label:"出库组备注",value:"warehouseRemarks"}),(0,n.bF)(r,{label:"司机驾照",value:"driverLicense"}),(0,n.bF)(r,{label:"司机车牌号",value:"licensePlate"}),(0,n.bF)(r,{label:"司机电话",value:"driverPhone"}),(0,n.bF)(r,{label:"提货供应商",value:"supplier"}),(0,n.bF)(r,{label:"实际出库板数",value:"actualPallets"}),(0,n.bF)(r,{label:"合板数量",value:"palletsMerged"}),(0,n.bF)(r,{label:"装车预约时间",value:"loadingAppointmentTime"}),(0,n.bF)(r,{label:"重量",value:"weight"}),(0,n.bF)(r,{label:"方数",value:"cubicMeter"}),(0,n.bF)(r,{label:"总板数",value:"totalPallets"}),(0,n.bF)(r,{label:"派送成本",value:"deliveryCost"}),(0,n.bF)(r,{label:"Memo",value:"Memo"}),(0,n.bF)(r,{label:"跟进记录",value:"Followup"}),(0,n.bF)(r,{label:"司机出发时间",value:"DriverStartTime"}),(0,n.bF)(r,{label:"司机到达时间",value:"DriverEndTime"}),(0,n.bF)(r,{label:"交仓完成时间",value:"Arrived"}),(0,n.bF)(r,{label:"POD图片",value:"podImage"})])),_:1},8,["modelValue"]),(0,n.bF)(p,{modelValue:l.value.searchText,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value.searchText=e),placeholder:"搜索内容",size:"small",class:"search-input"},null,8,["modelValue"]),(0,n.Lk)("div",Cl,[(0,n.bF)(m,{type:"primary",size:"small",onClick:e.handleSearch},{default:(0,n.k6)((()=>a[37]||(a[37]=[(0,n.eW)("查询")]))),_:1},8,["onClick"]),(0,n.bF)(m,{size:"small",onClick:e.resetFilter},{default:(0,n.k6)((()=>a[38]||(a[38]=[(0,n.eW)("重置")]))),_:1},8,["onClick"]),(0,n.bF)(m,{size:"small",onClick:e.handleExport},{default:(0,n.k6)((()=>a[39]||(a[39]=[(0,n.eW)("导出")]))),_:1},8,["onClick"])])])]),(0,n.Lk)("div",wl,[(0,n.bF)(b,{modelValue:h.value,"onUpdate:modelValue":a[5]||(a[5]=e=>h.value=e),size:"small",class:"status-view-group"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{label:"all"},{default:(0,n.k6)((()=>[(0,n.eW)("全部("+(0,i.v_)(w.all||0)+")",1)])),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(k.value,(e=>((0,n.uX)(),(0,n.Wv)(c,{key:e.id,label:e.id,onContextmenu:a=>B(a,e.id)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.name),1)])),_:2},1032,["label","onContextmenu"])))),128))])),_:1},8,["modelValue"]),(0,n.Lk)("div",Tl,[(0,n.bF)(m,{type:"text",size:"small",onClick:U},{default:(0,n.k6)((()=>a[40]||(a[40]=[(0,n.eW)("保存视图")]))),_:1}),(0,n.bF)(m,{type:"text",size:"small",onClick:H},{default:(0,n.k6)((()=>a[41]||(a[41]=[(0,n.eW)("高级分组")]))),_:1}),(0,n.bF)(m,{type:"text",size:"small",onClick:j},{default:(0,n.k6)((()=>a[42]||(a[42]=[(0,n.eW)("高级排序")]))),_:1}),(0,n.bF)(m,{type:"text",size:"small",onClick:Y},{default:(0,n.k6)((()=>a[43]||(a[43]=[(0,n.eW)("筛选")]))),_:1}),(0,n.bF)(m,{type:"text",size:"small",onClick:Z},{default:(0,n.k6)((()=>a[44]||(a[44]=[(0,n.eW)("字段配置")]))),_:1})])]),(0,n.Lk)("div",Fl,[(0,n.bF)((0,Pe.R1)(cl.Wd),{dataSource:s.value,columns:W.value,rowKey:e=>e.id,pagination:P.value,rowSelection:x.value,loading:o.value,onChange:_e,scroll:{x:1500},expandable:{expandedRowKeys:Ve.value,expandRowByClick:!0,rowExpandable:e=>!e.isGroup,indentSize:30,onExpand:(e,a)=>{if(e)Ve.value.push(a.id);else{const e=Ve.value.indexOf(a.id);e>-1&&Ve.value.splice(e,1)}}}},{expandedRowRender:(0,n.k6)((({record:e})=>[(0,n.Lk)("div",Ll,[(0,n.Lk)("div",Sl,[(0,n.Lk)("div",Vl,[a[45]||(a[45]=(0,n.Lk)("span",{class:"info-label"},"装车开始时间:",-1)),(0,n.Lk)("span",_l,(0,i.v_)(e.loadingStartTime||"-"),1)]),(0,n.Lk)("div",Dl,[a[46]||(a[46]=(0,n.Lk)("span",{class:"info-label"},"装车结束时间:",-1)),(0,n.Lk)("span",Al,(0,i.v_)(e.loadingEndTime||"-"),1)]),(0,n.Lk)("div",Nl,[a[47]||(a[47]=(0,n.Lk)("span",{class:"info-label"},"司机登记时间:",-1)),(0,n.Lk)("span",Ml,(0,i.v_)(e.driverRegisterTime||"-"),1)]),(0,n.Lk)("div",Pl,[a[48]||(a[48]=(0,n.Lk)("span",{class:"info-label"},"车厢号:",-1)),(0,n.Lk)("span",xl,(0,i.v_)(e.carNumber||"-"),1)]),(0,n.Lk)("div",Wl,[a[49]||(a[49]=(0,n.Lk)("span",{class:"info-label"},"装车人:",-1)),(0,n.Lk)("span",El,(0,i.v_)(e.loader||"-"),1)]),(0,n.Lk)("div",Rl,[a[50]||(a[50]=(0,n.Lk)("span",{class:"info-label"},"DOCK号:",-1)),(0,n.Lk)("span",Il,(0,i.v_)(e.dockNumber||"-"),1)]),(0,n.Lk)("div",Ol,[a[51]||(a[51]=(0,n.Lk)("span",{class:"info-label"},"装车状态:",-1)),(0,n.Lk)("span",Ul,(0,i.v_)(e.loadingStatus||"-"),1)]),(0,n.Lk)("div",Kl,[a[52]||(a[52]=(0,n.Lk)("span",{class:"info-label"},"出库组备注:",-1)),(0,n.Lk)("span",zl,(0,i.v_)(e.warehouseRemarks||"-"),1)]),(0,n.Lk)("div",Xl,[a[53]||(a[53]=(0,n.Lk)("span",{class:"info-label"},"司机驾照:",-1)),(0,n.Lk)("span",Bl,(0,i.v_)(e.driverLicense||"-"),1)]),(0,n.Lk)("div",$l,[a[54]||(a[54]=(0,n.Lk)("span",{class:"info-label"},"司机车牌号:",-1)),(0,n.Lk)("span",Gl,(0,i.v_)(e.licensePlate||"-"),1)])])])])),bodyCell:(0,n.k6)((({column:l,record:o})=>[o.isGroup?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},["trainNumber"===l.key?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,i.C4)(["group-name",`group-level-${o.groupLevel}`])},[(0,n.Lk)("div",ql,[(0,n.Lk)("span",Jl,(0,i.v_)(o.groupName),1),(0,n.Lk)("span",Ql,"("+(0,i.v_)(o.count)+")",1)])],2)):((0,n.uX)(),(0,n.CE)("span",Hl,"-"))],64)):ge(l.key)?((0,n.uX)(),(0,n.CE)("div",jl,[ce.value.id===o.id&&ce.value.field===l.key?((0,n.uX)(),(0,n.CE)("div",Yl,[(0,n.bF)(p,{modelValue:ce.value.value,"onUpdate:modelValue":a[6]||(a[6]=e=>ce.value.value=e),size:"small",onBlur:e=>fe(o,l.key),onKeyup:[(0,t.jR)((e=>ye(o,l.key)),["enter"]),(0,t.jR)(Ce,["esc"])]},null,8,["modelValue","onBlur","onKeyup"])])):((0,n.uX)(),(0,n.CE)("div",{key:1,class:"editable-cell",onClick:e=>he(o,l.key),onDblclick:e=>ke(o,l.key)},[(0,n.Lk)("span",{class:(0,i.C4)(["cell-content",{"show-full":Fe.value.id===o.id&&Fe.value.field===l.key}]),onMouseenter:e=>Le(o,l.key),onMouseleave:Se},(0,i.v_)(o[l.key]||"-"),43,et)],40,Zl))])):((0,n.uX)(),(0,n.CE)(n.FK,{key:2},["loadingStatus"===l.key?((0,n.uX)(),(0,n.CE)("div",at,[(0,n.Lk)("span",lt,[(0,n.bF)(v,{type:de(o.loadingStatus),size:"small"},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(o.loadingStatus),1)])),_:2},1032,["type"])])])):"operation"===l.key?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.bF)(m,{type:"text",size:"small",onClick:a=>e.handleEdit(o)},{default:(0,n.k6)((()=>a[55]||(a[55]=[(0,n.eW)("编辑")]))),_:2},1032,["onClick"]),(0,n.bF)(m,{type:"text",size:"small",onClick:a=>e.handleMore(o)},{default:(0,n.k6)((()=>a[56]||(a[56]=[(0,n.eW)("更多")]))),_:2},1032,["onClick"])],64)):((0,n.uX)(),(0,n.CE)("div",tt,[(0,n.Lk)("span",{class:(0,i.C4)(["cell-content",{"show-full":Fe.value.id===o.id&&Fe.value.field===l.key}]),onMouseenter:e=>Le(o,l.key),onMouseleave:Se},(0,i.v_)(o[l.key]||"-"),43,nt)]))],64))])),_:1},8,["dataSource","columns","rowKey","pagination","rowSelection","loading","expandable"])]),(0,n.bF)(_,{title:"高级分组",modelValue:T.value.visible,"onUpdate:modelValue":a[11]||(a[11]=e=>T.value.visible=e),width:"500px"},{footer:(0,n.k6)((()=>[(0,n.bF)(m,{onClick:ue},{default:(0,n.k6)((()=>a[57]||(a[57]=[(0,n.eW)("清除分组")]))),_:1}),(0,n.bF)(m,{onClick:a[10]||(a[10]=e=>T.value.visible=!1)},{default:(0,n.k6)((()=>a[58]||(a[58]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(m,{type:"primary",onClick:te},{default:(0,n.k6)((()=>a[59]||(a[59]=[(0,n.eW)("确定")]))),_:1})])),default:(0,n.k6)((()=>[(0,n.Lk)("div",it,[(0,n.bF)(F,{model:T.value.form,"label-width":"80px"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{label:"一级分组"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:T.value.form.firstLevel,"onUpdate:modelValue":a[7]||(a[7]=e=>T.value.form.firstLevel=e),placeholder:"请选择一级分组字段",clearable:""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(N.value,(e=>((0,n.uX)(),(0,n.Wv)(r,{key:e.key,label:e.title,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(g,{label:"二级分组"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:T.value.form.secondLevel,"onUpdate:modelValue":a[8]||(a[8]=e=>T.value.form.secondLevel=e),placeholder:"请选择二级分组字段",clearable:""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(N.value,(e=>((0,n.uX)(),(0,n.Wv)(r,{key:e.key,label:e.title,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(g,{label:"三级分组"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:T.value.form.thirdLevel,"onUpdate:modelValue":a[9]||(a[9]=e=>T.value.form.thirdLevel=e),placeholder:"请选择三级分组字段",clearable:""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(N.value,(e=>((0,n.uX)(),(0,n.Wv)(r,{key:e.key,label:e.title,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue"]),(0,n.bF)(_,{title:"高级排序",modelValue:L.value.visible,"onUpdate:modelValue":a[19]||(a[19]=e=>L.value.visible=e),width:"500px"},{footer:(0,n.k6)((()=>[(0,n.bF)(m,{onClick:pe},{default:(0,n.k6)((()=>a[60]||(a[60]=[(0,n.eW)("清除排序")]))),_:1}),(0,n.bF)(m,{onClick:a[18]||(a[18]=e=>L.value.visible=!1)},{default:(0,n.k6)((()=>a[61]||(a[61]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(m,{type:"primary",onClick:ne},{default:(0,n.k6)((()=>a[62]||(a[62]=[(0,n.eW)("确定")]))),_:1})])),default:(0,n.k6)((()=>[(0,n.Lk)("div",ot,[(0,n.bF)(F,{"label-width":"80px"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{label:"一级排序"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",rt,[(0,n.bF)(d,{modelValue:L.value.form.firstSort.field,"onUpdate:modelValue":a[12]||(a[12]=e=>L.value.form.firstSort.field=e),placeholder:"请选择排序字段",clearable:"",class:"sort-field"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(M.value,(e=>((0,n.uX)(),(0,n.Wv)(r,{key:e.key,label:e.title,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,n.bF)(d,{modelValue:L.value.form.firstSort.order,"onUpdate:modelValue":a[13]||(a[13]=e=>L.value.form.firstSort.order=e),placeholder:"排序方式",class:"sort-order"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{label:"升序",value:"ascend"}),(0,n.bF)(r,{label:"降序",value:"descend"})])),_:1},8,["modelValue"])])])),_:1}),(0,n.bF)(g,{label:"二级排序"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",st,[(0,n.bF)(d,{modelValue:L.value.form.secondSort.field,"onUpdate:modelValue":a[14]||(a[14]=e=>L.value.form.secondSort.field=e),placeholder:"请选择排序字段",clearable:"",class:"sort-field"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(M.value,(e=>((0,n.uX)(),(0,n.Wv)(r,{key:e.key,label:e.title,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,n.bF)(d,{modelValue:L.value.form.secondSort.order,"onUpdate:modelValue":a[15]||(a[15]=e=>L.value.form.secondSort.order=e),placeholder:"排序方式",class:"sort-order"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{label:"升序",value:"ascend"}),(0,n.bF)(r,{label:"降序",value:"descend"})])),_:1},8,["modelValue"])])])),_:1}),(0,n.bF)(g,{label:"三级排序"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",dt,[(0,n.bF)(d,{modelValue:L.value.form.thirdSort.field,"onUpdate:modelValue":a[16]||(a[16]=e=>L.value.form.thirdSort.field=e),placeholder:"请选择排序字段",clearable:"",class:"sort-field"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(M.value,(e=>((0,n.uX)(),(0,n.Wv)(r,{key:e.key,label:e.title,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,n.bF)(d,{modelValue:L.value.form.thirdSort.order,"onUpdate:modelValue":a[17]||(a[17]=e=>L.value.form.thirdSort.order=e),placeholder:"排序方式",class:"sort-order"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{label:"升序",value:"ascend"}),(0,n.bF)(r,{label:"降序",value:"descend"})])),_:1},8,["modelValue"])])])),_:1})])),_:1})])])),_:1},8,["modelValue"]),(0,n.bF)(_,{title:"字段配置",modelValue:S.value.visible,"onUpdate:modelValue":a[22]||(a[22]=e=>S.value.visible=e),width:"600px"},{footer:(0,n.k6)((()=>[(0,n.bF)(m,{onClick:a[21]||(a[21]=e=>S.value.visible=!1)},{default:(0,n.k6)((()=>a[65]||(a[65]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(m,{type:"primary",onClick:ie},{default:(0,n.k6)((()=>a[66]||(a[66]=[(0,n.eW)("确定")]))),_:1})])),default:(0,n.k6)((()=>[(0,n.Lk)("div",ut,[(0,n.Lk)("div",pt,[a[64]||(a[64]=(0,n.Lk)("span",null,"拖拽调整顺序，勾选控制显隐",-1)),(0,n.bF)(m,{type:"primary",plain:"",size:"small",onClick:oe},{default:(0,n.k6)((()=>a[63]||(a[63]=[(0,n.eW)("恢复默认")]))),_:1})]),(0,n.Lk)("div",mt,[(0,n.bF)((0,Pe.R1)(vl()),{modelValue:S.value.settingsList,"onUpdate:modelValue":a[20]||(a[20]=e=>S.value.settingsList=e),"item-key":"key",handle:".drag-handle","ghost-class":"ghost",class:"column-draggable-list"},{item:(0,n.k6)((({element:e})=>[(0,n.Lk)("div",ct,[(0,n.bF)(D,{class:"drag-handle",title:"拖拽排序"},{default:(0,n.k6)((()=>[(0,n.bF)((0,Pe.R1)(We.rgM))])),_:1}),(0,n.bF)(E,{modelValue:e.visible,"onUpdate:modelValue":a=>e.visible=a},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.title),1)])),_:2},1032,["modelValue","onUpdate:modelValue"])])])),_:1},8,["modelValue"])])])])),_:1},8,["modelValue"]),(0,n.bF)(_,{title:"高级筛选",modelValue:V.visible,"onUpdate:modelValue":a[25]||(a[25]=e=>V.visible=e),width:"700px"},{footer:(0,n.k6)((()=>[(0,n.bF)(m,{onClick:a[24]||(a[24]=e=>V.visible=!1)},{default:(0,n.k6)((()=>a[71]||(a[71]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(m,{type:"primary",onClick:ee},{default:(0,n.k6)((()=>a[72]||(a[72]=[(0,n.eW)("应用筛选")]))),_:1})])),default:(0,n.k6)((()=>[(0,n.Lk)("div",bt,[(0,n.Lk)("div",vt,[a[69]||(a[69]=(0,n.Lk)("span",{class:"filter-logic-label"},"筛选逻辑:",-1)),(0,n.bF)(b,{modelValue:V.logic,"onUpdate:modelValue":a[23]||(a[23]=e=>V.logic=e),size:"small"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{label:"and"},{default:(0,n.k6)((()=>a[67]||(a[67]=[(0,n.eW)("且 (AND)")]))),_:1}),(0,n.bF)(c,{label:"or"},{default:(0,n.k6)((()=>a[68]||(a[68]=[(0,n.eW)("或 (OR)")]))),_:1})])),_:1},8,["modelValue"])]),(0,n.Lk)("div",gt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(V.conditions,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:"filter-condition-row"},[(0,n.bF)(d,{modelValue:e.field,"onUpdate:modelValue":a=>e.field=a,placeholder:"选择字段",size:"small",class:"filter-field"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(A.value,(e=>((0,n.uX)(),(0,n.Wv)(r,{key:e.key,label:e.title,value:e.key},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,n.bF)(d,{modelValue:e.operator,"onUpdate:modelValue":a=>e.operator=a,placeholder:"选择条件",size:"small",class:"filter-operator"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{label:"等于",value:"eq"}),(0,n.bF)(r,{label:"不等于",value:"neq"}),(0,n.bF)(r,{label:"包含",value:"contains"}),(0,n.bF)(r,{label:"不包含",value:"notContains"}),(0,n.bF)(r,{label:"大于",value:"gt"}),(0,n.bF)(r,{label:"大于等于",value:"gte"}),(0,n.bF)(r,{label:"小于",value:"lt"}),(0,n.bF)(r,{label:"小于等于",value:"lte"})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,n.bF)(p,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:"输入值",size:"small",class:"filter-value"},null,8,["modelValue","onUpdate:modelValue"]),(0,n.bF)(m,{type:"danger",size:"small",circle:"",class:"remove-condition",onClick:e=>le(a)},{default:(0,n.k6)((()=>[(0,n.bF)(D,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,Pe.R1)(We.epd))])),_:1})])),_:2},1032,["onClick"])])))),128))]),(0,n.Lk)("div",ht,[(0,n.bF)(m,{type:"primary",plain:"",size:"small",onClick:ae},{default:(0,n.k6)((()=>[(0,n.bF)(D,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,Pe.R1)(We.FWt))])),_:1}),a[70]||(a[70]=(0,n.eW)(" 添加条件 "))])),_:1})])])])),_:1},8,["modelValue"]),(0,n.bF)(_,{title:"保存视图",modelValue:f.visible,"onUpdate:modelValue":a[28]||(a[28]=e=>f.visible=e),width:"400px"},{footer:(0,n.k6)((()=>[(0,n.bF)(m,{onClick:a[27]||(a[27]=e=>f.visible=!1)},{default:(0,n.k6)((()=>a[73]||(a[73]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(m,{type:"primary",onClick:K},{default:(0,n.k6)((()=>a[74]||(a[74]=[(0,n.eW)("确定")]))),_:1})])),default:(0,n.k6)((()=>[(0,n.bF)(F,{model:f,"label-width":"80px"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{label:"视图名称",required:""},{default:(0,n.k6)((()=>[(0,n.bF)(p,{modelValue:f.viewName,"onUpdate:modelValue":a[26]||(a[26]=e=>f.viewName=e),placeholder:"请输入视图名称"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,n.bF)(_,{title:"重命名视图",modelValue:y.visible,"onUpdate:modelValue":a[31]||(a[31]=e=>y.visible=e),width:"400px","destroy-on-close":""},{footer:(0,n.k6)((()=>[(0,n.bF)(m,{onClick:a[30]||(a[30]=e=>y.visible=!1)},{default:(0,n.k6)((()=>a[75]||(a[75]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(m,{type:"primary",onClick:q},{default:(0,n.k6)((()=>a[76]||(a[76]=[(0,n.eW)("确定")]))),_:1})])),default:(0,n.k6)((()=>[(0,n.bF)(F,{"label-width":"80px"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{label:"新名称",required:""},{default:(0,n.k6)((()=>[(0,n.bF)(p,{modelValue:y.newName,"onUpdate:modelValue":a[29]||(a[29]=e=>y.newName=e),placeholder:"请输入新的视图名称",onKeyup:(0,t.jR)(q,["enter"])},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),C.visible?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"context-menu",style:(0,i.Tr)({top:C.top+"px",left:C.left+"px",position:"fixed",zIndex:2e3})},[(0,n.Lk)("div",{class:"context-menu-item",onClick:G},"重命名"),(0,n.Lk)("div",{class:"context-menu-item",onClick:$},"删除")],4)):(0,n.Q3)("",!0),(0,n.bF)(_,{title:"确认修改",modelValue:ve.value.visible,"onUpdate:modelValue":a[32]||(a[32]=e=>ve.value.visible=e),width:"400px"},{footer:(0,n.k6)((()=>[(0,n.bF)(m,{onClick:Ce},{default:(0,n.k6)((()=>a[78]||(a[78]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(m,{type:"primary",onClick:we},{default:(0,n.k6)((()=>a[79]||(a[79]=[(0,n.eW)("确定")]))),_:1})])),default:(0,n.k6)((()=>[(0,n.Lk)("div",kt,[a[77]||(a[77]=(0,n.Lk)("p",null,"是否保存修改？",-1)),(0,n.Lk)("div",ft,[(0,n.Lk)("div",null,"原值："+(0,i.v_)(ve.value.oldValue||"空"),1),(0,n.Lk)("div",null,"新值："+(0,i.v_)(ve.value.newValue||"空"),1)])])])),_:1},8,["modelValue"]),(0,n.bF)(_,{title:be.value.title,modelValue:be.value.visible,"onUpdate:modelValue":a[36]||(a[36]=e=>be.value.visible=e),width:"500px"},{footer:(0,n.k6)((()=>[(0,n.bF)(m,{onClick:a[35]||(a[35]=e=>be.value.visible=!1)},{default:(0,n.k6)((()=>a[80]||(a[80]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(m,{type:"primary",onClick:Te},{default:(0,n.k6)((()=>a[81]||(a[81]=[(0,n.eW)("确定")]))),_:1})])),default:(0,n.k6)((()=>[(0,n.Lk)("div",yt,[(0,n.bF)(F,{"label-width":"100px"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{label:be.value.fieldLabel},{default:(0,n.k6)((()=>[be.value.isTextarea?((0,n.uX)(),(0,n.Wv)(p,{key:1,modelValue:be.value.value,"onUpdate:modelValue":a[34]||(a[34]=e=>be.value.value=e),type:"textarea",rows:4,placeholder:"请输入"+be.value.fieldLabel},null,8,["modelValue","placeholder"])):((0,n.uX)(),(0,n.Wv)(p,{key:0,modelValue:be.value.value,"onUpdate:modelValue":a[33]||(a[33]=e=>be.value.value=e),placeholder:"请输入"+be.value.fieldLabel},null,8,["modelValue","placeholder"]))])),_:1},8,["label"])])),_:1})])])),_:1},8,["title","modelValue"])])}}},Tt=(0,Oe.A)(wt,[["__scopeId","data-v-16c9fc82"]]),Ft=Tt,Lt={class:"tag-list-container"},St={class:"operation-bar"},Vt={class:"pagination-container"},_t={class:"dialog-footer"};function Dt(e,a,l,t,o,r){const s=(0,n.g2)("el-input"),d=(0,n.g2)("el-form-item"),u=(0,n.g2)("el-option"),p=(0,n.g2)("el-select"),m=(0,n.g2)("el-button"),c=(0,n.g2)("el-form"),b=(0,n.g2)("el-table-column"),v=(0,n.g2)("el-tag"),g=(0,n.g2)("el-table"),h=(0,n.g2)("el-pagination"),k=(0,n.g2)("TagForm"),f=(0,n.g2)("el-dialog"),y=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",Lt,[(0,n.bF)(c,{inline:!0,model:o.searchForm,class:"search-form"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{label:"关键词"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{modelValue:o.searchForm.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchForm.keyword=e),placeholder:"标签名称/描述",clearable:""},null,8,["modelValue"])])),_:1}),(0,n.bF)(d,{label:"分类"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{modelValue:o.searchForm.category,"onUpdate:modelValue":a[1]||(a[1]=e=>o.searchForm.category=e),placeholder:"选择分类",clearable:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"Business",value:"Business"}),(0,n.bF)(u,{label:"Warning",value:"Warning"}),(0,n.bF)(u,{label:"Anomaly",value:"Anomaly"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(d,{label:"状态"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{modelValue:o.searchForm.status,"onUpdate:modelValue":a[2]||(a[2]=e=>o.searchForm.status=e),placeholder:"选择状态",clearable:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"活跃",value:"Active"}),(0,n.bF)(u,{label:"弃用",value:"Deprecated"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.bF)(m,{type:"primary",onClick:r.handleSearch},{default:(0,n.k6)((()=>a[6]||(a[6]=[(0,n.eW)("搜索")]))),_:1},8,["onClick"]),(0,n.bF)(m,{onClick:r.resetSearchForm},{default:(0,n.k6)((()=>a[7]||(a[7]=[(0,n.eW)("重置")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),(0,n.Lk)("div",St,[(0,n.bF)(m,{type:"primary",onClick:r.handleAddTag},{default:(0,n.k6)((()=>a[8]||(a[8]=[(0,n.eW)("新建标签")]))),_:1},8,["onClick"])]),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(g,{data:o.allTableData,border:"",style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)(b,{prop:"tagKey",label:"标签键","min-width":"120"}),(0,n.bF)(b,{prop:"tagValue",label:"标签值","min-width":"120"}),(0,n.bF)(b,{prop:"category",label:"分类",width:"120"},{default:(0,n.k6)((({row:e})=>[(0,n.bF)(v,{type:r.getCategoryTagType(e.category)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.category),1)])),_:2},1032,["type"])])),_:1}),(0,n.bF)(b,{prop:"status",label:"状态",width:"100"},{default:(0,n.k6)((({row:e})=>[(0,n.bF)(v,{type:r.getStatusTagType(e.status)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)("Active"===e.status?"活跃":"弃用"),1)])),_:2},1032,["type"])])),_:1}),(0,n.bF)(b,{prop:"description",label:"描述","min-width":"200","show-overflow-tooltip":""}),(0,n.bF)(b,{prop:"updatedAt",label:"更新时间",width:"160"}),(0,n.bF)(b,{label:"操作",width:"200",fixed:"right"},{default:(0,n.k6)((({row:e})=>[(0,n.bF)(m,{link:"",type:"primary",onClick:a=>r.handleEditTag(e)},{default:(0,n.k6)((()=>a[9]||(a[9]=[(0,n.eW)("编辑")]))),_:2},1032,["onClick"]),(0,n.bF)(m,{link:"",type:"Active"===e.status?"warning":"success",onClick:a=>r.handleChangeStatus(e)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)("Active"===e.status?"弃用":"激活"),1)])),_:2},1032,["type","onClick"]),(0,n.bF)(m,{link:"",type:"danger",onClick:a=>r.handleDeleteTag(e)},{default:(0,n.k6)((()=>a[10]||(a[10]=[(0,n.eW)("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[y,o.loading]]),(0,n.Lk)("div",Vt,[(0,n.bF)(h,{"current-page":o.currentPage,"onUpdate:currentPage":a[3]||(a[3]=e=>o.currentPage=e),"page-size":o.pageSize,"onUpdate:pageSize":a[4]||(a[4]=e=>o.pageSize=e),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:r.handleSizeChange,onCurrentChange:r.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),(0,n.bF)(f,{modelValue:o.tagFormDialogVisible,"onUpdate:modelValue":a[5]||(a[5]=e=>o.tagFormDialogVisible=e),title:r.tagDialogTitle,width:"60%","close-on-click-modal":!1,onClose:r.handleCloseTagFormDialog,"destroy-on-close":""},{footer:(0,n.k6)((()=>[(0,n.Lk)("span",_t,[(0,n.bF)(m,{onClick:r.handleCloseTagFormDialog},{default:(0,n.k6)((()=>a[11]||(a[11]=[(0,n.eW)("取消")]))),_:1},8,["onClick"]),(0,n.bF)(m,{type:"primary",onClick:r.handleSubmitTagForm},{default:(0,n.k6)((()=>a[12]||(a[12]=[(0,n.eW)("确定")]))),_:1},8,["onClick"])])])),default:(0,n.k6)((()=>[(0,n.bF)(k,{ref:"tagFormRef","initial-data":o.currentTag,mode:o.tagDialogMode,onSaveSuccess:r.handleSaveSuccess},null,8,["initial-data","mode","onSaveSuccess"])])),_:1},8,["modelValue","title","onClose"])])}function At(e,a,l,t,i,o){const r=(0,n.g2)("el-input"),s=(0,n.g2)("el-form-item"),d=(0,n.g2)("el-option"),u=(0,n.g2)("el-select"),p=(0,n.g2)("el-button"),m=(0,n.g2)("el-form");return(0,n.uX)(),(0,n.Wv)(m,{ref:"tagFormRef",model:t.formData,rules:t.formRules,"label-width":"120px",class:"tag-form"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{label:"标签 Key",prop:"tagKey"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{modelValue:t.formData.tagKey,"onUpdate:modelValue":a[0]||(a[0]=e=>t.formData.tagKey=e),placeholder:"建议格式: category.domain.name (e.g., business.order.userId)",disabled:"edit"===l.mode},null,8,["modelValue","disabled"]),a[6]||(a[6]=(0,n.Lk)("div",{class:"form-tip"},"唯一标识，创建后不可修改。建议使用小写字母、数字、点(.)。",-1))])),_:1}),(0,n.bF)(s,{label:"标签名称/描述",prop:"description"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{modelValue:t.formData.description,"onUpdate:modelValue":a[1]||(a[1]=e=>t.formData.description=e),type:"textarea",placeholder:"描述标签含义和用途"},null,8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"标签分类",prop:"category"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{modelValue:t.formData.category,"onUpdate:modelValue":a[2]||(a[2]=e=>t.formData.category=e),placeholder:"选择标签分类"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{label:"业务 (Business)",value:"Business"}),(0,n.bF)(d,{label:"预警 (Warning)",value:"Warning"}),(0,n.bF)(d,{label:"异常 (Anomaly)",value:"Anomaly"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"值类型",prop:"valueType"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{modelValue:t.formData.valueType,"onUpdate:modelValue":a[3]||(a[3]=e=>t.formData.valueType=e),placeholder:"选择值类型",onChange:t.handleValueTypeChange},{default:(0,n.k6)((()=>[(0,n.bF)(d,{label:"字符串 (String)",value:"String"}),(0,n.bF)(d,{label:"数字 (Number)",value:"Number"}),(0,n.bF)(d,{label:"布尔 (Boolean)",value:"Boolean"}),(0,n.bF)(d,{label:"枚举 (Enum)",value:"Enum"})])),_:1},8,["modelValue","onChange"])])),_:1}),"Enum"===t.formData.valueType?((0,n.uX)(),(0,n.Wv)(s,{key:0,label:"允许的枚举值",prop:"allowedValues"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.formData.allowedValues,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:"enum-item"},[(0,n.bF)(r,{modelValue:e.key,"onUpdate:modelValue":a=>e.key=a,placeholder:"枚举 Key (英文/数字)",style:{width:"40%","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),(0,n.bF)(r,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:"枚举 Value (显示值)",style:{width:"40%","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),(0,n.bF)(p,{type:"danger",icon:t.Delete,circle:"",onClick:e=>t.removeAllowedValue(a)},null,8,["icon","onClick"])])))),128)),(0,n.bF)(p,{type:"primary",plain:"",onClick:t.addAllowedValue},{default:(0,n.k6)((()=>a[7]||(a[7]=[(0,n.eW)("添加枚举值")]))),_:1},8,["onClick"]),a[8]||(a[8]=(0,n.Lk)("div",{class:"form-tip"},"为枚举类型定义可选的 Key-Value 对。Key 建议使用英文或数字。",-1))])),_:1})):(0,n.Q3)("",!0),(0,n.bF)(s,{label:"负责人/团队",prop:"owner"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{modelValue:t.formData.owner,"onUpdate:modelValue":a[4]||(a[4]=e=>t.formData.owner=e),placeholder:"选填，输入负责人或团队名称"},null,8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"备注",prop:"notes"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{modelValue:t.formData.notes,"onUpdate:modelValue":a[5]||(a[5]=e=>t.formData.notes=e),type:"textarea",placeholder:"选填，额外说明信息"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])}const Nt=(e,a,l)=>(console.log("Checking uniqueness for:",a),new Promise(((e,l)=>{setTimeout((()=>{"business.order.userId"===a?l(new Error("标签 Key 已存在")):e()}),300)})).then((()=>l())).catch((e=>l(e)))),Mt=(e,a,l)=>{const t=/^[a-z0-9]+(\.[a-z0-9]+)*$/;return a?t.test(a)?l():l(new Error("格式不正确 (应为: category.domain.name, 仅小写字母/数字/点)")):l(new Error("标签 Key 不能为空"))},Pt=(e,a,l)=>{if(!a||0===a.length)return l(new Error("枚举类型必须至少定义一个允许值"));for(const t of a)if(!t.key||!t.value)return l(new Error("枚举的 Key 和 Value 不能为空"));l()},xt={name:"TagForm",props:{initialData:{type:Object,default:null},mode:{type:String,default:"add"}},emits:["save-success"],setup(e,{emit:a}){const l=(0,Pe.KR)(null),t=(0,Pe.Kh)({tagKey:"",description:"",category:"Business",valueType:"String",allowedValues:[],owner:"",notes:"",id:null,status:"Active",createdAt:"",updatedAt:"",creator:"CurrentUser"}),i=(0,Pe.Kh)({tagKey:[{required:!0,validator:Mt,trigger:"blur"},{validator:(a,l,t)=>{if("add"===e.mode)return Nt(a,l,t);t()},trigger:"blur"}],description:[{required:!0,message:"请输入标签名称/描述",trigger:"blur"}],category:[{required:!0,message:"请选择标签分类",trigger:"change"}],valueType:[{required:!0,message:"请选择值类型",trigger:"change"}],allowedValues:[{validator:(e,a,l)=>{if("Enum"===t.valueType)return Pt(e,a,l);l()},trigger:"change"}]}),o=()=>{l.value?.resetFields(),t.tagKey="",t.description="",t.category="Business",t.valueType="String",t.allowedValues=[],t.owner="",t.notes="",t.id=null,t.status="Active"},r=e=>{e&&(o(),t.id=e.id,t.tagKey=e.tagKey,t.description=e.description,t.category=e.category,t.valueType=e.valueType,t.allowedValues=e.allowedValues?JSON.parse(JSON.stringify(e.allowedValues)):[],t.owner=e.owner||"",t.notes=e.notes||"",t.status=e.status,t.createdAt=e.createdAt,t.updatedAt=e.updatedAt,t.creator=e.creator)},s=()=>{t.allowedValues.push({key:"",value:""})},d=e=>{t.allowedValues.splice(e,1)},u=e=>{"Enum"!==e?t.allowedValues=[]:0===t.allowedValues.length&&s(),l.value?.clearValidate("allowedValues")},p=()=>{const a={tagKey:t.tagKey,description:t.description,category:t.category,valueType:t.valueType,owner:t.owner,notes:t.notes};return"Enum"===t.valueType&&(a.allowedValues=t.allowedValues.filter((e=>e.key&&e.value))),"edit"===e.mode&&t.id&&(a.id=t.id),a},m=()=>l.value?.validate(),c=async()=>{try{await m();const l=p();console.log("Form validation passed. Data to save:",l),console.log(`Simulating API call to ${"add"===e.mode?"create":"update"} tag...`),await new Promise((e=>setTimeout(e,500)));const n={...l,id:"add"===e.mode?Date.now():t.id,status:t.status||"Active",creator:t.creator||"CurrentUser",createdAt:t.createdAt||(new Date).toISOString(),updatedAt:(new Date).toISOString()};a("save-success",n),Ka.nk.success(`标签${"add"===e.mode?"创建":"更新"}成功！`),"add"===e.mode&&o()}catch(l){console.error("Form validation or submission failed:",l),Ka.nk.error(l.message||`标签${"add"===e.mode?"创建":"更新"}失败！`)}};return(0,n.wB)((()=>e.initialData),(e=>{e&&r(e)}),{immediate:!0}),(0,n.sV)((()=>{"Enum"===t.valueType&&0===t.allowedValues.length&&s()})),{tagFormRef:l,formData:t,formRules:i,resetForm:o,submitForm:c,addAllowedValue:s,removeAllowedValue:d,handleValueTypeChange:u,getFormData:p,validate:m,Delete:We.epd}}},Wt=(0,Oe.A)(xt,[["render",At],["__scopeId","data-v-8ac0334c"]]),Et=Wt,Rt={name:"TagList",components:{TagForm:Et},data(){return{loading:!1,currentPage:1,pageSize:10,tagFormDialogVisible:!1,tagDialogMode:"add",currentTag:null,tagFormRef:null,searchForm:{keyword:"",category:"",status:""},allTableData:[],total:0}},computed:{tagDialogTitle(){return"add"===this.tagDialogMode?"新建标签":"编辑标签"}},methods:{handleSearch(){this.currentPage=1,console.log("搜索条件:",this.searchForm),this.fetchTags()},resetSearchForm(){this.searchForm={keyword:"",category:"",status:""},this.currentPage=1,this.fetchTags()},fetchTags(){this.loading=!0,console.log("Fetching tags with filters:",this.searchForm),setTimeout((()=>{this.allTableData=[{id:1,tagKey:"environment",tagValue:"production",category:"Business",status:"Active",description:"生产环境标签",updatedAt:"2024-03-20 10:00:00"},{id:2,tagKey:"priority",tagValue:"high",category:"Warning",status:"Active",description:"高优先级标签",updatedAt:"2024-03-20 11:00:00"},{id:3,tagKey:"error",tagValue:"critical",category:"Anomaly",status:"Deprecated",description:"严重错误标签",updatedAt:"2024-03-20 12:00:00"}],this.total=this.allTableData.length,this.loading=!1,console.log("Tags fetched (simulated).")}),500)},getCategoryTagType(e){const a={Business:"primary",Warning:"warning",Anomaly:"danger"};return a[e]||"info"},getStatusTagType(e){return"Active"===e?"success":"info"},handleAddTag(){this.tagDialogMode="add",this.currentTag=null,this.tagFormDialogVisible=!0,console.log("打开新建标签对话框"),this.$nextTick((()=>{this.$refs.tagFormRef?.resetForm()}))},handleEditTag(e){this.tagDialogMode="edit",this.currentTag=JSON.parse(JSON.stringify(e)),this.tagFormDialogVisible=!0,console.log("打开编辑标签对话框, 数据:",this.currentTag)},handleChangeStatus(e){const a="Active"===e.status?"Deprecated":"Active",l="Active"===a?"弃用":"激活";za.s.confirm(`确定要${l}标签 "${e.tagKey}" 吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const t=this.allTableData.findIndex((a=>a.id===e.id));-1!==t&&(this.allTableData[t].status=a,this.allTableData[t].updatedAt=(new Date).toLocaleString(),Ka.nk.success(`${l}成功`))})).catch((()=>{Ka.nk.info(`已取消${l}`)}))},handleDeleteTag(e){"Active"!==e.status?za.s.confirm(`确定要删除标签 "${e.tagKey}" 吗? 此操作不可恢复!`,"警告",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"error"}).then((()=>{console.log(`Deleting tag ${e.tagKey}`),this.allTableData=this.allTableData.filter((a=>a.id!==e.id)),Ka.nk.success("删除成功")})).catch((()=>{Ka.nk.info("已取消删除")})):Ka.nk.warning("活跃状态的标签不能删除，请先弃用。")},handleCloseTagFormDialog(){this.tagFormDialogVisible=!1,this.currentTag=null,console.log("关闭标签对话框")},handleSubmitTagForm(){console.log("触发表单提交，调用 TagForm 的 submitForm 方法"),this.$refs.tagFormRef?.submitForm()},handleSaveSuccess(e){if(console.log("TagList 收到 save-success 事件, 数据:",e),this.handleCloseTagFormDialog(),"add"===this.tagDialogMode)this.allTableData.unshift(e);else{const a=this.allTableData.findIndex((a=>a.id===e.id));-1!==a?this.allTableData.splice(a,1,e):this.allTableData.push(e)}Ka.nk.success(`标签 ${"add"===this.tagDialogMode?"创建":"更新"}成功!`)},handleSizeChange(e){this.pageSize=e,this.currentPage=1,this.fetchTags()},handleCurrentChange(e){this.currentPage=e,this.fetchTags()}},mounted(){this.fetchTags()}},It=(0,Oe.A)(Rt,[["render",Dt],["__scopeId","data-v-6199d6cc"]]),Ot=It,Ut={class:"tag-group-list-container"},Kt={class:"operation-bar"},zt={class:"pagination-container"},Xt={class:"dialog-footer"};function Bt(e,a,l,t,o,r){const s=(0,n.g2)("el-input"),d=(0,n.g2)("el-form-item"),u=(0,n.g2)("el-button"),p=(0,n.g2)("el-form"),m=(0,n.g2)("el-table-column"),c=(0,n.g2)("el-tag"),b=(0,n.g2)("el-table"),v=(0,n.g2)("el-pagination"),g=(0,n.g2)("TagGroupForm"),h=(0,n.g2)("el-dialog"),k=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",Ut,[(0,n.bF)(p,{inline:!0,model:t.searchForm,class:"search-form"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{label:"关键词"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{modelValue:t.searchForm.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>t.searchForm.keyword=e),placeholder:"分组名称/描述",clearable:""},null,8,["modelValue"])])),_:1}),(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.bF)(u,{type:"primary",onClick:t.handleSearch},{default:(0,n.k6)((()=>a[4]||(a[4]=[(0,n.eW)("搜索")]))),_:1},8,["onClick"]),(0,n.bF)(u,{onClick:t.resetSearchForm},{default:(0,n.k6)((()=>a[5]||(a[5]=[(0,n.eW)("重置")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),(0,n.Lk)("div",Kt,[(0,n.bF)(u,{type:"primary",onClick:t.handleAddGroup},{default:(0,n.k6)((()=>a[6]||(a[6]=[(0,n.eW)("新建分组")]))),_:1},8,["onClick"])]),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(b,{data:t.groupTableData,border:"",style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)(m,{prop:"groupName",label:"分组名称","min-width":"120"}),(0,n.bF)(m,{prop:"description",label:"描述","min-width":"200","show-overflow-tooltip":""}),(0,n.bF)(m,{prop:"rulesSummary",label:"标签规则","min-width":"250","show-overflow-tooltip":""},{default:(0,n.k6)((({row:e})=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.rulesSummary,((e,a)=>((0,n.uX)(),(0,n.Wv)(c,{key:a,size:"small",class:"rule-tag"},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e),1)])),_:2},1024)))),128))])),_:1}),(0,n.bF)(m,{prop:"creator",label:"创建者",width:"120"}),(0,n.bF)(m,{prop:"updatedAt",label:"更新时间",width:"160"}),(0,n.bF)(m,{label:"操作",width:"180",fixed:"right"},{default:(0,n.k6)((({row:e})=>[(0,n.bF)(u,{link:"",type:"primary",onClick:a=>t.handleEditGroup(e)},{default:(0,n.k6)((()=>a[7]||(a[7]=[(0,n.eW)("编辑")]))),_:2},1032,["onClick"]),(0,n.bF)(u,{link:"",type:"danger",onClick:a=>t.handleDeleteGroup(e)},{default:(0,n.k6)((()=>a[8]||(a[8]=[(0,n.eW)("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[k,t.loading]]),(0,n.Lk)("div",zt,[(0,n.bF)(v,{"current-page":t.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>t.currentPage=e),"page-size":t.pageSize,"onUpdate:pageSize":a[2]||(a[2]=e=>t.pageSize=e),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:t.total,onSizeChange:t.handleSizeChange,onCurrentChange:t.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),(0,n.bF)(h,{modelValue:t.groupFormDialogVisible,"onUpdate:modelValue":a[3]||(a[3]=e=>t.groupFormDialogVisible=e),title:t.dialogTitle,width:"70%","close-on-click-modal":!1,onClose:t.handleCloseDialog,"destroy-on-close":""},{footer:(0,n.k6)((()=>[(0,n.Lk)("span",Xt,[(0,n.bF)(u,{onClick:t.handleCloseDialog},{default:(0,n.k6)((()=>a[9]||(a[9]=[(0,n.eW)("取消")]))),_:1},8,["onClick"]),(0,n.bF)(u,{type:"primary",onClick:t.handleSubmitForm},{default:(0,n.k6)((()=>a[10]||(a[10]=[(0,n.eW)("确定")]))),_:1},8,["onClick"])])])),default:(0,n.k6)((()=>[(0,n.bF)(g,{ref:"groupFormRef","initial-data":t.currentGroup,mode:t.dialogMode,onSaveSuccess:t.handleSaveSuccess},null,8,["initial-data","mode","onSaveSuccess"])])),_:1},8,["modelValue","title","onClose"])])}const $t={class:"rules-builder"},Gt={class:"rule-group-header"},qt={class:"rule-group-title"},Jt={class:"rule-group-actions"},Qt={class:"rule-conditions"},Ht={class:"value-input condition-item"},jt={key:0,class:"rule-group-relation"},Yt={class:"add-rule-group"};function Zt(e,a,l,t,o,r){const s=(0,n.g2)("el-input"),d=(0,n.g2)("el-form-item"),u=(0,n.g2)("el-button"),p=(0,n.g2)("el-option"),m=(0,n.g2)("el-option-group"),c=(0,n.g2)("el-select"),b=(0,n.g2)("el-input-number"),v=(0,n.g2)("Delete"),g=(0,n.g2)("el-icon"),h=(0,n.g2)("el-radio"),k=(0,n.g2)("el-radio-group"),f=(0,n.g2)("Plus"),y=(0,n.g2)("el-form");return(0,n.uX)(),(0,n.Wv)(y,{ref:"formRef",model:t.formData,rules:t.formRules,"label-width":"120px",class:"tag-group-form"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{label:"分组名称",prop:"groupName"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{modelValue:t.formData.groupName,"onUpdate:modelValue":a[0]||(a[0]=e=>t.formData.groupName=e),placeholder:"请输入分组名称"},null,8,["modelValue"])])),_:1}),(0,n.bF)(d,{label:"描述",prop:"description"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{modelValue:t.formData.description,"onUpdate:modelValue":a[1]||(a[1]=e=>t.formData.description=e),type:"textarea",placeholder:"请输入分组描述"},null,8,["modelValue"])])),_:1}),(0,n.bF)(d,{label:"标签规则",prop:"rules",class:"rules-container"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",$t,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.formData.rules,((e,l)=>((0,n.uX)(),(0,n.CE)("div",{key:l,class:"rule-group"},[(0,n.Lk)("div",Gt,[(0,n.Lk)("span",qt,"规则组 "+(0,i.v_)(l+1),1),(0,n.Lk)("div",Jt,[(0,n.bF)(u,{type:"primary",link:"",onClick:e=>t.addCondition(l)},{default:(0,n.k6)((()=>a[2]||(a[2]=[(0,n.eW)("添加条件")]))),_:2},1032,["onClick"]),(0,n.bF)(u,{type:"danger",link:"",onClick:e=>t.removeRuleGroup(l)},{default:(0,n.k6)((()=>a[3]||(a[3]=[(0,n.eW)("删除组")]))),_:2},1032,["onClick"])])]),(0,n.Lk)("div",Qt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.conditions,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:"rule-condition"},[(0,n.bF)(c,{modelValue:e.tagKey,"onUpdate:modelValue":a=>e.tagKey=a,filterable:"",placeholder:"选择标签",onChange:e=>t.handleTagChange(l,a),class:"condition-item"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.tagOptions,(e=>((0,n.uX)(),(0,n.Wv)(m,{key:e.category,label:e.label},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.tags,(e=>((0,n.uX)(),(0,n.Wv)(p,{key:e.tagKey,label:e.description,value:e.tagKey},null,8,["label","value"])))),128))])),_:2},1032,["label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),(0,n.bF)(c,{modelValue:e.operator,"onUpdate:modelValue":a=>e.operator=a,placeholder:"选择操作符",class:"condition-item operator-select"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.getOperators(e.tagKey),(e=>((0,n.uX)(),(0,n.Wv)(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,n.Lk)("div",Ht,["String"===t.getTagType(e.tagKey)?((0,n.uX)(),(0,n.Wv)(s,{key:0,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:"输入值"},null,8,["modelValue","onUpdate:modelValue"])):"Number"===t.getTagType(e.tagKey)?((0,n.uX)(),(0,n.Wv)(b,{key:1,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,controls:!1,placeholder:"输入数值"},null,8,["modelValue","onUpdate:modelValue"])):"Boolean"===t.getTagType(e.tagKey)?((0,n.uX)(),(0,n.Wv)(c,{key:2,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:"选择值"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{label:"是",value:!0}),(0,n.bF)(p,{label:"否",value:!1})])),_:2},1032,["modelValue","onUpdate:modelValue"])):"Enum"===t.getTagType(e.tagKey)?((0,n.uX)(),(0,n.Wv)(c,{key:3,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:"选择值"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.getEnumOptions(e.tagKey),(e=>((0,n.uX)(),(0,n.Wv)(p,{key:e.key,label:e.value,value:e.key},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,n.Q3)("",!0)]),(0,n.bF)(u,{type:"danger",link:"",circle:"",onClick:e=>t.removeCondition(l,a)},{default:(0,n.k6)((()=>[(0,n.bF)(g,null,{default:(0,n.k6)((()=>[(0,n.bF)(v)])),_:1})])),_:2},1032,["onClick"])])))),128))]),e.conditions.length>1?((0,n.uX)(),(0,n.CE)("div",jt,[(0,n.bF)(k,{modelValue:e.relation,"onUpdate:modelValue":a=>e.relation=a},{default:(0,n.k6)((()=>[(0,n.bF)(h,{label:"AND"},{default:(0,n.k6)((()=>a[4]||(a[4]=[(0,n.eW)("满足所有条件")]))),_:1}),(0,n.bF)(h,{label:"OR"},{default:(0,n.k6)((()=>a[5]||(a[5]=[(0,n.eW)("满足任一条件")]))),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])])):(0,n.Q3)("",!0)])))),128)),(0,n.Lk)("div",Yt,[(0,n.bF)(u,{type:"primary",plain:"",onClick:t.addRuleGroup},{default:(0,n.k6)((()=>[(0,n.bF)(g,null,{default:(0,n.k6)((()=>[(0,n.bF)(f)])),_:1}),a[6]||(a[6]=(0,n.eW)("添加规则组 "))])),_:1},8,["onClick"]),a[7]||(a[7]=(0,n.Lk)("div",{class:"form-tip"},' 多个规则组之间为"或"关系，组内条件可选"与"或"或"关系 ',-1))])])])),_:1})])),_:1},8,["model","rules"])}const en=[{tagKey:"business.userType",description:"用户类型",category:"Business",valueType:"Enum",allowedValues:[{key:"VIP",value:"VIP会员"},{key:"NORMAL",value:"普通用户"}]},{tagKey:"business.vipLevel",description:"VIP等级",category:"Business",valueType:"Number"},{tagKey:"warning.orderRisk",description:"订单风险等级",category:"Warning",valueType:"Enum",allowedValues:[{key:"high",value:"高风险"},{key:"medium",value:"中风险"},{key:"low",value:"低风险"}]},{tagKey:"error.paymentCount",description:"支付失败次数",category:"Anomaly",valueType:"Number"}],an={String:[{label:"等于",value:"="},{label:"不等于",value:"!="},{label:"包含",value:"contains"},{label:"不包含",value:"not_contains"}],Number:[{label:"等于",value:"="},{label:"不等于",value:"!="},{label:"大于",value:">"},{label:"大于等于",value:">="},{label:"小于",value:"<"},{label:"小于等于",value:"<="}],Boolean:[{label:"等于",value:"="},{label:"不等于",value:"!="}],Enum:[{label:"等于",value:"="},{label:"不等于",value:"!="},{label:"属于",value:"in"},{label:"不属于",value:"not_in"}]},ln={name:"TagGroupForm",components:{Delete:We.epd,Plus:We.FWt},props:{initialData:{type:Object,default:null},mode:{type:String,default:"add"}},emits:["save-success"],setup(e,{emit:a}){const l=(0,Pe.KR)(null),t=(0,Pe.Kh)({groupName:"",description:"",rules:[{conditions:[r()],relation:"AND"}]}),i={groupName:[{required:!0,message:"请输入分组名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入分组描述",trigger:"blur"},{max:200,message:"最多 200 个字符",trigger:"blur"}],rules:[{validator:s,trigger:"change"}]},o=(0,n.EW)((()=>{const e={};return en.forEach((a=>{e[a.category]||(e[a.category]={category:a.category,label:`${a.category} 标签`,tags:[]}),e[a.category].tags.push(a)})),Object.values(e)}));function r(){return{tagKey:"",operator:"",value:null}}function s(e,a,l){if(t.rules.length){for(const e of t.rules){if(!e.conditions.length)return void l(new Error("规则组不能为空"));for(const a of e.conditions)if(!a.tagKey||!a.operator||null===a.value||""===a.value)return void l(new Error("请完善所有规则条件"))}l()}else l(new Error("至少需要一个规则组"))}function d(e){const a=en.find((a=>a.tagKey===e));return a?a.valueType:null}function u(e){const a=d(e);return a?an[a]:[]}function p(e){const a=en.find((a=>a.tagKey===e));return a&&"Enum"===a.valueType?a.allowedValues:[]}function m(e,a){const l=t.rules[e].conditions[a];l.operator="",l.value=null}function c(){t.rules.push({conditions:[r()],relation:"AND"})}function b(e){1!==t.rules.length?t.rules.splice(e,1):Ka.nk.warning("至少保留一个规则组")}function v(e){t.rules[e].conditions.push(r())}function g(e,a){const l=t.rules[e].conditions;1!==l.length?l.splice(a,1):Ka.nk.warning("至少保留一个条件")}async function h(){if(l.value)try{await l.value.validate();const n=t.rules.map((e=>e.conditions.map((e=>{const a=en.find((a=>a.tagKey===e.tagKey));let l=e.value;if("Enum"===a?.valueType){const t=a.allowedValues.find((a=>a.key===e.value));l=t?.value||e.value}return`${e.tagKey} ${e.operator} ${l}`})).join("AND"===e.relation?" 且 ":" 或 "))),i={id:"edit"===e.mode?e.initialData.id:Date.now(),groupName:t.groupName,description:t.description,rules:t.rules,rulesSummary:n,creator:"CurrentUser",createdAt:"edit"===e.mode?e.initialData.createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};a("save-success",i)}catch(n){console.error("Form validation failed:",n)}}function k(){l.value&&l.value.resetFields(),t.rules=[{conditions:[r()],relation:"AND"}]}function f(e){if(!e)return t.groupName="",t.description="",void(t.rules=[{conditions:[r()],relation:"AND"}]);t.groupName=e.groupName||"",t.description=e.description||"",t.rules=e.rules||[{conditions:[r()],relation:"AND"}]}return(0,n.wB)((()=>e.initialData),(e=>{if(void 0!==e&&null!==e)try{const a="string"===typeof e?JSON.parse(e):e;f(a)}catch(a){console.error("Failed to parse initial data:",a),Ka.nk.error("初始化数据格式错误")}}),{immediate:!0}),{formRef:l,formData:t,formRules:i,tagOptions:o,getTagType:d,getOperators:u,getEnumOptions:p,handleTagChange:m,addRuleGroup:c,removeRuleGroup:b,addCondition:v,removeCondition:g,submitForm:h,resetForm:k}}},tn=(0,Oe.A)(ln,[["render",Zt],["__scopeId","data-v-41d147b0"]]),nn=tn,on={name:"TagGroupList",components:{TagGroupForm:nn},setup(){const e=(0,Pe.KR)(!1),a=(0,Pe.KR)(1),l=(0,Pe.KR)(10),t=(0,Pe.KR)(0),i=(0,Pe.KR)([]),o=(0,Pe.Kh)({keyword:""}),r=(0,Pe.KR)(!1),s=(0,Pe.KR)("add"),d=(0,Pe.KR)(null),u=(0,Pe.KR)(null),p=(0,n.EW)((()=>"add"===s.value?"新建标签分组":"编辑标签分组")),m=async()=>{e.value=!0;try{await new Promise((e=>setTimeout(e,500))),i.value=[{id:1,groupName:"VIP用户分组",description:"所有VIP等级的用户分组",rulesSummary:["business.userType = VIP","business.vipLevel >= 3"],creator:"admin",createdAt:"2024-03-20 10:00:00",updatedAt:"2024-03-20 10:00:00"},{id:2,groupName:"高风险订单",description:"需要特别关注的高风险订单分组",rulesSummary:["warning.orderRisk = high","error.paymentCount > 3"],creator:"admin",createdAt:"2024-03-20 11:00:00",updatedAt:"2024-03-20 11:00:00"}],t.value=i.value.length}catch(a){Ka.nk.error("获取分组列表失败"),console.error("Failed to fetch groups:",a)}finally{e.value=!1}},c=()=>{a.value=1,m()},b=()=>{o.keyword="",a.value=1,m()},v=()=>{s.value="add",d.value=null,r.value=!0},g=e=>{s.value="edit",d.value=JSON.parse(JSON.stringify(e)),r.value=!0},h=e=>{za.s.confirm(`确定要删除分组"${e.groupName}"吗？此操作不可恢复！`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{try{await new Promise((e=>setTimeout(e,500))),i.value=i.value.filter((a=>a.id!==e.id)),t.value=i.value.length,Ka.nk.success("删除成功")}catch(a){Ka.nk.error("删除失败"),console.error("Failed to delete group:",a)}})).catch((()=>{Ka.nk.info("已取消删除")}))},k=()=>{r.value=!1,d.value=null},f=()=>{u.value?.submitForm()},y=e=>{if(k(),"add"===s.value)i.value.unshift(e);else{const a=i.value.findIndex((a=>a.id===e.id));-1!==a&&(i.value[a]=e)}t.value=i.value.length,Ka.nk.success(`分组${"add"===s.value?"创建":"更新"}成功`)},C=e=>{l.value=e,a.value=1,m()},w=e=>{a.value=e,m()};return(0,n.sV)((()=>{m()})),{loading:e,currentPage:a,pageSize:l,total:t,groupTableData:i,searchForm:o,groupFormDialogVisible:r,dialogMode:s,currentGroup:d,groupFormRef:u,dialogTitle:p,handleSearch:c,resetSearchForm:b,handleAddGroup:v,handleEditGroup:g,handleDeleteGroup:h,handleCloseDialog:k,handleSubmitForm:f,handleSaveSuccess:y,handleSizeChange:C,handleCurrentChange:w}}},rn=(0,Oe.A)(on,[["render",Bt],["__scopeId","data-v-9c8d0fde"]]),sn=rn,dn={class:"appointment-form"},un={key:0,class:"form-group"},pn={key:1,class:"form-group"},mn={class:"form-group"},cn={class:"time-slot-container"},bn={class:"input-row"},vn=["for"],gn=["onUpdate:modelValue"],hn=["for"],kn=["onUpdate:modelValue"],fn={class:"form-group"},yn={for:"isOpen"};function Cn(e,a,l,o,r,s){return(0,n.uX)(),(0,n.CE)("div",dn,[a[19]||(a[19]=(0,n.Lk)("h2",null,"预约设置",-1)),r.isBatchMode?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",un,[a[10]||(a[10]=(0,n.Lk)("label",{for:"appointmentDate"},"选择日期：",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date","onUpdate:modelValue":a[0]||(a[0]=e=>r.appointmentDate=e),onChange:a[1]||(a[1]=(...e)=>s.loadSettings&&s.loadSettings(...e))},null,544),[[t.Jo,r.appointmentDate]]),a[11]||(a[11]=(0,n.Lk)("br",null,null,-1)),a[12]||(a[12]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>s.switchToBatchMode&&s.switchToBatchMode(...e))},"切换到批量设置")])),r.isBatchMode?((0,n.uX)(),(0,n.CE)("div",pn,[a[13]||(a[13]=(0,n.Lk)("label",{for:"batchStartDate"},"批量设置开始日期：",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date","onUpdate:modelValue":a[3]||(a[3]=e=>r.batchStartDate=e)},null,512),[[t.Jo,r.batchStartDate]]),a[14]||(a[14]=(0,n.Lk)("label",{for:"batchEndDate"},"批量设置结束日期：",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date","onUpdate:modelValue":a[4]||(a[4]=e=>r.batchEndDate=e)},null,512),[[t.Jo,r.batchEndDate]]),a[15]||(a[15]=(0,n.Lk)("br",null,null,-1)),a[16]||(a[16]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("button",{onClick:a[5]||(a[5]=(...e)=>s.disableBatchMode&&s.disableBatchMode(...e))},"取消批量设置")])):(0,n.Q3)("",!0),(0,n.Lk)("div",mn,[a[18]||(a[18]=(0,n.Lk)("label",{for:"advanceBookingValue"},"最多可提前预约时间：",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":a[6]||(a[6]=e=>r.advanceBookingValue=e),min:"0",style:{width:"80px","margin-right":"5px"}},null,512),[[t.Jo,r.advanceBookingValue,void 0,{number:!0}]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":a[7]||(a[7]=e=>r.advanceBookingUnit=e),style:{padding:"5px"}},a[17]||(a[17]=[(0,n.Lk)("option",{value:"hours"},"小时",-1),(0,n.Lk)("option",{value:"days"},"天",-1)]),512),[[t.u1,r.advanceBookingUnit]])]),(0,n.Lk)("h3",null,"设置时间段的最大预约数量 ("+(0,i.v_)(r.isBatchMode?s.batchDateRange:r.appointmentDate||"请选择日期")+")",1),(0,n.Lk)("div",cn,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.timeSlots,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:"time-slot"},[(0,n.Lk)("h4",null,(0,i.v_)(e),1),(0,n.Lk)("div",bn,[(0,n.Lk)("label",{for:e+"-pallet"},"卡板",8,vn),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":a=>r.maxAppointments[e].pallet=a,placeholder:"卡板预约数",min:"0",class:"input-field"},null,8,gn),[[t.Jo,r.maxAppointments[e].pallet]]),(0,n.Lk)("label",{for:e+"-floor"},"地板",8,hn),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":a=>r.maxAppointments[e].floor=a,placeholder:"地板预约数",min:"0",class:"input-field"},null,8,kn),[[t.Jo,r.maxAppointments[e].floor]])])])))),128))]),(0,n.Lk)("div",fn,[(0,n.Lk)("label",yn,"该"+(0,i.v_)(r.isBatchMode?"选定时间段":"日期")+"是否开放预约：",1),(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[8]||(a[8]=e=>r.isOpen=e)},null,512),[[t.lH,r.isOpen]])]),(0,n.Lk)("button",{onClick:a[9]||(a[9]=(...e)=>s.saveSettings&&s.saveSettings(...e))},"保存设置")])}const wn={name:"ApptSet",data(){const e={},a=["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"];return a.forEach((a=>{e[a]={pallet:0,floor:0}})),{appointmentSettings:{},appointmentDate:"",batchStartDate:"",batchEndDate:"",isBatchMode:!1,timeSlots:a,maxAppointments:JSON.parse(JSON.stringify(e)),isOpen:!0,initialTimeSlotsData:JSON.parse(JSON.stringify(e)),advanceBookingValue:24,advanceBookingUnit:"hours"}},computed:{batchDateRange(){return this.batchStartDate&&this.batchEndDate?`${this.batchStartDate} 至 ${this.batchEndDate}`:"请选择日期范围"}},methods:{switchToBatchMode(){this.isBatchMode=!0,this.appointmentDate="",this.resetSettingsForm()},validateBatchDates(){return this.batchStartDate&&this.batchEndDate?!(new Date(this.batchStartDate)>new Date(this.batchEndDate))||(alert("开始日期不能晚于结束日期！"),!1):(alert("请先选择批量设置的开始日期和结束日期！"),!1)},disableBatchMode(){this.isBatchMode=!1,this.batchStartDate="",this.batchEndDate="",this.resetSettingsForm()},loadSettings(){const e=this.appointmentDate;if(!e)return void this.resetSettingsForm();const a=this.appointmentSettings[e];a?(this.isOpen=a.isOpen,this.timeSlots.forEach((e=>{const l=a.timeSlots[e];this.maxAppointments[e]={pallet:l?.pallet||0,floor:l?.floor||0}})),console.log(`Loaded settings for ${e}:`,JSON.parse(JSON.stringify(a)))):(this.resetSettingsForm(),console.log(`No settings found for ${e}, using defaults.`))},saveSettings(){if(this.isBatchMode){if(!this.validateBatchDates())return;const e=new Date(this.batchStartDate),a=new Date(this.batchEndDate);let l=new Date(e);while(l<=a){const e=l.toISOString().split("T")[0];this.appointmentSettings[e]={isOpen:this.isOpen,timeSlots:JSON.parse(JSON.stringify(this.maxAppointments))},console.log(`Saved batch settings for ${e}`),l.setDate(l.getDate()+1)}alert("批量设置已保存！"),this.disableBatchMode()}else{if(!this.appointmentDate)return void alert("请先选择要保存设置的日期！");const e=this.appointmentDate;this.appointmentSettings[e]={isOpen:this.isOpen,timeSlots:JSON.parse(JSON.stringify(this.maxAppointments))},console.log(`Saved settings for ${e}:`,JSON.parse(JSON.stringify(this.appointmentSettings[e]))),alert(`日期 ${e} 的设置已保存！`)}console.log("Current all settings:",this.appointmentSettings),console.log(`Advance Booking Setting: ${this.advanceBookingValue} ${this.advanceBookingUnit}`)},resetSettingsForm(){this.isOpen=!0,this.maxAppointments=JSON.parse(JSON.stringify(this.initialTimeSlotsData))}}},Tn=(0,Oe.A)(wn,[["render",Cn],["__scopeId","data-v-1a2c53bf"]]),Fn=Tn,Ln={class:"load-appointment-container"},Sn={class:"tabs"},Vn={key:0,class:"tab-content"},_n={class:"today-counts"},Dn={key:1,class:"tab-content"};function An(e,a,l,t,o,r){const s=(0,n.g2)("FullCalendar"),d=(0,n.g2)("AppointmentModal"),u=(0,n.g2)("ApptHistory");return(0,n.uX)(),(0,n.CE)("div",Ln,[(0,n.Lk)("div",Sn,[(0,n.Lk)("button",{class:(0,i.C4)(["tab-button",{active:"calendar"===t.activeTab}]),onClick:a[0]||(a[0]=e=>t.activeTab="calendar")}," 日历视图 ",2),(0,n.Lk)("button",{class:(0,i.C4)(["tab-button",{active:"history"===t.activeTab}]),onClick:a[1]||(a[1]=e=>t.activeTab="history")}," 历史记录 ",2)]),"calendar"===t.activeTab?((0,n.uX)(),(0,n.CE)("div",Vn,[(0,n.Lk)("div",_n,[a[2]||(a[2]=(0,n.Lk)("span",null,"今日预约统计：",-1)),(0,n.Lk)("span",null,"地板: "+(0,i.v_)(t.todayAppointmentCounts.floor),1),(0,n.Lk)("span",null,"卡板: "+(0,i.v_)(t.todayAppointmentCounts.pallet),1)]),(0,n.bF)(s,{options:t.calendarOptions,ref:"fullCalendar"},null,8,["options"]),(0,n.bF)(d,{visible:t.showModal,"current-appointment":t.currentAppointmentForModal,"edit-mode":t.editMode,"min-date":t.minDate,"available-time-slots":t.availableTimeSlots,appointments:t.appointments,"appointment-settings":t.appointmentSettings,onSave:t.handleModalSave,onUpdate:t.handleModalUpdate,onDelete:t.handleModalDelete,onClose:t.closeAppointmentModal},null,8,["visible","current-appointment","edit-mode","min-date","available-time-slots","appointments","appointment-settings","onSave","onUpdate","onDelete","onClose"])])):(0,n.Q3)("",!0),"history"===t.activeTab?((0,n.uX)(),(0,n.CE)("div",Dn,[(0,n.bF)(u)])):(0,n.Q3)("",!0)])}var Nn=l(661),Mn=l(7950),Pn=l(8680),xn=l(1244),Wn=l(2739),En=l(1303),Rn=l(218);const In={class:"app-container history-container"},On={class:"dialog-footer"},Un={__name:"apptHistory",setup(e){const{proxy:a}=(0,n.nI)(),l=(0,Pe.KR)([{id:(0,En.A)(),trainNumber:"PC101",supplierName:"供应商甲",appointmentDate:"2024-05-10",appointmentTime:"10:00:00",driverPhone:"13800138000",cargoType:"地板",loadType:"liveload",createdAt:new Date("2024-05-01"),updatedAt:new Date("2024-05-09"),isCheckedIn:!0,isLoading:!1,isLoaded:!0,fulfillmentStatus:"fulfilled",checkInTime:new Date("2024-05-10 09:55:00"),loadingStartTime:new Date("2024-05-10 10:10:00"),outboundTime:new Date("2024-05-10 11:00:00"),handoverTime:new Date("2024-05-10 12:00:00")},{id:(0,En.A)(),trainNumber:"PC102",supplierName:"供应商乙",appointmentDate:"2024-05-11",appointmentTime:"14:30:00",driverPhone:"13900139000",cargoType:"卡板",loadType:"drop",createdAt:new Date("2024-05-02"),updatedAt:new Date("2024-05-03"),isCheckedIn:!1,isLoading:!1,isLoaded:!1,fulfillmentStatus:"pending",checkInTime:null,loadingStartTime:null,outboundTime:null,handoverTime:null},{id:(0,En.A)(),trainNumber:"PC103",supplierName:"供应商丙",appointmentDate:"2024-05-10",appointmentTime:"11:00:00",driverPhone:"13700137000",cargoType:"地板",loadType:"liveload",createdAt:new Date("2024-05-03"),updatedAt:new Date("2024-05-10"),isCheckedIn:!0,isLoading:!0,isLoaded:!1,fulfillmentStatus:"pending",checkInTime:new Date("2024-05-10 10:58:00"),loadingStartTime:new Date("2024-05-10 11:15:00"),outboundTime:null,handoverTime:null},{id:(0,En.A)(),trainNumber:"PC104",supplierName:"供应商甲",appointmentDate:"2024-05-12",appointmentTime:"09:00:00",driverPhone:"13800138000",cargoType:"卡板",loadType:"liveload",createdAt:new Date("2024-05-04"),updatedAt:new Date("2024-05-05"),isCheckedIn:!0,isLoading:!1,isLoaded:!1,fulfillmentStatus:"late",checkInTime:new Date("2024-05-12 09:30:00"),loadingStartTime:null,outboundTime:null,handoverTime:null},{id:(0,En.A)(),trainNumber:"TC201",supplierName:"供应商丁",appointmentDate:"2024-05-13",appointmentTime:"16:00:00",driverPhone:"13600136000",cargoType:"地板",loadType:"drop",createdAt:new Date("2024-05-05"),updatedAt:new Date("2024-05-05"),isCheckedIn:!0,isLoading:!1,isLoaded:!0,fulfillmentStatus:"fulfilled",checkInTime:new Date("2024-05-13 15:50:00"),loadingStartTime:new Date("2024-05-13 16:05:00"),outboundTime:new Date("2024-05-13 17:00:00"),handoverTime:new Date("2024-05-13 18:00:00")},{id:(0,En.A)(),trainNumber:"PC105",supplierName:"供应商戊",appointmentDate:"2024-05-14",appointmentTime:"08:00:00",driverPhone:"13500135000",cargoType:"卡板",loadType:"liveload",createdAt:new Date("2024-05-06"),updatedAt:new Date("2024-05-06"),isCheckedIn:!1,isLoading:!1,isLoaded:!1,fulfillmentStatus:"pending",checkInTime:null,loadingStartTime:null,outboundTime:null,handoverTime:null},{id:(0,En.A)(),trainNumber:"PC106",supplierName:"供应商己",appointmentDate:"2024-05-14",appointmentTime:"10:00:00",driverPhone:"13400134000",cargoType:"地板",loadType:"drop",createdAt:new Date("2024-05-07"),updatedAt:new Date("2024-05-07"),isCheckedIn:!1,isLoading:!1,isLoaded:!1,fulfillmentStatus:"cancelled",checkInTime:null,loadingStartTime:null,outboundTime:null,handoverTime:null},{id:(0,En.A)(),trainNumber:"PC107",supplierName:"供应商庚",appointmentDate:"2024-05-15",appointmentTime:"11:00:00",driverPhone:"13300133000",cargoType:"卡板",loadType:"liveload",createdAt:new Date("2024-05-08"),updatedAt:new Date("2024-05-08"),isCheckedIn:!0,isLoading:!1,isLoaded:!1,fulfillmentStatus:"severely_late",checkInTime:new Date("2024-05-15 11:45:00"),loadingStartTime:null,outboundTime:null,handoverTime:null},{id:(0,En.A)(),trainNumber:"PC108",supplierName:"供应商辛",appointmentDate:"2024-05-15",appointmentTime:"14:00:00",driverPhone:"13200132000",cargoType:"地板",loadType:"drop",createdAt:new Date("2024-05-09"),updatedAt:new Date("2024-05-09"),isCheckedIn:!0,isLoading:!1,isLoaded:!1,fulfillmentStatus:"postponed",checkInTime:new Date("2024-05-15 14:00:00"),loadingStartTime:null,outboundTime:null,handoverTime:null},{id:(0,En.A)(),trainNumber:"PC109",supplierName:"供应商壬",appointmentDate:"2024-05-16",appointmentTime:"09:00:00",driverPhone:"13100131000",cargoType:"卡板",loadType:"liveload",createdAt:new Date("2024-05-10"),updatedAt:new Date("2024-05-10"),isCheckedIn:!1,isLoading:!1,isLoaded:!1,fulfillmentStatus:"pending",checkInTime:null,loadingStartTime:null,outboundTime:null,handoverTime:null},{id:(0,En.A)(),trainNumber:"PC110",supplierName:"供应商癸",appointmentDate:"2024-05-16",appointmentTime:"11:00:00",driverPhone:"13000130000",cargoType:"地板",loadType:"drop",createdAt:new Date("2024-05-11"),updatedAt:new Date("2024-05-11"),isCheckedIn:!1,isLoading:!1,isLoaded:!1,fulfillmentStatus:"pending",checkInTime:null,loadingStartTime:null,outboundTime:null,handoverTime:null},{id:(0,En.A)(),trainNumber:"PC111",supplierName:"供应商子",appointmentDate:"2024-05-17",appointmentTime:"13:00:00",driverPhone:"18900189000",cargoType:"卡板",loadType:"liveload",createdAt:new Date("2024-05-12"),updatedAt:new Date("2024-05-12"),isCheckedIn:!1,isLoading:!1,isLoaded:!1,fulfillmentStatus:"pending",checkInTime:null,loadingStartTime:null,outboundTime:null,handoverTime:null},{id:(0,En.A)(),trainNumber:"PC112",supplierName:"供应商丑",appointmentDate:"2024-05-17",appointmentTime:"15:00:00",driverPhone:"18800188000",cargoType:"地板",loadType:"drop",createdAt:new Date("2024-05-13"),updatedAt:new Date("2024-05-13"),isCheckedIn:!1,isLoading:!1,isLoaded:!1,fulfillmentStatus:"pending",checkInTime:null,loadingStartTime:null,outboundTime:null,handoverTime:null},{id:(0,En.A)(),trainNumber:"PC113",supplierName:"供应商寅",appointmentDate:"2024-05-18",appointmentTime:"10:00:00",driverPhone:"18700187000",cargoType:"卡板",loadType:"liveload",createdAt:new Date("2024-05-14"),updatedAt:new Date("2024-05-14"),isCheckedIn:!1,isLoading:!1,isLoaded:!1,fulfillmentStatus:"pending",checkInTime:null,loadingStartTime:null,outboundTime:null,handoverTime:null},{id:(0,En.A)(),trainNumber:"PC114",supplierName:"供应商卯",appointmentDate:"2024-05-18",appointmentTime:"16:00:00",driverPhone:"18600186000",cargoType:"地板",loadType:"drop",createdAt:new Date("2024-05-15"),updatedAt:new Date("2024-05-15"),isCheckedIn:!1,isLoading:!1,isLoaded:!1,fulfillmentStatus:"pending",checkInTime:null,loadingStartTime:null,outboundTime:null,handoverTime:null}]),o=(0,Pe.KR)(!1),r=(0,Pe.KR)(!0),s=(0,Pe.KR)([]),d=(0,Pe.KR)(!0),u=(0,Pe.KR)(!0),p=(0,Pe.KR)(""),m=(0,Pe.KR)(1),c=(0,Pe.KR)(10),b=(0,Pe.Kh)({form:{},queryParams:{trainNumber:null,supplierName:null,appointmentDate:null,appointmentTime:null,driverPhone:null,cargoType:null,loadType:null,appointmentStatus:null,fulfillmentStatus:null},rules:{trainNumber:[{required:!0,message:"车次号不能为空",trigger:"blur"}],supplierName:[{required:!0,message:"供应商不能为空",trigger:"blur"}],appointmentDate:[{required:!0,message:"预约日期不能为空",trigger:"change"}],appointmentTime:[{required:!0,message:"预约时间不能为空",trigger:"change"}],driverPhone:[{required:!0,message:"司机电话不能为空",trigger:"blur"}],cargoType:[{required:!0,message:"货物类型不能为空",trigger:"change"}],loadType:[{required:!0,message:"装柜类型不能为空",trigger:"change"}]}}),{queryParams:v,form:g,rules:h}=(0,Pe.QW)(b);function k(e){return e.isLoaded?"已装车":e.isLoading?"装车中":e.isCheckedIn?"已登记":"未登记"}function f(e){const a={fulfilled:"已履约",pending:"未履约",late:"迟到",postponed:"推约",cancelled:"删约",severely_late:"严重迟到"};return a[e]||e}const y=(0,n.EW)((()=>{let e=l.value;if(v.value.trainNumber&&(e=e.filter((e=>e.trainNumber&&e.trainNumber.includes(v.value.trainNumber)))),v.value.supplierName&&(e=e.filter((e=>e.supplierName&&e.supplierName.includes(v.value.supplierName)))),v.value.appointmentDate&&(e=e.filter((e=>e.appointmentDate===v.value.appointmentDate))),v.value.appointmentTime){const a=v.value.appointmentTime;e=e.filter((e=>e.appointmentTime&&e.appointmentTime.startsWith(a)))}if(v.value.driverPhone&&(e=e.filter((e=>e.driverPhone&&e.driverPhone.includes(v.value.driverPhone)))),v.value.loadType&&(e=e.filter((e=>e.loadType===v.value.loadType))),v.value.appointmentStatus){const a=v.value.appointmentStatus;e=e.filter((e=>"loaded"===a?e.isLoaded:"loading"===a?e.isLoading&&!e.isLoaded:"checked_in"===a?e.isCheckedIn&&!e.isLoading&&!e.isLoaded:"not_checked_in"!==a||!e.isCheckedIn&&!e.isLoading&&!e.isLoaded))}return v.value.fulfillmentStatus&&(e=e.filter((e=>e.fulfillmentStatus===v.value.fulfillmentStatus))),e})),C=(0,n.EW)((()=>y.value.length)),w=(0,n.EW)((()=>{const e=(m.value-1)*c.value,a=e+c.value;return y.value.slice(e,a)}));function T(e){if(!e)return"";try{const a=new Date(e),l=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${l}-${t}-${n}`}catch(a){return e}}function F(e){if(!e)return"";try{const a=new Date(e),l=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),i=String(a.getHours()).padStart(2,"0"),o=String(a.getMinutes()).padStart(2,"0"),r=String(a.getSeconds()).padStart(2,"0");return`${l}-${t}-${n} ${i}:${o}:${r}`}catch(a){return console.error("Error formatting date time:",a),e}}function L(){o.value=!1,S()}function S(){g.value={id:null,trainNumber:null,supplierName:null,appointmentDate:null,appointmentTime:null,driverPhone:null,cargoType:null,loadType:null,isCheckedIn:!1,isLoading:!1,isLoaded:!1,fulfillmentStatus:"pending"},a.$refs.loadApptRef&&a.$refs.loadApptRef.resetFields()}function V(){m.value=1}function _(){v.value.trainNumber=null,v.value.supplierName=null,v.value.appointmentDate=null,v.value.appointmentTime=null,v.value.driverPhone=null,v.value.loadType=null,v.value.appointmentStatus=null,v.value.fulfillmentStatus=null,a.$refs.queryRef&&a.$refs.queryRef.resetFields(),V()}function D(e){s.value=e.map((e=>e.id)),d.value=1!==e.length,u.value=!e.length}function A(e){return!e.isLoaded&&"fulfilled"!==e.fulfillmentStatus&&"cancelled"!==e.fulfillmentStatus}function N(e){if(!A(e))return void a.$message({type:"warning",message:"该状态的预约不可修改！"});S();const t=l.value.find((a=>a.id===e.id));t&&(g.value={...t},o.value=!0,p.value="修改预约信息 (历史记录页面)")}function M(){a.$refs.loadApptRef&&a.$refs.loadApptRef.validate((e=>{if(e){const e=new Date;if(null!=g.value.id){const a=l.value.findIndex((e=>e.id===g.value.id));if(-1!==a){const t=l.value[a];l.value[a]={...t,...g.value,updatedAt:e}}}else{const a={...g.value,id:(0,En.A)(),createdAt:e,updatedAt:e,isCheckedIn:!1,isLoading:!1,isLoaded:!1,fulfillmentStatus:"pending"};l.value.push(a)}o.value=!1,V()}}))}function P(e,a){switch(e){case"update":N(a);break;case"history":x(a);break;case"delete":W(a);break;case"waive":E(a);break}}function x(e){console.log("Show history for:",e),alert(`显示预约 ${e.trainNumber} (ID: ${e.id}) 的历史记录 (功能待实现)`)}function W(e){const t=e.id?[e.id]:s.value;t&&0!==t.length?a.$confirm(`是否确认删除预约信息编号为 "${t.join(", ")}" 的数据项？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{l.value=l.value.filter((e=>!t.includes(e.id))),a.$message({type:"success",message:"删除成功!"}),s.value=[],d.value=!0,u.value=!0,V()})).catch((()=>{a.$message({type:"info",message:"已取消删除"})})):a.$message({type:"warning",message:"请选择要删除的数据！"})}function E(e){console.log("Waive penalty for:",e),alert(`豁免预约 ${e.trainNumber} (ID: ${e.id}) 的扣分 (功能待实现)`)}function R(e){c.value=e,m.value=1}function I(e){m.value=e}return(e,a)=>{const l=(0,n.g2)("el-input"),s=(0,n.g2)("el-form-item"),d=(0,n.g2)("el-date-picker"),u=(0,n.g2)("el-option"),b=(0,n.g2)("el-select"),y=(0,n.g2)("el-button"),S=(0,n.g2)("el-form"),N=(0,n.g2)("right-toolbar"),x=(0,n.g2)("el-row"),W=(0,n.g2)("el-table-column"),E=(0,n.g2)("el-icon"),O=(0,n.g2)("el-dropdown-item"),U=(0,n.g2)("el-dropdown-menu"),K=(0,n.g2)("el-dropdown"),z=(0,n.g2)("el-table"),X=(0,n.g2)("el-pagination"),B=(0,n.g2)("el-time-picker"),$=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)("div",In,[(0,n.bo)((0,n.bF)(S,{model:(0,Pe.R1)(v),ref:"queryRef",inline:!0,"label-width":"80px"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{label:"车次号",prop:"trainNumber"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:(0,Pe.R1)(v).trainNumber,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,Pe.R1)(v).trainNumber=e),placeholder:"请输入车次号",clearable:"",onKeyup:(0,t.jR)(V,["enter"])},null,8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"供应商",prop:"supplierName"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:(0,Pe.R1)(v).supplierName,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,Pe.R1)(v).supplierName=e),placeholder:"请输入供应商",clearable:"",onKeyup:(0,t.jR)(V,["enter"])},null,8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"预约日期",prop:"appointmentDate"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:(0,Pe.R1)(v).appointmentDate,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,Pe.R1)(v).appointmentDate=e),type:"date","value-format":"YYYY-MM-DD",placeholder:"选择日期",clearable:""},null,8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"预约状态",prop:"appointmentStatus"},{default:(0,n.k6)((()=>[(0,n.bF)(b,{modelValue:(0,Pe.R1)(v).appointmentStatus,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,Pe.R1)(v).appointmentStatus=e),placeholder:"选择预约状态",clearable:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"未登记",value:"not_checked_in"}),(0,n.bF)(u,{label:"已登记",value:"checked_in"}),(0,n.bF)(u,{label:"装车中",value:"loading"}),(0,n.bF)(u,{label:"已装车",value:"loaded"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"履约状态",prop:"fulfillmentStatus"},{default:(0,n.k6)((()=>[(0,n.bF)(b,{modelValue:(0,Pe.R1)(v).fulfillmentStatus,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,Pe.R1)(v).fulfillmentStatus=e),placeholder:"选择履约状态",clearable:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"未履约",value:"pending"}),(0,n.bF)(u,{label:"已履约",value:"fulfilled"}),(0,n.bF)(u,{label:"迟到",value:"late"}),(0,n.bF)(u,{label:"严重迟到",value:"severely_late"}),(0,n.bF)(u,{label:"推约",value:"postponed"}),(0,n.bF)(u,{label:"删约",value:"cancelled"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(s,null,{default:(0,n.k6)((()=>[(0,n.bF)(y,{type:"primary",icon:"Search",onClick:V},{default:(0,n.k6)((()=>a[16]||(a[16]=[(0,n.eW)("搜索")]))),_:1}),(0,n.bF)(y,{icon:"Refresh",onClick:_},{default:(0,n.k6)((()=>a[17]||(a[17]=[(0,n.eW)("重置")]))),_:1})])),_:1})])),_:1},8,["model"]),[[t.aG,r.value]]),(0,n.bF)(x,{gutter:10,class:"mb8"},{default:(0,n.k6)((()=>[(0,n.bF)(N,{showSearch:r.value,"onUpdate:showSearch":a[5]||(a[5]=e=>r.value=e),onQueryTable:V},null,8,["showSearch"])])),_:1}),(0,n.bF)(z,{data:w.value,onSelectionChange:D,style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)(W,{type:"selection",width:"55",align:"center"}),(0,n.bF)(W,{label:"ID",prop:"id",width:"80",align:"center","show-overflow-tooltip":""}),(0,n.bF)(W,{label:"车次号",prop:"trainNumber",width:"120",align:"center","show-overflow-tooltip":""}),(0,n.bF)(W,{label:"供应商",prop:"supplierName",width:"100","show-overflow-tooltip":""}),(0,n.bF)(W,{label:"预约日期",prop:"appointmentDate",width:"120",align:"center"}),(0,n.bF)(W,{label:"预约时间",prop:"appointmentTime",width:"100",align:"center"}),(0,n.bF)(W,{label:"司机电话",prop:"driverPhone",width:"120",align:"center","show-overflow-tooltip":""}),(0,n.bF)(W,{label:"货物类型",prop:"cargoType",width:"100",align:"center"}),(0,n.bF)(W,{label:"装柜类型",prop:"loadType",width:"100",align:"center"},{default:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,i.v_)("liveload"===e.row.loadType?"Liveload":"Drop"),1)])),_:1}),(0,n.bF)(W,{label:"预约状态",prop:"appointmentStatus",width:"100",align:"center"},{default:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,i.v_)(k(e.row)),1)])),_:1}),(0,n.bF)(W,{label:"履约状态",prop:"fulfillmentStatus",width:"100",align:"center"},{default:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,i.v_)(f(e.row.fulfillmentStatus)),1)])),_:1}),(0,n.bF)(W,{label:"司机check in时间",prop:"checkInTime",width:"160",align:"center"},{default:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,i.v_)(F(e.row.checkInTime)),1)])),_:1}),(0,n.bF)(W,{label:"装车开始时间",prop:"loadingStartTime",width:"160",align:"center"},{default:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,i.v_)(F(e.row.loadingStartTime)),1)])),_:1}),(0,n.bF)(W,{label:"出库时间",prop:"outboundTime",width:"160",align:"center"},{default:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,i.v_)(F(e.row.outboundTime)),1)])),_:1}),(0,n.bF)(W,{label:"交仓预约时间",prop:"handoverTime",width:"160",align:"center"},{default:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,i.v_)(F(e.row.handoverTime)),1)])),_:1}),(0,n.bF)(W,{label:"创建时间",prop:"createdAt",width:"120",align:"center"},{default:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,i.v_)(T(e.row.createdAt)),1)])),_:1}),(0,n.bF)(W,{label:"操作",align:"center",width:"120","class-name":"small-padding fixed-width",fixed:"right"},{default:(0,n.k6)((e=>[(0,n.bF)(K,{onCommand:a=>P(a,e.row),teleported:!0},{dropdown:(0,n.k6)((()=>[(0,n.bF)(U,null,{default:(0,n.k6)((()=>[(0,n.bF)(O,{command:"update",disabled:!A(e.row)},{default:(0,n.k6)((()=>a[19]||(a[19]=[(0,n.eW)("修改")]))),_:2},1032,["disabled"]),(0,n.bF)(O,{command:"history"},{default:(0,n.k6)((()=>a[20]||(a[20]=[(0,n.eW)("历史记录")]))),_:1}),(0,n.bF)(O,{command:"delete"},{default:(0,n.k6)((()=>a[21]||(a[21]=[(0,n.eW)("删除预约")]))),_:1}),(0,n.bF)(O,{command:"waive"},{default:(0,n.k6)((()=>a[22]||(a[22]=[(0,n.eW)("豁免扣分")]))),_:1})])),_:2},1024)])),default:(0,n.k6)((()=>[(0,n.bF)(y,{link:"",type:"primary"},{default:(0,n.k6)((()=>[a[18]||(a[18]=(0,n.eW)(" 操作")),(0,n.bF)(E,{class:"el-icon--right"},{default:(0,n.k6)((()=>[(0,n.bF)((0,Pe.R1)(We.yd$))])),_:1})])),_:1})])),_:2},1032,["onCommand"])])),_:1})])),_:1},8,["data"]),(0,n.bo)((0,n.bF)(X,{total:C.value,"current-page":m.value,"onUpdate:currentPage":a[6]||(a[6]=e=>m.value=e),"page-size":c.value,"onUpdate:pageSize":a[7]||(a[7]=e=>c.value=e),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:R,onCurrentChange:I,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["total","current-page","page-size"]),[[t.aG,C.value>0]]),(0,n.bF)($,{title:p.value,modelValue:o.value,"onUpdate:modelValue":a[15]||(a[15]=e=>o.value=e),width:"500px","append-to-body":""},{footer:(0,n.k6)((()=>[(0,n.Lk)("div",On,[(0,n.bF)(y,{type:"primary",onClick:M},{default:(0,n.k6)((()=>a[23]||(a[23]=[(0,n.eW)("确 定")]))),_:1}),(0,n.bF)(y,{onClick:L},{default:(0,n.k6)((()=>a[24]||(a[24]=[(0,n.eW)("取 消")]))),_:1})])])),default:(0,n.k6)((()=>[(0,n.bF)(S,{ref:"loadApptRef",model:(0,Pe.R1)(g),rules:(0,Pe.R1)(h),"label-width":"80px"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{label:"车次号",prop:"trainNumber"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:(0,Pe.R1)(g).trainNumber,"onUpdate:modelValue":a[8]||(a[8]=e=>(0,Pe.R1)(g).trainNumber=e),placeholder:"请输入车次号"},null,8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"供应商",prop:"supplierName"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:(0,Pe.R1)(g).supplierName,"onUpdate:modelValue":a[9]||(a[9]=e=>(0,Pe.R1)(g).supplierName=e),placeholder:"请输入供应商"},null,8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"预约日期",prop:"appointmentDate"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{clearable:"",modelValue:(0,Pe.R1)(g).appointmentDate,"onUpdate:modelValue":a[10]||(a[10]=e=>(0,Pe.R1)(g).appointmentDate=e),type:"date","value-format":"YYYY-MM-DD",placeholder:"选择日期"},null,8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"预约时间",prop:"appointmentTime"},{default:(0,n.k6)((()=>[(0,n.bF)(B,{modelValue:(0,Pe.R1)(g).appointmentTime,"onUpdate:modelValue":a[11]||(a[11]=e=>(0,Pe.R1)(g).appointmentTime=e),placeholder:"选择时间",format:"HH:mm:ss","value-format":"HH:mm:ss",clearable:""},null,8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"司机电话",prop:"driverPhone"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:(0,Pe.R1)(g).driverPhone,"onUpdate:modelValue":a[12]||(a[12]=e=>(0,Pe.R1)(g).driverPhone=e),placeholder:"请输入司机电话"},null,8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"货物类型",prop:"cargoType"},{default:(0,n.k6)((()=>[(0,n.bF)(b,{modelValue:(0,Pe.R1)(g).cargoType,"onUpdate:modelValue":a[13]||(a[13]=e=>(0,Pe.R1)(g).cargoType=e),placeholder:"请选择货物类型"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"地板",value:"地板"}),(0,n.bF)(u,{label:"卡板",value:"卡板"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"装柜类型",prop:"loadType"},{default:(0,n.k6)((()=>[(0,n.bF)(b,{modelValue:(0,Pe.R1)(g).loadType,"onUpdate:modelValue":a[14]||(a[14]=e=>(0,Pe.R1)(g).loadType=e),placeholder:"请选择装柜类型"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"Liveload",value:"liveload"}),(0,n.bF)(u,{label:"Drop",value:"drop"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}}},Kn=(0,Oe.A)(Un,[["__scopeId","data-v-e7476172"]]),zn=Kn,Xn={name:"LoadAppointment",components:{FullCalendar:Nn.A,AppointmentModal:Rn.A,ApptHistory:zn},setup(){const e=(0,Pe.KR)("calendar"),a=new Date,l=a.toISOString().split("T")[0],t=(0,Pe.KR)(l),i=(0,Pe.KR)(!1),o=(0,Pe.KR)(!1),r=(0,Pe.KR)(null),s=(0,Pe.KR)([{id:(0,En.A)(),trainNumber:"PC001",supplierName:"Supplier A",appointmentDate:"2025-05-02",appointmentTime:"10:00:00",driverPhone:"1234567890",cargoType:"地板",loadType:"liveload",createdAt:new Date("2025-04-30"),updatedAt:new Date("2025-05-01"),isCheckedIn:!0,isLoaded:!0},{id:(0,En.A)(),trainNumber:"PC002",supplierName:"Supplier B",appointmentDate:"2025-05-03",appointmentTime:"14:00:00",driverPhone:"0987654321",cargoType:"卡板",loadType:"drop",createdAt:new Date("2025-05-01"),updatedAt:new Date("2025-05-01"),isCheckedIn:!1,isLoaded:!1},{id:(0,En.A)(),trainNumber:"PC003",supplierName:"Supplier C",appointmentDate:"2025-05-02",appointmentTime:"11:00:00",driverPhone:"1122334455",cargoType:"地板",loadType:"liveload",createdAt:new Date("2025-05-01"),updatedAt:new Date("2025-05-01"),isCheckedIn:!0,isLoaded:!1},{id:(0,En.A)(),trainNumber:"PC004",supplierName:"Supplier D",appointmentDate:"2025-05-06",appointmentTime:"09:00:00",driverPhone:"5566778899",cargoType:"卡板",loadType:"liveload",createdAt:new Date("2025-05-02"),updatedAt:new Date("2025-05-02"),isCheckedIn:!0,isLoaded:!1},{id:(0,En.A)(),trainNumber:"PC005",supplierName:"Supplier A",appointmentDate:"2025-05-07",appointmentTime:"16:00:00",driverPhone:"1234567890",cargoType:"地板",loadType:"drop",createdAt:new Date("2025-05-03"),updatedAt:new Date("2025-05-04"),isCheckedIn:!0,isLoaded:!0},{id:(0,En.A)(),trainNumber:"PC006",supplierName:"Supplier E",appointmentDate:"2025-05-02",appointmentTime:"08:00:00",driverPhone:"6677889900",cargoType:"卡板",loadType:"liveload",createdAt:new Date("2025-05-01"),updatedAt:new Date("2025-05-01"),isCheckedIn:!1,isLoaded:!1},{id:(0,En.A)(),trainNumber:"PC007",supplierName:"Supplier B",appointmentDate:"2025-05-02",appointmentTime:"13:00:00",driverPhone:"0987654321",cargoType:"地板",loadType:"drop",createdAt:new Date("2025-05-01"),updatedAt:new Date("2025-05-01"),isCheckedIn:!1,isLoaded:!1},{id:(0,En.A)(),trainNumber:"PC008",supplierName:"Supplier F",appointmentDate:"2025-05-02",appointmentTime:"15:00:00",driverPhone:"7788990011",cargoType:"卡板",loadType:"drop",createdAt:new Date("2025-05-01"),updatedAt:new Date("2025-05-01"),isCheckedIn:!1,isLoaded:!1},{id:(0,En.A)(),trainNumber:"PC009",supplierName:"Supplier A",appointmentDate:"2025-05-02",appointmentTime:"17:00:00",driverPhone:"1234567890",cargoType:"地板",loadType:"liveload",createdAt:new Date("2025-05-01"),updatedAt:new Date("2025-05-01"),isCheckedIn:!1,isLoaded:!1},{id:(0,En.A)(),trainNumber:"PC010",supplierName:"Supplier G",appointmentDate:"2025-05-02",appointmentTime:"19:00:00",driverPhone:"8899001122",cargoType:"卡板",loadType:"liveload",createdAt:new Date("2025-05-01"),updatedAt:new Date("2025-05-01"),isCheckedIn:!1,isLoaded:!1},{id:(0,En.A)(),trainNumber:"PC011",supplierName:"Supplier H",appointmentDate:"2024-04-19",appointmentTime:"14:30:00",driverPhone:"9900112233",cargoType:"地板",loadType:"drop",createdAt:new Date("2024-04-18"),updatedAt:new Date("2024-04-18"),isCheckedIn:!0,isLoaded:!1}]),d=(0,Pe.KR)({"2025-05-02":{isOpen:!0,timeSlots:{"08:00":{pallet:5,floor:2},"10:00":{pallet:1,floor:1},"11:00":{pallet:3,floor:3},"13:00":{pallet:4,floor:4},"14:00":{pallet:4,floor:4},"15:00":{pallet:4,floor:4},"17:00":{pallet:4,floor:4},"19:00":{pallet:4,floor:4}}},"2025-05-03":{isOpen:!0,timeSlots:{"14:00":{pallet:2,floor:2}}},"2024-04-19":{isOpen:!0,timeSlots:{"14:00":{pallet:5,floor:5}}},"2025-05-06":{isOpen:!0,timeSlots:{"09:00":{pallet:3,floor:3}}},"2025-05-07":{isOpen:!0,timeSlots:{"16:00":{pallet:2,floor:1}}}}),u=()=>({id:null,trainNumber:"",supplierName:"",appointmentDate:"",appointmentTime:"",driverPhone:"",cargoType:"",loadType:"",createdAt:null,updatedAt:null,isCheckedIn:!1,isLoaded:!1}),p=(0,Pe.KR)(u()),m=()=>{const e=[];for(let a=0;a<24;a++){const l=String(a).padStart(2,"0");e.push(`${l}:00:00`)}return e},c=(0,Pe.KR)(m()),b=(0,n.EW)((()=>{const e=(new Date).toISOString().split("T")[0];let a=0,l=0;return s.value.forEach((t=>{t.appointmentDate===e&&("地板"===t.cargoType?a++:"卡板"===t.cargoType&&l++)})),{floor:a,pallet:l}})),v=(0,n.EW)((()=>{const e={};return s.value.forEach((a=>{const l=a.appointmentDate;e[l]||(e[l]={floor:0,pallet:0}),"地板"===a.cargoType?e[l].floor++:"卡板"===a.cargoType&&e[l].pallet++})),e})),g=()=>{const e=new Date;return e.setHours(0,0,0,0),s.value.map((a=>{const l=a.appointmentDate.split("-"),t=new Date(parseInt(l[0]),parseInt(l[1])-1,parseInt(l[2]));t.setHours(0,0,0,0);const n=new Date(`${a.appointmentDate}T${a.appointmentTime}`),i=new Date(n.getTime()+36e5),o=i.toISOString(),r=t<e,s=[];r&&s.push("past-event"),a.isLoaded?s.push("loaded-event"):a.isCheckedIn&&s.push("checked-in-event");const d={id:a.id,title:`车次: ${a.trainNumber}, ${a.supplierName}`,start:`${a.appointmentDate}T${a.appointmentTime}`,end:o,allDay:!1,extendedProps:{...a},classNames:s,editable:!r&&!a.isCheckedIn&&!a.isLoaded};return d}))},h=(0,Pe.KR)({plugins:[Mn.A,Pn.Ay,xn.A,Wn.A],height:"auto",validRange:{start:l},headerToolbar:{left:"prev,next today",center:"title",right:"timeGridDay,timeGridWeek,dayGridMonth,listWeek"},views:{listWeek:{type:"listWeek",duration:{days:365},buttonText:"列表"}},initialView:"dayGridMonth",weekends:!0,editable:!0,selectable:!0,events:g(),dayMaxEvents:4,eventMaxStack:4,dateClick:e=>y(e),eventClick:e=>C(e),eventDrop:e=>w(e),eventContent:e=>T(e),select:e=>f(e),eventDidMount:e=>{const a=e.event.extendedProps;let l="未登记";a.isLoaded?l="已装车":a.isCheckedIn&&(l="已登记");const t=`车次号: ${a.trainNumber}\n供应商: ${a.supplierName}\n日期: ${a.appointmentDate}\n时间: ${a.appointmentTime}\n司机电话: ${a.driverPhone}\n货物类型: ${a.cargoType}\n装柜类型: ${a.loadType}\n状态: ${l}`;e.el.setAttribute("title",t)},dayHeaderDidMount:e=>{if("dayGridMonth"!==e.view.type){const a=e.date.toISOString().split("T")[0],l=v.value[a];if(l&&(l.floor>0||l.pallet>0)){const a=document.createElement("span");a.classList.add("day-counts-header-indicator"),a.innerHTML=` (地板:${l.floor} 卡板:${l.pallet})`;const t=e.el.querySelector(".fc-col-header-cell-cushion");t&&t.appendChild(a)}}},dayCellDidMount:e=>{if("dayGridMonth"===e.view.type){const a=e.date.toISOString().split("T")[0],l=v.value[a];if(l&&(l.floor>0||l.pallet>0)){e.el.style.position="relative",e.el.style.overflow="hidden";const a=document.createElement("div");a.classList.add("day-counts-cell-indicator"),a.innerHTML=`地板:${l.floor} 卡板:${l.pallet}`,e.el.appendChild(a)}}}}),k=()=>{h.value.events=g()},f=e=>{o.value=!1,p.value={...u(),appointmentDate:e.startStr},i.value=!0;const a=e.view.calendar;a.unselect()},y=e=>{o.value=!1,p.value={...u(),appointmentDate:e.dateStr},i.value=!0},C=e=>{const a=e.event.classNames.includes("past-event")||e.event.classNames.includes("checked-in-event")||e.event.classNames.includes("loaded-event");if(a)return console.log("Clicked on a past, checked-in, or loaded event. Editing disabled."),void alert("过去的预约、已登记或已装车的预约不能编辑。");const l=s.value.find((a=>a.id===e.event.id));l&&(o.value=!0,p.value={...l},i.value=!0)},w=e=>{const{event:a,oldEvent:l,revert:t}=e,n=e=>e?e.toLocaleString("zh-CN",{dateStyle:"short",timeStyle:"short"}):"未知时间",i=n(l.start),o=n(a.start);if(confirm(`您确定要将预约从 ${i} 移动到 ${o} 吗？`)){const e=s.value.findIndex((e=>e.id===a.id));if(-1!==e&&a.start){const l=new Date(a.start),t=l.toISOString().split("T")[0],n=l.toLocaleTimeString("en-GB",{hour12:!1});s.value[e].appointmentDate=t,s.value[e].appointmentTime=n,s.value[e].updatedAt=new Date,console.log("Event drop confirmed, updated appointment:",s.value[e]),k()}else console.error("Could not find appointment or event start time after drop confirmation:",a.id),alert("更新预约时间失败，请重试！"),t()}else console.log("Event drop canceled by user."),t()},T=e=>{const a=e.event.extendedProps,l=e=>e?e.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}):"",t=l(e.event.start),n=l(e.event.end),i=a.supplierName||"";let o="";return a.isLoaded?o=' <span style="font-style: italic; opacity: 0.9; font-weight: bold; color: #721c24;">(已装车)</span>':a.isCheckedIn&&(o=' <span style="font-style: italic; opacity: 0.85; font-weight: bold; color: #155724;">(已登记)</span>'),{html:`\n                    <div class="fc-event-main-custom">\n                        <span class="event-time">${t} - ${n}</span>\n                        <span class="event-details">车次: ${a.trainNumber}, ${i}${o}</span>\n                         <div class="event-extra-details">\n                            货物类型: ${a.cargoType}/${a.loadType} 电话: ${a.driverPhone}\n                         </div>\n                    </div>\n                `}},F=()=>{i.value=!1},L=e=>{const a=new Date,l={...e,id:(0,En.A)(),createdAt:a,updatedAt:a,isCheckedIn:!1,isLoaded:!1};s.value.push(l),console.log("Appointment saved (from modal):",l),k(),F()},S=e=>{const a=s.value.findIndex((a=>a.id===e.id));if(-1!==a){const l=new Date;s.value.splice(a,1,{...e,updatedAt:l}),console.log("Appointment updated (from modal):",e),k(),F()}else console.error("Could not find appointment to update (from modal):",e.id),alert("更新失败，未找到预约记录！")},V=e=>{const a=s.value.findIndex((a=>a.id===e));-1!==a?(s.value.splice(a,1),console.log("Appointment deleted (from modal):",e),k(),F()):(console.error("Could not find appointment to delete (from modal):",e),alert("删除失败，未找到预约记录！"))};return{activeTab:e,minDate:t,appointments:s,appointmentSettings:d,calendarOptions:h,showModal:i,currentAppointmentForModal:p,editMode:o,availableTimeSlots:c,fullCalendar:r,handleDateClick:y,handleEventClick:C,handleEventDrop:w,renderEventContent:T,handleDateSelect:f,todayAppointmentCounts:b,closeAppointmentModal:F,handleModalSave:L,handleModalUpdate:S,handleModalDelete:V}}},Bn=(0,Oe.A)(Xn,[["render",An],["__scopeId","data-v-14fa80c6"]]),$n=Bn,Gn={class:"driver-check-in-container"},qn={class:"card-header"},Jn={key:0},Qn={class:"form-description"},Hn={class:"demo-info"},jn={key:1},Yn={class:"details-header"},Zn={class:"delivery-details"},ei={class:"action-buttons"},ai={class:"dialog-footer"},li={__name:"DriverCheckIn",setup(e){const a=(0,Pe.Kh)({pickupNumber:""}),l=(0,Pe.Kh)({driverPhone:"",driverLicense:"",carNumber:""}),t=(0,Pe.KR)(!1),o=(0,Pe.KR)(!1),r=(0,Pe.KR)(!1),s=(0,Pe.KR)(!1),d=(0,Pe.KR)(null),u=(0,Pe.KR)([]),p=(0,Pe.KR)(!1),m=[{pickupNumber:"12345",trainNumber:"T6789",driverPhone:"13800138000",driverLicense:"L12345678",carNumber:"TR987",appointmentTime:"2024-07-30 14:00",status:"pending",details:[{pcNumber:"PC2024030100",appointmentParty:"客户A",appointmentTime:"2024-02-29 14:00:00",startWarehouse:"广州仓库",destination:"深圳市南山区",palletCount:10,weight:1e3,loadingType:"卡板",boxCount:100,priority:1,cubicMeter:20},{pcNumber:"PC2024030100",appointmentParty:"客户B",appointmentTime:"2024-02-29 15:00:00",startWarehouse:"广州仓库",destination:"深圳市福田区",palletCount:10,weight:1e3,loadingType:"地板",boxCount:500,priority:2,cubicMeter:20}]},{pickupNumber:"23456",trainNumber:"T7890",driverPhone:"13900139000",driverLicense:"L87654321",carNumber:"TR654",appointmentTime:"2024-08-02 10:30",status:"in-progress",details:[{pcNumber:"PC2024030200",appointmentParty:"客户C",appointmentTime:"2024-03-05 09:00:00",startWarehouse:"深圳仓库",destination:"北京市朝阳区",palletCount:15,weight:1500,loadingType:"卡板",boxCount:150,priority:1,cubicMeter:25}]},{pickupNumber:"34567",trainNumber:"T8901",driverPhone:"13700137000",driverLicense:"L13579246",carNumber:"TR321",appointmentTime:"2024-08-05 09:15",status:"completed",details:[{pcNumber:"PC2024030300",appointmentParty:"客户D",appointmentTime:"2024-03-10 13:30:00",startWarehouse:"东莞仓库",destination:"广州市天河区",palletCount:8,weight:800,loadingType:"混装",boxCount:80,priority:3,cubicMeter:15},{pcNumber:"PC2024030301",appointmentParty:"客户E",appointmentTime:"2024-03-10 14:30:00",startWarehouse:"东莞仓库",destination:"广州市海珠区",palletCount:12,weight:1200,loadingType:"地板",boxCount:120,priority:2,cubicMeter:22}]}];(0,n.wB)((()=>d.value),(e=>{e&&(l.driverPhone=e.driverPhone||"",l.driverLicense=e.driverLicense||"",l.carNumber=e.carNumber||"")}),{immediate:!0});const c=e=>{if(p.value)switch(e){case"pending":return"Pending";case"in-progress":return"In Progress";case"completed":return"Completed";default:return"Unknown"}else switch(e){case"pending":return"待登记";case"in-progress":return"登记中";case"completed":return"已完成";default:return"未知状态"}},b=e=>{p.value=e},v=async e=>{console.log(`获取提货号为 ${e} 的数据`),await new Promise((e=>setTimeout(e,800)));const a=m.find((a=>a.pickupNumber===e));return a||null},g=async()=>{if(a.pickupNumber){t.value=!0;try{const e=await v(a.pickupNumber);e?(d.value=e,u.value=e.details||[],s.value=!0):Ka.nk.error(p.value?"No information found for this pick up number":"未找到该提货号的信息")}catch(e){console.error("查询提货信息失败:",e),Ka.nk.error(p.value?"Query failed, please try again later":"查询失败，请稍后重试")}finally{t.value=!1}}else Ka.nk.warning(p.value?"Please enter pick up number":"请输入提货号")},h=()=>{a.pickupNumber=""},k=()=>{l.driverPhone&&l.driverLicense&&l.carNumber?r.value=!0:Ka.nk.warning(p.value?"Please fill in all required fields":"请填写所有必填字段")},f=async()=>{o.value=!0;try{if(await new Promise((e=>setTimeout(e,1e3))),d.value){d.value.driverPhone=l.driverPhone,d.value.driverLicense=l.driverLicense,d.value.carNumber=l.carNumber,d.value.status="completed";const e=m.findIndex((e=>e.pickupNumber===d.value.pickupNumber));-1!==e&&(m[e]={...d.value})}Ka.nk.success(p.value?"Check in successfully":"登记成功"),r.value=!1}catch(e){console.error("登记失败:",e),Ka.nk.error(p.value?"Check in failed, please try again later":"登记失败，请稍后重试")}finally{o.value=!1}},y=()=>{s.value=!1,a.pickupNumber="",d.value=null,u.value=[]};return(e,m)=>{const v=(0,n.g2)("el-switch"),C=(0,n.g2)("el-alert"),w=(0,n.g2)("el-icon"),T=(0,n.g2)("el-tooltip"),F=(0,n.g2)("el-input"),L=(0,n.g2)("el-form-item"),S=(0,n.g2)("el-button"),V=(0,n.g2)("el-form"),_=(0,n.g2)("el-tag"),D=(0,n.g2)("el-descriptions-item"),A=(0,n.g2)("el-descriptions"),N=(0,n.g2)("el-table-column"),M=(0,n.g2)("el-table"),P=(0,n.g2)("el-dialog"),x=(0,n.g2)("el-card");return(0,n.uX)(),(0,n.CE)("div",Gn,[(0,n.bF)(x,{class:"box-card"},{header:(0,n.k6)((()=>[(0,n.Lk)("div",qn,[(0,n.Lk)("span",null,(0,i.v_)(p.value?"Loading Check In Form":"装柜登记表"),1),(0,n.bF)(v,{modelValue:p.value,"onUpdate:modelValue":m[0]||(m[0]=e=>p.value=e),"active-text":"English","inactive-text":"中文",onChange:b},null,8,["modelValue"])])])),default:(0,n.k6)((()=>[s.value?((0,n.uX)(),(0,n.CE)("div",jn,[(0,n.Lk)("div",Yn,[(0,n.Lk)("h3",null,(0,i.v_)(p.value?"Pick Up Information":"提货信息"),1),(0,n.bF)(_,{type:"success",size:"large",effect:"dark"},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(c(d.value.status)),1)])),_:1})]),(0,n.bF)(V,{model:l,"label-width":"140px",class:"delivery-form"},{default:(0,n.k6)((()=>[(0,n.bF)(A,{column:1,border:"",class:"delivery-info",size:"large"},{default:(0,n.k6)((()=>[(0,n.bF)(D,{label:p.value?"Pick Up #":"提货号 (Pick Up #)"},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(d.value.pickupNumber),1)])),_:1},8,["label"]),(0,n.bF)(D,{label:p.value?"Train Number":"车次号"},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(d.value.trainNumber),1)])),_:1},8,["label"]),(0,n.bF)(D,{label:p.value?"Driver Phone":"司机电话"},{default:(0,n.k6)((()=>[(0,n.bF)(F,{modelValue:l.driverPhone,"onUpdate:modelValue":m[2]||(m[2]=e=>l.driverPhone=e),size:"small",placeholder:p.value?"Enter driver phone":"请输入司机电话"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,n.bF)(D,{label:p.value?"Driver License":"司机驾照号码"},{default:(0,n.k6)((()=>[(0,n.bF)(F,{modelValue:l.driverLicense,"onUpdate:modelValue":m[3]||(m[3]=e=>l.driverLicense=e),size:"small",placeholder:p.value?"Enter driver license":"请输入驾照号码"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,n.bF)(D,{label:p.value?"Trailer #":"车厢号 (Trailer #)"},{default:(0,n.k6)((()=>[(0,n.bF)(F,{modelValue:l.carNumber,"onUpdate:modelValue":m[4]||(m[4]=e=>l.carNumber=e),size:"small",placeholder:p.value?"Enter trailer number":"请输入车厢号"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,n.bF)(D,{label:p.value?"Pick Up Appointment Time":"提货预约时间"},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(d.value.appointmentTime),1)])),_:1},8,["label"])])),_:1})])),_:1},8,["model"]),(0,n.Lk)("div",Zn,[(0,n.Lk)("h4",null,(0,i.v_)(p.value?"Delivery Details":"派送明细"),1),(0,n.bF)(M,{data:u.value,style:{width:"100%"},border:"",stripe:"","header-row-class-name":"table-header","max-height":400},{default:(0,n.k6)((()=>[(0,n.bF)(N,{prop:"pcNumber",label:p.value?"PC #":"PC号",width:"120",sortable:""},null,8,["label"]),(0,n.bF)(N,{prop:"appointmentParty",label:p.value?"Appointment Party":"预约方",width:"100"},null,8,["label"]),(0,n.bF)(N,{prop:"appointmentTime",label:p.value?"Appointment Time":"预约时间",width:"150",sortable:""},null,8,["label"]),(0,n.bF)(N,{prop:"startWarehouse",label:p.value?"Start Warehouse":"起始仓库",width:"120"},null,8,["label"]),(0,n.bF)(N,{prop:"destination",label:p.value?"Destination":"目的地","min-width":"150"},null,8,["label"]),(0,n.bF)(N,{prop:"palletCount",label:p.value?"Pallets":"板数",width:"80",sortable:"",align:"center"},null,8,["label"]),(0,n.bF)(N,{prop:"weight",label:p.value?"Weight":"重量",width:"100",sortable:"",align:"center"},null,8,["label"]),(0,n.bF)(N,{prop:"loadingType",label:p.value?"Loading Type":"装车类型",width:"100"},null,8,["label"]),(0,n.bF)(N,{prop:"boxCount",label:p.value?"Boxes":"箱数",width:"80",sortable:"",align:"center"},null,8,["label"]),(0,n.bF)(N,{prop:"priority",label:p.value?"Priority":"优先级",width:"80",sortable:"",align:"center"},null,8,["label"]),(0,n.bF)(N,{prop:"cubicMeter",label:p.value?"Cubic Meter":"方数",width:"80",sortable:"",align:"center"},null,8,["label"])])),_:1},8,["data"])]),(0,n.Lk)("div",ei,[(0,n.bF)(S,{onClick:y,size:"large"},{default:(0,n.k6)((()=>[(0,n.bF)(w,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,Pe.R1)(We.kcb))])),_:1}),(0,n.eW)(" "+(0,i.v_)(p.value?"Back":"返回"),1)])),_:1}),(0,n.bF)(S,{type:"success",onClick:k,size:"large",loading:o.value,disabled:"completed"===d.value.status},{default:(0,n.k6)((()=>[(0,n.bF)(w,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,Pe.R1)(We.Jlk))])),_:1}),(0,n.eW)(" "+(0,i.v_)(p.value?"Check In":"确认登记"),1)])),_:1},8,["loading","disabled"])]),(0,n.bF)(P,{modelValue:r.value,"onUpdate:modelValue":m[6]||(m[6]=e=>r.value=e),title:p.value?"Confirm Check In":"确认登记",width:"30%"},{footer:(0,n.k6)((()=>[(0,n.Lk)("span",ai,[(0,n.bF)(S,{onClick:m[5]||(m[5]=e=>r.value=!1)},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(p.value?"Cancel":"取消"),1)])),_:1}),(0,n.bF)(S,{type:"primary",onClick:f,loading:o.value},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(p.value?"Confirm":"确定"),1)])),_:1},8,["loading"])])])),default:(0,n.k6)((()=>[(0,n.Lk)("span",null,(0,i.v_)(p.value?"Are you sure to check in this delivery?":"您确定要登记此提货信息吗？"),1)])),_:1},8,["modelValue","title"])])):((0,n.uX)(),(0,n.CE)("div",Jn,[(0,n.Lk)("div",Qn,[(0,n.Lk)("p",null,(0,i.v_)(p.value?"Please provide the following information to inquire about the loading information you need. The system will display delivery details after query:":"请提供以下信息以查询您需要的装货信息。查询到信息后，系统将显示派送明细："),1),m[7]||(m[7]=(0,n.Lk)("ol",null,[(0,n.Lk)("li",null,"Check-In time"),(0,n.Lk)("li",null,"Phone number"),(0,n.Lk)("li",null,"Driver's license number"),(0,n.Lk)("li",null,"Trailer#"),(0,n.Lk)("li",null,"Deadline")],-1))]),(0,n.Lk)("div",Hn,[(0,n.bF)(C,{title:p.value?"Demo data available with Pick Up #: 12345, 23456, 34567":"模拟数据可用的提货号: 12345, 23456, 34567",type:"info",closable:!1,"show-icon":""},null,8,["title"])]),(0,n.bF)(V,{model:a,"label-width":"140px",class:"check-in-form"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{label:p.value?"Pick Up #":"提货号(Pick Up #)"},{default:(0,n.k6)((()=>[(0,n.bF)(F,{modelValue:a.pickupNumber,"onUpdate:modelValue":m[1]||(m[1]=e=>a.pickupNumber=e),placeholder:p.value?"Enter pick up number":"请输入提货号"},{prepend:(0,n.k6)((()=>[(0,n.bF)(w,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,Pe.R1)(We.yoT))])),_:1})])),append:(0,n.k6)((()=>[(0,n.bF)(T,{content:p.value?"Click search button after input":"输入提货号后点击查询按钮",placement:"top"},{default:(0,n.k6)((()=>[(0,n.bF)(w,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,Pe.R1)(We.lOC))])),_:1})])),_:1},8,["content"])])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,n.bF)(L,null,{default:(0,n.k6)((()=>[(0,n.bF)(S,{type:"primary",onClick:g,loading:t.value,size:"large"},{default:(0,n.k6)((()=>[(0,n.bF)(w,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,Pe.R1)(We.vji))])),_:1}),(0,n.eW)(" "+(0,i.v_)(p.value?"Search":"查询"),1)])),_:1},8,["loading"]),(0,n.bF)(S,{onClick:h,size:"large"},{default:(0,n.k6)((()=>[(0,n.bF)(w,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,Pe.R1)(We.kyK))])),_:1}),(0,n.eW)(" "+(0,i.v_)(p.value?"Reset":"重置"),1)])),_:1})])),_:1})])),_:1},8,["model"])]))])),_:1})])}}},ti=(0,Oe.A)(li,[["__scopeId","data-v-a97d93aa"]]),ni=ti;var ii=l(7870);const oi=[{path:"/",name:"Home",component:Ye,meta:{title:"首页",icon:"el-icon-s-home"}},{path:"/overseas",name:"Overseas",component:()=>Promise.resolve().then(l.bind(l,7870)),meta:{title:"海外操作",icon:"el-icon-ship"}},{path:"/lastmile",name:"LastMile",component:()=>Promise.resolve().then(l.bind(l,7870)),meta:{title:"尾程仓管",icon:"el-icon-office-building"},children:[{path:"products",name:"Products",component:Ye,meta:{title:"商品管理",parentTitle:"尾程仓管"}},{path:"appointment",name:"Appointment",component:()=>l.e(9769).then(l.bind(l,9769)),meta:{title:"预约出库新",parentTitle:"尾程仓管"}},{path:"dispatch",name:"Dispatch",component:Ye,meta:{title:"现场调度",parentTitle:"尾程仓管"}}]},{path:"/appointment",name:"AppointmentMain",component:()=>Promise.resolve().then(l.bind(l,7870)),meta:{title:"预约出库",icon:"el-icon-date"},children:[{path:"list",name:"AppointmentList",component:ml,meta:{title:"预约出库",parentTitle:"尾程仓管"}},{path:"management",name:"AppointmentManagement",component:qa,meta:{title:"预约管理",parentTitle:"预约出库"}}]},{path:"/inventory",name:"Inventory",component:()=>Promise.resolve().then(l.bind(l,7870)),meta:{title:"库存管理",icon:"el-icon-box"},children:[]},{path:"/dockyard",name:"DockyardView",component:()=>l.e(7582).then(l.bind(l,7582)),meta:{title:"码头停车图",icon:"el-icon-location"}},{path:"/fbx",name:"FBXView",component:()=>l.e(3756).then(l.bind(l,3756)),meta:{title:"FBX预约信息",icon:"el-icon-document"}},{path:"/newfbx",name:"NewFBXView",component:()=>l.e(4591).then(l.bind(l,4591)),meta:{title:"FBX管理",icon:"el-icon-tickets"}},{path:"/newfbx-visactor",name:"NewFBXVisactorView",component:()=>l.e(6114).then(l.bind(l,6114)),meta:{title:"FBX管理(Visactor)",icon:"el-icon-tickets"}},{path:"/fbx/expenses/:id",name:"FBXExpenseDetails",component:()=>l.e(3468).then(l.bind(l,1412)),meta:{title:"费用明细",parentTitle:"FBX管理",icon:"el-icon-money"},props:!0},{path:"/tms",name:"TMSView",component:()=>l.e(4607).then(l.bind(l,4607)),meta:{title:"TMS系统",icon:"el-icon-truck"}},{path:"/container",name:"ContainerView",component:()=>l.e(3756).then(l.bind(l,3756)),meta:{title:"海柜管理",icon:"el-icon-suitcase"}},{path:"/dispatch/outgoing-batch",name:"OutgoingBatchDirectView",component:()=>l.e(4607).then(l.bind(l,4607)),meta:{title:"出库批次",parentTitle:"尾程仓管",icon:"el-icon-box"}},{path:"/dispatch/delivery-trains",name:"DeliveryTrainsView",component:()=>Promise.all([l.e(628),l.e(4998),l.e(2730)]).then(l.bind(l,1827)),meta:{title:"派送车次",parentTitle:"车辆派送",icon:"el-icon-truck"}},{path:"/tms/delivery-train-detail/:id",name:"DeliveryTrainDetailView",component:()=>Promise.all([l.e(628),l.e(1140)]).then(l.bind(l,8547)),meta:{title:"车次详情",parentTitle:"TMS系统",icon:"el-icon-document"}},{path:"/tms/outgoing-batch-detail/:id",name:"OutgoingBatchDetailView",component:()=>l.e(5457).then(l.bind(l,5457)),meta:{title:"出库批次详情",parentTitle:"TMS系统",icon:"el-icon-document"}},{path:"/tms/driver-check-in",name:"DriverCheckIn",component:ni,meta:{title:"司机登记",parentTitle:"车辆派送",icon:"el-icon-user"}},{path:"/logistics-example",name:"LogisticsExampleView",component:()=>l.e(8380).then(l.bind(l,8380)),meta:{title:"物流组件示例",icon:"el-icon-s-order"}},{path:"/supplier",name:"Supplier",component:()=>Promise.resolve().then(l.bind(l,7870)),meta:{title:"供应商门户",icon:"el-icon-s-shop"},children:[{path:"order",name:"SupplierOrder",component:()=>Promise.resolve().then(l.bind(l,7870)),meta:{title:"订单管理",parentTitle:"供应商门户"},children:[{path:"seas-order",name:"SupplierSeasOrder",component:()=>Promise.all([l.e(628),l.e(4998),l.e(4317)]).then(l.bind(l,1812)),meta:{title:"海柜订单",parentTitle:"订单管理"}},{path:"delivery-order",name:"SupplierDeliveryOrder",component:()=>Promise.all([l.e(628),l.e(4998),l.e(5551)]).then(l.bind(l,1830)),meta:{title:"派送订单",parentTitle:"订单管理"}}]},{path:"appointment-management",name:"SupplierAppointmentManagement",component:qa,meta:{title:"平台预约管理",parentTitle:"尾程仓管"}},{path:"mobile-app",name:"SupplierMobileApp",component:()=>Promise.resolve().then(l.bind(l,7870)),meta:{title:"手机APP端",parentTitle:"供应商门户"},redirect:"/supplier/mobile-app/driver-dispatch",children:[{path:"driver-dispatch",name:"DriverDispatchApp",component:()=>l.e(5153).then(l.bind(l,5153)),meta:{title:"车辆派送",parentTitle:"手机APP端"}},{path:"stocking",name:"Stocking",component:()=>l.e(3779).then(l.bind(l,3779)),meta:{title:"备货",parentTitle:"手机APP端"}},{path:"stocking-confirm/:trainId/:trainNumber",name:"StockingConfirm",component:()=>l.e(9498).then(l.bind(l,9498)),meta:{title:"确认备货",parentTitle:"手机APP端"}},{path:"stocking-history",name:"StockingHistory",component:()=>l.e(2801).then(l.bind(l,5182)),meta:{title:"备货历史",parentTitle:"手机APP端"}},{path:"outbound",name:"Outbound",component:()=>l.e(9595).then(l.bind(l,1976)),meta:{title:"出库",parentTitle:"手机APP端"}}]}]},{path:"/messages",name:"Messages",component:()=>Promise.resolve().then(l.bind(l,7870)),meta:{title:"消息中心",icon:"message"},redirect:"/messages/list",children:[{path:"list",name:"MessageList",component:()=>l.e(4211).then(l.bind(l,4211)),meta:{title:"消息列表",parentTitle:"消息中心"}},{path:"detail",name:"MessageDetail",component:()=>l.e(9825).then(l.bind(l,9825)),meta:{title:"消息详情",parentTitle:"消息中心"}},{path:"manage",name:"MessageManage",component:()=>l.e(8595).then(l.bind(l,8595)),meta:{title:"消息管理配置",parentTitle:"消息中心"}},{path:"email-management",name:"EmailManagementParent",component:{render:()=>(0,n.h)(xe.Tp)},meta:{title:"邮件管理",parentTitle:"消息中心"},children:[{path:"accounts",name:"EmailAccount",component:()=>l.e(7350).then(l.bind(l,7350)),meta:{title:"邮箱账号",parentTitle:"邮件管理"}},{path:"templates",name:"EmailTemplate",component:()=>l.e(4194).then(l.bind(l,4194)),meta:{title:"邮件模板",parentTitle:"邮件管理"}},{path:"logs",name:"EmailLog",component:()=>l.e(7717).then(l.bind(l,7717)),meta:{title:"邮件记录",parentTitle:"邮件管理"}}]}]},{path:"/load-appointment",name:"LoadAppointmentMain",component:ii["default"],redirect:"/load-appointment/manage",meta:{title:"提货预约",icon:"el-icon-calendar"},children:[{path:"manage",name:"LoadAppointmentManage",component:$n,meta:{title:"预约日历",parentTitle:"提货预约"}},{path:"settings",name:"LoadAppointmentSettings",component:Fn,meta:{title:"预约设置",parentTitle:"提货预约"}}]},{path:"/admin",name:"Admin",component:()=>Promise.resolve().then(l.bind(l,7870)),redirect:"/admin/supplier-management",meta:{title:"后台管理",icon:"el-icon-setting"},children:[{path:"supplier-management",name:"AdminSupplierManagement",component:()=>l.e(8832).then(l.bind(l,8832)),meta:{title:"供应商管理",parentTitle:"后台管理"}},{path:"role-management",name:"AdminRoleManagement",component:()=>l.e(7428).then(l.bind(l,7428)),meta:{title:"角色管理",parentTitle:"后台管理"}},{path:"operation-log",name:"AdminOperationLog",component:()=>l.e(5903).then(l.bind(l,5903)),meta:{title:"操作日志",parentTitle:"后台管理"}},{path:"vehicle-management",name:"AdminVehicleManagement",component:()=>l.e(4443).then(l.bind(l,4443)),meta:{title:"车辆档案",parentTitle:"后台管理"}},{path:"driver-management",name:"AdminDriverManagement",component:()=>l.e(8926).then(l.bind(l,8926)),meta:{title:"驾驶员管理",parentTitle:"后台管理"}},{path:"gps-tracking",name:"AdminGpsTracking",component:()=>l.e(42).then(l.bind(l,42)),meta:{title:"GPS 实时监控",parentTitle:"后台管理"}},{path:"alert-management",name:"AdminAlertManagement",component:()=>l.e(1930).then(l.bind(l,1930)),meta:{title:"异常预警",parentTitle:"后台管理"}},{path:"tag-management",name:"AdminTagManagement",component:()=>Promise.resolve().then(l.bind(l,7870)),meta:{title:"标签管理",parentTitle:"后台管理"},children:[{path:"list",name:"TagList",component:()=>l.e(5157).then(l.bind(l,5157)),meta:{title:"标签列表",parentTitle:"标签管理"}},{path:"groups",name:"TagGroupList",component:sn,meta:{title:"标签分组",parentTitle:"标签管理"}},{path:"library",name:"TagLibrary",component:()=>l.e(5157).then(l.bind(l,5157)),meta:{title:"标签库",parentTitle:"标签管理"}},{path:"rules",name:"TagRules",component:()=>l.e(5157).then(l.bind(l,5157)),meta:{title:"规则配置",parentTitle:"标签管理"}},{path:"dashboard",name:"TagDashboard",component:()=>l.e(5157).then(l.bind(l,5157)),meta:{title:"数据看板",parentTitle:"标签管理"}}]},{path:"tag-management-new",name:"AdminTagManagementNew",component:()=>Promise.resolve().then(l.bind(l,7870)),meta:{title:"标签管理新",parentTitle:"后台管理"},children:[{path:"list",name:"TagListNew",component:()=>l.e(5157).then(l.bind(l,5157)),meta:{title:"标签列表",parentTitle:"标签管理新"}}]},{path:"quote-management",name:"QuoteManagement",meta:{title:"报价管理",icon:"el-icon-document"},children:[{path:"amazon-warehouse",name:"AmazonWarehouseManagement",component:()=>l.e(3718).then(l.bind(l,3718)),meta:{title:"仓库管理"}},{path:"fixed-quote",name:"AdminFixedQuote",component:()=>l.e(6273).then(l.bind(l,6273)),meta:{title:"固定报价",parentTitle:"报价管理"}},{path:"inquiry",name:"AdminInquiry",component:()=>l.e(5367).then(l.bind(l,5367)),meta:{title:"单次询价",parentTitle:"报价管理"}},{path:"bidding",name:"AdminBidding",component:()=>l.e(4888).then(l.bind(l,4888)),meta:{title:"竞价管理",parentTitle:"报价管理"}},{path:"comparison-history",name:"AdminQuoteComparisonHistory",component:()=>l.e(2557).then(l.bind(l,2557)),meta:{title:"对比与历史",parentTitle:"报价管理"}}]},{path:"tags",name:"TagManagement",component:Ot,meta:{title:"标签管理",parentTitle:"后台管理"}},{path:"tag-groups",name:"TagGroupManagement",component:sn,meta:{title:"标签分组",parentTitle:"后台管理"}},{path:"rating-management",name:"AdminRatingManagement",component:()=>l.e(9583).then(l.bind(l,9583)),redirect:"/admin/rating-management/dashboard",meta:{title:"评分管理",parentTitle:"后台管理"},children:[{path:"dashboard",name:"AdminRatingDashboard",component:()=>l.e(9822).then(l.bind(l,9822)),meta:{title:"评分看板",parentTitle:"评分管理"}},{path:"field-rule-config",name:"FieldRuleConfig",component:()=>l.e(7642).then(l.bind(l,7642)),meta:{title:"字段规则配置"}},{path:"metric-rule-config",name:"MetricRuleConfig",component:()=>l.e(880).then(l.bind(l,880)),meta:{title:"指标规则配置"}},{path:"indicator-config",name:"RatingIndicatorConfig",component:()=>l.e(7714).then(l.bind(l,7714)),meta:{title:"指标配置",parentTitle:"评分管理"}},{path:"rules-config",name:"RatingRulesConfig",component:()=>l.e(3236).then(l.bind(l,3236)),meta:{title:"规则配置",parentTitle:"评分管理"}},{path:"supplier-deduction-details",name:"SupplierDeductionDetails",component:()=>l.e(6734).then(l.bind(l,6734)),meta:{title:"扣分详情"}}]},{path:"contract-management",name:"AdminContractManagement",component:()=>l.e(9583).then(l.bind(l,9583)),redirect:"/admin/contract-management/list",meta:{title:"合同管理",parentTitle:"后台管理"},children:[{path:"list",name:"AdminContractList",component:()=>l.e(3944).then(l.bind(l,3944)),meta:{title:"合同列表",parentTitle:"合同管理"}},{path:"templates",name:"AdminContractTemplates",component:()=>l.e(2647).then(l.bind(l,2647)),meta:{title:"合同模板",parentTitle:"合同管理"}}]},{path:"message-management",name:"MessageManagement",component:()=>l.e(8595).then(l.bind(l,8595)),meta:{title:"消息管理",parentTitle:"后台管理"}}]},{path:"/work-order",name:"WorkOrder",component:()=>Promise.resolve().then(l.bind(l,7870)),redirect:"/work-order/list",meta:{title:"工单管理",icon:"el-icon-document"},children:[{path:"command",name:"CommandWorkOrderList",component:()=>l.e(7001).then(l.bind(l,7001)),meta:{title:"指令工单"}},{path:"command/create",name:"CommandWorkCreate",component:()=>l.e(8328).then(l.bind(l,8328)),meta:{title:"创建指令工单",hidden:!0,activeMenu:"/work-order/command"}},{path:"command/detail/:id",name:"CommandWorkDetail",component:()=>l.e(5991).then(l.bind(l,5991)),meta:{title:"指令工单详情",hidden:!0}},{path:"command/:id/process",name:"CommandWorkProcess",component:()=>l.e(5991).then(l.bind(l,5991)),meta:{title:"处理指令工单",hidden:!0}},{path:"exception",name:"ExceptionWorkOrderList",component:()=>l.e(4556).then(l.bind(l,4556)),meta:{title:"异常工单"}},{path:"alert",name:"AlertWorkOrderList",component:()=>l.e(8056).then(l.bind(l,8056)),meta:{title:"订单预警"}},{path:"value-added",name:"ValueAddedWorkOrderList",component:()=>l.e(8673).then(l.bind(l,8673)),meta:{title:"增值服务"}},{path:"create",name:"WorkOrderCreate",component:()=>l.e(1128).then(l.bind(l,1128)),meta:{title:"创建工单",hidden:!0,activeMenu:"/work-order/exception"}},{path:"detail/:id",name:"WorkOrderDetail",component:()=>l.e(9853).then(l.bind(l,9853)),meta:{title:"工单详情",hidden:!0}},{path:":id/process",name:"WorkOrderProcess",component:()=>l.e(9853).then(l.bind(l,9853)),meta:{title:"处理工单",hidden:!0}},{path:"analysis",name:"WorkOrderAnalysis",component:()=>l.e(8777).then(l.bind(l,8777)),meta:{title:"工单分析"}}]},{path:"/tableDemo",name:"tableDemo",component:Ft}],ri=(0,xe.aE)({history:(0,xe.LA)("/"),routes:oi});ri.beforeEach(((e,a,l)=>{if(document.title=e.meta.title?`${e.meta.title} - 物流管理系统`:"物流管理系统",e.matched.some((e=>e.meta.requiresAuth))){const a=!0;a?l():l({path:"/login",query:{redirect:e.fullPath}})}else l()}));const si=ri;var di=l(6278);const ui=(0,di.y$)({state:{tableData:[],currentPage:1,pageSize:20,total:0,filters:[],sortSettings:[],groupSettings:{level1:"",level2:"",level3:""},fieldSettings:[]},getters:{paginatedData(e){const a=(e.currentPage-1)*e.pageSize,l=a+e.pageSize;return e.tableData.slice(a,l)}},mutations:{SET_TABLE_DATA(e,a){e.tableData=a,e.total=a.length},SET_CURRENT_PAGE(e,a){e.currentPage=a},SET_PAGE_SIZE(e,a){e.pageSize=a},SET_FILTERS(e,a){e.filters=a},SET_SORT_SETTINGS(e,a){e.sortSettings=a},SET_GROUP_SETTINGS(e,a){e.groupSettings=a},SET_FIELD_SETTINGS(e,a){e.fieldSettings=a},setGroupedData(e,a){e.tableData=a,e.total=a.length}},actions:{loadTableData({commit:e}){const a=Array(100).fill().map(((e,a)=>({id:a+1,containerNo:`CONT${1e5+a}`,waybillNo:`WB${2e5+a}`,customerService:["张三","李四","王五"][Math.floor(3*Math.random())],originalAddress:`原地址 ${a+1}`,address:`地址 ${a+1}`,city:["洛杉矶","纽约","芝加哥","休斯顿"][Math.floor(4*Math.random())],state:["CA","NY","IL","TX"][Math.floor(4*Math.random())],zipCode:Math.floor(1e4+9e4*Math.random()).toString(),deliveryArea:["东区","西区","南区","北区"][Math.floor(4*Math.random())],warehouseCode:"WH"+(a%10+1),channel:["空运","海运","陆运"][Math.floor(3*Math.random())],boxCount:Math.floor(1+10*Math.random()),weight:Math.floor(100+900*Math.random()),volume:(10*Math.random()).toFixed(2),palletCount:Math.floor(1+5*Math.random()),location:`A${Math.floor(1+9*Math.random())}-${Math.floor(1+9*Math.random())}`,eta:new Date(Date.now()-864e5*Math.floor(30*Math.random())).toISOString().split("T")[0],pickupTime:new Date(Date.now()-864e5*Math.floor(20*Math.random())).toISOString().split("T")[0],arrivalTime:new Date(Date.now()-864e5*Math.floor(15*Math.random())).toISOString().split("T")[0],unloadingTime:new Date(Date.now()-864e5*Math.floor(10*Math.random())).toISOString().split("T")[0],appointmentNo:`AP${3e5+a}`,deliveryAppointmentTime:new Date(Date.now()+864e5*Math.floor(10*Math.random())).toISOString().split("T")[0],pcNo:`PC${4e5+a}`,status:["pending","appointed","phone","email","platform","completed","cancelled"][Math.floor(7*Math.random())],tags:Math.random()>.5?["加急","特殊处理","易碎品","重物","需要叉车"].slice(0,Math.floor(3*Math.random())+1):[],memo:Math.random()>.7?`备注信息 ${a+1}`:"",followUpRecord:Math.random()>.8?`跟进记录 ${a+1}`:""})));e("SET_TABLE_DATA",a)},applyFilters({state:e,commit:a}){if(!e.filters||0===e.filters.length)return;const l=Array(100).fill().map(((e,a)=>({id:a+1,containerNo:`CONT${1e5+a}`,waybillNo:`WB${2e5+a}`,customerService:["张三","李四","王五"][Math.floor(3*Math.random())],originalAddress:`原地址 ${a+1}`,address:`地址 ${a+1}`,city:["洛杉矶","纽约","芝加哥","休斯顿"][Math.floor(4*Math.random())],state:["CA","NY","IL","TX"][Math.floor(4*Math.random())],zipCode:Math.floor(1e4+9e4*Math.random()).toString(),deliveryArea:["东区","西区","南区","北区"][Math.floor(4*Math.random())],warehouseCode:"WH"+(a%10+1),channel:["空运","海运","陆运"][Math.floor(3*Math.random())],boxCount:Math.floor(1+10*Math.random()),weight:Math.floor(100+900*Math.random()),volume:(10*Math.random()).toFixed(2),palletCount:Math.floor(1+5*Math.random()),location:`A${Math.floor(1+9*Math.random())}-${Math.floor(1+9*Math.random())}`,eta:new Date(Date.now()-864e5*Math.floor(30*Math.random())).toISOString().split("T")[0],pickupTime:new Date(Date.now()-864e5*Math.floor(20*Math.random())).toISOString().split("T")[0],arrivalTime:new Date(Date.now()-864e5*Math.floor(15*Math.random())).toISOString().split("T")[0],unloadingTime:new Date(Date.now()-864e5*Math.floor(10*Math.random())).toISOString().split("T")[0],appointmentNo:`AP${3e5+a}`,deliveryAppointmentTime:new Date(Date.now()+864e5*Math.floor(10*Math.random())).toISOString().split("T")[0],pcNo:`PC${4e5+a}`,status:["pending","appointed","phone","email","platform","completed","cancelled"][Math.floor(7*Math.random())],tags:Math.random()>.5?["加急","特殊处理","易碎品","重物","需要叉车"].slice(0,Math.floor(3*Math.random())+1):[],memo:Math.random()>.7?`备注信息 ${a+1}`:"",followUpRecord:Math.random()>.8?`跟进记录 ${a+1}`:""}))),t=l.filter((a=>e.filters.every((e=>{if(!e.field||!e.operator||void 0===e.value||""===e.value)return!0;const l=a[e.field],t=e.value;switch(e.operator){case"eq":return l==t;case"neq":return l!=t;case"contains":return String(l).includes(String(t));case"not_contains":return!String(l).includes(String(t));case"gt":return Number(l)>Number(t);case"lt":return Number(l)<Number(t);default:return!0}}))));a("SET_TABLE_DATA",t),a("SET_CURRENT_PAGE",1)},applySort({state:e,commit:a}){if(!e.sortSettings||0===e.sortSettings.length)return;const l=[...e.tableData];l.sort(((a,l)=>{for(const t of e.sortSettings){if(!t.field||!t.direction)continue;const e=a[t.field],n=l[t.field];if(e!==n)return"asc"===t.direction?"string"===typeof e&&"string"===typeof n?e.localeCompare(n):e>n?1:-1:"string"===typeof e&&"string"===typeof n?n.localeCompare(e):e<n?1:-1}return 0})),a("SET_TABLE_DATA",l),a("SET_CURRENT_PAGE",1)},applyGroup({state:e,commit:a},{groupFields:l}){if(!l||0===l.length)return void a("setGroupedData",[]);const t=e=>{const a={containerNo:"集装箱号",waybillNo:"运单号",customerService:"客服",originalAddress:"原始地址",address:"地址",city:"City",state:"State",zipCode:"Zip_Code",email:"邮箱",phone:"电话",deliveryArea:"派送区域",warehouseCode:"仓库代码",channel:"渠道",boxCount:"箱数",weight:"重量",volume:"方数",palletCount:"板数",location:"库位",eta:"ETA",pickupTime:"提柜时间",arrivalTime:"抵仓时间",expectedUnloadingTime:"预计拆柜时间",unloadingTime:"拆柜完成时间",appointmentNo:"预约号",deliveryAppointmentTime:"派送预约时间",pcNo:"PC号",status:"预约状态",tags:"标签",followUpRecord:"跟进记录",memo:"备注",internalNote:"内部备注",lianyuPrice:"报价(联宇)",shippingMark:"唛头",inquiryPrice:"询价平台报价"};return a[e]||e},n=[...e.tableData],i=[],o=new Map;n.forEach((e=>{let a=i,n="",r=null;for(let i=0;i<l.length;i++){const s=l[i],d=e[s],u=t(s),p=`${n}/${s}:${d}`;let m=a.find((e=>e.groupKey===p));m||(m={id:`group-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,groupKey:p,groupName:`${u}: ${d||"空"}`,isGroup:!0,groupLevel:i,children:[],items:[],count:0,totalWeight:0,totalVolume:0,totalBoxCount:0,containerNoSummary:"",waybillNoSummary:""},m.groupClass=0===i?"level-1-group":1===i?"level-2-group":"level-3-group",a.push(m),o.set(p,m)),m.items.push(e),m.count=m.items.length,m.totalWeight+=parseFloat(e.weight||0),m.totalVolume+=parseFloat(e.volume||0),m.totalBoxCount+=parseInt(e.boxCount||0,10),m.containerNoSummary=`共 ${m.count} 条记录，总重量: ${m.totalWeight.toFixed(2)}kg`,m.waybillNoSummary=`总箱数: ${m.totalBoxCount}，总体积: ${m.totalVolume.toFixed(2)}m³`,n=p,a=m.children,r=m}if(r){const a={...e,parentGroupKey:r.groupKey};r.children.push(a)}}));const r=[];function s(e,a=0){e.forEach((e=>{r.push(e),e.items&&e.items.length>0&&e.items.forEach((a=>{const l={...a,dataParentGroupKey:e.groupKey};r.push(l)}));const l=e.children.filter((e=>e.isGroup));l.length>0&&s(l,a+1)}))}s(i),a("setGroupedData",r)},applyFieldSettings({state:e}){console.log("应用字段配置:",e.fieldSettings)},searchData({commit:e},a){const l=Array(100).fill().map(((e,a)=>({id:a+1,containerNo:`CONT${1e5+a}`,waybillNo:`WB${2e5+a}`,customerService:["张三","李四","王五"][Math.floor(3*Math.random())],originalAddress:`原地址 ${a+1}`,address:`地址 ${a+1}`,city:["洛杉矶","纽约","芝加哥","休斯顿"][Math.floor(4*Math.random())],state:["CA","NY","IL","TX"][Math.floor(4*Math.random())],zipCode:Math.floor(1e4+9e4*Math.random()).toString(),deliveryArea:["东区","西区","南区","北区"][Math.floor(4*Math.random())],warehouseCode:"WH"+(a%10+1),channel:["空运","海运","陆运"][Math.floor(3*Math.random())],boxCount:Math.floor(1+10*Math.random()),weight:Math.floor(100+900*Math.random()),volume:(10*Math.random()).toFixed(2),palletCount:Math.floor(1+5*Math.random()),location:`A${Math.floor(1+9*Math.random())}-${Math.floor(1+9*Math.random())}`,eta:new Date(Date.now()-864e5*Math.floor(30*Math.random())).toISOString().split("T")[0],pickupTime:new Date(Date.now()-864e5*Math.floor(20*Math.random())).toISOString().split("T")[0],arrivalTime:new Date(Date.now()-864e5*Math.floor(15*Math.random())).toISOString().split("T")[0],unloadingTime:new Date(Date.now()-864e5*Math.floor(10*Math.random())).toISOString().split("T")[0],appointmentNo:`AP${3e5+a}`,deliveryAppointmentTime:new Date(Date.now()+864e5*Math.floor(10*Math.random())).toISOString().split("T")[0],pcNo:`PC${4e5+a}`,status:["pending","appointed","phone","email","platform","completed","cancelled"][Math.floor(7*Math.random())],tags:Math.random()>.5?["加急","特殊处理","易碎品","重物","需要叉车"].slice(0,Math.floor(3*Math.random())+1):[],memo:Math.random()>.7?`备注信息 ${a+1}`:"",followUpRecord:Math.random()>.8?`跟进记录 ${a+1}`:""})));let t=[...l];if(a.dateRange&&2===a.dateRange.length&&a.dateType){const e=new Date(a.dateRange[0]),l=new Date(a.dateRange[1]);t=t.filter((t=>{const n=new Date(t[a.dateType]);return n>=e&&n<=l}))}if(a.searchNumber&&a.searchType&&(t=t.filter((e=>String(e[a.searchType]).includes(a.searchNumber)))),a.fuzzySearchText){const e=a.fuzzySearchText.toLowerCase();t=t.filter((a=>a.memo&&a.memo.toLowerCase().includes(e)||a.followUpRecord&&a.followUpRecord.toLowerCase().includes(e)||a.zipCode&&a.zipCode.toLowerCase().includes(e)||a.containerNo&&a.containerNo.toLowerCase().includes(e)||a.waybillNo&&a.waybillNo.toLowerCase().includes(e)))}e("SET_TABLE_DATA",t),e("SET_CURRENT_PAGE",1)}}});var pi=l(6804),mi=(l(4188),l(7487)),ci=(l(8982),l(7215)),bi=l(7723);const vi=()=>{const e=window.console.error;window.console.error=function(){arguments[0]&&"string"===typeof arguments[0]&&(arguments[0].includes("ResizeObserver")||arguments[0].includes("stopPropagation"))||e.apply(console,arguments)};const a=window.ResizeObserver.prototype,l=a.observe;a.observe=function(e){return e&&(e.classList.contains("el-table")||e.classList.contains("el-drawer__container")||e.classList.contains("el-tabs__nav"))&&(e.style.contain="content"),l.apply(this,arguments)}};vi();const gi=(0,t.Ef)(Be);gi.use(ui),gi.use(si),gi.use(pi.A,{locale:mi.A}),gi.use(cl.Ay),ci.uv.setup({language:"zh-CN"}),ci.uv.use(bi.A),gi.use(ci.Header).use(ci.VP).use(ci.XI).use(ci.Footer).use(ci.Checkbox).use(ci.Radio).use(ci.Filter).use(ci.Menu).use(ci.Edit).use(ci.Export).use(ci.Keyboard).use(ci.Validator).use(ci.xA).use(ci.Tooltip).use(ci.Pager).use(ci.Icon).use(ci.Select),gi.mount("#app")},7870:(e,a,l)=>{l.r(a),l.d(a,{default:()=>d});var t=l(641);const n={class:"layout-container"};function i(e,a,l,i,o,r){const s=(0,t.g2)("router-view");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(s)])}const o={name:"BaseLayout"};var r=l(6262);const s=(0,r.A)(o,[["render",i],["__scopeId","data-v-6f36ec77"]]),d=s},9595:e=>{e.exports=JSON.parse('[{"id":"1","trainNumber":"TR2024030101","issueDate":"2024-03-01","issuer":"张三","tags":["异常","紧急"],"loadingType":"卡板","deliveryType":"整车","driverRegisterTime":"2024-03-01 08:00:00","loadingStartTime":"2024-03-01 08:30:00","loadingEndTime":"2024-03-01 09:30:00","OPName":"张三","driverName":"李四","carNumber":"A001","loader":"李四","dockNumber":"DOCK-01","deliveryArea":"Local","loadingStatus":"待登记","warehouseRemarks":"正常装车","driverLicense":"123456789","licensePlate":"粤B12345","driverPhone":"13800138000","supplier":"广州物流","actualPallets":20,"palletsMerged":18,"loadingAppointmentTime":"2024-03-01 08:00:00","weight":2000,"cubicMeter":40,"totalPallets":20,"deliveryCost":5000,"Memo":"MEMO","Followup":"跟进记录","DriverStartTime":"2024-03-01 08:00:00","DriverEndTime":"2024-03-01 08:00:00","Arrived":"2024-03-01 08:00:00","podImage":"POD图片","children":[{"id":"1-1","pcNumber":"PC20240301001","bookingParty":"客户A","bookingTime":"2024-02-29 14:00:00","bookingNumber":"BK001","startWarehouse":"广州仓库","destination":"深圳市南山区","loadingType":"卡板","BoxCount":100,"palletCount":10,"weight":1000,"volume":20,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"1"},{"id":"1-2","pcNumber":"PC20240301002","bookingParty":"客户B","bookingTime":"2024-02-29 15:00:00","bookingNumber":"BK002","startWarehouse":"广州仓库","destination":"深圳市福田区","loadingType":"地板","BoxCount":500,"palletCount":10,"weight":1000,"volume":20,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"2"}]},{"id":"2","trainNumber":"TR2024030102","issueDate":"2024-03-01","issuer":"王五","tags":["异常","紧急"],"loadingType":"地板","deliveryType":"散板","driverRegisterTime":"2024-03-01 10:00:00","loadingStartTime":"2024-03-01 10:30:00","loadingEndTime":"2024-03-01 11:30:00","OPName":"王五","driverName":"赵六","carNumber":"A002","loader":"赵六","dockNumber":"DOCK-02","deliveryArea":"Local","loadingStatus":"装车完成","warehouseRemarks":"加急处理","driverLicense":"987654321","licensePlate":"粤B54321","driverPhone":"13900139000","supplier":"深圳物流","actualPallets":15,"palletsMerged":15,"loadingAppointmentTime":"2024-03-01 10:00:00","weight":1500,"cubicMeter":30,"totalPallets":15,"deliveryCost":4000,"Memo":"MEMO","Followup":"跟进记录","DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","children":[{"id":"2-1","pcNumber":"PC20240301003","bookingParty":"客户C","bookingTime":"2024-02-29 16:00:00","bookingNumber":"BK003","startWarehouse":"广州仓库","destination":"广州市天河区","palletCount":8,"weight":800,"volume":16,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"1"},{"id":"2-2","pcNumber":"PC20240301004","bookingParty":"客户D","bookingTime":"2024-02-29 17:00:00","bookingNumber":"BK004","startWarehouse":"广州仓库","destination":"广州市越秀区","palletCount":7,"weight":700,"volume":14,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"2"}]},{"id":"3","trainNumber":"LW2-230003","issueDate":"2023-03-20","issuer":"谢静伦","tags":["异常","紧急"],"loadingType":"卡板","deliveryType":"一提多卸","deliveryArea":"Local","driverRegisterTime":"2023-03-20 10:15:00","loadingStartTime":"2023-03-20 11:00:00","loadingEndTime":"2023-03-20 12:30:00","OPName":"谢静伦","driverName":"张大鹏","carNumber":"TR-A003","loader":"张大鹏","dockNumber":"DOCK-02","loadingStatus":"装车中","warehouseRemarks":"货物易碎","driverLicense":"C56781234","licensePlate":"京C55555","driverPhone":"13700137000","supplier":"YFM TRUCKING","actualPallets":15,"palletsMerged":0,"loadingAppointmentTime":"2023-03-20 10:00:00","weight":4200,"cubicMeter":28.9,"totalPallets":15,"deliveryCost":3100,"Memo":"MEMO","Followup":"跟进记录","DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","children":[{"id":"3-1","pcNumber":"PC-2023-0005","bookingParty":"亚马逊物流","bookingTime":"2023-03-19 15:30:00","bookingNumber":"APPT-88764-1","startWarehouse":"广州仓库","destination":"Amazon-LAS1","palletCount":15,"weight":4200,"volume":28.9,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"1"}]},{"id":"4","trainNumber":"LW2-230004","issueDate":"2023-03-21","issuer":"程涛子","tags":["异常","POD待审批"],"loadingType":"混装","deliveryType":"一提多卸","driverRegisterTime":"2023-03-21 07:30:00","loadingStartTime":"2023-03-21 08:15:00","loadingEndTime":"2023-03-21 09:45:00","OPName":"程涛子","driverName":"陈小明","carNumber":"TR-A004","loader":"陈小明","dockNumber":"DOCK-01","deliveryArea":"Local","loadingStatus":"已登记","warehouseRemarks":"优先配送","driverLicense":"D98765432","licensePlate":"京D44444","driverPhone":"13600136000","supplier":"一次性供应商","actualPallets":10,"palletsMerged":1,"loadingAppointmentTime":"2023-03-21 07:00:00","weight":3100,"cubicMeter":22.3,"totalPallets":11,"deliveryCost":2600,"Memo":"MEMO","Followup":"跟进记录","DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","children":[{"id":"4-1","pcNumber":"PC-2023-0006","bookingParty":"京东物流","bookingTime":"2023-03-20 14:00:00","bookingNumber":"APPT-88765-1","startWarehouse":"广州仓库","destination":"商业地址-LWX1-A","palletCount":5,"weight":1500,"volume":10.5,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"1"},{"id":"4-2","pcNumber":"PC-2023-0007","bookingParty":"顺丰速运","bookingTime":"2023-03-20 15:30:00","bookingNumber":"APPT-88765-2","startWarehouse":"广州仓库","destination":"商业地址-LWX1-B","palletCount":6,"weight":1600,"volume":11.8,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"2"}]},{"id":"5","trainNumber":"LW2-230005","issueDate":"2023-03-22","issuer":"程涛子","tags":"异常","loadingType":"快递","deliveryType":"快递","deliveryArea":"Local","driverRegisterTime":"2023-03-22 09:00:00","loadingStartTime":"2023-03-22 09:45:00","loadingEndTime":"2023-03-22 11:15:00","OPName":"程涛子","driverName":"王小刚","carNumber":"TR-A005","loader":"王小刚","dockNumber":"DOCK-04","loadingStatus":"未装车","warehouseRemarks":"","driverLicense":"E12348765","licensePlate":"京E33333","driverPhone":"13500135000","supplier":"一次性供应商","actualPallets":9,"palletsMerged":0,"loadingAppointmentTime":"2023-03-22 08:30:00","weight":2900,"cubicMeter":19.8,"totalPallets":9,"deliveryCost":2400,"Memo":"MEMO","Followup":"跟进记录","DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","children":[{"id":"5-1","pcNumber":"PC-2023-0008","bookingParty":"圆通快递","bookingTime":"2023-03-21 13:30:00","bookingNumber":"APPT-88766-1","startWarehouse":"广州仓库","destination":"商业地址-LWX1","palletCount":4,"weight":1300,"volume":8.8,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"1"},{"id":"5-2","pcNumber":"PC-2023-0009","bookingParty":"申通快递","bookingTime":"2023-03-21 14:30:00","bookingNumber":"APPT-88766-2","startWarehouse":"广州仓库","destination":"商业地址-LWX1","palletCount":5,"weight":1600,"volume":11,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"2"}]},{"id":"6","trainNumber":"LW2-230006","issueDate":"2023-03-23","issuer":"李明","loadingType":"混装","deliveryType":"多提一卸","deliveryArea":"Local","driverRegisterTime":"2023-03-23 08:30:00","loadingStartTime":"2023-03-23 09:00:00","loadingEndTime":"2023-03-23 10:30:00","OPName":"李明","driverName":"马小红","carNumber":"TR-A006","loader":"马小红","dockNumber":"DOCK-03","loadingStatus":"已登记","warehouseRemarks":"需要温控","driverLicense":"F87654321","licensePlate":"京F22222","driverPhone":"13400134000","supplier":"百世物流","actualPallets":12,"palletsMerged":2,"loadingAppointmentTime":"2023-03-23 08:00:00","weight":3500,"cubicMeter":25.6,"totalPallets":14,"deliveryCost":2800,"Memo":"MEMO","Followup":"跟进记录","DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","children":[{"id":"6-1","pcNumber":"PC-2023-0010","bookingParty":"中通快递","bookingTime":"2023-03-22 10:30:00","bookingNumber":"APPT-88767-1","startWarehouse":"广州仓库","destination":"商业地址-LWX2","palletCount":7,"weight":1800,"volume":14.2,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"1"},{"id":"6-2","pcNumber":"PC-2023-0011","bookingParty":"韵达快递","bookingTime":"2023-03-22 11:30:00","bookingNumber":"APPT-88767-2","startWarehouse":"广州仓库","destination":"商业地址-LWX2","palletCount":7,"weight":1700,"volume":11.4,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"2"}]},{"id":"7","trainNumber":"LW2-230007","issueDate":"2023-03-24","issuer":"王建国","loadingType":"地板","deliveryType":"多提多卸","deliveryArea":"Local","driverRegisterTime":"2023-03-24 07:45:00","loadingStartTime":"2023-03-24 08:15:00","loadingEndTime":"2023-03-24 09:45:00","OPName":"王建国","driverName":"赵小华","carNumber":"TR-A007","loader":"赵小华","dockNumber":"DOCK-05","loadingStatus":"未装车","warehouseRemarks":"客户要求当天送达","driverLicense":"G12345678","licensePlate":"京G11111","driverPhone":"13300133000","supplier":"德邦物流","actualPallets":18,"palletsMerged":3,"loadingAppointmentTime":"2023-03-24 07:30:00","weight":4500,"cubicMeter":32.4,"totalPallets":21,"deliveryCost":3500,"Memo":"MEMO","Followup":"跟进记录","DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","children":[{"id":"7-1","pcNumber":"PC-2023-0012","bookingParty":"苏宁物流","bookingTime":"2023-03-23 14:00:00","bookingNumber":"APPT-88768-1","startWarehouse":"广州仓库","destination":"商业地址-SHN1","palletCount":10,"weight":2500,"volume":17.8,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"1"},{"id":"7-2","pcNumber":"PC-2023-0013","bookingParty":"天猫物流","bookingTime":"2023-03-23 15:00:00","bookingNumber":"APPT-88768-2","startWarehouse":"广州仓库","destination":"商业地址-SHN2","palletCount":11,"weight":2000,"volume":14.6,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"2"}]},{"id":"8","trainNumber":"LW2-230007","issueDate":"2023-03-24","issuer":"王建国","loadingType":"地板","deliveryType":"多提多卸","driverRegisterTime":"2023-03-24 07:45:00","loadingStartTime":"2023-03-24 08:15:00","loadingEndTime":"2023-03-24 09:45:00","OPName":"王建国","driverName":"赵小华","deliveryArea":"Local","carNumber":"TR-A007","loader":"赵小华","dockNumber":"DOCK-05","loadingStatus":"未装车","warehouseRemarks":"客户要求当天送达","driverLicense":"G12345678","licensePlate":"京G11111","driverPhone":"13300133000","supplier":"德邦物流","actualPallets":18,"palletsMerged":3,"loadingAppointmentTime":"2023-03-24 07:30:00","weight":4500,"cubicMeter":32.4,"totalPallets":21,"deliveryCost":3500,"Memo":"MEMO","Followup":"跟进记录","DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","children":[{"id":"8-1","pcNumber":"PC-2023-0012","bookingParty":"苏宁物流","bookingTime":"2023-03-23 14:00:00","bookingNumber":"APPT-88768-1","startWarehouse":"广州仓库","destination":"商业地址-SHN1","palletCount":10,"weight":2500,"volume":17.8,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"1"},{"id":"8-2","pcNumber":"PC-2023-0013","bookingParty":"天猫物流","bookingTime":"2023-03-23 15:00:00","bookingNumber":"APPT-88768-2","startWarehouse":"广州仓库","destination":"商业地址-SHN2","palletCount":11,"weight":2000,"volume":14.6,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00"}]},{"id":"9","trainNumber":"LW2-230007","issueDate":"2023-03-24","issuer":"王建国","loadingType":"地板","deliveryType":"多提多卸","driverRegisterTime":"2023-03-24 07:45:00","loadingStartTime":"2023-03-24 08:15:00","loadingEndTime":"2023-03-24 09:45:00","OPName":"王建国","driverName":"赵小华","deliveryArea":"Local","carNumber":"TR-A007","loader":"赵小华","dockNumber":"DOCK-05","loadingStatus":"未装车","warehouseRemarks":"客户要求当天送达","driverLicense":"G12345678","licensePlate":"京G11111","driverPhone":"13300133000","supplier":"德邦物流","actualPallets":18,"palletsMerged":3,"loadingAppointmentTime":"2023-03-24 07:30:00","weight":4500,"cubicMeter":32.4,"totalPallets":21,"deliveryCost":3500,"Memo":"MEMO","Followup":"跟进记录","DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","children":[{"id":"9-1","pcNumber":"PC-2023-0012","bookingParty":"苏宁物流","bookingTime":"2023-03-23 14:00:00","bookingNumber":"APPT-88768-1","startWarehouse":"广州仓库","destination":"商业地址-SHN1","palletCount":10,"weight":2500,"volume":17.8,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"1"},{"id":"9-2","pcNumber":"PC-2023-0013","bookingParty":"天猫物流","bookingTime":"2023-03-23 15:00:00","bookingNumber":"APPT-88768-2","startWarehouse":"广州仓库","destination":"商业地址-SHN2","palletCount":11,"weight":2000,"volume":14.6,"DriverStartTime":"2024-03-01 10:00:00","DriverEndTime":"2024-03-01 10:00:00","Arrived":"2024-03-01 10:00:00","podImage":"POD图片","rank":"2"}]}]')}},a={};function l(t){var n=a[t];if(void 0!==n)return n.exports;var i=a[t]={id:t,loaded:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.loaded=!0,i.exports}l.m=e,(()=>{var e=[];l.O=(a,t,n,i)=>{if(!t){var o=1/0;for(u=0;u<e.length;u++){for(var[t,n,i]=e[u],r=!0,s=0;s<t.length;s++)(!1&i||o>=i)&&Object.keys(l.O).every((e=>l.O[e](t[s])))?t.splice(s--,1):(r=!1,i<o&&(o=i));if(r){e.splice(u--,1);var d=n();void 0!==d&&(a=d)}}return a}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[t,n,i]}})(),(()=>{l.n=e=>{var a=e&&e.__esModule?()=>e["default"]:()=>e;return l.d(a,{a}),a}})(),(()=>{l.d=(e,a)=>{for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}})(),(()=>{l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((a,t)=>(l.f[t](e,a),a)),[]))})(),(()=>{l.u=e=>"js/"+e+"."+{42:"ee840f58",628:"977aa318",880:"87c10326",1128:"4878c142",1140:"95bc1de3",1930:"25468e38",2557:"ecc82ce5",2647:"69dcec66",2730:"989c9ad0",2801:"95c9ab62",3236:"a797c19c",3468:"c9d399b1",3718:"32f45fe1",3756:"9c6a8452",3779:"1bdfb514",3944:"5a2c143a",4194:"e66cbea2",4211:"fba8912f",4317:"c9b96ace",4443:"479730a6",4556:"dce7ab24",4591:"608ef313",4607:"cf05f7a7",4888:"e2c17db7",4998:"300df2b5",5153:"deac709f",5157:"7fb13808",5367:"ef4b3f34",5457:"eedce713",5551:"1074869c",5903:"fb086a4c",5991:"437f4d22",6114:"02e63ff5",6273:"aa7a419c",6734:"d87d34bf",7001:"ee45132b",7350:"67e1ba83",7428:"2cf1fef6",7582:"a07f4f73",7642:"00fae2af",7714:"8dfd54e2",7717:"80be7798",8056:"35df3fab",8328:"598a932b",8380:"cb8eaf7a",8595:"3cbe1438",8673:"974efad3",8777:"cab8e074",8832:"73337d16",8926:"7cf1f688",9498:"3f2f7576",9583:"ff41a075",9595:"2e1e6067",9769:"6fdcde35",9822:"7d70d58e",9825:"8ec72926",9853:"f6e88fd5"}[e]+".js"})(),(()=>{l.miniCssF=e=>"css/"+e+"."+{42:"cce237f5",880:"0aa936a8",1128:"9026ffd3",1140:"5b3478c0",1930:"29c5a4ce",2557:"1b21afe0",2647:"2e58d75d",2730:"1a021df7",2801:"b3389d80",3236:"ede59283",3468:"486c573a",3718:"08a0fcc0",3756:"9b46d2df",3779:"5eb99f85",3944:"9a684d6a",4194:"e276c791",4211:"dd1ef561",4317:"47739cff",4443:"457f688a",4556:"34e11679",4591:"0d398f5c",4607:"7d1ca9b5",4888:"92cc0202",5153:"ff0d80ff",5157:"93c79461",5367:"927e2977",5457:"a5c85bb2",5551:"60df4b44",5903:"8c28875f",5991:"617ebac2",6114:"21c81a7f",6273:"d5d7f143",6734:"670d66c7",7001:"0f417e49",7350:"5be5904d",7428:"0fb05ab6",7582:"ac01aba5",7642:"f8083de3",7714:"7602c7dc",7717:"63b400a3",8056:"64896928",8328:"ba7154a3",8380:"2010f0d6",8595:"941c5c0e",8673:"a7400e5a",8777:"7563e78e",8832:"db631ae5",8926:"812f3761",9498:"d4eb99a0",9595:"dd016b92",9769:"f78f49b8",9822:"9aa31f70",9825:"7bb6d8d8",9853:"8b554516"}[e]+".css"})(),(()=>{l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{l.hmd=e=>(e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e)})(),(()=>{l.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a)})(),(()=>{var e={},a="vue-logistics-system:";l.l=(t,n,i,o)=>{if(e[t])e[t].push(n);else{var r,s;if(void 0!==i)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var p=d[u];if(p.getAttribute("src")==t||p.getAttribute("data-webpack")==a+i){r=p;break}}r||(s=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.setAttribute("data-webpack",a+i),r.src=t),e[t]=[n];var m=(a,l)=>{r.onerror=r.onload=null,clearTimeout(c);var n=e[t];if(delete e[t],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((e=>e(l))),a)return a(l)},c=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),s&&document.head.appendChild(r)}}})(),(()=>{l.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{l.p="/"})(),(()=>{if("undefined"!==typeof document){var e=(e,a,t,n,i)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",l.nc&&(o.nonce=l.nc);var r=l=>{if(o.onerror=o.onload=null,"load"===l.type)n();else{var t=l&&l.type,r=l&&l.target&&l.target.href||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+t+": "+r+")");s.name="ChunkLoadError",s.code="CSS_CHUNK_LOAD_FAILED",s.type=t,s.request=r,o.parentNode&&o.parentNode.removeChild(o),i(s)}};return o.onerror=o.onload=r,o.href=a,t?t.parentNode.insertBefore(o,t.nextSibling):document.head.appendChild(o),o},a=(e,a)=>{for(var l=document.getElementsByTagName("link"),t=0;t<l.length;t++){var n=l[t],i=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(i===e||i===a))return n}var o=document.getElementsByTagName("style");for(t=0;t<o.length;t++){n=o[t],i=n.getAttribute("data-href");if(i===e||i===a)return n}},t=t=>new Promise(((n,i)=>{var o=l.miniCssF(t),r=l.p+o;if(a(o,r))return n();e(t,r,null,n,i)})),n={3524:0};l.f.miniCss=(e,a)=>{var l={42:1,880:1,1128:1,1140:1,1930:1,2557:1,2647:1,2730:1,2801:1,3236:1,3468:1,3718:1,3756:1,3779:1,3944:1,4194:1,4211:1,4317:1,4443:1,4556:1,4591:1,4607:1,4888:1,5153:1,5157:1,5367:1,5457:1,5551:1,5903:1,5991:1,6114:1,6273:1,6734:1,7001:1,7350:1,7428:1,7582:1,7642:1,7714:1,7717:1,8056:1,8328:1,8380:1,8595:1,8673:1,8777:1,8832:1,8926:1,9498:1,9595:1,9769:1,9822:1,9825:1,9853:1};n[e]?a.push(n[e]):0!==n[e]&&l[e]&&a.push(n[e]=t(e).then((()=>{n[e]=0}),(a=>{throw delete n[e],a})))}}})(),(()=>{var e={3524:0};l.f.j=(a,t)=>{var n=l.o(e,a)?e[a]:void 0;if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(((l,t)=>n=e[a]=[l,t]));t.push(n[2]=i);var o=l.p+l.u(a),r=new Error,s=t=>{if(l.o(e,a)&&(n=e[a],0!==n&&(e[a]=void 0),n)){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;r.message="Loading chunk "+a+" failed.\n("+i+": "+o+")",r.name="ChunkLoadError",r.type=i,r.request=o,n[1](r)}};l.l(o,s,"chunk-"+a,a)}},l.O.j=a=>0===e[a];var a=(a,t)=>{var n,i,[o,r,s]=t,d=0;if(o.some((a=>0!==e[a]))){for(n in r)l.o(r,n)&&(l.m[n]=r[n]);if(s)var u=s(l)}for(a&&a(t);d<o.length;d++)i=o[d],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return l.O(u)},t=self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var t=l.O(void 0,[504],(()=>l(7530)));t=l.O(t)})();
//# sourceMappingURL=app.6d6ecc49.js.map