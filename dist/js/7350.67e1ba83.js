"use strict";(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[7350],{7350:(e,l,a)=>{a.r(l),a.d(l,{default:()=>b});var o=a(641),t=a(33),s=a(3751),u=a(953),n=a(163),i=a(7918);const r={class:"app-container"},d={class:"flex justify-between mb-4"},p={class:"dialog-footer"},m={__name:"EmailAccount",setup(e){const l=(0,u.KR)(!0),a=(0,u.KR)([]),m=(0,u.KR)(0),c=(0,u.KR)(!1),g=(0,u.KR)(""),b=(0,u.KR)(null),f=(0,u.Kh)({pageNo:1,pageSize:10}),v=(0,u.KR)({id:void 0,mail:"",username:"",password:"",host:"",port:465,enableSsl:!0,isDefault:!1}),k=(0,u.Kh)({mail:[{required:!0,message:"邮箱地址不能为空",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码/授权码不能为空",trigger:"blur"}],host:[{required:!0,message:"SMTP服务器地址不能为空",trigger:"blur"}],port:[{required:!0,message:"SMTP服务器端口不能为空",trigger:"blur"}]}),h=()=>{l.value=!0,console.log("Fetching list with params:",f),setTimeout((()=>{const e=[{id:1,mail:"sender1@example.com",host:"smtp.example.com",port:465,username:"sender1",password:"***",enableSsl:!0,isDefault:!0},{id:2,mail:"sender2@example.com",host:"smtp.gmail.com",port:587,username:"sender2@gmail.com",password:"***",enableSsl:!0,isDefault:!1},{id:3,mail:"no-ssl@example.com",host:"smtp.office365.com",port:587,username:"no-ssl",password:"***",enableSsl:!0,isDefault:!1},{id:4,mail:"another@domain.net",host:"mail.domain.net",port:25,username:"another",password:"***",enableSsl:!1,isDefault:!1}],o=(f.pageNo-1)*f.pageSize,t=o+f.pageSize;a.value=e.slice(o,t),m.value=e.length,l.value=!1}),500)},w=()=>{v.value={id:void 0,mail:"",username:"",password:"",host:"",port:465,enableSsl:!0,isDefault:!1},b.value?.resetFields()},F=()=>{w(),g.value="新增邮箱账号",c.value=!0},_=e=>{w(),v.value={...e},v.value.password="",g.value="修改邮箱账号",c.value=!0},S=()=>{c.value=!1,w()},y=()=>{b.value?.validate((async e=>{if(e){console.log("Submitting form:",v.value);const e=!!v.value.id;n.nk.success(e?"修改成功":"新增成功"),c.value=!1,h()}else console.log("Form validation failed")}))},V=e=>{i.s.confirm(`确定要删除邮箱账号 "${e.mail}" 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{console.log("Deleting account:",e.id),n.nk.success("删除成功"),h()})).catch((()=>{}))},C=e=>{console.log("Testing connection for:",e.mail),n.nk.info(`正在测试账号 ${e.mail}...`),setTimeout((()=>{const l=Math.random()>.3;l?n.nk.success(`账号 ${e.mail} 连接测试成功！`):n.nk.error(`账号 ${e.mail} 连接测试失败，请检查配置和网络。`)}),1500)};return(0,o.sV)((()=>{h()})),(e,u)=>{const n=(0,o.g2)("el-button"),i=(0,o.g2)("el-table-column"),w=(0,o.g2)("el-tag"),D=(0,o.g2)("el-table"),T=(0,o.g2)("el-pagination"),x=(0,o.g2)("el-card"),z=(0,o.g2)("el-input"),U=(0,o.g2)("el-form-item"),K=(0,o.g2)("el-input-number"),W=(0,o.g2)("el-switch"),M=(0,o.g2)("el-form"),P=(0,o.g2)("el-dialog"),R=(0,o.gN)("loading");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(x,{shadow:"never"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",d,[(0,o.bF)(n,{type:"primary",icon:"el-icon-plus",onClick:F},{default:(0,o.k6)((()=>u[10]||(u[10]=[(0,o.eW)("新增账号")]))),_:1}),u[11]||(u[11]=(0,o.Lk)("div",null,null,-1))]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(D,{data:a.value},{default:(0,o.k6)((()=>[(0,o.bF)(i,{label:"邮箱地址",align:"center",prop:"mail"}),(0,o.bF)(i,{label:"SMTP服务器",align:"center",prop:"host",width:"180"}),(0,o.bF)(i,{label:"端口",align:"center",prop:"port",width:"80"}),(0,o.bF)(i,{label:"用户名",align:"center",prop:"username"}),(0,o.bF)(i,{label:"启用SSL",align:"center",prop:"enableSsl",width:"100"},{default:(0,o.k6)((e=>[(0,o.bF)(w,{type:e.row.enableSsl?"success":"danger"},{default:(0,o.k6)((()=>[(0,o.eW)((0,t.v_)(e.row.enableSsl?"是":"否"),1)])),_:2},1032,["type"])])),_:1}),(0,o.bF)(i,{label:"是否默认",align:"center",prop:"isDefault",width:"100"},{default:(0,o.k6)((e=>[(0,o.bF)(w,{type:e.row.isDefault?"success":"info"},{default:(0,o.k6)((()=>[(0,o.eW)((0,t.v_)(e.row.isDefault?"是":"否"),1)])),_:2},1032,["type"])])),_:1}),(0,o.bF)(i,{label:"操作",align:"center",width:"240","class-name":"small-padding fixed-width"},{default:(0,o.k6)((e=>[(0,o.bF)(n,{link:"",type:"primary",icon:"el-icon-edit",onClick:l=>_(e.row)},{default:(0,o.k6)((()=>u[12]||(u[12]=[(0,o.eW)("修改")]))),_:2},1032,["onClick"]),(0,o.bF)(n,{link:"",type:"primary",icon:"el-icon-delete",onClick:l=>V(e.row)},{default:(0,o.k6)((()=>u[13]||(u[13]=[(0,o.eW)("删除")]))),_:2},1032,["onClick"]),(0,o.bF)(n,{link:"",type:"primary",icon:"el-icon-connection",onClick:l=>C(e.row)},{default:(0,o.k6)((()=>u[14]||(u[14]=[(0,o.eW)("测试连接")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[R,l.value]]),(0,o.bo)((0,o.bF)(T,{"current-page":f.pageNo,"onUpdate:currentPage":u[0]||(u[0]=e=>f.pageNo=e),"page-size":f.pageSize,"onUpdate:pageSize":u[1]||(u[1]=e=>f.pageSize=e),total:m.value,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:h,onCurrentChange:h,class:"mt-4 justify-end"},null,8,["current-page","page-size","total"]),[[s.aG,m.value>0]])])),_:1}),(0,o.bF)(P,{title:g.value,modelValue:c.value,"onUpdate:modelValue":u[9]||(u[9]=e=>c.value=e),width:"600px","append-to-body":""},{footer:(0,o.k6)((()=>[(0,o.Lk)("div",p,[(0,o.bF)(n,{type:"primary",onClick:y},{default:(0,o.k6)((()=>u[15]||(u[15]=[(0,o.eW)("确 定")]))),_:1}),(0,o.bF)(n,{onClick:S},{default:(0,o.k6)((()=>u[16]||(u[16]=[(0,o.eW)("取 消")]))),_:1})])])),default:(0,o.k6)((()=>[(0,o.bF)(M,{ref_key:"formRef",ref:b,model:v.value,rules:k,"label-width":"120px"},{default:(0,o.k6)((()=>[(0,o.bF)(U,{label:"邮箱地址",prop:"mail"},{default:(0,o.k6)((()=>[(0,o.bF)(z,{modelValue:v.value.mail,"onUpdate:modelValue":u[2]||(u[2]=e=>v.value.mail=e),placeholder:"请输入邮箱地址"},null,8,["modelValue"])])),_:1}),(0,o.bF)(U,{label:"用户名",prop:"username"},{default:(0,o.k6)((()=>[(0,o.bF)(z,{modelValue:v.value.username,"onUpdate:modelValue":u[3]||(u[3]=e=>v.value.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),(0,o.bF)(U,{label:"密码/授权码",prop:"password"},{default:(0,o.k6)((()=>[(0,o.bF)(z,{modelValue:v.value.password,"onUpdate:modelValue":u[4]||(u[4]=e=>v.value.password=e),type:"password","show-password":"",placeholder:"请输入密码或授权码"},null,8,["modelValue"])])),_:1}),(0,o.bF)(U,{label:"SMTP服务器地址",prop:"host"},{default:(0,o.k6)((()=>[(0,o.bF)(z,{modelValue:v.value.host,"onUpdate:modelValue":u[5]||(u[5]=e=>v.value.host=e),placeholder:"请输入 SMTP 服务器地址"},null,8,["modelValue"])])),_:1}),(0,o.bF)(U,{label:"SMTP服务器端口",prop:"port"},{default:(0,o.k6)((()=>[(0,o.bF)(K,{modelValue:v.value.port,"onUpdate:modelValue":u[6]||(u[6]=e=>v.value.port=e),"controls-position":"right",min:0,placeholder:"请输入 SMTP 服务器端口",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,o.bF)(U,{label:"启用SSL",prop:"enableSsl"},{default:(0,o.k6)((()=>[(0,o.bF)(W,{modelValue:v.value.enableSsl,"onUpdate:modelValue":u[7]||(u[7]=e=>v.value.enableSsl=e)},null,8,["modelValue"])])),_:1}),(0,o.bF)(U,{label:"是否默认",prop:"isDefault"},{default:(0,o.k6)((()=>[(0,o.bF)(W,{modelValue:v.value.isDefault,"onUpdate:modelValue":u[8]||(u[8]=e=>v.value.isDefault=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}}};var c=a(6262);const g=(0,c.A)(m,[["__scopeId","data-v-4c5a1a5d"]]),b=g}}]);
//# sourceMappingURL=7350.67e1ba83.js.map