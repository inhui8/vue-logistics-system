"use strict";(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[1],{7001:(e,l,a)=>{a.r(l),a.d(l,{default:()=>T});var t=a(641),o=a(3751),u=a(953),i=a(33),n=a(5220),d=a(8548),r=a(7918),s=a(163),p=a(3344),c=a(2998),v=a(432),b=a.n(v);const k={class:"work-order-list-container"},m={class:"page-header"},g={class:"page-actions"},f={class:"search-bar"},h={class:"filter-section"},w={class:"view-management"},_={key:0,class:"table-operations"},F={class:"selected-count"},y={class:"subject-cell"},C={class:"subject-text"},V={key:1},W={class:"group-settings"},A={class:"group-level"},R={class:"group-level"},x={class:"group-level"},K={class:"dialog-footer"},L={class:"sort-settings"},D={class:"sort-actions"},S={class:"dialog-footer"},z={class:"column-settings"},U={class:"column-settings-header"},X={class:"column-list"},E={class:"column-item"},I={class:"dialog-footer"},$={__name:"CommandWorkOrderList",setup(e){const l=(0,n.rd)(),a=(0,u.KR)("all"),v=(0,u.KR)([]),$=(0,u.KR)(!1),j=(0,u.KR)(!1),N=(0,u.KR)(!1),T=(0,u.KR)(0),B=(0,u.KR)(0),Y=(0,u.KR)({name:"",columns:[]}),O=(0,u.KR)(!1),M=(0,u.KR)([]),Q=(0,u.KR)("and"),q=(0,u.KR)(!1),G=(0,u.KR)({level1:"",level2:"",level3:""}),H=(0,u.KR)(""),J=(0,u.KR)(!1),P=(0,u.KR)([{field:"",direction:"asc"}]),Z=(0,u.KR)(!1),ee=(0,u.KR)([]),le=(0,u.KR)(!0),ae=(0,u.KR)([{id:1,name:"张三"},{id:2,name:"李四"},{id:3,name:"客服团队"},{id:4,name:"仓库管理员"}]),te=(0,u.KR)(!1),oe=(0,u.KR)(""),ue=(0,u.Kh)({status:"",type:"command",priority:"",assignee:null,createdAtRange:[]}),ie=(0,u.KR)([{id:"WO202307250004",subject:"紧急订单加急处理",type:"command",status:"pending",priority:"urgent",orderNo:"ORD202307250125",creator:"张三",assignee:"仓库管理员",createdAt:new Date(Date.now()-72e5),updatedAt:new Date(Date.now()-72e5),completedAt:null,dueAt:new Date(Date.now()+864e5),location:"A-01-02",palletCount:2},{id:"WO202307250006",subject:"仓库盘点指令",type:"command",status:"processing",priority:"medium",orderNo:"",creator:"李四",assignee:"仓库管理员",createdAt:new Date(Date.now()-1296e5),updatedAt:new Date(Date.now()-432e5),completedAt:null,dueAt:new Date(Date.now()+1728e5),location:"B-03-01",palletCount:5}]),ne=(0,u.Kh)({current:1,pageSize:10,total:0}),de=(0,u.KR)([]),re=(0,u.KR)([{prop:"id",label:"工单号",width:150,visible:!0},{prop:"subject",label:"主题",minWidth:200,visible:!0},{prop:"type",label:"类型",width:120,visible:!0},{prop:"status",label:"状态",width:100,visible:!0},{prop:"priority",label:"优先级",width:80,visible:!0},{prop:"orderNo",label:"关联订单",width:150,visible:!0},{prop:"creator",label:"创建人",width:100,visible:!0},{prop:"assignee",label:"当前处理人",width:100,visible:!0},{prop:"createdAt",label:"创建时间",width:180,visible:!0},{prop:"updatedAt",label:"更新时间",width:180,visible:!0},{prop:"completedAt",label:"完成时间",width:180,visible:!0},{prop:"dueAt",label:"最晚完成时间",width:180,visible:!0},{prop:"location",label:"库位",width:120,visible:!0},{prop:"palletCount",label:"板数",width:80,visible:!0}]),se=(0,u.KR)([{prop:"status",label:"状态"},{prop:"priority",label:"优先级"},{prop:"creator",label:"创建人"},{prop:"assignee",label:"处理人"},{prop:"type",label:"类型"}]),pe=(0,u.KR)([{prop:"createdAt",label:"创建时间"},{prop:"updatedAt",label:"更新时间"},{prop:"priority",label:"优先级"},{prop:"status",label:"状态"}]),ce=e=>{const l=se.value.find((l=>l.prop===e));return l?l.label:e},ve=e=>{if(!e)return"-";const l=new Date(e);return`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")} ${String(l.getHours()).padStart(2,"0")}:${String(l.getMinutes()).padStart(2,"0")}`},be=e=>{const l={pending:"待处理",processing:"处理中",pending_confirmation:"待确认",resolved:"已解决",closed:"已关闭"};return l[e]||e},ke=e=>{const l={pending:"warning",processing:"primary",pending_confirmation:"info",resolved:"success",closed:"info"};return l[e]||"info"},me=e=>{const l={exception:"异常订单处理",command:"指令执行",warning:"订单预警响应",value_added:"增值服务请求",other:"其他问题"};return l[e]||e},ge=e=>{const l={urgent:"紧急",high:"高",medium:"中",low:"低"};return l[e]||e},fe=e=>{const l={urgent:"danger",high:"warning",medium:"info",low:"success"};return l[e]||"info"},he=e=>["pending","processing"].includes(e.status),we=()=>{ne.current=1,Le()},_e=()=>{ue.status="",ue.priority="",ue.assignee=null,ue.createdAtRange=[],oe.value="",we()},Fe=e=>{de.value=e},ye=()=>{de.value=[]},Ce=e=>{ne.pageSize=e,Le()},Ve=e=>{ne.current=e,Le()},We=()=>{l.push("/work-order/command/create")},Ae=e=>{l.push(`/work-order/command/detail/${e}`)},Re=e=>{l.push(`/order/detail/${e}`)},xe=e=>{r.s.confirm(`确认开始处理工单 "${e.subject}"?`,"操作确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"info"}).then((()=>{const a=ie.value.findIndex((l=>l.id===e.id));-1!==a&&(ie.value[a].status="processing",ie.value[a].updatedAt=new Date),s.nk.success("工单状态已更新为：处理中"),l.push(`/work-order/command/${e.id}/process`)})).catch((()=>{}))},Ke=()=>{if(0===de.value.length)return void s.nk.warning("请先选择工单");const e=de.value.filter((e=>he(e))).map((e=>e.id));0!==e.length?r.s.confirm(`确认批量处理 ${e.length} 个工单?`,"操作确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"info"}).then((()=>{e.forEach((e=>{const l=ie.value.findIndex((l=>l.id===e));-1!==l&&(ie.value[l].status="processing",ie.value[l].updatedAt=new Date)})),s.nk.success(`已开始处理 ${e.length} 个工单`),ye(),Le()})).catch((()=>{})):s.nk.warning("所选工单中没有可处理的工单")},Le=async()=>{te.value=!0;try{const e={page:ne.current,pageSize:ne.pageSize,search:oe.value,type:ue.type,status:ue.status,priority:ue.priority,assigneeId:ue.assignee,createdAtStart:ue.createdAtRange?ue.createdAtRange[0]:null,createdAtEnd:ue.createdAtRange?ue.createdAtRange[1]:null};console.log("Fetching Command Work Orders with params:",e),setTimeout((()=>{let l=[...ie.value];if(e.search){const a=e.search.toLowerCase();l=l.filter((e=>e.id.toLowerCase().includes(a)||e.subject.toLowerCase().includes(a)||e.orderNo&&e.orderNo.toLowerCase().includes(a)))}if(e.status&&(l=l.filter((l=>l.status===e.status))),e.priority&&(l=l.filter((l=>l.priority===e.priority))),e.assigneeId){const a=ae.value.find((l=>l.id===e.assigneeId))?.name;a&&(l=l.filter((e=>e.assignee===a)))}const a=(e.page-1)*e.pageSize,t=a+e.pageSize,o=l.slice(a,t);ie.value=o,ne.total=l.length,te.value=!1}),500)}catch(e){console.error("Failed to fetch command work orders:",e),s.nk.error("获取指令工单列表失败"),te.value=!1}};(0,t.sV)((()=>{Le()}));const De=()=>{$.value=!0},Se=()=>{if(!Y.value.name)return void s.nk.warning("请输入视图名称");const e={id:Date.now().toString(),name:Y.value.name,columns:Y.value.columns,filters:M.value,groupSettings:G.value,sortSettings:P.value};v.value.push(e),$.value=!1,s.nk.success("视图保存成功")},ze=()=>{a.value&&(j.value=!0)},Ue=()=>{a.value&&r.s.confirm("确认删除该视图？","提示",{type:"warning"}).then((()=>{const e=v.value.findIndex((e=>e.id===a.value));-1!==e&&(v.value.splice(e,1),a.value="all",s.nk.success("视图删除成功"))}))},Xe=()=>{O.value=!0},Ee=({filters:e,logic:l})=>{M.value=e,Q.value=l,Le()},Ie=()=>{O.value=!1},$e=()=>{q.value=!0},je=()=>{const{level1:e,level2:l,level3:a}=G.value,t=[e,l,a].filter(Boolean);H.value=t[0]||"",Le(),q.value=!1},Ne=()=>{G.value={level1:"",level2:"",level3:""},H.value="",Le()},Te=()=>{J.value=!0},Be=()=>{P.value.push({field:"",direction:"asc"})},Ye=e=>{P.value.splice(e,1)},Oe=()=>{Le(),J.value=!1},Me=()=>{P.value=[{field:"",direction:"asc"}],Le()},Qe=()=>{Z.value=!0},qe=e=>{ee.value.forEach((l=>{l.visible=e}))},Ge=()=>{},He=()=>{re.value=ee.value.map((e=>({...e,visible:e.visible}))),Z.value=!1,s.nk.success("字段配置已更新")},Je=()=>{Pe(),le.value=!0},Pe=()=>{ee.value=re.value.map((e=>({...e,visible:!0})))},Ze=e=>{e.preventDefault(),N.value=!0,T.value=e.clientX,B.value=e.clientY},el=()=>{if(!a.value)return;const e=v.value.find((e=>e.id===a.value));if(e){const l={id:Date.now().toString(),name:`${e.name} (副本)`,columns:[...e.columns],filters:[...e.filters],groupSettings:{...e.groupSettings},sortSettings:[...e.sortSettings]};v.value.push(l),N.value=!1,s.nk.success("视图复制成功")}};return(e,l)=>{const n=(0,t.g2)("el-button"),r=(0,t.g2)("el-input"),s=(0,t.g2)("el-option"),j=(0,t.g2)("el-select"),Le=(0,t.g2)("el-form-item"),Pe=(0,t.g2)("el-date-picker"),ll=(0,t.g2)("el-form"),al=(0,t.g2)("el-card"),tl=(0,t.g2)("el-radio-button"),ol=(0,t.g2)("el-radio-group"),ul=(0,t.g2)("el-table-column"),il=(0,t.g2)("el-link"),nl=(0,t.g2)("el-tag"),dl=(0,t.g2)("el-checkbox"),rl=(0,t.g2)("el-checkbox-group"),sl=(0,t.g2)("el-dialog"),pl=(0,t.g2)("el-icon"),cl=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",k,[(0,t.Lk)("div",m,[l[24]||(l[24]=(0,t.Lk)("h2",{class:"page-title"},"指令工单",-1)),(0,t.Lk)("div",g,[(0,t.bF)(n,{type:"primary",onClick:We},{default:(0,t.k6)((()=>l[23]||(l[23]=[(0,t.eW)("创建新工单")]))),_:1})])]),(0,t.bF)(al,{shadow:"never",class:"filter-card"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",f,[(0,t.bF)(r,{modelValue:oe.value,"onUpdate:modelValue":l[0]||(l[0]=e=>oe.value=e),placeholder:"搜索指令工单 (工单号、主题、订单号...)",class:"search-input",onKeyup:(0,o.jR)(we,["enter"])},{append:(0,t.k6)((()=>[(0,t.bF)(n,{icon:(0,u.R1)(d.vji),onClick:we},null,8,["icon"])])),_:1},8,["modelValue"])]),(0,t.Lk)("div",h,[(0,t.bF)(ll,{inline:!0,model:ue,size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(Le,{label:"状态"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{modelValue:ue.status,"onUpdate:modelValue":l[1]||(l[1]=e=>ue.status=e),placeholder:"按状态筛选",clearable:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"待处理",value:"pending"}),(0,t.bF)(s,{label:"处理中",value:"processing"}),(0,t.bF)(s,{label:"待确认",value:"pending_confirmation"}),(0,t.bF)(s,{label:"已解决",value:"resolved"}),(0,t.bF)(s,{label:"已关闭",value:"closed"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(Le,{label:"优先级"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{modelValue:ue.priority,"onUpdate:modelValue":l[2]||(l[2]=e=>ue.priority=e),placeholder:"按优先级筛选",clearable:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"紧急",value:"urgent"}),(0,t.bF)(s,{label:"高",value:"high"}),(0,t.bF)(s,{label:"中",value:"medium"}),(0,t.bF)(s,{label:"低",value:"low"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(Le,{label:"处理人"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{modelValue:ue.assignee,"onUpdate:modelValue":l[3]||(l[3]=e=>ue.assignee=e),placeholder:"按处理人筛选",clearable:"",filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ae.value,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(Le,{label:"创建时间"},{default:(0,t.k6)((()=>[(0,t.bF)(Pe,{modelValue:ue.createdAtRange,"onUpdate:modelValue":l[4]||(l[4]=e=>ue.createdAtRange=e),type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","range-separator":"至","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),(0,t.bF)(Le,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,{type:"primary",onClick:we},{default:(0,t.k6)((()=>l[25]||(l[25]=[(0,t.eW)("查询")]))),_:1}),(0,t.bF)(n,{onClick:_e},{default:(0,t.k6)((()=>l[26]||(l[26]=[(0,t.eW)("重置")]))),_:1})])),_:1})])),_:1},8,["model"])])])),_:1}),(0,t.Lk)("div",w,[(0,t.bF)(ol,{modelValue:a.value,"onUpdate:modelValue":l[6]||(l[6]=e=>a.value=e),size:"small",class:"status-view-group"},{default:(0,t.k6)((()=>[(0,t.bF)(tl,{value:"all"},{default:(0,t.k6)((()=>l[27]||(l[27]=[(0,t.eW)("全部")]))),_:1}),(0,t.bF)(tl,{value:"pending"},{default:(0,t.k6)((()=>l[28]||(l[28]=[(0,t.eW)("待处理")]))),_:1}),(0,t.bF)(tl,{value:"processing"},{default:(0,t.k6)((()=>l[29]||(l[29]=[(0,t.eW)("处理中")]))),_:1}),(0,t.bF)(tl,{value:"pending_confirmation"},{default:(0,t.k6)((()=>l[30]||(l[30]=[(0,t.eW)("待确认")]))),_:1}),(0,t.bF)(tl,{value:"resolved"},{default:(0,t.k6)((()=>l[31]||(l[31]=[(0,t.eW)("已解决")]))),_:1}),(0,t.bF)(tl,{value:"closed"},{default:(0,t.k6)((()=>l[32]||(l[32]=[(0,t.eW)("已关闭")]))),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(v.value,(e=>((0,t.uX)(),(0,t.Wv)(tl,{key:e.id,label:e.id,onContextmenu:l[5]||(l[5]=(0,o.D$)((e=>Ze(e)),["prevent"]))},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"]),(0,t.bF)(n,{type:"text",size:"small",onClick:De},{default:(0,t.k6)((()=>l[33]||(l[33]=[(0,t.eW)("新增视图")]))),_:1}),(0,t.bF)(n,{type:"text",size:"small",onClick:$e},{default:(0,t.k6)((()=>l[34]||(l[34]=[(0,t.eW)("高级分组")]))),_:1}),(0,t.bF)(n,{type:"text",size:"small",onClick:Te},{default:(0,t.k6)((()=>l[35]||(l[35]=[(0,t.eW)("高级排序")]))),_:1}),(0,t.bF)(n,{type:"text",size:"small",onClick:Xe},{default:(0,t.k6)((()=>l[36]||(l[36]=[(0,t.eW)("筛选")]))),_:1}),(0,t.bF)(n,{type:"text",size:"small",onClick:Qe},{default:(0,t.k6)((()=>l[37]||(l[37]=[(0,t.eW)("字段配置")]))),_:1})]),(0,t.bF)(al,{shadow:"never",class:"list-card"},{default:(0,t.k6)((()=>[de.value.length>0?((0,t.uX)(),(0,t.CE)("div",_,[(0,t.Lk)("span",F,"已选择 "+(0,i.v_)(de.value.length)+" 项",1),(0,t.bF)(n,{size:"small",onClick:Ke},{default:(0,t.k6)((()=>l[38]||(l[38]=[(0,t.eW)("批量处理")]))),_:1}),(0,t.bF)(n,{size:"small",onClick:ye},{default:(0,t.k6)((()=>l[39]||(l[39]=[(0,t.eW)("清除选择")]))),_:1})])):(0,t.Q3)("",!0),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c.A,{ref:"mainTable",data:ie.value,"row-key":"id","group-fields":H.value?[H.value]:[],"show-selection":!0,"show-group-column":!!H.value,"group-column-label":H.value?ce(H.value):"分组","default-expand-all":!1,"show-pagination":!0,"current-page":ne.current,"page-size":ne.pageSize,"page-sizes":[10,20,50,100],total:ne.total,onSelectionChange:Fe,onSizeChange:Ce,onCurrentChange:Ve,onCellClick:e.handleCellClick,onCellDblclick:e.handleCellDbClick,style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(ul,{type:"selection",width:"55"}),(0,t.bF)(ul,{label:"工单号",prop:"id",width:"150"},{default:(0,t.k6)((e=>[(0,t.bF)(il,{type:"primary",onClick:l=>Ae(e.row.id)},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.row.id),1)])),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(ul,{label:"主题",prop:"subject","min-width":"200"},{default:(0,t.k6)((e=>[(0,t.Lk)("div",y,[(0,t.Lk)("span",C,(0,i.v_)(e.row.subject),1),"urgent"===e.row.priority?((0,t.uX)(),(0,t.Wv)(nl,{key:0,type:"danger",size:"small",effect:"dark"},{default:(0,t.k6)((()=>l[40]||(l[40]=[(0,t.eW)("紧急")]))),_:1})):(0,t.Q3)("",!0)])])),_:1}),(0,t.bF)(ul,{label:"类型",prop:"type",width:"120"},{default:(0,t.k6)((e=>[(0,t.eW)((0,i.v_)(me(e.row.type)),1)])),_:1}),(0,t.bF)(ul,{label:"状态",prop:"status",width:"100"},{default:(0,t.k6)((e=>[(0,t.bF)(nl,{type:ke(e.row.status),size:"small"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(be(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(ul,{label:"优先级",prop:"priority",width:"80"},{default:(0,t.k6)((e=>[(0,t.bF)(nl,{type:fe(e.row.priority),size:"small"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(ge(e.row.priority)),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(ul,{label:"关联订单",prop:"orderNo",width:"150"},{default:(0,t.k6)((e=>[e.row.orderNo?((0,t.uX)(),(0,t.Wv)(il,{key:0,type:"info",onClick:l=>Re(e.row.orderNo)},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.row.orderNo),1)])),_:2},1032,["onClick"])):((0,t.uX)(),(0,t.CE)("span",V,"-"))])),_:1}),(0,t.bF)(ul,{label:"创建人",prop:"creator",width:"100"}),(0,t.bF)(ul,{label:"当前处理人",prop:"assignee",width:"100"},{default:(0,t.k6)((e=>[(0,t.eW)((0,i.v_)(e.row.assignee||"未指派"),1)])),_:1}),(0,t.bF)(ul,{label:"创建时间",prop:"createdAt",width:"180"},{default:(0,t.k6)((e=>[(0,t.eW)((0,i.v_)(ve(e.row.createdAt)),1)])),_:1}),(0,t.bF)(ul,{label:"更新时间",prop:"updatedAt",width:"180"},{default:(0,t.k6)((e=>[(0,t.eW)((0,i.v_)(ve(e.row.updatedAt)),1)])),_:1}),(0,t.bF)(ul,{label:"完成时间",prop:"completedAt",width:"180"},{default:(0,t.k6)((e=>[(0,t.eW)((0,i.v_)(e.row.completedAt?ve(e.row.completedAt):"-"),1)])),_:1}),(0,t.bF)(ul,{label:"最晚完成时间",prop:"dueAt",width:"180"},{default:(0,t.k6)((e=>[(0,t.eW)((0,i.v_)(ve(e.row.dueAt)),1)])),_:1}),(0,t.bF)(ul,{label:"库位",prop:"location",width:"120"}),(0,t.bF)(ul,{label:"板数",prop:"palletCount",width:"80"}),(0,t.bF)(ul,{label:"操作",width:"150",fixed:"right"},{default:(0,t.k6)((e=>[(0,t.bF)(n,{link:"",type:"primary",onClick:l=>Ae(e.row.id)},{default:(0,t.k6)((()=>l[41]||(l[41]=[(0,t.eW)("查看")]))),_:2},1032,["onClick"]),he(e.row)?((0,t.uX)(),(0,t.Wv)(n,{key:0,link:"",type:"primary",onClick:l=>xe(e.row)},{default:(0,t.k6)((()=>l[42]||(l[42]=[(0,t.eW)("处理")]))),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])),_:1})])),_:1},8,["data","group-fields","show-group-column","group-column-label","current-page","page-size","total","onCellClick","onCellDblclick"])),[[cl,te.value]])])),_:1}),(0,t.bF)(p.A,{visible:O.value,"onUpdate:visible":l[7]||(l[7]=e=>O.value=e),columns:re.value,"existing-filters":M.value,"existing-logic":Q.value,onApplyFilters:Ee,onCancel:Ie},null,8,["visible","columns","existing-filters","existing-logic"]),(0,t.bF)(sl,{title:"保存视图",modelValue:$.value,"onUpdate:modelValue":l[11]||(l[11]=e=>$.value=e),width:"500px"},{footer:(0,t.k6)((()=>[(0,t.bF)(n,{onClick:l[10]||(l[10]=e=>$.value=!1)},{default:(0,t.k6)((()=>l[43]||(l[43]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(n,{type:"primary",onClick:Se},{default:(0,t.k6)((()=>l[44]||(l[44]=[(0,t.eW)("确定")]))),_:1})])),default:(0,t.k6)((()=>[(0,t.bF)(ll,{model:Y.value,"label-width":"100px"},{default:(0,t.k6)((()=>[(0,t.bF)(Le,{label:"视图名称",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:Y.value.name,"onUpdate:modelValue":l[8]||(l[8]=e=>Y.value.name=e),placeholder:"请输入视图名称"},null,8,["modelValue"])])),_:1}),(0,t.bF)(Le,{label:"显示字段"},{default:(0,t.k6)((()=>[(0,t.bF)(rl,{modelValue:Y.value.columns,"onUpdate:modelValue":l[9]||(l[9]=e=>Y.value.columns=e)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(re.value,(e=>((0,t.uX)(),(0,t.Wv)(dl,{key:e.prop,label:e.prop},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,t.bF)(sl,{title:"分组设置",modelValue:q.value,"onUpdate:modelValue":l[16]||(l[16]=e=>q.value=e),width:"500px"},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",K,[(0,t.bF)(n,{onClick:l[15]||(l[15]=e=>q.value=!1)},{default:(0,t.k6)((()=>l[48]||(l[48]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(n,{type:"danger",onClick:Ne},{default:(0,t.k6)((()=>l[49]||(l[49]=[(0,t.eW)("清除分组")]))),_:1}),(0,t.bF)(n,{type:"primary",onClick:je},{default:(0,t.k6)((()=>l[50]||(l[50]=[(0,t.eW)("应用")]))),_:1})])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",W,[(0,t.Lk)("div",A,[l[45]||(l[45]=(0,t.Lk)("span",{class:"group-level-label"},"一级分组：",-1)),(0,t.bF)(j,{modelValue:G.value.level1,"onUpdate:modelValue":l[12]||(l[12]=e=>G.value.level1=e),placeholder:"选择字段",style:{width:"280px"},clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(se.value,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,t.Lk)("div",R,[l[46]||(l[46]=(0,t.Lk)("span",{class:"group-level-label"},"二级分组：",-1)),(0,t.bF)(j,{modelValue:G.value.level2,"onUpdate:modelValue":l[13]||(l[13]=e=>G.value.level2=e),placeholder:"选择字段",style:{width:"280px"},clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(se.value,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,t.Lk)("div",x,[l[47]||(l[47]=(0,t.Lk)("span",{class:"group-level-label"},"三级分组：",-1)),(0,t.bF)(j,{modelValue:G.value.level3,"onUpdate:modelValue":l[14]||(l[14]=e=>G.value.level3=e),placeholder:"选择字段",style:{width:"280px"},clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(se.value,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])])])),_:1},8,["modelValue"]),(0,t.bF)(sl,{title:"排序设置",modelValue:J.value,"onUpdate:modelValue":l[18]||(l[18]=e=>J.value=e),width:"500px"},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",S,[(0,t.bF)(n,{onClick:l[17]||(l[17]=e=>J.value=!1)},{default:(0,t.k6)((()=>l[53]||(l[53]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(n,{type:"danger",onClick:Me},{default:(0,t.k6)((()=>l[54]||(l[54]=[(0,t.eW)("清除排序")]))),_:1}),(0,t.bF)(n,{type:"primary",onClick:Oe},{default:(0,t.k6)((()=>l[55]||(l[55]=[(0,t.eW)("应用")]))),_:1})])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",L,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(P.value,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"sort-item"},[(0,t.bF)(j,{modelValue:e.field,"onUpdate:modelValue":l=>e.field=l,placeholder:"选择字段",style:{width:"200px"},clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(pe.value,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,t.bF)(j,{modelValue:e.direction,"onUpdate:modelValue":l=>e.direction=l,placeholder:"排序方向",style:{width:"120px"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"升序",value:"asc"}),(0,t.bF)(s,{label:"降序",value:"desc"})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,t.bF)(n,{type:"danger",size:"small",onClick:e=>Ye(a)},{default:(0,t.k6)((()=>l[51]||(l[51]=[(0,t.eW)("删除")]))),_:2},1032,["onClick"])])))),128)),(0,t.Lk)("div",D,[(0,t.bF)(n,{type:"primary",plain:"",onClick:Be},{default:(0,t.k6)((()=>l[52]||(l[52]=[(0,t.eW)("添加排序字段")]))),_:1})])])])),_:1},8,["modelValue"]),(0,t.bF)(sl,{title:"字段配置",modelValue:Z.value,"onUpdate:modelValue":l[22]||(l[22]=e=>Z.value=e),width:"600px"},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",I,[(0,t.bF)(n,{onClick:l[21]||(l[21]=e=>Z.value=!1)},{default:(0,t.k6)((()=>l[58]||(l[58]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(n,{type:"primary",onClick:He},{default:(0,t.k6)((()=>l[59]||(l[59]=[(0,t.eW)("确定")]))),_:1})])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",z,[(0,t.Lk)("div",U,[(0,t.bF)(dl,{modelValue:le.value,"onUpdate:modelValue":l[19]||(l[19]=e=>le.value=e),onChange:qe},{default:(0,t.k6)((()=>l[56]||(l[56]=[(0,t.eW)("全选")]))),_:1},8,["modelValue"]),(0,t.bF)(n,{type:"primary",size:"small",onClick:Je},{default:(0,t.k6)((()=>l[57]||(l[57]=[(0,t.eW)("重置")]))),_:1})]),(0,t.Lk)("div",X,[(0,t.bF)((0,u.R1)(b()),{modelValue:ee.value,"onUpdate:modelValue":l[20]||(l[20]=e=>ee.value=e),"item-key":"prop",handle:".drag-handle",onEnd:Ge},{item:(0,t.k6)((({element:e})=>[(0,t.Lk)("div",E,[(0,t.bF)(pl,{class:"drag-handle"},{default:(0,t.k6)((()=>[(0,t.bF)((0,u.R1)(d.V6m))])),_:1}),(0,t.bF)(dl,{modelValue:e.visible,"onUpdate:modelValue":l=>e.visible=l},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.label),1)])),_:2},1032,["modelValue","onUpdate:modelValue"])])])),_:1},8,["modelValue"])])])])),_:1},8,["modelValue"]),(0,t.bo)((0,t.Lk)("div",{class:"context-menu",style:(0,i.Tr)({left:T.value+"px",top:B.value+"px"})},[(0,t.Lk)("div",{class:"context-menu-item",onClick:el},l[60]||(l[60]=[(0,t.Lk)("span",null,"复制视图",-1)])),(0,t.Lk)("div",{class:"context-menu-item",onClick:ze},l[61]||(l[61]=[(0,t.Lk)("span",null,"重命名",-1)])),(0,t.Lk)("div",{class:"context-menu-item",onClick:Ue},l[62]||(l[62]=[(0,t.Lk)("span",null,"删除",-1)]))],4),[[o.aG,N.value]])])}}};var j=a(6262);const N=(0,j.A)($,[["__scopeId","data-v-0acd5ccc"]]),T=N}}]);
//# sourceMappingURL=1.54d36230.js.map