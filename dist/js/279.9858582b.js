"use strict";(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[279],{5279:(e,l,t)=>{t.r(l),t.d(l,{default:()=>te});var a=t(641),o=t(33),r=t(3751);const i={class:"outgoing-batch-container"},n={class:"filter-bar"},d={class:"filter-row"},p={class:"date-buttons"},u={class:"send-order-filter"},s={class:"action-buttons"},c={class:"status-filter"},b={class:"table-container"},m={key:0,style:{color:"#1890ff"}},h={key:1},g={class:"operation-buttons"},y={class:"expanded-details"},v={class:"expanded-section"},w={class:"pagination-container"},f={class:"total-info"},T={class:"page-size-selector"},k={class:"go-to-page"};function F(e,l,t,F,C,S){const L=(0,a.g2)("el-option"),_=(0,a.g2)("el-select"),D=(0,a.g2)("el-date-picker"),V=(0,a.g2)("el-input"),R=(0,a.g2)("el-radio-button"),N=(0,a.g2)("el-radio-group"),W=(0,a.g2)("el-button"),P=(0,a.g2)("el-table-column"),A=(0,a.g2)("el-tag"),z=(0,a.g2)("DataTable"),U=(0,a.g2)("el-pagination"),M=(0,a.g2)("AddTrainDialog"),x=(0,a.g2)("FilterPanel"),K=(0,a.gN)("loading");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",n,[(0,a.Lk)("div",d,[(0,a.bF)(_,{modelValue:F.warehouse,"onUpdate:modelValue":l[0]||(l[0]=e=>F.warehouse=e),placeholder:"美西二号仓",size:"small",class:"filter-item"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{label:"美西二号仓",value:"west2"}),(0,a.bF)(L,{label:"美西一号仓",value:"west1"})])),_:1},8,["modelValue"]),(0,a.bF)(_,{modelValue:F.createDateRange,"onUpdate:modelValue":l[1]||(l[1]=e=>F.createDateRange=e),placeholder:"创建日期",size:"small",class:"filter-item"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{label:"创建日期",value:"today"}),(0,a.bF)(L,{label:"出库日期",value:"yesterday"}),(0,a.bF)(L,{label:"APPT",value:"7days"})])),_:1},8,["modelValue"]),(0,a.Lk)("div",p,[(0,a.bF)(D,{modelValue:F.dateRange,"onUpdate:modelValue":l[2]||(l[2]=e=>F.dateRange=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small",class:"date-range-picker",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},null,8,["modelValue"])]),(0,a.bF)(_,{modelValue:F.batchNumber,"onUpdate:modelValue":l[3]||(l[3]=e=>F.batchNumber=e),placeholder:"批次号",size:"small",class:"filter-item"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{label:"批次号",value:"all"}),(0,a.bF)(L,{label:"运单号",value:"A001"}),(0,a.bF)(L,{label:"预约号",value:"A001"})])),_:1},8,["modelValue"]),(0,a.bF)(V,{placeholder:"请输入",modelValue:F.searchText,"onUpdate:modelValue":l[4]||(l[4]=e=>F.searchText=e),size:"small",class:"search-input","prefix-icon":"el-icon-search"},null,8,["modelValue"]),(0,a.Lk)("div",u,[l[13]||(l[13]=(0,a.Lk)("span",{class:"label-text"},"是否SEND订单：",-1)),(0,a.bF)(N,{modelValue:F.sendOrder,"onUpdate:modelValue":l[5]||(l[5]=e=>F.sendOrder=e),size:"small"},{default:(0,a.k6)((()=>[(0,a.bF)(R,{label:"no"},{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.eW)("否")]))),_:1}),(0,a.bF)(R,{label:"yes"},{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("是")]))),_:1})])),_:1},8,["modelValue"])]),(0,a.Lk)("div",s,[(0,a.bF)(W,{type:"primary",size:"small"},{default:(0,a.k6)((()=>l[14]||(l[14]=[(0,a.eW)("查询")]))),_:1}),(0,a.bF)(W,{type:"warning",size:"small"},{default:(0,a.k6)((()=>l[15]||(l[15]=[(0,a.eW)("批量操作")]))),_:1}),(0,a.bF)(W,{size:"small"},{default:(0,a.k6)((()=>l[16]||(l[16]=[(0,a.eW)("导出列表")]))),_:1}),(0,a.bF)(W,{size:"small"},{default:(0,a.k6)((()=>l[17]||(l[17]=[(0,a.eW)("导出")]))),_:1}),(0,a.bF)(W,{size:"small",onClick:F.showFilterPanel},{default:(0,a.k6)((()=>l[18]||(l[18]=[(0,a.eW)("筛选")]))),_:1},8,["onClick"]),(0,a.bF)(W,{size:"small",onClick:F.showAddTrainDialog},{default:(0,a.k6)((()=>l[19]||(l[19]=[(0,a.eW)("创建派送")]))),_:1},8,["onClick"])])])]),(0,a.Lk)("div",c,[(0,a.bF)(N,{modelValue:F.currentStatus,"onUpdate:modelValue":l[6]||(l[6]=e=>F.currentStatus=e),size:"small"},{default:(0,a.k6)((()=>[(0,a.bF)(R,{label:"all"},{default:(0,a.k6)((()=>l[20]||(l[20]=[(0,a.eW)("全部(21794)")]))),_:1}),(0,a.bF)(R,{label:"waitConfirm"},{default:(0,a.k6)((()=>l[21]||(l[21]=[(0,a.eW)("待确认预约(107)")]))),_:1}),(0,a.bF)(R,{label:"planned"},{default:(0,a.k6)((()=>l[22]||(l[22]=[(0,a.eW)("待出库(152)")]))),_:1}),(0,a.bF)(R,{label:"entered"},{default:(0,a.k6)((()=>l[23]||(l[23]=[(0,a.eW)("草稿（待入库）(0)")]))),_:1}),(0,a.bF)(R,{label:"transferred"},{default:(0,a.k6)((()=>l[24]||(l[24]=[(0,a.eW)("草稿（待提交）(3)")]))),_:1}),(0,a.bF)(R,{label:"completed"},{default:(0,a.k6)((()=>l[25]||(l[25]=[(0,a.eW)("已出库(1585)")]))),_:1}),(0,a.bF)(R,{label:"delivered"},{default:(0,a.k6)((()=>l[26]||(l[26]=[(0,a.eW)("已签收(16351)")]))),_:1}),(0,a.bF)(R,{label:"pod"},{default:(0,a.k6)((()=>l[27]||(l[27]=[(0,a.eW)("已签收POD(3585)")]))),_:1}),(0,a.bF)(R,{label:"returned"},{default:(0,a.k6)((()=>l[28]||(l[28]=[(0,a.eW)("退件(11)")]))),_:1}),(0,a.bF)(R,{label:"hold"},{default:(0,a.k6)((()=>l[29]||(l[29]=[(0,a.eW)("待付款审批(0)")]))),_:1}),(0,a.bF)(R,{label:"unfulfilled"},{default:(0,a.k6)((()=>l[30]||(l[30]=[(0,a.eW)("应付未完成(21794)")]))),_:1})])),_:1},8,["modelValue"])]),(0,a.Lk)("div",b,[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(z,{tableData:F.tableData,editableFields:F.editableFields,onSelectionChange:F.handleSelectionChange,class:"logistics-table",tableHeight:"calc(100vh - 320px)"},{"expanded-content":(0,a.k6)((({row:e})=>[(0,a.Lk)("div",y,[(0,a.Lk)("h4",null,"批次详情 - "+(0,o.v_)(e.batchNumber),1),(0,a.Lk)("div",v,[(0,a.Lk)("p",null,[l[33]||(l[33]=(0,a.Lk)("strong",null,"预约信息：",-1)),(0,a.eW)(" "+(0,o.v_)(e.appointmentNumber)+" ("+(0,o.v_)(e.appointmentDate)+")",1)]),(0,a.Lk)("p",null,[l[34]||(l[34]=(0,a.Lk)("strong",null,"目的地：",-1)),(0,a.eW)(" "+(0,o.v_)(e.destination),1)]),(0,a.Lk)("p",null,[l[35]||(l[35]=(0,a.Lk)("strong",null,"批次状态：",-1)),(0,a.eW)(" "+(0,o.v_)(e.batchStatus),1)]),(0,a.Lk)("p",null,[l[36]||(l[36]=(0,a.Lk)("strong",null,"备注信息：",-1)),(0,a.eW)(" "+(0,o.v_)(e.remark||"无"),1)])])])])),default:(0,a.k6)((()=>[(0,a.bF)(P,{prop:"batchNumber",label:"批次号",width:"120","show-overflow-tooltip":""}),(0,a.bF)(P,{prop:"appointmentNumber",label:"预约号",width:"120","show-overflow-tooltip":""}),(0,a.bF)(P,{prop:"appointmentDate",label:"预约日期",width:"120","show-overflow-tooltip":""}),(0,a.bF)(P,{prop:"receiptForm",label:"签收单",width:"100","show-overflow-tooltip":""}),(0,a.bF)(P,{prop:"deliveryTruck",label:"派送卡车",width:"150","show-overflow-tooltip":""}),(0,a.bF)(P,{prop:"loadingType",label:"装车类型",width:"100",align:"center"}),(0,a.bF)(P,{prop:"deliveryTag",label:"派送标签",width:"100",align:"center"},{default:(0,a.k6)((e=>[(0,a.bF)(A,{type:F.getDeliveryTagType(e.row.deliveryTag),size:"small",effect:"light"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.row.deliveryTag),1)])),_:2},1032,["type"])])),_:1}),(0,a.bF)(P,{prop:"destination",label:"目的地",width:"150","show-overflow-tooltip":""},{default:(0,a.k6)((e=>[e.row.destination&&e.row.destination.includes("Amazon")?((0,a.uX)(),(0,a.CE)("span",m,(0,o.v_)(e.row.destination),1)):((0,a.uX)(),(0,a.CE)("span",h,(0,o.v_)(e.row.destination),1))])),_:1}),(0,a.bF)(P,{prop:"deliveryMethod",label:"派送方式",width:"120",align:"center"}),(0,a.bF)(P,{prop:"creator",label:"创建人",width:"120","show-overflow-tooltip":""}),(0,a.bF)(P,{prop:"createTime",label:"创建时间",width:"160",align:"center"}),(0,a.bF)(P,{prop:"batchStatus",label:"批次状态",width:"120",align:"center"},{default:(0,a.k6)((e=>[(0,a.bF)(A,{type:F.getBatchStatusType(e.row.batchStatus),size:"small",effect:"light"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.row.batchStatus),1)])),_:2},1032,["type"])])),_:1}),(0,a.bF)(P,{prop:"outboundType",label:"出库类型",width:"120",align:"center"}),(0,a.bF)(P,{prop:"outboundTime",label:"出库时间",width:"160",align:"center"}),(0,a.bF)(P,{prop:"followUpRecord",label:"跟进记录",width:"120","show-overflow-tooltip":""}),(0,a.bF)(P,{prop:"remark",label:"备注",width:"120","show-overflow-tooltip":""}),(0,a.bF)(P,{prop:"deliveryCost",label:"派送成本",width:"160","show-overflow-tooltip":""}),(0,a.bF)(P,{prop:"palletCount",label:"出库卡板数",width:"120",align:"center"}),(0,a.bF)(P,{prop:"operator",label:"出库操作人",width:"120",align:"center"}),(0,a.bF)(P,{prop:"outboundVolume",label:"出库体积",width:"120",align:"center"}),(0,a.bF)(P,{prop:"paymentStatus",label:"费用状态",width:"120",align:"center"}),(0,a.bF)(P,{prop:"receiptTime",label:"签收时间",width:"160",align:"center"}),(0,a.bF)(P,{label:"操作",width:"120",fixed:"right",align:"center"},{default:(0,a.k6)((e=>[(0,a.Lk)("div",g,[(0,a.bF)(W,{type:"text",size:"small",onClick:l=>F.handleDetail(e.row),class:"operation-btn"},{default:(0,a.k6)((()=>l[31]||(l[31]=[(0,a.eW)("详情")]))),_:2},1032,["onClick"]),(0,a.bF)(W,{type:"text",size:"small",onClick:l=>F.handleMore(e.row),class:"operation-btn"},{default:(0,a.k6)((()=>l[32]||(l[32]=[(0,a.eW)("更多")]))),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["tableData","editableFields","onSelectionChange"])),[[K,F.loading]]),l[37]||(l[37]=(0,a.Lk)("div",{class:"scroll-bar-placeholder"},null,-1))]),(0,a.Lk)("div",w,[(0,a.Lk)("div",f,"共计 "+(0,o.v_)(F.pagination.total)+" 条",1),(0,a.bF)(U,{"current-page":F.pagination.currentPage,"page-sizes":[50,100,200,500],"page-size":F.pagination.pageSize,background:"",layout:"prev, pager, next, jumper",total:F.pagination.total,onCurrentChange:F.handleCurrentChange,onSizeChange:F.handleSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"]),(0,a.Lk)("div",T,[(0,a.bF)(_,{modelValue:F.pagination.pageSize,"onUpdate:modelValue":l[7]||(l[7]=e=>F.pagination.pageSize=e),size:"small",onChange:F.handleSizeChange},{default:(0,a.k6)((()=>[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)([50,100,200,500],(e=>(0,a.bF)(L,{key:e,label:`${e} 条/页`,value:e},null,8,["label","value"]))),64))])),_:1},8,["modelValue","onChange"])]),(0,a.Lk)("div",k,[l[38]||(l[38]=(0,a.Lk)("span",null,"跳至",-1)),(0,a.bF)(V,{modelValue:F.goToPage,"onUpdate:modelValue":l[8]||(l[8]=e=>F.goToPage=e),size:"small",style:{width:"50px",margin:"0 5px"},onKeyup:(0,r.jR)(F.handleGoToPage,["enter"])},null,8,["modelValue","onKeyup"]),l[39]||(l[39]=(0,a.Lk)("span",null,"页",-1))])]),(0,a.bF)(M,{visible:F.addTrainDialogVisible,"onUpdate:visible":l[9]||(l[9]=e=>F.addTrainDialogVisible=e),selectedRows:F.selectedRows,onConfirm:F.handleAddTrainConfirm,onCancel:F.handleAddTrainCancel},null,8,["visible","selectedRows","onConfirm","onCancel"]),(0,a.bF)(x,{visible:F.filterPanelVisible,"onUpdate:visible":l[10]||(l[10]=e=>F.filterPanelVisible=e),columns:F.tableColumnDefinitions,existingFilters:F.activeFilters,existingLogic:F.filterLogic,onApplyFilters:F.handleApplyFilters,onCancel:F.handleFilterCancel},null,8,["visible","columns","existingFilters","existingLogic","onApplyFilters","onCancel"])])}var C=t(953);const S={class:"data-table-container"},L={key:0,class:"table-header"},_={class:"expanded-row"},D={key:0,class:"group-name"},V={key:0},R={key:1};function N(e,l,t,r,i,n){const d=(0,a.g2)("el-table-column"),p=(0,a.g2)("el-tag"),u=(0,a.g2)("el-table");return(0,a.uX)(),(0,a.CE)("div",S,[t.showTableHeader?((0,a.uX)(),(0,a.CE)("div",L,[(0,a.RG)(e.$slots,"table-header",{},void 0,!0)])):(0,a.Q3)("",!0),(0,a.bF)(u,{ref:"dataTable",data:t.tableData,border:"",stripe:"",style:{width:"fit-content","min-width":"100%"},height:t.tableHeight,onSelectionChange:r.handleSelectionChange,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"},"row-class-name":r.getRowClassName},{default:(0,a.k6)((()=>[(0,a.bF)(d,{type:"expand"},{default:(0,a.k6)((l=>[(0,a.Lk)("div",_,[l.row.isGroup?(0,a.Q3)("",!0):(0,a.RG)(e.$slots,"expanded-content",{key:0,row:l.row},void 0,!0)])])),_:3}),(0,a.bF)(d,{type:"selection",width:"55"}),r.hasGroupedData?((0,a.uX)(),(0,a.Wv)(d,{key:0,label:"分组信息",width:"200"},{default:(0,a.k6)((e=>[e.row.isGroup?((0,a.uX)(),(0,a.CE)("span",D,[(0,a.bF)(p,{type:r.getGroupTagType(e.row.groupLevel)},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.row.groupName)+" ",1),e.row.count?((0,a.uX)(),(0,a.CE)("span",V,"("+(0,o.v_)(e.row.count||0)+")",1)):(0,a.Q3)("",!0)])),_:2},1032,["type"])])):((0,a.uX)(),(0,a.CE)("span",R,"-"))])),_:1})):(0,a.Q3)("",!0),(0,a.RG)(e.$slots,"default",{},void 0,!0)])),_:3},8,["data","height","onSelectionChange","row-class-name"])])}const W={name:"DataTable",props:{tableData:{type:Array,required:!0},editableFields:{type:Object,required:!0},tableHeight:{type:String,default:"calc(100vh - 180px)"},showTableHeader:{type:Boolean,default:!1}},emits:["selection-change","cell-click","cell-dbl-click","cell-edit-confirm","tag-close"],setup(e,{emit:l}){const t=(0,a.EW)((()=>e.tableData.some((e=>e.isGroup)))),o=e=>{const l=["","primary","success","warning"];return l[e]||"info"},r=({row:e})=>e.isGroup?e.groupClass||"":e.dataParentGroupKey?`data-row data-parent-group-key-${e.dataParentGroupKey.replace(/[^a-zA-Z0-9]/g,"-")}`:"",i=e=>{l("selection-change",e)},n=(e,t)=>{l("cell-click",e,t)},d=(e,t)=>{l("cell-dbl-click",e,t)},p=(e,t)=>{l("cell-edit-confirm",e,t)},u=(e,t,a)=>{l("tag-close",e,t,a)},s=e=>{const l={pending:"info",appointed:"success",phone:"warning",email:"warning",platform:"warning",completed:"success",cancelled:"danger"};return l[e]||"info"},c=e=>{const l={pending:"未预约",appointed:"已预约",phone:"电话预约",email:"邮件预约",platform:"平台预约",completed:"已完成",cancelled:"已取消"};return l[e]||e};return{hasGroupedData:t,getGroupTagType:o,getRowClassName:r,handleSelectionChange:i,handleCellClick:n,handleCellDblClick:d,handleCellEditConfirm:p,handleTagClose:u,getStatusType:s,getStatusText:c}}};var P=t(6262);const A=(0,P.A)(W,[["render",N],["__scopeId","data-v-b7983b50"]]),z=A,U={class:"dialog-header"},M={class:"dialog-content"},x={class:"info-section"},K={class:"form-content"},O={class:"form-row"},X={class:"form-row"},E={class:"form-row"},B={class:"cost-input"},G={class:"detail-section"},I={class:"table-summary"},q={class:"dialog-footer"};function $(e,l,t,r,i,n){const d=(0,a.g2)("el-option"),p=(0,a.g2)("el-select"),u=(0,a.g2)("el-form-item"),s=(0,a.g2)("el-input"),c=(0,a.g2)("el-form"),b=(0,a.g2)("el-table-column"),m=(0,a.g2)("el-button"),h=(0,a.g2)("el-table"),g=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:r.dialogVisible,"onUpdate:modelValue":l[7]||(l[7]=e=>r.dialogVisible=e),title:"创建派送",width:"950px","close-on-click-modal":!1,onClose:r.handleClose,"custom-class":"add-train-dialog","show-close":!1},{default:(0,a.k6)((()=>[(0,a.Lk)("div",U,[(0,a.Lk)("div",{class:"back-button",onClick:l[0]||(l[0]=(...e)=>r.handleCancel&&r.handleCancel(...e))},l[8]||(l[8]=[(0,a.Lk)("i",{class:"el-icon-arrow-left"},null,-1),(0,a.eW)(" 返回 ")])),l[9]||(l[9]=(0,a.Lk)("span",{class:"dialog-title"},"创建派送",-1))]),(0,a.Lk)("div",M,[(0,a.Lk)("div",x,[l[11]||(l[11]=(0,a.Lk)("div",{class:"section-header"},"基本信息",-1)),(0,a.Lk)("div",K,[(0,a.bF)(c,{model:r.formData,"label-width":"80px",size:"default"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",O,[(0,a.bF)(u,{label:"派车类型",class:"form-item",required:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:r.formData.vehicleType,"onUpdate:modelValue":l[1]||(l[1]=e=>r.formData.vehicleType=e),placeholder:"请选择",style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"整车",value:"full"}),(0,a.bF)(d,{label:"散板",value:"partial"}),(0,a.bF)(d,{label:"一提多卸",value:"oneToMany"}),(0,a.bF)(d,{label:"多提一卸",value:"manyToOne"})])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(u,{label:"供应商",class:"form-item",required:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:r.formData.supplier,"onUpdate:modelValue":l[2]||(l[2]=e=>r.formData.supplier=e),placeholder:"请选择",style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"供应商1",value:"supplier1"}),(0,a.bF)(d,{label:"供应商2",value:"supplier2"}),(0,a.bF)(d,{label:"供应商3",value:"supplier3"})])),_:1},8,["modelValue"])])),_:1})]),(0,a.Lk)("div",X,[(0,a.bF)(u,{label:"装车类型",class:"form-item",required:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:r.formData.loadingType,"onUpdate:modelValue":l[3]||(l[3]=e=>r.formData.loadingType=e),placeholder:"请选择",style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"卡板",value:"pallet"}),(0,a.bF)(d,{label:"地板",value:"floor"}),(0,a.bF)(d,{label:"混装",value:"mixed"})])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(u,{label:"运输类型",class:"form-item",required:""},{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:r.formData.transportType,"onUpdate:modelValue":l[4]||(l[4]=e=>r.formData.transportType=e),placeholder:"请选择",style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"FTL",value:"ftl"}),(0,a.bF)(d,{label:"LTL",value:"ltl"})])),_:1},8,["modelValue"])])),_:1})]),(0,a.Lk)("div",E,[(0,a.bF)(u,{label:"派送成本",class:"form-item"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",B,[(0,a.bF)(s,{modelValue:r.formData.deliveryCost,"onUpdate:modelValue":l[5]||(l[5]=e=>r.formData.deliveryCost=e),placeholder:"请输入"},null,8,["modelValue"]),l[10]||(l[10]=(0,a.Lk)("span",{class:"currency"},"USD",-1))])])),_:1}),(0,a.bF)(u,{label:"备注",class:"form-item"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{modelValue:r.formData.remark,"onUpdate:modelValue":l[6]||(l[6]=e=>r.formData.remark=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1})])])),_:1},8,["model"])])]),(0,a.Lk)("div",G,[l[13]||(l[13]=(0,a.Lk)("div",{class:"section-header"},"派送明细",-1)),(0,a.Lk)("div",I,"合计: "+(0,o.v_)(r.formData.totalCount)+" , "+(0,o.v_)(r.formData.totalCBM)+" , "+(0,o.v_)(r.formData.totalWeight),1),(0,a.bF)(h,{data:r.formData.details,border:"",style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,{type:"selection",width:"50"}),(0,a.bF)(b,{prop:"pcNumber",label:"PC号",width:"120"}),(0,a.bF)(b,{prop:"loadingType",label:"装车类型",width:"100"}),(0,a.bF)(b,{prop:"orderType",label:"订单类型",width:"100"}),(0,a.bF)(b,{prop:"destination",label:"目的地",width:"150"}),(0,a.bF)(b,{prop:"palletCount",label:"板数",width:"80"}),(0,a.bF)(b,{prop:"weight",label:"重量",width:"100"}),(0,a.bF)(b,{prop:"volume",label:"方数",width:"100"}),(0,a.bF)(b,{prop:"appointmentNumber",label:"预约号",width:"120"}),(0,a.bF)(b,{prop:"appointmentTime",label:"预约时间",width:"150"}),(0,a.bF)(b,{prop:"appointmentParty",label:"预约方",width:"100"}),(0,a.bF)(b,{prop:"remark",label:"备注",width:"120"}),(0,a.bF)(b,{label:"操作",width:"80",align:"center"},{default:(0,a.k6)((e=>[(0,a.bF)(m,{type:"text",class:"delete-btn",onClick:l=>r.handleRemoveItem(e.$index)},{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])]),(0,a.Lk)("div",q,[(0,a.bF)(m,{onClick:r.handleCancel},{default:(0,a.k6)((()=>l[14]||(l[14]=[(0,a.eW)("取消")]))),_:1},8,["onClick"]),(0,a.bF)(m,{type:"primary",onClick:r.handleConfirm},{default:(0,a.k6)((()=>l[15]||(l[15]=[(0,a.eW)("保存")]))),_:1},8,["onClick"])])])),_:1},8,["modelValue","onClose"])}const H={name:"AddTrainDialog",props:{visible:{type:Boolean,default:!1},selectedRows:{type:Array,default:()=>[]}},emits:["update:visible","confirm","cancel"],setup(e,{emit:l}){const t=(0,a.EW)({get:()=>e.visible,set:e=>l("update:visible",e)}),o=()=>e.selectedRows.map((e=>({pcNumber:e.batchNumber||`PC${Math.floor(1e4*Math.random())}`,loadingType:"卡板",orderType:"标准派送",destination:e.destination||"商业地址-LW2503190889",palletCount:e.palletCount||2,weight:e.weight||2161.61,volume:e.volume||1.58,appointmentNumber:e.appointmentNumber||`AP${Math.floor(1e4*Math.random())}`,appointmentTime:"2023-08-15 13:30",appointmentParty:"Amazon",remark:e.remark||""}))),r=(0,C.Kh)({vehicleType:"",supplier:"",loadingType:"",transportType:"ftl",deliveryCost:"",remark:"",details:[],totalCount:"300 PCS",totalCBM:"12.84 CBM",totalWeight:"17526.57 lbs"});(0,a.wB)((()=>e.visible),(e=>{e&&(r.details=o())}));const i=e=>{r.details.splice(e,1)},n=()=>{t.value=!1},d=()=>{t.value=!1,l("cancel")},p=()=>{l("confirm",{...r,batchCount:r.details.length}),t.value=!1};return{dialogVisible:t,formData:r,handleClose:n,handleCancel:d,handleConfirm:p,handleRemoveItem:i}}},Q=(0,P.A)(H,[["render",$],["__scopeId","data-v-1cdfd8a4"]]),j=Q,J=JSON.parse('[{"prop":"selection","type":"selection","width":40,"fixed":true},{"prop":"batchNumber","label":"批次号","width":120,"showOverflowTooltip":true},{"prop":"appointmentNumber","label":"预约号","width":120,"showOverflowTooltip":true},{"prop":"appointmentDate","label":"预约日期","width":120,"showOverflowTooltip":true},{"prop":"receiptForm","label":"签收单","width":100,"showOverflowTooltip":true},{"prop":"deliveryTruck","label":"派送卡车","width":150,"showOverflowTooltip":true},{"prop":"loadingType","label":"装车类型","width":100,"align":"center"},{"prop":"deliveryTag","label":"派送标签","width":100,"align":"center","tag":true},{"prop":"destination","label":"目的地","width":150,"showOverflowTooltip":true,"customColor":true},{"prop":"deliveryMethod","label":"派送方式","width":120,"align":"center"},{"prop":"creator","label":"创建人","width":120,"showOverflowTooltip":true},{"prop":"createTime","label":"创建时间","width":160,"align":"center"},{"prop":"batchStatus","label":"批次状态","width":120,"align":"center","tag":true},{"prop":"outboundType","label":"出库类型","width":120,"align":"center"},{"prop":"outboundTime","label":"出库时间","width":160,"align":"center"},{"prop":"followUpRecord","label":"跟进记录","width":120,"showOverflowTooltip":true},{"prop":"remark","label":"备注","width":120,"showOverflowTooltip":true},{"prop":"deliveryCost","label":"派送成本","width":160,"showOverflowTooltip":true},{"prop":"palletCount","label":"出库卡板数","width":120,"align":"center"},{"prop":"operator","label":"出库操作人","width":120,"align":"center"},{"prop":"outboundVolume","label":"出库体积","width":120,"align":"center"},{"prop":"paymentStatus","label":"费用状态","width":120,"align":"center"},{"prop":"receiptTime","label":"签收时间","width":160,"align":"center"},{"prop":"operation","label":"操作","width":120,"fixed":"right","align":"center"}]'),Y=JSON.parse('[{"id":"B20230001","batchNumber":"LW2-230001","appointmentNumber":"APPT-88762","appointmentDate":"2023-03-18","receiptForm":"SR-20230318-001","deliveryTruck":"KKS LOGISTICS LLC","loadingType":"卡板","deliveryTag":"优先派送","destination":"Walmart-LAX1","deliveryMethod":"卡车派送","creator":"Rhea Yu","createTime":"2023/03/18 04:12","batchStatus":"待出库","outboundType":"派送","outboundTime":"","followUpRecord":"已联系司机确认","remark":"","deliveryCost":"kbs私人地址派送","palletCount":42,"operator":"张三","outboundVolume":"56.7","paymentStatus":"未付款","receiptTime":""},{"id":"B20230002","batchNumber":"LW2-230002","appointmentNumber":"APPT-88763","appointmentDate":"2023-03-19","receiptForm":"SR-20230319-002","deliveryTruck":"一次性供应商","loadingType":"卡板","deliveryTag":"优先派送","destination":"商业地址-LWX1","deliveryMethod":"客户自提","creator":"程涛子","createTime":"2023/03/18 04:12","batchStatus":"待确认预约","outboundType":"派送","outboundTime":"","followUpRecord":"等待确认","remark":"","deliveryCost":"六重自提ARM装卸","palletCount":0,"operator":"李四","outboundVolume":"0","paymentStatus":"未付款","receiptTime":""},{"id":"B20230003","batchNumber":"LW2-230003","appointmentNumber":"APPT-88764","appointmentDate":"2023-03-20","receiptForm":"SR-20230320-003","deliveryTruck":"YFM TRUCKING INC","loadingType":"卡板","deliveryTag":"拍照","destination":"Amazon-LAS1","deliveryMethod":"卡车派送","creator":"谢赫伦","createTime":"2023/03/18 04:12","batchStatus":"待出库","outboundType":"派送","outboundTime":"","followUpRecord":"已安排出库","remark":"","deliveryCost":"MS LAS1 整车","palletCount":1250,"operator":"王五","outboundVolume":"135.8","paymentStatus":"已付款","receiptTime":""},{"id":"B20230004","batchNumber":"LW2-230004","appointmentNumber":"APPT-88765","appointmentDate":"2023-03-21","receiptForm":"SR-20230321-004","deliveryTruck":"一次性供应商","loadingType":"卡板","deliveryTag":"易碎品","destination":"商业地址-LWX1","deliveryMethod":"客户自提","creator":"程涛子","createTime":"2023/03/18 04:12","batchStatus":"待确认预约","outboundType":"派送","outboundTime":"","followUpRecord":"待客户确认","remark":"","deliveryCost":"六重自提ARM装卸","palletCount":0,"operator":"赵六","outboundVolume":"0","paymentStatus":"未付款","receiptTime":""},{"id":"B20230005","batchNumber":"LW2-230005","appointmentNumber":"APPT-88766","appointmentDate":"2023-03-22","receiptForm":"SR-20230322-005","deliveryTruck":"一次性供应商","loadingType":"卡板","deliveryTag":"优先派送","destination":"商业地址-LWX1","deliveryMethod":"客户自提","creator":"程涛子","createTime":"2023/03/18 04:12","batchStatus":"待确认预约","outboundType":"派送","outboundTime":"","followUpRecord":"等待客户自提","remark":"客户延迟自提","deliveryCost":"六重自提ARM装卸","palletCount":0,"operator":"孙七","outboundVolume":"0","paymentStatus":"未付款","receiptTime":""},{"id":"B20230006","batchNumber":"LW2-230006","appointmentNumber":"APPT-88767","appointmentDate":"2023-03-23","receiptForm":"SR-20230323-006","deliveryTruck":"AMAZON FREIGHT","loadingType":"地板","deliveryTag":"特殊派送","destination":"Amazon-POC1","deliveryMethod":"卡车派送","creator":"Celia","createTime":"2023/03/18 04:12","batchStatus":"待出库","outboundType":"派送","outboundTime":"","followUpRecord":"等待出库","remark":"大批量订单","deliveryCost":"地板","palletCount":536,"operator":"周八","outboundVolume":"342.5","paymentStatus":"部分付款","receiptTime":""},{"id":"B20230007","batchNumber":"LW2-230007","appointmentNumber":"APPT-88768","appointmentDate":"2023-03-24","receiptForm":"SR-20230324-007","deliveryTruck":"一次性供应商","loadingType":"卡板","deliveryTag":"优先派送","destination":"商业地址-LWX1","deliveryMethod":"卡车派送","creator":"程涛子","createTime":"2023/03/18 04:12","batchStatus":"待确认预约","outboundType":"派送","outboundTime":"","followUpRecord":"等待确认","remark":"","deliveryCost":"六重自提ARM装卸","palletCount":0,"operator":"吴九","outboundVolume":"0","paymentStatus":"未付款","receiptTime":""},{"id":"B20230008","batchNumber":"LW2-230008","appointmentNumber":"APPT-88769","appointmentDate":"2023-03-25","receiptForm":"SR-20230325-008","deliveryTruck":"UPS","loadingType":"卡板","deliveryTag":"快递派送","destination":"Amazon-RFD2","deliveryMethod":"快递派送","creator":"李鑫","createTime":"2023/03/18 04:12","batchStatus":"待出库","outboundType":"派送","outboundTime":"","followUpRecord":"已预约UPS","remark":"加急订单","deliveryCost":"UPS加急派送","palletCount":115,"operator":"郑十","outboundVolume":"78.3","paymentStatus":"已付款","receiptTime":""},{"id":"B20230009","batchNumber":"LW2-230009","appointmentNumber":"APPT-88770","appointmentDate":"2023-03-26","receiptForm":"SR-20230326-009","deliveryTruck":"Ansuda Logistics","loadingType":"卡板","deliveryTag":"标准派送","destination":"Amazon-XLX7","deliveryMethod":"卡车派送","creator":"程涛子","createTime":"2023/03/17 14:12","batchStatus":"待出库","outboundType":"派送","outboundTime":"","followUpRecord":"等待派送","remark":"大客户订单","deliveryCost":"优惠固定价","palletCount":500,"operator":"陈十一","outboundVolume":"287.4","paymentStatus":"已付款","receiptTime":""},{"id":"B20230010","batchNumber":"LW2-230010","appointmentNumber":"APPT-88771","appointmentDate":"2023-03-27","receiptForm":"SR-20230327-010","deliveryTruck":"Ansuda Logistics","loadingType":"卡板","deliveryTag":"标准派送","destination":"Amazon-XLX7","deliveryMethod":"卡车派送","creator":"程涛子","createTime":"2023/03/17 14:12","batchStatus":"已出库","outboundType":"派送","outboundTime":"2023/03/27 09:30","followUpRecord":"已完成出库","remark":"按时出库","deliveryCost":"标准派送费","palletCount":328,"operator":"黄十二","outboundVolume":"186.5","paymentStatus":"已付款","receiptTime":"2023/03/27 16:45"},{"id":"B20230011","batchNumber":"LW2-230011","appointmentNumber":"APPT-88772","appointmentDate":"2023-03-28","receiptForm":"SR-20230328-011","deliveryTruck":"Ansuda Logistics","loadingType":"卡板","deliveryTag":"标准派送","destination":"Amazon-XLX7","deliveryMethod":"卡车派送","creator":"程涛子","createTime":"2023/03/17 14:12","batchStatus":"已签收","outboundType":"派送","outboundTime":"2023/03/28 08:15","followUpRecord":"客户已签收","remark":"顺利完成","deliveryCost":"标准派送费","palletCount":275,"operator":"杨十三","outboundVolume":"165.2","paymentStatus":"已付款","receiptTime":"2023/03/28 14:30"},{"id":"B20230012","batchNumber":"LW2-230012","appointmentNumber":"APPT-88773","appointmentDate":"2023-03-29","receiptForm":"SR-20230329-012","deliveryTruck":"FEDEX","loadingType":"卡板","deliveryTag":"快递派送","destination":"客户地址-CHI1","deliveryMethod":"快递派送","creator":"张明","createTime":"2023/03/19 10:12","batchStatus":"已签收POD","outboundType":"派送","outboundTime":"2023/03/29 09:45","followUpRecord":"已完成全部流程","remark":"完整POD已上传","deliveryCost":"FEDEX特快","palletCount":64,"operator":"刘十四","outboundVolume":"42.8","paymentStatus":"已付款","receiptTime":"2023/03/29 17:20"}]');var Z=t(3344);const ee={name:"OutgoingBatchView",components:{DataTable:z,AddTrainDialog:j,FilterPanel:Z.A},setup(){const e=(0,C.KR)(!1),l=(0,C.KR)("all"),t=(0,C.KR)("all"),o=(0,C.KR)([]),r=(0,C.KR)(""),i=(0,C.KR)([]),n=(0,C.KR)(!1),d=(0,C.KR)(!1),p=(0,C.KR)([]),u=(0,C.KR)("and"),s=(0,C.KR)([{label:"批次号",prop:"batchNumber",type:"string"},{label:"预约号",prop:"appointmentNumber",type:"string"},{label:"预约日期",prop:"appointmentDate",type:"date"},{label:"签收单",prop:"receiptForm",type:"string"},{label:"派送卡车",prop:"deliveryTruck",type:"string"},{label:"装车类型",prop:"loadingType",type:"select",options:["整车","拼车","快递"]},{label:"派送标签",prop:"deliveryTag",type:"select",options:["优先派送","标准派送","特殊派送","自提","快递派送","整车运输"]},{label:"目的地",prop:"destination",type:"string"},{label:"派送方式",prop:"deliveryMethod",type:"select",options:["自配送","第三方","快递"]},{label:"创建人",prop:"creator",type:"string"},{label:"创建时间",prop:"createTime",type:"date"},{label:"批次状态",prop:"batchStatus",type:"select",options:["待出库","待确认订舱","待确认预约","已出库","已签收","已签收POD"]},{label:"出库类型",prop:"outboundType",type:"select",options:["普通出库","紧急出库","特殊出库"]},{label:"出库时间",prop:"outboundTime",type:"date"},{label:"跟进记录",prop:"followUpRecord",type:"string"},{label:"备注",prop:"remark",type:"string"},{label:"派送成本",prop:"deliveryCost",type:"number"},{label:"出库卡板数",prop:"palletCount",type:"number"},{label:"出库操作人",prop:"operator",type:"string"},{label:"出库体积",prop:"outboundVolume",type:"number"},{label:"费用状态",prop:"paymentStatus",type:"select",options:["已付款","待付款","部分付款"]},{label:"签收时间",prop:"receiptTime",type:"date"}]),c=(0,C.KR)(J),b=(0,a.EW)((()=>c.value.filter((e=>"selection"!==e.prop&&"operation"!==e.prop)))),m=(0,C.KR)([]),h=(0,C.Kh)({remark:{type:"input"},followUpRecord:{type:"input"}}),g=(0,C.KR)("west2"),y=(0,C.KR)(""),v=(0,C.KR)(""),w=(0,C.KR)(""),f=(0,C.Kh)({currentPage:1,pageSize:50,total:0}),T=e=>{const l={待出库:"warning",待确认订舱:"info",待确认预约:"info",已出库:"success",已签收:"success",已签收POD:"success"};return l[e]||"info"},k=e=>{const l={优先派送:"danger",标准派送:"primary",特殊派送:"warning",自提:"info",快递派送:"success",整车运输:"warning"};return l[e]||"info"},F=e=>{o.value=e},S=e=>{f.currentPage=e,x()},L=e=>{f.pageSize=e,x()},_=()=>{const e=parseInt(r.value);e&&e>0&&e<=Math.ceil(f.total/f.pageSize)&&(f.currentPage=e,x()),r.value=""},D=e=>{console.log("查看详情:",e)},V=e=>{console.log("查看更多:",e)},R=()=>{0!==o.value.length?n.value=!0:alert("请先选择要创建派送的批次")},N=e=>{console.log("创建派送确认:",e),alert(`已成功创建派送，包含${e.batchCount}个出库明细`)},W=()=>{console.log("取消创建派送")},P=()=>{d.value=!0},A=(e,l)=>{console.log("应用筛选条件:",e,"逻辑:",l),p.value=e,u.value=l,U(),d.value=!1},z=()=>{d.value=!1},U=()=>{0!==p.value.length?(e.value=!0,setTimeout((()=>{const l=Y.filter((e=>"and"===u.value?p.value.every((l=>M(e,l))):p.value.some((l=>M(e,l)))));m.value=l,f.total=l.length,e.value=!1}),500)):x()},M=(e,l)=>{const{field:t,operator:a,value:o}=l,r=e[t];if(void 0===r||null===r)return!1;switch(a){case"equals":return r===o;case"notEquals":return r!==o;case"contains":return String(r).toLowerCase().includes(String(o).toLowerCase());case"notContains":return!String(r).toLowerCase().includes(String(o).toLowerCase());case"startsWith":return String(r).toLowerCase().startsWith(String(o).toLowerCase());case"endsWith":return String(r).toLowerCase().endsWith(String(o).toLowerCase());case"greaterThan":return Number(r)>Number(o);case"lessThan":return Number(r)<Number(o);case"greaterThanOrEqual":return Number(r)>=Number(o);case"lessThanOrEqual":return Number(r)<=Number(o);case"between":if(Array.isArray(o)&&2===o.length){if("string"===typeof r&&r.includes("-")){const e=new Date(r),l=new Date(o[0]),t=new Date(o[1]);return e>=l&&e<=t}return Number(r)>=Number(o[0])&&Number(r)<=Number(o[1])}return!1;default:return!1}},x=()=>{e.value=!0,setTimeout((()=>{m.value=Y,f.total=Y.length,e.value=!1}),500)};return(0,a.sV)((()=>{x()})),{loading:e,currentStatus:l,sendOrder:t,tableData:m,tableColumns:c,filteredColumns:b,editableFields:h,selectedRows:o,pagination:f,goToPage:r,dateRange:i,warehouse:g,createDateRange:y,batchNumber:v,searchText:w,addTrainDialogVisible:n,filterPanelVisible:d,tableColumnDefinitions:s,activeFilters:p,filterLogic:u,getBatchStatusType:T,getDeliveryTagType:k,handleSelectionChange:F,handleCurrentChange:S,handleSizeChange:L,handleGoToPage:_,handleDetail:D,handleMore:V,fetchData:x,showAddTrainDialog:R,handleAddTrainConfirm:N,handleAddTrainCancel:W,showFilterPanel:P,handleApplyFilters:A,handleFilterCancel:z}}},le=(0,P.A)(ee,[["render",F],["__scopeId","data-v-4adb9136"]]),te=le}}]);
//# sourceMappingURL=279.9858582b.js.map