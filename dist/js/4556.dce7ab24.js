"use strict";(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[4556],{4556:(e,l,a)=>{a.r(l),a.d(l,{default:()=>N});var t=a(641),o=a(3751),u=a(953),i=a(33),n=a(5220),r=a(8548),d=a(163),s=a(7918),p=a(3344),c=a(2998),v=a(432),k=a.n(v);const b={class:"work-order-list-container"},m={class:"page-header"},g={class:"page-actions"},f={class:"search-bar"},y={class:"filter-section"},h={class:"view-management"},_={key:0,class:"table-operations"},F={class:"selected-count"},w={class:"subject-cell"},C={class:"subject-text"},V={key:1},W={class:"group-settings"},x={class:"group-level"},R={class:"group-level"},K={class:"group-level"},L={class:"dialog-footer"},A={class:"sort-settings"},X={class:"sort-actions"},D={class:"dialog-footer"},S={class:"column-settings"},z={class:"column-settings-header"},U={class:"column-list"},E={class:"column-item"},T={class:"dialog-footer"},I={__name:"ExceptionWorkOrderList",setup(e){const l=(0,n.rd)(),a=(0,u.KR)([{id:1,name:"张三"},{id:2,name:"李四"},{id:3,name:"客服团队"},{id:5,name:"财务"}]),v=(0,u.KR)(!1),I=(0,u.KR)(""),$=(0,u.Kh)({status:"",type:"exception",exceptionType:"",priority:"",assignee:null,createdAtRange:[]}),j=(0,u.KR)([{id:"WO202307250001",subject:"客户反馈订单延迟问题",type:"exception",status:"pending",priority:"high",exceptionType:"客户投诉",orderNo:"ORD202307250123",creator:"张三",assignee:"李四",createdAt:new Date(Date.now()-864e5),updatedAt:new Date,remarks:"客户要求尽快处理，已电话沟通。"},{id:"WO202307250005",subject:"支付异常退款处理",type:"exception",status:"closed",priority:"high",exceptionType:"支付问题",orderNo:"ORD202307250126",creator:"李四",assignee:"财务",createdAt:new Date(Date.now()-2592e5),updatedAt:new Date(Date.now()-1728e5),remarks:"退款已完成，请财务核对。"},{id:"WO202307250007",subject:"入库单商品数量不符",type:"exception",status:"processing",priority:"medium",exceptionType:"系统错误",orderNo:"INB20230725005",creator:"仓库管理员",assignee:"客服团队",createdAt:new Date(Date.now()-288e5),updatedAt:new Date(Date.now()-72e5),remarks:"差异数量：-2，需核实库存。"}]),N=(0,u.Kh)({current:1,pageSize:10,total:0}),O=(0,u.KR)([]),Y=e=>{if(!e)return"-";const l=new Date(e);return`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")} ${String(l.getHours()).padStart(2,"0")}:${String(l.getMinutes()).padStart(2,"0")}`},B=e=>{const l={pending:"待处理",processing:"处理中",pending_confirmation:"待确认",resolved:"已解决",closed:"已关闭"};return l[e]||e},M=e=>{const l={pending:"warning",processing:"primary",pending_confirmation:"info",resolved:"success",closed:"info"};return l[e]||"info"},Q=e=>{const l={exception:"异常订单处理",command:"指令执行",warning:"订单预警响应",value_added:"增值服务请求",other:"其他问题"};return l[e]||e},q=e=>{const l={urgent:"紧急",high:"高",medium:"中",low:"低"};return l[e]||e},G=e=>{const l={urgent:"danger",high:"warning",medium:"info",low:"success"};return l[e]||"info"},H=e=>["pending","processing"].includes(e.status),J=()=>{N.current=1,re()},P=()=>{$.status="",$.exceptionType="",$.priority="",$.assignee=null,$.createdAtRange=[],I.value="",J()},Z=e=>{O.value=e},ee=()=>{O.value=[]},le=e=>{N.pageSize=e,re()},ae=e=>{N.current=e,re()},te=()=>{l.push({path:"/work-order/create",query:{defaultType:"exception"}})},oe=e=>{l.push(`/work-order/detail/${e}`)},ue=e=>{console.log("Navigate to order detail for:",e),d.nk.info(`跳转到订单 ${e} 的详情页 (功能待实现)`)},ie=e=>{s.s.confirm(`确认开始处理工单 "${e.subject}"?`,"操作确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"info"}).then((()=>{const a=j.value.findIndex((l=>l.id===e.id));-1!==a&&(j.value[a].status="processing",j.value[a].updatedAt=new Date),d.nk.success("工单状态已更新为：处理中"),l.push(`/work-order/detail/${e.id}`)})).catch((()=>{}))},ne=()=>{if(0===O.value.length)return void d.nk.warning("请先选择工单");const e=O.value.filter((e=>H(e))).map((e=>e.id));0!==e.length?s.s.confirm(`确认批量处理 ${e.length} 个工单?`,"操作确认",{}).then((()=>{e.forEach((e=>{const l=j.value.findIndex((l=>l.id===e));-1!==l&&(j.value[l].status="processing",j.value[l].updatedAt=new Date)})),d.nk.success(`已开始处理 ${e.length} 个工单`),ee(),re()})).catch((()=>{})):d.nk.warning("所选工单中没有可处理的工单")},re=async()=>{v.value=!0;try{const e={page:N.current,pageSize:N.pageSize,search:I.value,type:$.type,status:$.status,exceptionType:$.exceptionType,priority:$.priority,assigneeId:$.assignee,createdAtStart:$.createdAtRange?$.createdAtRange[0]:null,createdAtEnd:$.createdAtRange?$.createdAtRange[1]:null};console.log("Fetching Exception Work Orders with params:",e),setTimeout((()=>{let l=[...j.value];e.search,e.status,e.exceptionType&&(l=l.filter((l=>l.exceptionType===e.exceptionType))),e.priority,e.assigneeId;const a=(e.page-1)*e.pageSize,t=a+e.pageSize,o=l.slice(a,t);j.value=o,N.total=l.length,v.value=!1}),500)}catch(e){console.error("Failed to fetch exception work orders:",e),d.nk.error("获取异常工单列表失败"),v.value=!1}},de=(0,u.KR)("all"),se=(0,u.KR)([]),pe=(0,u.KR)(!1),ce=(0,u.KR)(!1),ve=(0,u.KR)(!1),ke=(0,u.KR)(0),be=(0,u.KR)(0),me=(0,u.KR)({name:"",columns:[]}),ge=(0,u.KR)(!1),fe=(0,u.KR)([]),ye=(0,u.KR)("and"),he=(0,u.KR)(!1),_e=(0,u.KR)({level1:"",level2:"",level3:""}),Fe=(0,u.KR)(""),we=(0,u.KR)(!1),Ce=(0,u.KR)([{field:"",direction:"asc"}]),Ve=(0,u.KR)(!1),We=(0,u.KR)([]),xe=(0,u.KR)(!0),Re=(0,u.KR)([{prop:"id",label:"工单号",width:150,visible:!0},{prop:"subject",label:"主题",minWidth:200,visible:!0},{prop:"type",label:"类型",width:120,visible:!0},{prop:"status",label:"状态",width:100,visible:!0},{prop:"priority",label:"优先级",width:80,visible:!0},{prop:"exceptionType",label:"异常类型",width:120,visible:!0},{prop:"orderNo",label:"关联订单",width:150,visible:!0},{prop:"remarks",label:"备注",minWidth:150,visible:!0},{prop:"creator",label:"创建人",width:100,visible:!0},{prop:"assignee",label:"当前处理人",width:100,visible:!0},{prop:"createdAt",label:"创建时间",width:180,visible:!0},{prop:"updatedAt",label:"更新时间",width:180,visible:!0},{prop:"operation",label:"操作",width:150,fixed:"right",visible:!0}]),Ke=(0,u.KR)([{prop:"status",label:"状态"},{prop:"priority",label:"优先级"},{prop:"exceptionType",label:"异常类型"},{prop:"creator",label:"创建人"},{prop:"assignee",label:"处理人"}]),Le=(0,u.KR)([{prop:"createdAt",label:"创建时间"},{prop:"updatedAt",label:"更新时间"},{prop:"priority",label:"优先级"},{prop:"status",label:"状态"}]),Ae=(0,t.EW)((()=>Re.value.filter((e=>e.visible)))),Xe=e=>{const l=Ke.value.find((l=>l.prop===e));return l?l.label:e},De=()=>{pe.value=!0},Se=()=>{if(!me.value.name)return void d.nk.warning("请输入视图名称");const e={id:Date.now().toString(),name:me.value.name,columns:me.value.columns,filters:fe.value,groupSettings:_e.value,sortSettings:Ce.value};se.value.push(e),pe.value=!1,d.nk.success("视图保存成功")},ze=()=>{de.value&&(ce.value=!0)},Ue=()=>{de.value&&s.s.confirm("确认删除该视图？","提示",{type:"warning"}).then((()=>{const e=se.value.findIndex((e=>e.id===de.value));-1!==e&&(se.value.splice(e,1),de.value="all",d.nk.success("视图删除成功"))}))},Ee=()=>{ge.value=!0},Te=({filters:e,logic:l})=>{fe.value=e,ye.value=l,re()},Ie=()=>{ge.value=!1},$e=()=>{he.value=!0},je=()=>{const{level1:e,level2:l,level3:a}=_e.value,t=[e,l,a].filter(Boolean);Fe.value=t[0]||"",re(),he.value=!1},Ne=()=>{_e.value={level1:"",level2:"",level3:""},Fe.value="",re()},Oe=()=>{we.value=!0},Ye=()=>{Ce.value.push({field:"",direction:"asc"})},Be=e=>{Ce.value.splice(e,1)},Me=()=>{re(),we.value=!1},Qe=()=>{Ce.value=[{field:"",direction:"asc"}],re()},qe=()=>{Ve.value=!0},Ge=e=>{We.value.forEach((l=>{l.visible=e}))},He=()=>{},Je=()=>{Re.value=We.value.map((e=>({...e,visible:e.visible}))),Ve.value=!1,d.nk.success("字段配置已更新")},Pe=()=>{Ze(),xe.value=!0},Ze=()=>{We.value=Re.value.map((e=>({...e,visible:!0})))},el=e=>{e.preventDefault(),ve.value=!0,ke.value=e.clientX,be.value=e.clientY},ll=()=>{if(!de.value)return;const e=se.value.find((e=>e.id===de.value));if(e){const l={id:Date.now().toString(),name:`${e.name} (副本)`,columns:[...e.columns],filters:[...e.filters],groupSettings:{...e.groupSettings},sortSettings:[...e.sortSettings]};se.value.push(l),ve.value=!1,d.nk.success("视图复制成功")}};return(0,t.sV)((()=>{Ze(),re()})),(e,l)=>{const n=(0,t.g2)("el-button"),d=(0,t.g2)("el-input"),s=(0,t.g2)("el-option"),re=(0,t.g2)("el-select"),ce=(0,t.g2)("el-form-item"),Ze=(0,t.g2)("el-date-picker"),al=(0,t.g2)("el-form"),tl=(0,t.g2)("el-card"),ol=(0,t.g2)("el-radio-button"),ul=(0,t.g2)("el-radio-group"),il=(0,t.g2)("el-link"),nl=(0,t.g2)("el-tag"),rl=(0,t.g2)("el-table-column"),dl=(0,t.g2)("el-checkbox"),sl=(0,t.g2)("el-checkbox-group"),pl=(0,t.g2)("el-dialog"),cl=(0,t.g2)("el-icon"),vl=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",b,[(0,t.Lk)("div",m,[l[25]||(l[25]=(0,t.Lk)("h2",{class:"page-title"},"异常工单",-1)),(0,t.Lk)("div",g,[(0,t.bF)(n,{type:"primary",onClick:te},{default:(0,t.k6)((()=>l[24]||(l[24]=[(0,t.eW)("提交异常反馈")]))),_:1})])]),(0,t.bF)(tl,{shadow:"never",class:"filter-card"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",f,[(0,t.bF)(d,{modelValue:I.value,"onUpdate:modelValue":l[0]||(l[0]=e=>I.value=e),placeholder:"搜索异常工单 (工单号、主题、订单号...)",class:"search-input",onKeyup:(0,o.jR)(J,["enter"])},{append:(0,t.k6)((()=>[(0,t.bF)(n,{icon:(0,u.R1)(r.vji),onClick:J},null,8,["icon"])])),_:1},8,["modelValue"])]),(0,t.Lk)("div",y,[(0,t.bF)(al,{inline:!0,model:$,size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(ce,{label:"状态"},{default:(0,t.k6)((()=>[(0,t.bF)(re,{modelValue:$.status,"onUpdate:modelValue":l[1]||(l[1]=e=>$.status=e),placeholder:"按状态筛选",clearable:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"待处理",value:"pending"}),(0,t.bF)(s,{label:"处理中",value:"processing"}),(0,t.bF)(s,{label:"待确认",value:"pending_confirmation"}),(0,t.bF)(s,{label:"已解决",value:"resolved"}),(0,t.bF)(s,{label:"已关闭",value:"closed"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(ce,{label:"异常类型"},{default:(0,t.k6)((()=>[(0,t.bF)(re,{modelValue:$.exceptionType,"onUpdate:modelValue":l[2]||(l[2]=e=>$.exceptionType=e),placeholder:"按异常类型筛选",clearable:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"缺货",value:"out_of_stock"}),(0,t.bF)(s,{label:"地址错误",value:"address_error"}),(0,t.bF)(s,{label:"支付问题",value:"payment_issue"}),(0,t.bF)(s,{label:"客户投诉",value:"customer_complaint"}),(0,t.bF)(s,{label:"系统错误",value:"system_error"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(ce,{label:"优先级"},{default:(0,t.k6)((()=>[(0,t.bF)(re,{modelValue:$.priority,"onUpdate:modelValue":l[3]||(l[3]=e=>$.priority=e),placeholder:"按优先级筛选",clearable:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"紧急",value:"urgent"}),(0,t.bF)(s,{label:"高",value:"high"}),(0,t.bF)(s,{label:"中",value:"medium"}),(0,t.bF)(s,{label:"低",value:"low"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(ce,{label:"处理人"},{default:(0,t.k6)((()=>[(0,t.bF)(re,{modelValue:$.assignee,"onUpdate:modelValue":l[4]||(l[4]=e=>$.assignee=e),placeholder:"按处理人筛选",clearable:"",filterable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(ce,{label:"创建时间"},{default:(0,t.k6)((()=>[(0,t.bF)(Ze,{modelValue:$.createdAtRange,"onUpdate:modelValue":l[5]||(l[5]=e=>$.createdAtRange=e),type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","range-separator":"至","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),(0,t.bF)(ce,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,{type:"primary",onClick:J},{default:(0,t.k6)((()=>l[26]||(l[26]=[(0,t.eW)("查询")]))),_:1}),(0,t.bF)(n,{onClick:P},{default:(0,t.k6)((()=>l[27]||(l[27]=[(0,t.eW)("重置")]))),_:1})])),_:1})])),_:1},8,["model"])])])),_:1}),(0,t.Lk)("div",h,[(0,t.bF)(ul,{modelValue:de.value,"onUpdate:modelValue":l[7]||(l[7]=e=>de.value=e),size:"small",class:"status-view-group"},{default:(0,t.k6)((()=>[(0,t.bF)(ol,{value:"all"},{default:(0,t.k6)((()=>l[28]||(l[28]=[(0,t.eW)("全部")]))),_:1}),(0,t.bF)(ol,{value:"pending"},{default:(0,t.k6)((()=>l[29]||(l[29]=[(0,t.eW)("待处理")]))),_:1}),(0,t.bF)(ol,{value:"processing"},{default:(0,t.k6)((()=>l[30]||(l[30]=[(0,t.eW)("处理中")]))),_:1}),(0,t.bF)(ol,{value:"pending_confirmation"},{default:(0,t.k6)((()=>l[31]||(l[31]=[(0,t.eW)("待确认")]))),_:1}),(0,t.bF)(ol,{value:"resolved"},{default:(0,t.k6)((()=>l[32]||(l[32]=[(0,t.eW)("已解决")]))),_:1}),(0,t.bF)(ol,{value:"closed"},{default:(0,t.k6)((()=>l[33]||(l[33]=[(0,t.eW)("已关闭")]))),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(se.value,(e=>((0,t.uX)(),(0,t.Wv)(ol,{key:e.id,label:e.id,onContextmenu:l[6]||(l[6]=(0,o.D$)((e=>el(e)),["prevent"]))},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"]),(0,t.bF)(n,{type:"text",size:"small",onClick:De},{default:(0,t.k6)((()=>l[34]||(l[34]=[(0,t.eW)("新增视图")]))),_:1}),(0,t.bF)(n,{type:"text",size:"small",onClick:$e},{default:(0,t.k6)((()=>l[35]||(l[35]=[(0,t.eW)("高级分组")]))),_:1}),(0,t.bF)(n,{type:"text",size:"small",onClick:Oe},{default:(0,t.k6)((()=>l[36]||(l[36]=[(0,t.eW)("高级排序")]))),_:1}),(0,t.bF)(n,{type:"text",size:"small",onClick:Ee},{default:(0,t.k6)((()=>l[37]||(l[37]=[(0,t.eW)("筛选")]))),_:1}),(0,t.bF)(n,{type:"text",size:"small",onClick:qe},{default:(0,t.k6)((()=>l[38]||(l[38]=[(0,t.eW)("字段配置")]))),_:1})]),(0,t.bF)(tl,{shadow:"never",class:"list-card"},{default:(0,t.k6)((()=>[O.value.length>0?((0,t.uX)(),(0,t.CE)("div",_,[(0,t.Lk)("span",F,"已选择 "+(0,i.v_)(O.value.length)+" 项",1),(0,t.bF)(n,{size:"small",onClick:ne},{default:(0,t.k6)((()=>l[39]||(l[39]=[(0,t.eW)("批量处理")]))),_:1}),(0,t.bF)(n,{size:"small",onClick:ee},{default:(0,t.k6)((()=>l[40]||(l[40]=[(0,t.eW)("清除选择")]))),_:1})])):(0,t.Q3)("",!0),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(c.A,{ref:"mainTable",data:j.value,"row-key":"id","group-fields":Fe.value?[Fe.value]:[],"show-selection":!0,"show-group-column":!!Fe.value,"group-column-label":Fe.value?Xe(Fe.value):"分组","default-expand-all":!1,"show-pagination":!0,"current-page":N.current,"page-size":N.pageSize,"page-sizes":[10,20,50,100],total:N.total,onSelectionChange:Z,onSizeChange:le,onCurrentChange:ae,onCellClick:e.handleCellClick,onCellDblclick:e.handleCellDbClick,style:{width:"100%"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Ae.value,(e=>((0,t.uX)(),(0,t.Wv)(rl,{key:e.prop,label:e.label,prop:e.prop,width:e.width,"min-width":e.minWidth,fixed:e.fixed},(0,t.eX)({_:2},["id"===e.prop?{name:"default",fn:(0,t.k6)((e=>[(0,t.bF)(il,{type:"primary",onClick:l=>oe(e.row.id)},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.row.id),1)])),_:2},1032,["onClick"])])),key:"0"}:"subject"===e.prop?{name:"default",fn:(0,t.k6)((e=>[(0,t.Lk)("div",w,[(0,t.Lk)("span",C,(0,i.v_)(e.row.subject),1),"urgent"===e.row.priority?((0,t.uX)(),(0,t.Wv)(nl,{key:0,type:"danger",size:"small",effect:"dark"},{default:(0,t.k6)((()=>l[41]||(l[41]=[(0,t.eW)("紧急")]))),_:1})):(0,t.Q3)("",!0)])])),key:"1"}:"type"===e.prop?{name:"default",fn:(0,t.k6)((e=>[(0,t.eW)((0,i.v_)(Q(e.row.type)),1)])),key:"2"}:"status"===e.prop?{name:"default",fn:(0,t.k6)((e=>[(0,t.bF)(nl,{type:M(e.row.status),size:"small"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(B(e.row.status)),1)])),_:2},1032,["type"])])),key:"3"}:"priority"===e.prop?{name:"default",fn:(0,t.k6)((e=>[(0,t.bF)(nl,{type:G(e.row.priority),size:"small"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(q(e.row.priority)),1)])),_:2},1032,["type"])])),key:"4"}:"orderNo"===e.prop?{name:"default",fn:(0,t.k6)((e=>[e.row.orderNo?((0,t.uX)(),(0,t.Wv)(il,{key:0,type:"info",onClick:l=>ue(e.row.orderNo)},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.row.orderNo),1)])),_:2},1032,["onClick"])):((0,t.uX)(),(0,t.CE)("span",V,"-"))])),key:"5"}:"remarks"===e.prop?{name:"default",fn:(0,t.k6)((e=>[(0,t.eW)((0,i.v_)(e.row.remarks),1)])),key:"6"}:"assignee"===e.prop?{name:"default",fn:(0,t.k6)((e=>[(0,t.eW)((0,i.v_)(e.row.assignee||"未指派"),1)])),key:"7"}:"createdAt"===e.prop||"updatedAt"===e.prop?{name:"default",fn:(0,t.k6)((l=>[(0,t.eW)((0,i.v_)(Y(l.row[e.prop])),1)])),key:"8"}:"operation"===e.prop?{name:"default",fn:(0,t.k6)((e=>[(0,t.bF)(n,{link:"",type:"primary",onClick:l=>oe(e.row.id)},{default:(0,t.k6)((()=>l[42]||(l[42]=[(0,t.eW)("查看")]))),_:2},1032,["onClick"]),H(e.row)?((0,t.uX)(),(0,t.Wv)(n,{key:0,link:"",type:"primary",onClick:l=>ie(e.row)},{default:(0,t.k6)((()=>l[43]||(l[43]=[(0,t.eW)("处理")]))),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])),key:"9"}:void 0]),1032,["label","prop","width","min-width","fixed"])))),128))])),_:1},8,["data","group-fields","show-group-column","group-column-label","current-page","page-size","total","onCellClick","onCellDblclick"])),[[vl,v.value]])])),_:1}),(0,t.bF)(p.A,{visible:ge.value,"onUpdate:visible":l[8]||(l[8]=e=>ge.value=e),columns:Re.value,"existing-filters":fe.value,"existing-logic":ye.value,onApplyFilters:Te,onCancel:Ie},null,8,["visible","columns","existing-filters","existing-logic"]),(0,t.bF)(pl,{title:"保存视图",modelValue:pe.value,"onUpdate:modelValue":l[12]||(l[12]=e=>pe.value=e),width:"500px"},{footer:(0,t.k6)((()=>[(0,t.bF)(n,{onClick:l[11]||(l[11]=e=>pe.value=!1)},{default:(0,t.k6)((()=>l[44]||(l[44]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(n,{type:"primary",onClick:Se},{default:(0,t.k6)((()=>l[45]||(l[45]=[(0,t.eW)("确定")]))),_:1})])),default:(0,t.k6)((()=>[(0,t.bF)(al,{model:me.value,"label-width":"100px"},{default:(0,t.k6)((()=>[(0,t.bF)(ce,{label:"视图名称",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:me.value.name,"onUpdate:modelValue":l[9]||(l[9]=e=>me.value.name=e),placeholder:"请输入视图名称"},null,8,["modelValue"])])),_:1}),(0,t.bF)(ce,{label:"显示字段"},{default:(0,t.k6)((()=>[(0,t.bF)(sl,{modelValue:me.value.columns,"onUpdate:modelValue":l[10]||(l[10]=e=>me.value.columns=e)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Re.value,(e=>((0,t.uX)(),(0,t.Wv)(dl,{key:e.prop,label:e.prop},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,t.bF)(pl,{title:"分组设置",modelValue:he.value,"onUpdate:modelValue":l[17]||(l[17]=e=>he.value=e),width:"500px"},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",L,[(0,t.bF)(n,{onClick:l[16]||(l[16]=e=>he.value=!1)},{default:(0,t.k6)((()=>l[49]||(l[49]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(n,{type:"danger",onClick:Ne},{default:(0,t.k6)((()=>l[50]||(l[50]=[(0,t.eW)("清除分组")]))),_:1}),(0,t.bF)(n,{type:"primary",onClick:je},{default:(0,t.k6)((()=>l[51]||(l[51]=[(0,t.eW)("应用")]))),_:1})])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",W,[(0,t.Lk)("div",x,[l[46]||(l[46]=(0,t.Lk)("span",{class:"group-level-label"},"一级分组：",-1)),(0,t.bF)(re,{modelValue:_e.value.level1,"onUpdate:modelValue":l[13]||(l[13]=e=>_e.value.level1=e),placeholder:"选择字段",style:{width:"280px"},clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Ke.value,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,t.Lk)("div",R,[l[47]||(l[47]=(0,t.Lk)("span",{class:"group-level-label"},"二级分组：",-1)),(0,t.bF)(re,{modelValue:_e.value.level2,"onUpdate:modelValue":l[14]||(l[14]=e=>_e.value.level2=e),placeholder:"选择字段",style:{width:"280px"},clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Ke.value,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,t.Lk)("div",K,[l[48]||(l[48]=(0,t.Lk)("span",{class:"group-level-label"},"三级分组：",-1)),(0,t.bF)(re,{modelValue:_e.value.level3,"onUpdate:modelValue":l[15]||(l[15]=e=>_e.value.level3=e),placeholder:"选择字段",style:{width:"280px"},clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Ke.value,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])])])),_:1},8,["modelValue"]),(0,t.bF)(pl,{title:"排序设置",modelValue:we.value,"onUpdate:modelValue":l[19]||(l[19]=e=>we.value=e),width:"500px"},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",D,[(0,t.bF)(n,{onClick:l[18]||(l[18]=e=>we.value=!1)},{default:(0,t.k6)((()=>l[54]||(l[54]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(n,{type:"danger",onClick:Qe},{default:(0,t.k6)((()=>l[55]||(l[55]=[(0,t.eW)("清除排序")]))),_:1}),(0,t.bF)(n,{type:"primary",onClick:Me},{default:(0,t.k6)((()=>l[56]||(l[56]=[(0,t.eW)("应用")]))),_:1})])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",A,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Ce.value,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"sort-item"},[(0,t.bF)(re,{modelValue:e.field,"onUpdate:modelValue":l=>e.field=l,placeholder:"选择字段",style:{width:"200px"},clearable:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Le.value,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,t.bF)(re,{modelValue:e.direction,"onUpdate:modelValue":l=>e.direction=l,placeholder:"排序方向",style:{width:"120px"}},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"升序",value:"asc"}),(0,t.bF)(s,{label:"降序",value:"desc"})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,t.bF)(n,{type:"danger",size:"small",onClick:e=>Be(a)},{default:(0,t.k6)((()=>l[52]||(l[52]=[(0,t.eW)("删除")]))),_:2},1032,["onClick"])])))),128)),(0,t.Lk)("div",X,[(0,t.bF)(n,{type:"primary",plain:"",onClick:Ye},{default:(0,t.k6)((()=>l[53]||(l[53]=[(0,t.eW)("添加排序字段")]))),_:1})])])])),_:1},8,["modelValue"]),(0,t.bF)(pl,{title:"字段配置",modelValue:Ve.value,"onUpdate:modelValue":l[23]||(l[23]=e=>Ve.value=e),width:"600px"},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",T,[(0,t.bF)(n,{onClick:l[22]||(l[22]=e=>Ve.value=!1)},{default:(0,t.k6)((()=>l[59]||(l[59]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(n,{type:"primary",onClick:Je},{default:(0,t.k6)((()=>l[60]||(l[60]=[(0,t.eW)("确定")]))),_:1})])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",S,[(0,t.Lk)("div",z,[(0,t.bF)(dl,{modelValue:xe.value,"onUpdate:modelValue":l[20]||(l[20]=e=>xe.value=e),onChange:Ge},{default:(0,t.k6)((()=>l[57]||(l[57]=[(0,t.eW)("全选")]))),_:1},8,["modelValue"]),(0,t.bF)(n,{type:"primary",size:"small",onClick:Pe},{default:(0,t.k6)((()=>l[58]||(l[58]=[(0,t.eW)("重置")]))),_:1})]),(0,t.Lk)("div",U,[(0,t.bF)((0,u.R1)(k()),{modelValue:We.value,"onUpdate:modelValue":l[21]||(l[21]=e=>We.value=e),"item-key":"prop",handle:".drag-handle",onEnd:He},{item:(0,t.k6)((({element:e})=>[(0,t.Lk)("div",E,[(0,t.bF)(cl,{class:"drag-handle"},{default:(0,t.k6)((()=>[(0,t.bF)((0,u.R1)(r.V6m))])),_:1}),(0,t.bF)(dl,{modelValue:e.visible,"onUpdate:modelValue":l=>e.visible=l},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.label),1)])),_:2},1032,["modelValue","onUpdate:modelValue"])])])),_:1},8,["modelValue"])])])])),_:1},8,["modelValue"]),(0,t.bo)((0,t.Lk)("div",{class:"context-menu",style:(0,i.Tr)({left:ke.value+"px",top:be.value+"px"})},[(0,t.Lk)("div",{class:"context-menu-item",onClick:ll},l[61]||(l[61]=[(0,t.Lk)("span",null,"复制视图",-1)])),(0,t.Lk)("div",{class:"context-menu-item",onClick:ze},l[62]||(l[62]=[(0,t.Lk)("span",null,"重命名",-1)])),(0,t.Lk)("div",{class:"context-menu-item",onClick:Ue},l[63]||(l[63]=[(0,t.Lk)("span",null,"删除",-1)]))],4),[[o.aG,ve.value]])])}}};var $=a(6262);const j=(0,$.A)(I,[["__scopeId","data-v-1eb8cc3c"]]),N=j}}]);
//# sourceMappingURL=4556.dce7ab24.js.map