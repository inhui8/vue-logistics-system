(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[8380],{4660:()=>{},8380:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>fe});var t=a(641);const o={class:"logistics-example"},n={class:"dialog-footer"};function i(e,l,a,i,r,d){const s=(0,t.g2)("logistics-table"),p=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),c=(0,t.g2)("el-option"),m=(0,t.g2)("el-select"),b=(0,t.g2)("el-form"),g=(0,t.g2)("el-button"),h=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.CE)("div",o,[l[10]||(l[10]=(0,t.Lk)("h1",null,"物流系统组件示例",-1)),(0,t.bF)(s,{tableId:"logistics-example-table",columns:i.columns,filterFields:i.filterFields,statusOptions:i.statusOptions,batchActions:i.batchActions,operationActions:i.operationActions,onSearch:i.handleSearch,onAdd:i.handleAdd,onExport:i.handleExport,onOperationCommand:i.handleOperationCommand,onCellEditConfirm:i.handleCellEditConfirm},null,8,["columns","filterFields","statusOptions","batchActions","operationActions","onSearch","onAdd","onExport","onOperationCommand","onCellEditConfirm"]),(0,t.bF)(h,{title:"添加数据",visible:i.addDialogVisible,"onUpdate:visible":l[7]||(l[7]=e=>i.addDialogVisible=e),width:"50%"},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",n,[(0,t.bF)(g,{onClick:l[6]||(l[6]=e=>i.addDialogVisible=!1)},{default:(0,t.k6)((()=>l[8]||(l[8]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(g,{type:"primary",onClick:i.submitAddForm},{default:(0,t.k6)((()=>l[9]||(l[9]=[(0,t.eW)("确定")]))),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.bF)(b,{model:i.addForm,"label-width":"100px"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"柜号"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:i.addForm.containerNo,"onUpdate:modelValue":l[0]||(l[0]=e=>i.addForm.containerNo=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"运单号"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:i.addForm.waybillNo,"onUpdate:modelValue":l[1]||(l[1]=e=>i.addForm.waybillNo=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"客服"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:i.addForm.customerService,"onUpdate:modelValue":l[2]||(l[2]=e=>i.addForm.customerService=e),placeholder:"请选择"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.customerServiceOptions,(e=>((0,t.uX)(),(0,t.Wv)(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"原地址信息"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:i.addForm.originalAddress,"onUpdate:modelValue":l[3]||(l[3]=e=>i.addForm.originalAddress=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"地址"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{modelValue:i.addForm.address,"onUpdate:modelValue":l[4]||(l[4]=e=>i.addForm.address=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"状态"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:i.addForm.status,"onUpdate:modelValue":l[5]||(l[5]=e=>i.addForm.status=e),placeholder:"请选择"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.statusOptions,(e=>((0,t.uX)(),(0,t.Wv)(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible"])])}const r={class:"logistics-table-container"};function d(e,l,a,o,n,i){const d=(0,t.g2)("filter-area"),s=(0,t.g2)("el-button"),p=(0,t.g2)("table-toolbar"),u=(0,t.g2)("editable-table-column"),c=(0,t.g2)("el-table-column"),m=(0,t.g2)("operation-column"),b=(0,t.g2)("groupable-table");return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(d,{"filter-fields":a.filterFields,"status-options":a.statusOptions,"show-date-range":!0,"show-status-filter":!0,"date-field":a.dateField,onSearch:o.handleSearch,onReset:o.handleReset},null,8,["filter-fields","status-options","date-field","onSearch","onReset"]),(0,t.bF)(p,{"show-batch-actions":!0,"batch-actions":a.batchActions,"selected-rows":o.selectedRows,"show-export":!0,"show-column-setting":!0,"show-sort":!0,"show-group":!0,columns:a.columns,"default-visible-columns":o.visibleColumns,"default-sort-fields":o.sortFields,"default-group-fields":o.groupFields,onBatchCommand:o.handleBatchCommand,onClearSelection:o.clearSelection,onExport:o.handleExport,"onUpdate:columns":o.handleUpdateColumns,onSortChange:o.handleSortChange,onGroupChange:o.handleGroupChange},{left:(0,t.k6)((()=>[(0,t.bF)(s,{type:"primary",icon:"el-icon-plus",size:"small",onClick:o.handleAdd},{default:(0,t.k6)((()=>l[0]||(l[0]=[(0,t.eW)(" 添加 ")]))),_:1},8,["onClick"])])),right:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"el-icon-refresh",size:"small",onClick:o.handleRefresh},{default:(0,t.k6)((()=>l[1]||(l[1]=[(0,t.eW)(" 刷新 ")]))),_:1},8,["onClick"])])),_:1},8,["batch-actions","selected-rows","columns","default-visible-columns","default-sort-fields","default-group-fields","onBatchCommand","onClearSelection","onExport","onUpdate:columns","onSortChange","onGroupChange"]),(0,t.bF)(b,{data:o.tableData,"row-key":a.rowKey,"group-fields":o.groupFields,"show-selection":!0,"show-group-column":!0,"group-column-label":a.groupColumnLabel,"group-column-width":180,"group-column-fixed":!0,"default-expand-all":!0,"show-pagination":!0,"current-page":o.currentPage,"page-size":o.pageSize,"page-sizes":[10,20,50,100],total:o.total,onSelectionChange:o.handleSelectionChange,onCellClick:o.handleCellClick,onSizeChange:o.handleSizeChange,onCurrentChange:o.handleCurrentChange,onCellDblClick:o.handleCellDblClick,onCellEditConfirm:o.handleCellEditConfirm,onTagClose:o.handleTagClose,border:"",stripe:"","highlight-current-row":""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.renderColumns,(l=>((0,t.uX)(),(0,t.CE)(t.FK,{key:l.prop},[l.editable&&"text"===l.type?((0,t.uX)(),(0,t.Wv)(u,{key:0,prop:l.prop,label:l.label,width:l.width,type:"text",editable:l.editable,"show-summary":l.showSummary,"summary-property":l.summaryProperty,onCellClick:o.handleCellClick,onCellDblClick:o.handleCellDblClick,onCellEditConfirm:o.handleCellEditConfirm},null,8,["prop","label","width","editable","show-summary","summary-property","onCellClick","onCellDblClick","onCellEditConfirm"])):l.editable&&"textarea"===l.type?((0,t.uX)(),(0,t.Wv)(u,{key:1,prop:l.prop,label:l.label,width:l.width,type:"textarea",editable:l.editable,placeholder:l.placeholder,onCellClick:o.handleCellClick,onCellDblClick:o.handleCellDblClick,onCellEditConfirm:o.handleCellEditConfirm},null,8,["prop","label","width","editable","placeholder","onCellClick","onCellDblClick","onCellEditConfirm"])):l.editable&&"datetime"===l.type?((0,t.uX)(),(0,t.Wv)(u,{key:2,prop:l.prop,label:l.label,width:l.width,type:"datetime",editable:l.editable,onCellClick:o.handleCellClick,onCellDblClick:o.handleCellDblClick,onCellEditConfirm:o.handleCellEditConfirm},null,8,["prop","label","width","editable","onCellClick","onCellDblClick","onCellEditConfirm"])):l.editable&&"select"===l.type?((0,t.uX)(),(0,t.Wv)(u,{key:3,prop:l.prop,label:l.label,width:l.width,type:"select",editable:l.editable,options:l.options,onCellClick:o.handleCellClick,onCellDblClick:o.handleCellDblClick,onCellEditConfirm:o.handleCellEditConfirm},null,8,["prop","label","width","editable","options","onCellClick","onCellDblClick","onCellEditConfirm"])):l.editable&&"tags"===l.type?((0,t.uX)(),(0,t.Wv)(u,{key:4,prop:l.prop,label:l.label,width:l.width,type:"tags",editable:l.editable,options:l.options,"get-tag-type":l.getTagType,"get-tag-text":l.getTagText,onCellClick:o.handleCellClick,onCellDblClick:o.handleCellDblClick,onCellEditConfirm:o.handleCellEditConfirm,onTagClose:o.handleTagClose},null,8,["prop","label","width","editable","options","get-tag-type","get-tag-text","onCellClick","onCellDblClick","onCellEditConfirm","onTagClose"])):((0,t.uX)(),(0,t.Wv)(c,{key:5,prop:l.prop,label:l.label,width:l.width,formatter:l.formatter},(0,t.eX)({_:2},[l.slotName?{name:"default",fn:(0,t.k6)((a=>[(0,t.RG)(e.$slots,l.slotName,{row:a.row,column:a.column,index:a.$index},void 0,!0)])),key:"0"}:void 0]),1032,["prop","label","width","formatter"]))],64)))),128)),a.showOperation?((0,t.uX)(),(0,t.Wv)(m,{key:0,label:a.operationColumnLabel,width:a.operationColumnWidth,"button-text":a.operationButtonText,actions:a.operationActions,"additional-buttons":a.operationAdditionalButtons,onCommand:o.handleOperationCommand,onButtonClick:o.handleOperationButtonClick},null,8,["label","width","button-text","actions","additional-buttons","onCommand","onButtonClick"])):(0,t.Q3)("",!0)])),_:3},8,["data","row-key","group-fields","group-column-label","current-page","page-size","total","onSelectionChange","onCellClick","onSizeChange","onCurrentChange","onCellDblClick","onCellEditConfirm","onTagClose"])])}var s=a(953),p=a(6278),u=a(33);const c={class:"filter-area"},m={class:"quick-filter"},b={key:0,class:"filter-tags"},g={class:"filter-list"},h={class:"dialog-footer"};function C(e,l,a,o,n,i){const r=(0,t.g2)("el-button"),d=(0,t.g2)("el-tag"),s=(0,t.g2)("el-option"),p=(0,t.g2)("el-select"),C=(0,t.g2)("el-date-picker"),y=(0,t.g2)("el-input-number"),f=(0,t.g2)("el-input"),k=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.CE)("div",c,[(0,t.Lk)("div",m,[(0,t.bF)(r,{onClick:o.showFilterModal,style:{"margin-left":"10px"}},{default:(0,t.k6)((()=>l[2]||(l[2]=[(0,t.eW)(" 高级筛选 "),(0,t.Lk)("i",{class:"el-icon-arrow-down"},null,-1)]))),_:1},8,["onClick"])]),o.filterTags.length>0?((0,t.uX)(),(0,t.CE)("div",b,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.filterTags,((e,l)=>((0,t.uX)(),(0,t.Wv)(d,{key:l,closable:"",onClose:l=>o.handleTagClose(e),size:"small",type:"info",style:{"margin-right":"5px","margin-bottom":"5px"}},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e.label)+": "+(0,u.v_)(e.value),1)])),_:2},1032,["onClose"])))),128)),(0,t.bF)(r,{type:"text",size:"small",onClick:o.clearAllFilters},{default:(0,t.k6)((()=>l[3]||(l[3]=[(0,t.eW)("清除所有")]))),_:1},8,["onClick"])])):(0,t.Q3)("",!0),(0,t.bF)(k,{modelValue:o.filterModalVisible,"onUpdate:modelValue":l[1]||(l[1]=e=>o.filterModalVisible=e),title:"筛选设置",width:"600px"},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",h,[(0,t.bF)(r,{onClick:l[0]||(l[0]=e=>o.filterModalVisible=!1)},{default:(0,t.k6)((()=>l[6]||(l[6]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(r,{type:"primary",onClick:o.applyFilters},{default:(0,t.k6)((()=>l[7]||(l[7]=[(0,t.eW)("应用筛选")]))),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",g,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.filters,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"filter-item"},[(0,t.bF)(p,{modelValue:e.field,"onUpdate:modelValue":l=>e.field=l,placeholder:"选择字段"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.fieldOptions,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,t.bF)(p,{modelValue:e.operator,"onUpdate:modelValue":l=>e.operator=l,placeholder:"选择操作符"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"等于",value:"eq"}),(0,t.bF)(s,{label:"不等于",value:"neq"}),(0,t.bF)(s,{label:"包含",value:"contains"}),(0,t.bF)(s,{label:"不包含",value:"not_contains"}),(0,t.bF)(s,{label:"大于",value:"gt"}),(0,t.bF)(s,{label:"小于",value:"lt"})])),_:2},1032,["modelValue","onUpdate:modelValue"]),"select"===o.getFieldType(e.field)?((0,t.uX)(),(0,t.Wv)(p,{key:0,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,placeholder:"选择值"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.getFieldOptions(e.field),(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])):"date"===o.getFieldType(e.field)||"datetime"===o.getFieldType(e.field)?((0,t.uX)(),(0,t.Wv)(C,{key:1,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,type:o.getFieldType(e.field),placeholder:"选择日期",style:{width:"200px"}},null,8,["modelValue","onUpdate:modelValue","type"])):"number"===o.getFieldType(e.field)?((0,t.uX)(),(0,t.Wv)(y,{key:2,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,placeholder:"输入值",style:{width:"200px"}},null,8,["modelValue","onUpdate:modelValue"])):((0,t.uX)(),(0,t.Wv)(f,{key:3,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,placeholder:"输入值",style:{width:"200px"}},null,8,["modelValue","onUpdate:modelValue"])),(0,t.bF)(r,{type:"danger",icon:"el-icon-delete",size:"small",onClick:e=>o.removeFilter(a)},{default:(0,t.k6)((()=>l[4]||(l[4]=[(0,t.eW)("删除")]))),_:2},1032,["onClick"])])))),128))]),(0,t.bF)(r,{type:"primary",icon:"el-icon-plus",onClick:o.addFilter},{default:(0,t.k6)((()=>l[5]||(l[5]=[(0,t.eW)("添加筛选条件")]))),_:1},8,["onClick"])])),_:1},8,["modelValue"])])}const y={name:"FilterArea",props:{filterFields:{type:Array,default:()=>[]},statusOptions:{type:Array,default:()=>[]},showDateRange:{type:Boolean,default:!0},showStatusFilter:{type:Boolean,default:!0},dateField:{type:String,default:"createdAt"}},emits:["search","reset","filter-change"],setup(e,{emit:l}){const a=(0,s.KR)(""),o=(0,s.KR)([]),n=(0,s.KR)([]),i=(0,s.KR)([]),r=(0,s.KR)(!1),d=(0,s.KR)([]),p=(0,t.EW)((()=>e.filterFields.map((e=>({label:e.label,prop:e.prop,type:e.type,options:e.options}))))),u=l=>{const a=e.filterFields.find((e=>e.prop===l));return a?a.type:"text"},c=l=>{const a=e.filterFields.find((e=>e.prop===l));return a&&a.options?a.options:[]},m={shortcuts:[{text:"最近一周",onClick(e){const l=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,l])}},{text:"最近一个月",onClick(e){const l=new Date,a=new Date;a.setMonth(a.getMonth()-1),e.$emit("pick",[a,l])}},{text:"最近三个月",onClick(e){const l=new Date,a=new Date;a.setMonth(a.getMonth()-3),e.$emit("pick",[a,l])}}]},b=()=>{const e={keyword:a.value,dateRange:o.value,status:n.value,filters:d.value};l("search",e),w()},g=()=>{a.value="",b()},h=()=>{b()},C=()=>{b()},y=()=>{r.value=!0},f=()=>{d.value.push({field:"",operator:"eq",value:""})},k=e=>{d.value.splice(e,1)},v=()=>{d.value=d.value.filter((e=>e.field&&e.operator&&void 0!==e.value&&""!==e.value)),r.value=!1,b()},w=()=>{if(i.value=[],a.value&&i.value.push({type:"keyword",label:"关键词",value:a.value}),o.value&&2===o.value.length){const[e,l]=o.value;i.value.push({type:"dateRange",label:"日期范围",value:`${e.toLocaleDateString()} - ${l.toLocaleDateString()}`})}if(n.value&&n.value.length>0){const l=n.value.map((l=>{const a=e.statusOptions.find((e=>e.value===l));return a?a.label:l}));i.value.push({type:"status",label:"状态",value:l.join(", ")})}d.value.forEach((e=>{if(e.field&&e.operator&&void 0!==e.value&&""!==e.value){const l=p.value.find((l=>l.prop===e.field)),a=l?l.label:e.field;let t="";switch(e.operator){case"eq":t="等于";break;case"neq":t="不等于";break;case"contains":t="包含";break;case"not_contains":t="不包含";break;case"gt":t="大于";break;case"lt":t="小于";break;default:t=e.operator}let o=e.value;if("select"===u(e.field)){const l=c(e.field),a=l.find((l=>l.value===e.value));o=a?a.label:e.value}i.value.push({type:"filter",field:e.field,operator:e.operator,label:`${a} ${t}`,value:o})}}))},F=e=>{if("keyword"===e.type)a.value="";else if("dateRange"===e.type)o.value=[];else if("status"===e.type)n.value=[];else if("filter"===e.type){const l=d.value.findIndex((l=>l.field===e.field&&l.operator===e.operator));-1!==l&&d.value.splice(l,1)}b()},_=()=>{a.value="",o.value=[],n.value=[],d.value=[],i.value=[],l("reset")};return 0===d.value.length&&f(),{keyword:a,dateRange:o,selectedStatus:n,pickerOptions:m,filterTags:i,filterModalVisible:r,filters:d,fieldOptions:p,handleSearch:b,handleClear:g,handleDateRangeChange:h,handleStatusChange:C,showFilterModal:y,addFilter:f,removeFilter:k,applyFilters:v,handleTagClose:F,clearAllFilters:_,getFieldType:u,getFieldOptions:c}}};var f=a(6262);const k=(0,f.A)(y,[["render",C],["__scopeId","data-v-b54aee48"]]),v=k,w={class:"table-toolbar"},F={class:"left-tools"},_={key:1,class:"selection-info"},x={class:"right-tools"},E={class:"column-setting"},V={class:"column-setting-header"},S={class:"column-setting-body"},A={class:"column-setting-item"},W={class:"column-setting-footer"},T={class:"sort-setting"},X={class:"sort-setting-header"},R={class:"sort-setting-body"},L={key:0,class:"sort-list"},D={class:"sort-label"},U=["onClick"],z={class:"sort-setting-footer"},B={class:"group-setting"},K={class:"group-setting-header"},O={class:"group-setting-body"},G={key:0,class:"group-list"},N={class:"group-label"},I=["onClick"],P={class:"group-setting-footer"};function q(e,l,a,o,n,i){const r=(0,t.g2)("el-button"),d=(0,t.g2)("el-dropdown-item"),s=(0,t.g2)("el-dropdown-menu"),p=(0,t.g2)("el-dropdown"),c=(0,t.g2)("el-checkbox"),m=(0,t.g2)("draggable"),b=(0,t.g2)("el-checkbox-group"),g=(0,t.g2)("el-popover"),h=(0,t.g2)("el-option"),C=(0,t.g2)("el-select"),y=(0,t.g2)("el-form-item"),f=(0,t.g2)("el-radio"),k=(0,t.g2)("el-radio-group"),v=(0,t.g2)("el-form"),q=(0,t.g2)("el-tag");return(0,t.uX)(),(0,t.CE)("div",w,[(0,t.Lk)("div",F,[(0,t.RG)(e.$slots,"left",{},void 0,!0),a.showBatchActions&&a.selectedRows.length>0?((0,t.uX)(),(0,t.Wv)(p,{key:0,onCommand:o.handleBatchCommand},{dropdown:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.batchActions,(e=>((0,t.uX)(),(0,t.Wv)(d,{key:e.command,command:e.command,disabled:e.disabled},{default:(0,t.k6)((()=>[e.icon?((0,t.uX)(),(0,t.CE)("i",{key:0,class:(0,u.C4)(e.icon)},null,2)):(0,t.Q3)("",!0),(0,t.eW)(" "+(0,u.v_)(e.label),1)])),_:2},1032,["command","disabled"])))),128))])),_:1})])),default:(0,t.k6)((()=>[(0,t.bF)(r,{type:"primary",size:"small"},{default:(0,t.k6)((()=>l[7]||(l[7]=[(0,t.eW)(" 批量操作 "),(0,t.Lk)("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)]))),_:1})])),_:1},8,["onCommand"])):(0,t.Q3)("",!0),a.selectedRows.length>0?((0,t.uX)(),(0,t.CE)("span",_,[(0,t.eW)(" 已选择 "+(0,u.v_)(a.selectedRows.length)+" 项 ",1),(0,t.bF)(r,{type:"text",size:"small",onClick:o.handleClearSelection},{default:(0,t.k6)((()=>l[8]||(l[8]=[(0,t.eW)("清除")]))),_:1},8,["onClick"])])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",x,[a.showExport?((0,t.uX)(),(0,t.Wv)(r,{key:0,type:"primary",plain:"",size:"small",icon:"el-icon-download",onClick:o.handleExport},{default:(0,t.k6)((()=>l[9]||(l[9]=[(0,t.eW)(" 导出 ")]))),_:1},8,["onClick"])):(0,t.Q3)("",!0),a.showColumnSetting?((0,t.uX)(),(0,t.Wv)(g,{key:1,placement:"bottom",width:"300",trigger:"click","popper-class":"column-setting-popover"},{reference:(0,t.k6)((()=>[(0,t.bF)(r,{type:"primary",plain:"",size:"small",icon:"el-icon-setting"},{default:(0,t.k6)((()=>l[10]||(l[10]=[(0,t.eW)(" 字段配置 ")]))),_:1})])),default:(0,t.k6)((()=>[(0,t.Lk)("div",E,[(0,t.Lk)("div",V,[l[12]||(l[12]=(0,t.Lk)("span",null,"字段配置",-1)),(0,t.bF)(r,{type:"text",size:"small",onClick:o.handleResetColumns},{default:(0,t.k6)((()=>l[11]||(l[11]=[(0,t.eW)("恢复默认")]))),_:1},8,["onClick"])]),(0,t.Lk)("div",S,[(0,t.bF)(b,{modelValue:o.visibleColumns,"onUpdate:modelValue":l[1]||(l[1]=e=>o.visibleColumns=e)},{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:o.visibleColumns,"onUpdate:modelValue":l[0]||(l[0]=e=>o.visibleColumns=e),handle:".column-drag-handle",onEnd:o.handleDragEnd,"item-key":"prop","ghost-class":"ghost-column",animation:"300"},{item:(0,t.k6)((({element:e})=>[(0,t.Lk)("div",A,[l[13]||(l[13]=(0,t.Lk)("i",{class:"el-icon-rank column-drag-handle"},null,-1)),(0,t.bF)(c,{label:e,disabled:o.isColumnRequired(e)},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(o.getColumnLabel(e)),1)])),_:2},1032,["label","disabled"])])])),_:1},8,["modelValue","onEnd"])])),_:1},8,["modelValue"])]),(0,t.Lk)("div",W,[(0,t.bF)(r,{type:"primary",size:"small",onClick:o.handleApplyColumns},{default:(0,t.k6)((()=>l[14]||(l[14]=[(0,t.eW)("应用")]))),_:1},8,["onClick"])])])])),_:1})):(0,t.Q3)("",!0),a.showSort?((0,t.uX)(),(0,t.Wv)(g,{key:2,placement:"bottom",width:"300",trigger:"click","popper-class":"sort-setting-popover"},{reference:(0,t.k6)((()=>[(0,t.bF)(r,{type:"primary",plain:"",size:"small",icon:"el-icon-sort",class:(0,u.C4)({"is-active":o.sortFields.length>0})},{default:(0,t.k6)((()=>l[15]||(l[15]=[(0,t.eW)(" 排序 ")]))),_:1},8,["class"])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",T,[(0,t.Lk)("div",X,[l[17]||(l[17]=(0,t.Lk)("span",null,"排序设置",-1)),(0,t.bF)(r,{type:"text",size:"small",onClick:o.handleResetSort},{default:(0,t.k6)((()=>l[16]||(l[16]=[(0,t.eW)("清除排序")]))),_:1},8,["onClick"])]),(0,t.Lk)("div",R,[(0,t.bF)(v,{model:o.sortForm,"label-width":"80px",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{label:"排序字段"},{default:(0,t.k6)((()=>[(0,t.bF)(C,{modelValue:o.sortForm.field,"onUpdate:modelValue":l[2]||(l[2]=e=>o.sortForm.field=e),placeholder:"请选择",style:{width:"100%"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.sortableColumns,(e=>((0,t.uX)(),(0,t.Wv)(h,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(y,{label:"排序方式"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{modelValue:o.sortForm.order,"onUpdate:modelValue":l[3]||(l[3]=e=>o.sortForm.order=e)},{default:(0,t.k6)((()=>[(0,t.bF)(f,{label:"ascending"},{default:(0,t.k6)((()=>l[18]||(l[18]=[(0,t.eW)("升序")]))),_:1}),(0,t.bF)(f,{label:"descending"},{default:(0,t.k6)((()=>l[19]||(l[19]=[(0,t.eW)("降序")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(r,{type:"primary",onClick:o.handleAddSort},{default:(0,t.k6)((()=>l[20]||(l[20]=[(0,t.eW)("添加排序")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),o.sortFields.length>0?((0,t.uX)(),(0,t.CE)("div",L,[l[22]||(l[22]=(0,t.Lk)("div",{class:"sort-list-header"},[(0,t.Lk)("span",null,"当前排序")],-1)),(0,t.bF)(m,{modelValue:o.sortFields,"onUpdate:modelValue":l[4]||(l[4]=e=>o.sortFields=e),handle:".sort-drag-handle",onEnd:o.handleSortDragEnd},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.sortFields,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"sort-item"},[l[21]||(l[21]=(0,t.Lk)("i",{class:"el-icon-rank sort-drag-handle"},null,-1)),(0,t.Lk)("span",D,[(0,t.eW)((0,u.v_)(o.getSortLabel(e.field))+" ",1),(0,t.bF)(q,{size:"mini",type:"info"},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)("ascending"===e.order?"升序":"降序"),1)])),_:2},1024)]),(0,t.Lk)("i",{class:"el-icon-close sort-remove",onClick:e=>o.handleRemoveSort(a)},null,8,U)])))),128))])),_:1},8,["modelValue","onEnd"])])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",z,[(0,t.bF)(r,{type:"primary",size:"small",onClick:o.handleApplySort},{default:(0,t.k6)((()=>l[23]||(l[23]=[(0,t.eW)("应用")]))),_:1},8,["onClick"])])])])),_:1})):(0,t.Q3)("",!0),a.showGroup?((0,t.uX)(),(0,t.Wv)(g,{key:3,placement:"bottom",width:"300",trigger:"click","popper-class":"group-setting-popover"},{reference:(0,t.k6)((()=>[(0,t.bF)(r,{type:"primary",plain:"",size:"small",icon:"el-icon-s-fold",class:(0,u.C4)({"is-active":o.groupFields.length>0})},{default:(0,t.k6)((()=>l[24]||(l[24]=[(0,t.eW)(" 分组 ")]))),_:1},8,["class"])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",B,[(0,t.Lk)("div",K,[l[26]||(l[26]=(0,t.Lk)("span",null,"分组设置",-1)),(0,t.bF)(r,{type:"text",size:"small",onClick:o.handleResetGroup},{default:(0,t.k6)((()=>l[25]||(l[25]=[(0,t.eW)("清除分组")]))),_:1},8,["onClick"])]),(0,t.Lk)("div",O,[(0,t.bF)(v,{model:o.groupForm,"label-width":"80px",size:"small"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{label:"分组字段"},{default:(0,t.k6)((()=>[(0,t.bF)(C,{modelValue:o.groupForm.field,"onUpdate:modelValue":l[5]||(l[5]=e=>o.groupForm.field=e),placeholder:"请选择",style:{width:"100%"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.groupableColumns,(e=>((0,t.uX)(),(0,t.Wv)(h,{key:e.prop,label:e.label,value:e.prop},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(r,{type:"primary",onClick:o.handleAddGroup},{default:(0,t.k6)((()=>l[27]||(l[27]=[(0,t.eW)("添加分组")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),o.groupFields.length>0?((0,t.uX)(),(0,t.CE)("div",G,[l[29]||(l[29]=(0,t.Lk)("div",{class:"group-list-header"},[(0,t.Lk)("span",null,"当前分组"),(0,t.Lk)("span",{class:"group-max-tip"},"最多支持3级分组")],-1)),(0,t.bF)(m,{modelValue:o.groupFields,"onUpdate:modelValue":l[6]||(l[6]=e=>o.groupFields=e),handle:".group-drag-handle",onEnd:o.handleGroupDragEnd},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.groupFields,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"group-item"},[l[28]||(l[28]=(0,t.Lk)("i",{class:"el-icon-rank group-drag-handle"},null,-1)),(0,t.Lk)("span",N,[(0,t.bF)(q,{size:"mini",type:o.getGroupLevelType(a)},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(`${a+1}级`),1)])),_:2},1032,["type"]),(0,t.eW)(" "+(0,u.v_)(o.getGroupLabel(e)),1)]),(0,t.Lk)("i",{class:"el-icon-close group-remove",onClick:e=>o.handleRemoveGroup(a)},null,8,I)])))),128))])),_:1},8,["modelValue","onEnd"])])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",P,[(0,t.bF)(r,{type:"primary",size:"small",onClick:o.handleApplyGroup},{default:(0,t.k6)((()=>l[30]||(l[30]=[(0,t.eW)("应用")]))),_:1},8,["onClick"])])])])),_:1})):(0,t.Q3)("",!0),(0,t.RG)(e.$slots,"right",{},void 0,!0)])])}var $=a(432),Q=a.n($);const M={name:"TableToolbar",components:{draggable:Q()},props:{showBatchActions:{type:Boolean,default:!0},batchActions:{type:Array,default:()=>[]},selectedRows:{type:Array,default:()=>[]},showExport:{type:Boolean,default:!0},showColumnSetting:{type:Boolean,default:!0},showSort:{type:Boolean,default:!0},showGroup:{type:Boolean,default:!0},columns:{type:Array,required:!0},defaultVisibleColumns:{type:Array,default:()=>[]},defaultSortFields:{type:Array,default:()=>[]},defaultGroupFields:{type:Array,default:()=>[]}},emits:["batch-command","clear-selection","export","update:columns","sort-change","group-change"],setup(e,{emit:l}){const a=(0,t.EW)((()=>e.columns)),o=(0,t.EW)((()=>e.columns.filter((e=>e.sortable)))),n=(0,t.EW)((()=>e.columns.filter((e=>e.groupable)))),i=(0,s.KR)(e.defaultVisibleColumns&&e.defaultVisibleColumns.length>0?[...e.defaultVisibleColumns]:e.columns.map((e=>e.prop))),r=(0,s.Kh)({field:"",order:"ascending"}),d=(0,s.KR)([...e.defaultSortFields]),p=(0,s.Kh)({field:""}),u=(0,s.KR)([...e.defaultGroupFields]),c=a=>{l("batch-command",{command:a,rows:e.selectedRows})},m=()=>{l("clear-selection")},b=()=>{l("export")},g=()=>{i.value=e.columns.map((e=>e.prop))},h=()=>{const a=[];for(const l of i.value){const t=e.columns.find((e=>e.prop===l));t&&a.push(t)}for(const l of e.columns)i.value.includes(l.prop)||a.push(l);l("update:columns",a)},C=()=>{const a=i.value.map((l=>e.columns.find((e=>e.prop===l)))).filter(Boolean);l("update:columns",a)},y=()=>{d.value=[]},f=()=>{if(!r.field)return;const e=d.value.findIndex((e=>e.field===r.field));e>=0?d.value.splice(e,1,{...r}):d.value.push({...r}),r.field=""},k=e=>{d.value.splice(e,1)},v=()=>{},w=()=>{l("sort-change",d.value)},F=l=>{const a=e.columns.find((e=>e.prop===l));return a?a.label:l},_=()=>{u.value=[]},x=()=>{if(!p.field)return;const e=u.value.findIndex((e=>e===p.field));e>=0||u.value.length>=3||(u.value.push(p.field),p.field="")},E=e=>{u.value.splice(e,1)},V=()=>{},S=()=>{l("group-change",u.value)},A=l=>{const a=e.columns.find((e=>e.prop===l));return a?a.label:l},W=e=>{const l=["primary","success","warning"];return l[e]||"info"},T=l=>{const a=e.columns.find((e=>e.prop===l));return a&&a.required},X=l=>{const a=e.columns.find((e=>e.prop===l));return a?a.label:l};return{allColumns:a,sortableColumns:o,groupableColumns:n,visibleColumns:i,sortForm:r,sortFields:d,groupForm:p,groupFields:u,handleBatchCommand:c,handleClearSelection:m,handleExport:b,handleResetColumns:g,handleDragEnd:h,handleApplyColumns:C,handleResetSort:y,handleAddSort:f,handleRemoveSort:k,handleSortDragEnd:v,handleApplySort:w,getSortLabel:F,handleResetGroup:_,handleAddGroup:x,handleRemoveGroup:E,handleGroupDragEnd:V,handleApplyGroup:S,getGroupLabel:A,getGroupLevelType:W,isColumnRequired:T,getColumnLabel:X}}},j=(0,f.A)(M,[["render",q],["__scopeId","data-v-0baa24e1"]]),Z=j;var H=a(2998),J=a(3751);const Y={key:0,class:"group-summary"},ee=["onDblclick"],le=["onClick"],ae=["onClick"],te=["onClick"],oe={key:2};function ne(e,l,a,o,n,i){const r=(0,t.g2)("el-input"),d=(0,t.g2)("el-date-picker"),s=(0,t.g2)("el-option"),p=(0,t.g2)("el-select"),c=(0,t.g2)("el-tag"),m=(0,t.g2)("el-table-column"),b=(0,t.gN)("focus");return(0,t.uX)(),(0,t.Wv)(m,{prop:a.prop,label:a.label,width:a.width},{default:(0,t.k6)((e=>[e.row.isGroup&&a.showSummary?((0,t.uX)(),(0,t.CE)("span",Y,(0,u.v_)(o.getSummaryValue(e.row)),1)):!e.row.isGroup&&a.editable?((0,t.uX)(),(0,t.CE)("div",{key:1,class:"editable-cell",onDblclick:l=>o.handleCellDblClick(e.row,a.prop)},[e.row.editing===a.prop&&"text"===a.type?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(r,{key:0,modelValue:e.row[a.prop],"onUpdate:modelValue":l=>e.row[a.prop]=l,size:"small",onBlur:l=>o.handleCellEditConfirm(e.row,a.prop),onKeyup:(0,J.jR)((l=>o.handleCellEditConfirm(e.row,a.prop)),["enter"])},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeyup"])),[[b]]):e.row.editing===a.prop&&"textarea"===a.type?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(r,{key:1,modelValue:e.row[a.prop],"onUpdate:modelValue":l=>e.row[a.prop]=l,type:"textarea",size:"small",onBlur:l=>o.handleCellEditConfirm(e.row,a.prop)},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[b]]):e.row.editing===a.prop&&"datetime"===a.type?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(d,{key:2,modelValue:e.row[a.prop],"onUpdate:modelValue":l=>e.row[a.prop]=l,type:"datetime",size:"small",onBlur:l=>o.handleCellEditConfirm(e.row,a.prop)},null,8,["modelValue","onUpdate:modelValue","onBlur"])),[[b]]):e.row.editing===a.prop&&"select"===a.type?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(p,{key:3,modelValue:e.row[a.prop],"onUpdate:modelValue":l=>e.row[a.prop]=l,size:"small",onBlur:l=>o.handleCellEditConfirm(e.row,a.prop)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.options,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onBlur"])),[[b]]):e.row.editing===a.prop&&"tags"===a.type?(0,t.bo)(((0,t.uX)(),(0,t.Wv)(p,{key:4,modelValue:e.row[a.prop],"onUpdate:modelValue":l=>e.row[a.prop]=l,multiple:"",filterable:"","allow-create":"","default-first-option":"","collapse-tags":"",size:"small",onBlur:l=>o.handleCellEditConfirm(e.row,a.prop)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.options,(e=>((0,t.uX)(),(0,t.Wv)(s,{key:"object"===typeof e?e.value:e,label:"object"===typeof e?e.label:e,value:"object"===typeof e?e.value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onBlur"])),[[b]]):"tags"===a.type?((0,t.uX)(),(0,t.CE)("div",{key:5,class:"tags-wrapper",onClick:l=>o.handleCellClick(e.row,a.prop)},[Array.isArray(e.row[a.prop])&&e.row[a.prop].length>0?((0,t.uX)(!0),(0,t.CE)(t.FK,{key:0},(0,t.pI)(e.row[a.prop],(l=>((0,t.uX)(),(0,t.Wv)(c,{key:l,type:a.getTagType?a.getTagType(l):"",size:"small",closable:"",onClose:(0,J.D$)((t=>o.handleTagClose(e.row,a.prop,l)),["stop"])},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(a.getTagText?a.getTagText(l):l),1)])),_:2},1032,["type","onClose"])))),128)):"string"===typeof e.row[a.prop]&&e.row[a.prop]?((0,t.uX)(),(0,t.Wv)(c,{key:1,type:a.getTagType?a.getTagType(e.row[a.prop]):"",size:"small",closable:"",onClose:(0,J.D$)((l=>o.handleTagClose(e.row,a.prop,e.row[a.prop])),["stop"])},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(a.getTagText?a.getTagText(e.row[a.prop]):e.row[a.prop]),1)])),_:2},1032,["type","onClose"])):((0,t.uX)(),(0,t.Wv)(c,{key:2,size:"small",type:"info"},{default:(0,t.k6)((()=>l[0]||(l[0]=[(0,t.eW)("未设置")]))),_:1}))],8,le)):"textarea"===a.type?((0,t.uX)(),(0,t.CE)("div",{key:6,onClick:l=>o.handleCellClick(e.row,a.prop),class:"cell-content"},(0,u.v_)(e.row[a.prop]||a.placeholder||"暂无内容"),9,ae)):((0,t.uX)(),(0,t.CE)("span",{key:7,onClick:l=>o.handleCellClick(e.row,a.prop)},(0,u.v_)(e.row[a.prop]),9,te))],40,ee)):((0,t.uX)(),(0,t.CE)("span",oe,(0,u.v_)(e.row[a.prop]),1))])),_:1},8,["prop","label","width"])}const ie={name:"EditableTableColumn",props:{prop:{type:String,required:!0},label:{type:String,required:!0},width:{type:[String,Number],default:"auto"},type:{type:String,default:"text",validator:e=>["text","textarea","datetime","select","tags"].includes(e)},editable:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},showSummary:{type:Boolean,default:!1},summaryProperty:{type:String,default:""},getTagType:{type:Function,default:null},getTagText:{type:Function,default:null}},emits:["cell-click","cell-dbl-click","cell-edit-confirm","tag-close"],setup(e,{emit:l}){const a=(e,a)=>{l("cell-click",e,a)},t=(e,a)=>{l("cell-dbl-click",e,a)},o=(e,a)=>{l("cell-edit-confirm",e,a)},n=(e,a,t)=>{l("tag-close",e,a,t)},i=l=>e.summaryProperty&&l[e.summaryProperty]?l[e.summaryProperty]:"number"===typeof l[e.prop]?l[e.prop].toFixed(2):l[e.prop];return{handleCellClick:a,handleCellDblClick:t,handleCellEditConfirm:o,handleTagClose:n,getSummaryValue:i}}},re=(0,f.A)(ie,[["render",ne],["__scopeId","data-v-c7e0105a"]]),de=re,se={key:0};function pe(e,l,a,o,n,i){const r=(0,t.g2)("el-button"),d=(0,t.g2)("el-dropdown-item"),s=(0,t.g2)("el-dropdown-menu"),p=(0,t.g2)("el-dropdown"),c=(0,t.g2)("el-table-column");return(0,t.uX)(),(0,t.Wv)(c,{label:a.label,width:a.width,fixed:"right"},{default:(0,t.k6)((e=>[e.row.isGroup?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",se,[(0,t.bF)(p,{trigger:"click",onCommand:l=>o.handleCommand(l,e.row)},{dropdown:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.actions,(l=>((0,t.uX)(),(0,t.Wv)(d,{key:l.command,command:l.command,disabled:!(!l.disabled||"function"!==typeof l.disabled)&&l.disabled(e.row)},{default:(0,t.k6)((()=>[l.icon?((0,t.uX)(),(0,t.CE)("i",{key:0,class:(0,u.C4)(l.icon)},null,2)):(0,t.Q3)("",!0),(0,t.eW)(" "+(0,u.v_)(l.label),1)])),_:2},1032,["command","disabled"])))),128))])),_:2},1024)])),default:(0,t.k6)((()=>[(0,t.bF)(r,{size:"small",type:"primary"},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(a.buttonText)+" ",1),l[0]||(l[0]=(0,t.Lk)("i",{class:"el-icon-arrow-down el-icon--right"},null,-1))])),_:1})])),_:2},1032,["onCommand"]),a.additionalButtons&&a.additionalButtons.length>0?((0,t.uX)(!0),(0,t.CE)(t.FK,{key:0},(0,t.pI)(a.additionalButtons,(l=>((0,t.uX)(),(0,t.Wv)(r,{key:l.command,type:l.type||"default",size:l.size||"small",disabled:!(!l.disabled||"function"!==typeof l.disabled)&&l.disabled(e.row),onClick:a=>o.handleButtonClick(l.command,e.row)},{default:(0,t.k6)((()=>[l.icon?((0,t.uX)(),(0,t.CE)("i",{key:0,class:(0,u.C4)(l.icon)},null,2)):(0,t.Q3)("",!0),(0,t.eW)(" "+(0,u.v_)(l.label),1)])),_:2},1032,["type","size","disabled","onClick"])))),128)):(0,t.Q3)("",!0)]))])),_:1},8,["label","width"])}const ue={name:"OperationColumn",props:{label:{type:String,default:"操作"},width:{type:[String,Number],default:120},buttonText:{type:String,default:"操作"},actions:{type:Array,default:()=>[]},additionalButtons:{type:Array,default:()=>[]}},emits:["command","button-click"],setup(e,{emit:l}){const a=(e,a)=>{l("command",{command:e,row:a})},t=(e,a)=>{l("button-click",{command:e,row:a})};return{handleCommand:a,handleButtonClick:t}}},ce=(0,f.A)(ue,[["render",pe],["__scopeId","data-v-bb6315d0"]]),me=ce,be={name:"LogisticsTable",components:{FilterArea:v,TableToolbar:Z,GroupableTable:H.A,EditableTableColumn:de,OperationColumn:me},props:{tableId:{type:String,default:"logistics-table"},rowKey:{type:String,default:"id"},columns:{type:Array,required:!0},initialVisibleColumns:{type:Array,default:()=>[]},filterFields:{type:Array,default:()=>[]},statusOptions:{type:Array,default:()=>[]},dateField:{type:String,default:"createdAt"},batchActions:{type:Array,default:()=>[]},groupColumnLabel:{type:String,default:"分组"},showOperation:{type:Boolean,default:!0},operationColumnLabel:{type:String,default:"操作"},operationColumnWidth:{type:[String,Number],default:120},operationButtonText:{type:String,default:"操作"},operationActions:{type:Array,default:()=>[]},operationAdditionalButtons:{type:Array,default:()=>[]}},emits:["search","reset","add","refresh","export","batch-command","selection-change","cell-click","cell-dbl-click","cell-edit-confirm","tag-close","size-change","current-change","operation-command","operation-button-click"],setup(e,{emit:l}){const a=(0,p.Pj)(),o=(0,s.KR)([]),n=(0,s.KR)([]),i=(0,s.KR)(e.initialVisibleColumns&&e.initialVisibleColumns.length>0?[...e.initialVisibleColumns]:e.columns.map((e=>e.prop))),r=(0,t.EW)((()=>e.columns.filter((e=>i.value.includes(e.prop))).sort(((e,l)=>{const a=i.value.indexOf(e.prop),t=i.value.indexOf(l.prop);return a-t})))),d=(0,s.KR)([]),u=(0,s.KR)([]),c=(0,s.KR)(1),m=(0,s.KR)(20),b=(0,s.KR)(0),g=(0,s.Kh)({keyword:"",status:[],dateRange:null,advanced:{},sort:[],page:c.value,limit:m.value}),h=async()=>{try{if(u.value.length>0){const e=await a.dispatch("applyGroup",{data:a.state.tableData,groupFields:u.value});o.value=e}else o.value=a.state.tableData||[];b.value=a.state.totalCount||o.value.length}catch(e){console.error("加载表格数据失败",e)}},C=e=>{Object.assign(g,e),g.page=1,c.value=1,l("search",g),h()},y=()=>{Object.keys(g).forEach((e=>{"page"!==e&&"limit"!==e&&(g[e]=Array.isArray(g[e])?[]:"")})),l("reset"),h()},f=()=>{l("add")},k=()=>{l("refresh"),h()},v=()=>{l("export",{data:n.value.length>0?n.value:o.value,columns:r.value,filename:`${e.tableId}-export-${(new Date).getTime()}.xlsx`})},w=e=>{l("batch-command",e)},F=e=>{n.value=e,l("selection-change",e)},_=()=>{n.value=[]},x=e=>{i.value=e.map((e=>e.prop))},E=e=>{d.value=e,g.sort=e,l("sort-change",e),h()},V=e=>{u.value=e,l("group-change",e),h()},S=(e,a,t,o)=>{l("cell-click",e,a,t,o)},A=(e,a)=>{e.isGroup||(e.editing=a),l("cell-dbl-click",e,a)},W=(e,a)=>{e.editing=null,l("cell-edit-confirm",e,a)},T=(e,a,t)=>{if(Array.isArray(e[a])){const l=e[a].indexOf(t);-1!==l&&e[a].splice(l,1)}else e[a]="";l("tag-close",e,a,t)},X=e=>{m.value=e,g.limit=e,l("size-change",e),h()},R=e=>{c.value=e,g.page=e,l("current-change",e),h()},L=e=>{l("operation-command",e)},D=e=>{l("operation-button-click",e)};return(0,t.sV)((()=>{h()})),{tableData:o,selectedRows:n,visibleColumns:i,renderColumns:r,sortFields:d,groupFields:u,currentPage:c,pageSize:m,total:b,handleSearch:C,handleReset:y,handleAdd:f,handleRefresh:k,handleExport:v,handleBatchCommand:w,handleSelectionChange:F,clearSelection:_,handleUpdateColumns:x,handleSortChange:E,handleGroupChange:V,handleCellClick:S,handleCellDblClick:A,handleCellEditConfirm:W,handleTagClose:T,handleSizeChange:X,handleCurrentChange:R,handleOperationCommand:L,handleOperationButtonClick:D}}},ge=(0,f.A)(be,[["render",d],["__scopeId","data-v-6c288434"]]),he=ge;a(4660);H.A;const Ce={name:"LogisticsExample",components:{LogisticsTable:he},setup(){const e=(0,p.Pj)(),l=(0,s.KR)(!1),a=(0,s.Kh)({containerNo:"",waybillNo:"",customerService:"",originalAddress:"",address:"",status:""}),o=[{value:"张三",label:"张三"},{value:"李四",label:"李四"},{value:"王五",label:"王五"}],n=[{value:"created",label:"已创建"},{value:"processing",label:"处理中"},{value:"shipped",label:"已发货"},{value:"delivered",label:"已送达"},{value:"completed",label:"已完成"},{value:"cancelled",label:"已取消"}],i=[{label:"批量删除",command:"batch-delete",icon:"el-icon-delete"},{label:"批量导出",command:"batch-export",icon:"el-icon-download"},{label:"批量更新状态",command:"batch-update-status",icon:"el-icon-edit"}],r=[{label:"编辑",command:"edit",icon:"el-icon-edit"},{label:"删除",command:"delete",icon:"el-icon-delete"},{label:"查看详情",command:"view",icon:"el-icon-view"},{label:"导出",command:"export",icon:"el-icon-download"}],d=[{prop:"containerNo",label:"柜号",width:150,required:!0,sortable:!0,groupable:!0,showSummary:!0,summaryProperty:"containerNoSummary"},{prop:"waybillNo",label:"运单号",width:180,required:!0,sortable:!0,groupable:!0,showSummary:!0,summaryProperty:"waybillNoSummary"},{prop:"customerService",label:"客服",width:120,sortable:!0,groupable:!0},{prop:"originalAddress",label:"原地址信息",width:200},{prop:"address",label:"地址",width:200,editable:!0,type:"text"},{prop:"status",label:"状态",width:120,editable:!0,type:"select",options:n,sortable:!0,groupable:!0,formatter:(e,l,a)=>{const t=n.find((e=>e.value===a));return t?t.label:a}},{prop:"tags",label:"标签",width:150,editable:!0,type:"tags",options:["重要","紧急","特殊处理","已确认","待跟进"],getTagType:e=>{const l={重要:"danger",紧急:"warning",特殊处理:"info",已确认:"success",待跟进:""};return l[e]||""}},{prop:"followUpRecord",label:"跟进记录",width:200,editable:!0,type:"textarea"},{prop:"memo",label:"备注",width:200,editable:!0,type:"textarea"},{prop:"internalNote",label:"内部备注",width:200},{prop:"boxCount",label:"箱数",width:100,sortable:!0,showSummary:!0,summaryProperty:"totalBoxCount"},{prop:"weight",label:"重量",width:100,sortable:!0,showSummary:!0,summaryProperty:"totalWeight"},{prop:"volume",label:"方数",width:100,sortable:!0,showSummary:!0,summaryProperty:"totalVolume"},{prop:"createdAt",label:"创建时间",width:180,sortable:!0,formatter:(e,l,a)=>a?new Date(a).toLocaleString():""}],u=[{label:"柜号",prop:"containerNo",type:"text"},{label:"运单号",prop:"waybillNo",type:"text"},{label:"客服",prop:"customerService",type:"select",options:o},{label:"原地址信息",prop:"originalAddress",type:"text"},{label:"地址",prop:"address",type:"text"},{label:"City",prop:"city",type:"text"},{label:"State",prop:"state",type:"text"},{label:"Zip_Code",prop:"zipCode",type:"text"},{label:"派送区域",prop:"deliveryArea",type:"text"},{label:"仓库代码",prop:"warehouseCode",type:"text"},{label:"渠道",prop:"channel",type:"select",options:[{value:"空运",label:"空运"},{value:"海运",label:"海运"},{value:"陆运",label:"陆运"}]},{label:"箱数",prop:"boxCount",type:"number"},{label:"重量",prop:"weight",type:"number"},{label:"方数",prop:"volume",type:"number"},{label:"板数",prop:"palletCount",type:"number"},{label:"库位",prop:"location",type:"text"},{label:"ETA",prop:"eta",type:"date"},{label:"提柜时间",prop:"pickupTime",type:"datetime"},{label:"抵仓时间",prop:"arrivalTime",type:"datetime"},{label:"预计拆柜时间",prop:"expectedUnloadingTime",type:"datetime"},{label:"拆柜完成时间",prop:"unloadingTime",type:"datetime"},{label:"预约号",prop:"appointmentNo",type:"text"},{label:"派送预约时间",prop:"deliveryAppointmentTime",type:"datetime"},{label:"送货时间",prop:"deliveryTime",type:"datetime"},{label:"送货公司",prop:"deliveryCompany",type:"text"},{label:"送货司机",prop:"deliveryDriver",type:"text"},{label:"司机电话",prop:"deliveryPhone",type:"text"},{label:"PC号",prop:"pcNo",type:"text"},{label:"预约状态",prop:"status",type:"select",options:n},{label:"标签",prop:"tags",type:"multiselect",options:[{value:"重要",label:"重要"},{value:"紧急",label:"紧急"},{value:"特殊处理",label:"特殊处理"},{value:"已确认",label:"已确认"},{value:"待跟进",label:"待跟进"}]},{label:"跟进记录",prop:"followUpRecord",type:"text"},{label:"备注",prop:"memo",type:"text"},{label:"内部备注",prop:"internalNote",type:"text"},{label:"唛头",prop:"shippingMark",type:"text"},{label:"询价平台报价",prop:"inquiryPrice",type:"number"},{label:"创建时间",prop:"createdAt",type:"daterange"}],c=e=>{console.log("搜索参数:",e)},m=()=>{l.value=!0},b=()=>{console.log("添加数据:",a),l.value=!1,Object.keys(a).forEach((e=>{a[e]=""}))},g=e=>{console.log("导出参数:",e)},h=e=>{console.log("操作命令:",e);const{command:l}=e;switch(l){case"edit":break;case"delete":break;case"view":break;case"export":break;default:break}},C=(e,l)=>{console.log("单元格编辑确认:",e,l)};return(0,t.sV)((async()=>{const l=[{id:1,containerNo:"C-001",waybillNo:"W-00101",customerService:"张三",originalAddress:"上海市浦东新区张江高科",address:"上海市浦东新区张江高科1号",status:"processing",tags:["重要","紧急"],followUpRecord:"",memo:"",internalNote:"内部备注1",boxCount:10,weight:100.5,volume:5.2,createdAt:new Date("2023-05-01").getTime()},{id:2,containerNo:"C-002",waybillNo:"W-00201",customerService:"李四",originalAddress:"北京市海淀区中关村",address:"北京市海淀区中关村软件园",status:"delivered",tags:["已确认"],followUpRecord:"客户已确认收货",memo:"客户要求周末送货",internalNote:"内部备注2",boxCount:5,weight:50.8,volume:2.1,createdAt:new Date("2023-05-02").getTime()},{id:3,containerNo:"C-003",waybillNo:"W-00301",customerService:"王五",originalAddress:"广州市天河区天河路",address:"广州市天河区天河路1号",status:"completed",tags:["特殊处理","已确认"],followUpRecord:"已完成，客户满意",memo:"需要提前通知",internalNote:"内部备注3",boxCount:8,weight:80.3,volume:4.5,createdAt:new Date("2023-05-03").getTime()}];e.commit("SET_TABLE_DATA",l)})),{columns:d,filterFields:u,statusOptions:n,batchActions:i,operationActions:r,addDialogVisible:l,addForm:a,customerServiceOptions:o,handleSearch:c,handleAdd:m,submitAddForm:b,handleExport:g,handleOperationCommand:h,handleCellEditConfirm:C}}},ye=(0,f.A)(Ce,[["render",i],["__scopeId","data-v-04b74f02"]]),fe=ye}}]);
//# sourceMappingURL=8380.cb8eaf7a.js.map