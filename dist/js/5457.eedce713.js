"use strict";(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[5457],{5457:(e,l,a)=>{a.r(l),a.d(l,{default:()=>U});var t=a(641),o=a(33);const n={class:"batch-detail-container"},d={class:"detail-header"},u={class:"header-actions"},p={class:"basic-info-section"},i={class:"pc-detail-section"},s={class:"section-header"},r={class:"section-actions"},b={key:0,style:{color:"#1890ff"}},m={key:1},c={class:"expense-detail-section"},k={class:"expense-header"},h={class:"expense-actions"},f={class:"expense-summary"},F={class:"total-amount"},y={class:"paid-amount"},w={class:"unpaid-amount"},v={class:"file-upload-section"},g={class:"upload-header"},C={class:"dialog-footer"},_={class:"dialog-footer"},x={class:"dialog-footer"};function V(e,l,a,V,T,P){const E=(0,t.g2)("el-button"),S=(0,t.g2)("el-descriptions-item"),W=(0,t.g2)("el-option"),N=(0,t.g2)("el-select"),U=(0,t.g2)("el-date-picker"),L=(0,t.g2)("el-input"),I=(0,t.g2)("el-tag"),z=(0,t.g2)("el-input-number"),D=(0,t.g2)("el-descriptions"),K=(0,t.g2)("el-tab-pane"),R=(0,t.g2)("el-table-column"),A=(0,t.g2)("el-dropdown-item"),B=(0,t.g2)("el-dropdown-menu"),O=(0,t.g2)("el-dropdown"),$=(0,t.g2)("el-table"),X=(0,t.g2)("el-tabs"),M=(0,t.g2)("el-dialog"),j=(0,t.g2)("el-form-item"),Q=(0,t.g2)("el-form"),G=(0,t.g2)("el-upload");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.Lk)("div",d,[(0,t.bF)(E,{onClick:V.goBack,icon:"el-icon-back"},{default:(0,t.k6)((()=>l[25]||(l[25]=[(0,t.eW)("返回")]))),_:1},8,["onClick"]),l[28]||(l[28]=(0,t.Lk)("div",{class:"header-title"},"出库批次详情",-1)),(0,t.Lk)("div",u,[(0,t.bF)(E,{type:"primary",onClick:V.handleEdit},{default:(0,t.k6)((()=>l[26]||(l[26]=[(0,t.eW)("编辑")]))),_:1},8,["onClick"]),(0,t.bF)(E,{onClick:V.handleExport},{default:(0,t.k6)((()=>l[27]||(l[27]=[(0,t.eW)("导出")]))),_:1},8,["onClick"])])]),(0,t.bF)(X,{modelValue:V.activeTab,"onUpdate:modelValue":l[12]||(l[12]=e=>V.activeTab=e),class:"detail-tabs"},{default:(0,t.k6)((()=>[(0,t.bF)(K,{label:"基本信息",name:"basic"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",p,[l[29]||(l[29]=(0,t.Lk)("h3",{class:"section-title"},"批次基本信息",-1)),(0,t.bF)(D,{column:3,border:""},{default:(0,t.k6)((()=>[(0,t.bF)(S,{label:"批次号"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(V.basicInfo.batchNumber),1)])),_:1}),(0,t.bF)(S,{label:"装车类型"},{default:(0,t.k6)((()=>[(0,t.bF)(N,{modelValue:V.basicInfo.loadingType,"onUpdate:modelValue":l[0]||(l[0]=e=>V.basicInfo.loadingType=e),size:"small",style:{width:"120px"}},{default:(0,t.k6)((()=>[(0,t.bF)(W,{label:"卡板",value:"卡板"}),(0,t.bF)(W,{label:"地板",value:"地板"}),(0,t.bF)(W,{label:"混装",value:"混装"}),(0,t.bF)(W,{label:"快递",value:"快递"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(S,{label:"派送标签"},{default:(0,t.k6)((()=>[(0,t.bF)(N,{modelValue:V.basicInfo.deliveryTag,"onUpdate:modelValue":l[1]||(l[1]=e=>V.basicInfo.deliveryTag=e),size:"small",style:{width:"120px"}},{default:(0,t.k6)((()=>[(0,t.bF)(W,{label:"优先派送",value:"优先派送"}),(0,t.bF)(W,{label:"标准派送",value:"标准派送"}),(0,t.bF)(W,{label:"特殊派送",value:"特殊派送"}),(0,t.bF)(W,{label:"自提",value:"自提"}),(0,t.bF)(W,{label:"快递派送",value:"快递派送"}),(0,t.bF)(W,{label:"整车运输",value:"整车运输"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(S,{label:"创建时间"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(V.basicInfo.createTime),1)])),_:1}),(0,t.bF)(S,{label:"预约日期"},{default:(0,t.k6)((()=>[(0,t.bF)(U,{modelValue:V.basicInfo.appointmentDate,"onUpdate:modelValue":l[2]||(l[2]=e=>V.basicInfo.appointmentDate=e),type:"datetime",size:"small",style:{width:"180px"},placeholder:"选择日期时间"},null,8,["modelValue"])])),_:1}),(0,t.bF)(S,{label:"预约号"},{default:(0,t.k6)((()=>[(0,t.bF)(L,{modelValue:V.basicInfo.appointmentNumber,"onUpdate:modelValue":l[3]||(l[3]=e=>V.basicInfo.appointmentNumber=e),size:"small",style:{width:"120px"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(S,{label:"派送方式"},{default:(0,t.k6)((()=>[(0,t.bF)(N,{modelValue:V.basicInfo.deliveryMethod,"onUpdate:modelValue":l[4]||(l[4]=e=>V.basicInfo.deliveryMethod=e),size:"small",style:{width:"120px"}},{default:(0,t.k6)((()=>[(0,t.bF)(W,{label:"自配送",value:"自配送"}),(0,t.bF)(W,{label:"第三方",value:"第三方"}),(0,t.bF)(W,{label:"快递",value:"快递"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(S,{label:"创建人"},{default:(0,t.k6)((()=>[(0,t.bF)(L,{modelValue:V.basicInfo.creator,"onUpdate:modelValue":l[5]||(l[5]=e=>V.basicInfo.creator=e),size:"small",disabled:"",style:{width:"120px"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(S,{label:"供应商"},{default:(0,t.k6)((()=>[(0,t.bF)(N,{modelValue:V.basicInfo.supplier,"onUpdate:modelValue":l[6]||(l[6]=e=>V.basicInfo.supplier=e),size:"small",style:{width:"150px"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(V.supplierOptions,(e=>((0,t.uX)(),(0,t.Wv)(W,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(S,{label:"状态"},{default:(0,t.k6)((()=>[(0,t.bF)(I,{type:V.getBatchStatusType(V.basicInfo.batchStatus)},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(V.basicInfo.batchStatus),1)])),_:1},8,["type"])])),_:1}),(0,t.bF)(S,{label:"卡板数"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{modelValue:V.basicInfo.palletCount,"onUpdate:modelValue":l[7]||(l[7]=e=>V.basicInfo.palletCount=e),size:"small",min:0,style:{width:"120px"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(S,{label:"出库体积"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{modelValue:V.basicInfo.outboundVolume,"onUpdate:modelValue":l[8]||(l[8]=e=>V.basicInfo.outboundVolume=e),size:"small",min:0,precision:2,style:{width:"120px"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(S,{label:"目的地"},{default:(0,t.k6)((()=>[(0,t.bF)(L,{modelValue:V.basicInfo.destination,"onUpdate:modelValue":l[9]||(l[9]=e=>V.basicInfo.destination=e),size:"small",style:{width:"150px"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(S,{label:"备注"},{default:(0,t.k6)((()=>[(0,t.bF)(L,{modelValue:V.basicInfo.remark,"onUpdate:modelValue":l[10]||(l[10]=e=>V.basicInfo.remark=e),size:"small",style:{width:"200px"}},null,8,["modelValue"])])),_:1})])),_:1})])])),_:1}),(0,t.bF)(K,{label:"PC明细",name:"pc"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",i,[(0,t.Lk)("div",s,[l[32]||(l[32]=(0,t.Lk)("h3",{class:"section-title"},"PC明细",-1)),(0,t.Lk)("div",r,[(0,t.bF)(E,{type:"primary",size:"small",onClick:V.handleAddPC},{default:(0,t.k6)((()=>l[30]||(l[30]=[(0,t.eW)("添加PC")]))),_:1},8,["onClick"]),(0,t.bF)(E,{size:"small",onClick:V.handleExportPC},{default:(0,t.k6)((()=>l[31]||(l[31]=[(0,t.eW)("导出PC")]))),_:1},8,["onClick"])])]),(0,t.bF)($,{data:V.pcDetailData,border:"",style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(R,{type:"selection",width:"55"}),(0,t.bF)(R,{prop:"pcNumber",label:"PC号",width:"120"}),(0,t.bF)(R,{prop:"appointmentParty",label:"预约方",width:"100"},{default:(0,t.k6)((e=>[(0,t.bF)(L,{modelValue:e.row.appointmentParty,"onUpdate:modelValue":l=>e.row.appointmentParty=l,size:"small",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{prop:"appointmentTime",label:"预约时间",width:"150"},{default:(0,t.k6)((e=>[(0,t.bF)(U,{modelValue:e.row.appointmentTime,"onUpdate:modelValue":l=>e.row.appointmentTime=l,type:"datetime",size:"small",style:{width:"150px"},placeholder:"选择日期时间"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{prop:"appointmentNumber",label:"预约号",width:"120"},{default:(0,t.k6)((e=>[(0,t.bF)(L,{modelValue:e.row.appointmentNumber,"onUpdate:modelValue":l=>e.row.appointmentNumber=l,size:"small",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{prop:"startWarehouse",label:"起始仓库",width:"120",sortable:""}),(0,t.bF)(R,{prop:"destination",label:"目的地",width:"150",sortable:""},{default:(0,t.k6)((e=>[e.row.destination&&e.row.destination.includes("Amazon")?((0,t.uX)(),(0,t.CE)("span",b,(0,o.v_)(e.row.destination),1)):((0,t.uX)(),(0,t.CE)("span",m,(0,o.v_)(e.row.destination),1))])),_:1}),(0,t.bF)(R,{prop:"palletCount",label:"板数",width:"100",sortable:""},{default:(0,t.k6)((e=>[(0,t.bF)(L,{modelValue:e.row.palletCount,"onUpdate:modelValue":l=>e.row.palletCount=l,modelModifiers:{number:!0},type:"number",min:"0",size:"small",style:{width:"80px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{prop:"weight",label:"重量(kg)",width:"120",sortable:""},{default:(0,t.k6)((e=>[(0,t.bF)(L,{modelValue:e.row.weight,"onUpdate:modelValue":l=>e.row.weight=l,modelModifiers:{number:!0},type:"number",min:"0",size:"small",step:"0.01",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{prop:"loadingType",label:"装车类型",width:"100",sortable:""},{default:(0,t.k6)((e=>[(0,t.bF)(N,{modelValue:e.row.loadingType,"onUpdate:modelValue":l=>e.row.loadingType=l,size:"small",style:{width:"100px"}},{default:(0,t.k6)((()=>[(0,t.bF)(W,{label:"卡板",value:"卡板"}),(0,t.bF)(W,{label:"地板",value:"地板"}),(0,t.bF)(W,{label:"混装",value:"混装"}),(0,t.bF)(W,{label:"快递",value:"快递"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{prop:"boxCount",label:"箱数",width:"100",sortable:""},{default:(0,t.k6)((e=>[(0,t.bF)(L,{modelValue:e.row.boxCount,"onUpdate:modelValue":l=>e.row.boxCount=l,modelModifiers:{number:!0},type:"number",min:"0",size:"small",style:{width:"80px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{prop:"volume",label:"方数(m³)",width:"120",sortable:""},{default:(0,t.k6)((e=>[(0,t.bF)(L,{modelValue:e.row.volume,"onUpdate:modelValue":l=>e.row.volume=l,modelModifiers:{number:!0},type:"number",min:"0",size:"small",step:"0.01",style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{prop:"status",label:"状态",width:"100",sortable:""},{default:(0,t.k6)((e=>[(0,t.bF)(I,{type:V.getPCStatusTagType(e.row.status)},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.status),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(R,{prop:"remark",label:"备注",width:"120"},{default:(0,t.k6)((e=>[(0,t.bF)(L,{modelValue:e.row.remark,"onUpdate:modelValue":l=>e.row.remark=l,size:"small",style:{width:"120px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{label:"操作",width:"220",fixed:"right"},{default:(0,t.k6)((e=>[(0,t.bF)(E,{type:"text",size:"small",onClick:l=>V.handleViewPC(e.row)},{default:(0,t.k6)((()=>l[33]||(l[33]=[(0,t.eW)("查看")]))),_:2},1032,["onClick"]),(0,t.bF)(O,{size:"small",onCommand:l=>V.handlePCCommand(l,e.row)},{dropdown:(0,t.k6)((()=>[(0,t.bF)(B,null,{default:(0,t.k6)((()=>[(0,t.bF)(A,{command:"uploadPod"},{default:(0,t.k6)((()=>l[35]||(l[35]=[(0,t.eW)("上传POD")]))),_:1}),(0,t.bF)(A,{command:"followUp"},{default:(0,t.k6)((()=>l[36]||(l[36]=[(0,t.eW)("跟进记录")]))),_:1}),(0,t.bF)(A,{command:"memo"},{default:(0,t.k6)((()=>l[37]||(l[37]=[(0,t.eW)("MEMO")]))),_:1}),(0,t.bF)(A,{command:"exception"},{default:(0,t.k6)((()=>l[38]||(l[38]=[(0,t.eW)("标记异常")]))),_:1}),(0,t.bF)(A,{command:"delete"},{default:(0,t.k6)((()=>l[39]||(l[39]=[(0,t.eW)("删除PC")]))),_:1})])),_:1})])),default:(0,t.k6)((()=>[(0,t.bF)(E,{type:"text",size:"small"},{default:(0,t.k6)((()=>l[34]||(l[34]=[(0,t.eW)(" 更多"),(0,t.Lk)("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)]))),_:1})])),_:2},1032,["onCommand"])])),_:1})])),_:1},8,["data"])])])),_:1}),(0,t.bF)(K,{label:"费用明细",name:"expense"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",c,[(0,t.Lk)("div",k,[l[43]||(l[43]=(0,t.Lk)("h3",{class:"section-title"},"费用明细",-1)),(0,t.Lk)("div",h,[(0,t.bF)(E,{type:"primary",size:"small",onClick:V.handleAddExpense},{default:(0,t.k6)((()=>l[40]||(l[40]=[(0,t.eW)("添加费用")]))),_:1},8,["onClick"]),(0,t.bF)(E,{type:"success",size:"small",onClick:V.handleBatchPushExpense},{default:(0,t.k6)((()=>l[41]||(l[41]=[(0,t.eW)("批量推送费用")]))),_:1},8,["onClick"]),(0,t.bF)(E,{size:"small",onClick:V.handleExportExpense},{default:(0,t.k6)((()=>l[42]||(l[42]=[(0,t.eW)("导出费用")]))),_:1},8,["onClick"])])]),(0,t.bF)(X,{modelValue:V.expenseActiveTab,"onUpdate:modelValue":l[11]||(l[11]=e=>V.expenseActiveTab=e),type:"card",class:"expense-type-tabs"},{default:(0,t.k6)((()=>[(0,t.bF)(K,{label:"全部费用",name:"all"},{default:(0,t.k6)((()=>[(0,t.bF)($,{data:V.allExpenses,border:"",style:{width:"100%"},onSelectionChange:V.handleExpenseSelectionChange},{default:(0,t.k6)((()=>[(0,t.bF)(R,{type:"selection",width:"55"}),(0,t.bF)(R,{prop:"pcNumber",label:"PC号",width:"120"}),(0,t.bF)(R,{prop:"status",label:"状态",width:"100"},{default:(0,t.k6)((e=>[(0,t.bF)(I,{type:V.getExpenseStatusTagType(e.row.status)},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.status),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(R,{prop:"fromWarehouse",label:"起始仓库",width:"120"}),(0,t.bF)(R,{prop:"toWarehouse",label:"目的仓库",width:"120"}),(0,t.bF)(R,{prop:"paymentNo",label:"付款申请号",width:"150"}),(0,t.bF)(R,{prop:"supplier",label:"供应商",width:"120"}),(0,t.bF)(R,{prop:"expenseType",label:"费用类型",width:"120"},{default:(0,t.k6)((e=>[(0,t.bF)(N,{modelValue:e.row.expenseType,"onUpdate:modelValue":l=>e.row.expenseType=l,size:"small",style:{width:"100px"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(V.expenseTypes,(e=>((0,t.uX)(),(0,t.Wv)(W,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{prop:"expenseRemark",label:"费用备注",width:"200"},{default:(0,t.k6)((e=>[(0,t.bF)(L,{modelValue:e.row.expenseRemark,"onUpdate:modelValue":l=>e.row.expenseRemark=l,size:"small",placeholder:"请输入备注"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{prop:"amount",label:"金额",width:"120"},{default:(0,t.k6)((e=>[(0,t.bF)(z,{modelValue:e.row.amount,"onUpdate:modelValue":l=>e.row.amount=l,size:"small",min:0,precision:2,step:100,style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{prop:"expenseDate",label:"费用日期",width:"120"}),(0,t.bF)(R,{prop:"operator",label:"操作人",width:"100"}),(0,t.bF)(R,{prop:"operateTime",label:"操作时间",width:"150"}),(0,t.bF)(R,{label:"操作",width:"150",fixed:"right"},{default:(0,t.k6)((e=>[(0,t.bF)(E,{type:"text",size:"small",onClick:l=>V.handleEditExpense(e.row)},{default:(0,t.k6)((()=>l[44]||(l[44]=[(0,t.eW)("编辑")]))),_:2},1032,["onClick"]),(0,t.bF)(O,{size:"small",onCommand:l=>V.handleExpenseCommand(l,e.row)},{dropdown:(0,t.k6)((()=>[(0,t.bF)(B,null,{default:(0,t.k6)((()=>[(0,t.bF)(A,{command:"push"},{default:(0,t.k6)((()=>l[46]||(l[46]=[(0,t.eW)("推送费用")]))),_:1}),(0,t.bF)(A,{command:"delete"},{default:(0,t.k6)((()=>l[47]||(l[47]=[(0,t.eW)("删除")]))),_:1})])),_:1})])),default:(0,t.k6)((()=>[(0,t.bF)(E,{type:"text",size:"small"},{default:(0,t.k6)((()=>l[45]||(l[45]=[(0,t.eW)(" 更多"),(0,t.Lk)("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)]))),_:1})])),_:2},1032,["onCommand"])])),_:1})])),_:1},8,["data","onSelectionChange"])])),_:1}),(0,t.bF)(K,{label:"派送费",name:"delivery"},{default:(0,t.k6)((()=>[(0,t.bF)($,{data:V.deliveryExpenses,border:"",style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(R,{type:"selection",width:"55"}),(0,t.bF)(R,{prop:"pcNumber",label:"PC号",width:"120"}),(0,t.bF)(R,{prop:"status",label:"状态",width:"100"},{default:(0,t.k6)((e=>[(0,t.bF)(I,{type:V.getExpenseStatusTagType(e.row.status)},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.status),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(R,{prop:"amount",label:"金额",width:"120"},{default:(0,t.k6)((e=>[(0,t.bF)(z,{modelValue:e.row.amount,"onUpdate:modelValue":l=>e.row.amount=l,size:"small",min:0,precision:2,step:100,style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{prop:"paymentStatus",label:"支付状态",width:"100"},{default:(0,t.k6)((e=>[(0,t.bF)(I,{type:V.getPaymentStatusTagType(e.row.paymentStatus)},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.paymentStatus),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(R,{prop:"expenseRemark",label:"费用备注",width:"200"},{default:(0,t.k6)((e=>[(0,t.bF)(L,{modelValue:e.row.expenseRemark,"onUpdate:modelValue":l=>e.row.expenseRemark=l,size:"small",placeholder:"请输入备注"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,t.bF)(R,{label:"操作",width:"150",fixed:"right"},{default:(0,t.k6)((e=>[(0,t.bF)(E,{type:"text",size:"small",onClick:l=>V.handleEditExpense(e.row)},{default:(0,t.k6)((()=>l[48]||(l[48]=[(0,t.eW)("编辑")]))),_:2},1032,["onClick"]),(0,t.bF)(E,{type:"text",size:"small",onClick:l=>V.handleDeleteExpense(e.row)},{default:(0,t.k6)((()=>l[49]||(l[49]=[(0,t.eW)("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,t.bF)(K,{label:"异常费",name:"abnormal"},{default:(0,t.k6)((()=>[(0,t.bF)($,{data:V.abnormalExpenses,border:"",style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(R,{type:"selection",width:"55"}),(0,t.bF)(R,{prop:"expenseType",label:"费用类型",width:"120"}),(0,t.bF)(R,{prop:"amount",label:"金额",width:"120"}),(0,t.bF)(R,{prop:"paymentStatus",label:"支付状态",width:"100"},{default:(0,t.k6)((e=>[(0,t.bF)(I,{type:V.getPaymentStatusTagType(e.row.paymentStatus)},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.paymentStatus),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(R,{prop:"expenseRemark",label:"费用备注",width:"200"})])),_:1},8,["data"])])),_:1}),(0,t.bF)(K,{label:"其他费用",name:"other"},{default:(0,t.k6)((()=>[(0,t.bF)($,{data:V.otherExpenses,border:"",style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(R,{type:"selection",width:"55"}),(0,t.bF)(R,{prop:"expenseType",label:"费用类型",width:"120"}),(0,t.bF)(R,{prop:"amount",label:"金额",width:"120"}),(0,t.bF)(R,{prop:"paymentStatus",label:"支付状态",width:"100"},{default:(0,t.k6)((e=>[(0,t.bF)(I,{type:V.getPaymentStatusTagType(e.row.paymentStatus)},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.row.paymentStatus),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(R,{prop:"expenseRemark",label:"费用备注",width:"200"})])),_:1},8,["data"])])),_:1})])),_:1},8,["modelValue"]),(0,t.Lk)("div",f,[(0,t.bF)(D,{column:3,border:""},{default:(0,t.k6)((()=>[(0,t.bF)(S,{label:"总费用"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",F,(0,o.v_)(V.totalExpense),1)])),_:1}),(0,t.bF)(S,{label:"已支付"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",y,(0,o.v_)(V.paidExpense),1)])),_:1}),(0,t.bF)(S,{label:"未支付"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",w,(0,o.v_)(V.unpaidExpense),1)])),_:1})])),_:1})])])])),_:1}),(0,t.bF)(K,{label:"文件上传",name:"file"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",v,[(0,t.Lk)("div",g,[l[52]||(l[52]=(0,t.Lk)("h3",{class:"section-title"},"文件管理",-1)),(0,t.Lk)("div",null,[(0,t.bF)(E,{type:"primary",size:"small",onClick:V.showFileUploadDialog},{default:(0,t.k6)((()=>l[50]||(l[50]=[(0,t.eW)("上传文件")]))),_:1},8,["onClick"]),(0,t.bF)(E,{type:"success",size:"small",onClick:V.handleBatchApprove},{default:(0,t.k6)((()=>l[51]||(l[51]=[(0,t.eW)("批量审核")]))),_:1},8,["onClick"])])]),(0,t.bF)($,{data:V.fileList,border:"",style:{width:"100%"},onSelectionChange:V.handleFileSelectionChange},{default:(0,t.k6)((()=>[(0,t.bF)(R,{type:"selection",width:"55"}),(0,t.bF)(R,{prop:"fileName",label:"文件名","min-width":"200"}),(0,t.bF)(R,{prop:"fileType",label:"文件类型",width:"120"},{default:(0,t.k6)((e=>[(0,t.bF)(I,{type:V.getFileTypeTagType(e.row.fileType)},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(V.getFileTypeLabel(e.row.fileType)),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(R,{prop:"fileSize",label:"文件大小",width:"120"}),(0,t.bF)(R,{prop:"uploadTime",label:"上传时间",width:"180"}),(0,t.bF)(R,{prop:"uploadBy",label:"上传人",width:"120"}),(0,t.bF)(R,{prop:"status",label:"审核状态",width:"120"},{default:(0,t.k6)((e=>[(0,t.bF)(I,{type:V.getFileStatusTagType(e.row.status)},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(V.getFileStatusLabel(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),(0,t.bF)(R,{prop:"remark",label:"备注","min-width":"150"}),(0,t.bF)(R,{label:"操作",width:"200",fixed:"right"},{default:(0,t.k6)((e=>[(0,t.bF)(O,{size:"small",onCommand:l=>V.handleFileCommand(l,e.row)},{dropdown:(0,t.k6)((()=>[(0,t.bF)(B,null,{default:(0,t.k6)((()=>[(0,t.bF)(A,{command:"preview"},{default:(0,t.k6)((()=>l[54]||(l[54]=[(0,t.eW)("预览")]))),_:1}),(0,t.bF)(A,{command:"download"},{default:(0,t.k6)((()=>l[55]||(l[55]=[(0,t.eW)("下载")]))),_:1}),"pending"===e.row.status?((0,t.uX)(),(0,t.Wv)(A,{key:0,command:"approve"},{default:(0,t.k6)((()=>l[56]||(l[56]=[(0,t.eW)("审核通过")]))),_:1})):(0,t.Q3)("",!0),"pending"===e.row.status?((0,t.uX)(),(0,t.Wv)(A,{key:1,command:"reject"},{default:(0,t.k6)((()=>l[57]||(l[57]=[(0,t.eW)("审核不通过")]))),_:1})):(0,t.Q3)("",!0),"approved"===e.row.status?((0,t.uX)(),(0,t.Wv)(A,{key:2,command:"pushCustomerService"},{default:(0,t.k6)((()=>l[58]||(l[58]=[(0,t.eW)("推送客服")]))),_:1})):(0,t.Q3)("",!0),"approved"===e.row.status?((0,t.uX)(),(0,t.Wv)(A,{key:3,command:"pushCustomer"},{default:(0,t.k6)((()=>l[59]||(l[59]=[(0,t.eW)("推送客户")]))),_:1})):(0,t.Q3)("",!0),(0,t.bF)(A,{command:"delete"},{default:(0,t.k6)((()=>l[60]||(l[60]=[(0,t.eW)("删除")]))),_:1})])),_:2},1024)])),default:(0,t.k6)((()=>[(0,t.bF)(E,{type:"text",size:"small"},{default:(0,t.k6)((()=>l[53]||(l[53]=[(0,t.eW)(" 更多"),(0,t.Lk)("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)]))),_:1})])),_:2},1032,["onCommand"])])),_:1})])),_:1},8,["data","onSelectionChange"])])])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(M,{title:"添加PC到批次",modelValue:V.addPcDialogVisible,"onUpdate:modelValue":l[14]||(l[14]=e=>V.addPcDialogVisible=e),width:"70%"},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",C,[(0,t.bF)(E,{onClick:V.handleCancelAddPc},{default:(0,t.k6)((()=>l[61]||(l[61]=[(0,t.eW)("取消")]))),_:1},8,["onClick"]),(0,t.bF)(E,{type:"primary",onClick:V.handleConfirmAddPc},{default:(0,t.k6)((()=>l[62]||(l[62]=[(0,t.eW)("确认添加")]))),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.bF)(L,{modelValue:V.searchPcQuery,"onUpdate:modelValue":l[13]||(l[13]=e=>V.searchPcQuery=e),placeholder:"搜索PC号",size:"small",clearable:"",style:{"margin-bottom":"10px",width:"300px"}},null,8,["modelValue"]),(0,t.bF)($,{data:V.filteredAvailablePcs,border:"",style:{width:"100%"},height:"400px",onSelectionChange:V.handleAvailablePcSelectionChange},{default:(0,t.k6)((()=>[(0,t.bF)(R,{type:"selection",width:"55"}),(0,t.bF)(R,{prop:"pcNumber",label:"PC号",width:"150"}),(0,t.bF)(R,{prop:"appointmentParty",label:"预约方",width:"100"}),(0,t.bF)(R,{prop:"appointmentTime",label:"预约时间",width:"160"}),(0,t.bF)(R,{prop:"appointmentNumber",label:"预约号",width:"120"}),(0,t.bF)(R,{prop:"startWarehouse",label:"起始仓库",width:"120"}),(0,t.bF)(R,{prop:"destination",label:"目的地",width:"150"}),(0,t.bF)(R,{prop:"palletCount",label:"板数",width:"80"}),(0,t.bF)(R,{prop:"weight",label:"重量(kg)",width:"100"}),(0,t.bF)(R,{prop:"loadingType",label:"装车类型",width:"100"}),(0,t.bF)(R,{prop:"boxCount",label:"箱数",width:"80"}),(0,t.bF)(R,{prop:"volume",label:"方数(m³)",width:"100"})])),_:1},8,["data","onSelectionChange"])])),_:1},8,["modelValue"]),(0,t.bF)(M,{title:"费用编辑",modelValue:V.expenseDialogVisible,"onUpdate:modelValue":l[20]||(l[20]=e=>V.expenseDialogVisible=e),width:"600px"},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",_,[(0,t.bF)(E,{onClick:V.handleExpenseCancel},{default:(0,t.k6)((()=>l[63]||(l[63]=[(0,t.eW)("取消")]))),_:1},8,["onClick"]),(0,t.bF)(E,{type:"primary",onClick:V.handleExpenseSubmit},{default:(0,t.k6)((()=>l[64]||(l[64]=[(0,t.eW)("确定")]))),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.bF)(Q,{model:V.currentExpense,"label-width":"100px"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{label:"PC号"},{default:(0,t.k6)((()=>[(0,t.bF)(N,{modelValue:V.currentExpense.pcNumber,"onUpdate:modelValue":l[15]||(l[15]=e=>V.currentExpense.pcNumber=e),placeholder:"选择PC号",style:{width:"100%"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(V.pcDetailData,(e=>((0,t.uX)(),(0,t.Wv)(W,{key:e.pcNumber,label:e.pcNumber,value:e.pcNumber},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(j,{label:"费用类型"},{default:(0,t.k6)((()=>[(0,t.bF)(N,{modelValue:V.currentExpense.expenseType,"onUpdate:modelValue":l[16]||(l[16]=e=>V.currentExpense.expenseType=e),placeholder:"选择费用类型",style:{width:"100%"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(V.expenseTypes,(e=>((0,t.uX)(),(0,t.Wv)(W,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(j,{label:"金额"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{modelValue:V.currentExpense.amount,"onUpdate:modelValue":l[17]||(l[17]=e=>V.currentExpense.amount=e),min:0,precision:2,step:100,style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(j,{label:"支付状态"},{default:(0,t.k6)((()=>[(0,t.bF)(N,{modelValue:V.currentExpense.paymentStatus,"onUpdate:modelValue":l[18]||(l[18]=e=>V.currentExpense.paymentStatus=e),placeholder:"选择支付状态",style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(W,{label:"已付款",value:"已付款"}),(0,t.bF)(W,{label:"待付款",value:"待付款"}),(0,t.bF)(W,{label:"部分付款",value:"部分付款"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(j,{label:"费用备注"},{default:(0,t.k6)((()=>[(0,t.bF)(L,{modelValue:V.currentExpense.expenseRemark,"onUpdate:modelValue":l[19]||(l[19]=e=>V.currentExpense.expenseRemark=e),type:"textarea",rows:"3",placeholder:"请输入费用备注",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,t.bF)(M,{title:"文件上传",modelValue:V.fileUploadDialogVisible,"onUpdate:modelValue":l[24]||(l[24]=e=>V.fileUploadDialogVisible=e),width:"600px"},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",x,[(0,t.bF)(E,{onClick:V.handleCancelUpload},{default:(0,t.k6)((()=>l[68]||(l[68]=[(0,t.eW)("取消")]))),_:1},8,["onClick"]),(0,t.bF)(E,{type:"primary",onClick:V.handleConfirmUpload},{default:(0,t.k6)((()=>l[69]||(l[69]=[(0,t.eW)("确认上传")]))),_:1},8,["onClick"])])])),default:(0,t.k6)((()=>[(0,t.bF)(Q,{model:V.uploadForm,"label-width":"100px"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{label:"文件类型"},{default:(0,t.k6)((()=>[(0,t.bF)(N,{modelValue:V.uploadForm.fileType,"onUpdate:modelValue":l[21]||(l[21]=e=>V.uploadForm.fileType=e),placeholder:"选择文件类型",style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(W,{label:"POD文件",value:"pod"}),(0,t.bF)(W,{label:"签收单",value:"receipt"}),(0,t.bF)(W,{label:"发票",value:"invoice"}),(0,t.bF)(W,{label:"其他文件",value:"other"})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(j,{label:"关联PC"},{default:(0,t.k6)((()=>[(0,t.bF)(N,{modelValue:V.uploadForm.relatedPC,"onUpdate:modelValue":l[22]||(l[22]=e=>V.uploadForm.relatedPC=e),multiple:"",placeholder:"选择关联的PC号",style:{width:"100%"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(V.pcDetailData,(e=>((0,t.uX)(),(0,t.Wv)(W,{key:e.pcNumber,label:e.pcNumber,value:e.pcNumber},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(j,{label:"文件"},{default:(0,t.k6)((()=>[(0,t.bF)(G,{class:"upload-demo",drag:"",action:"#","auto-upload":!1,"file-list":V.uploadFileList,"on-change":V.handleFileChange,multiple:""},{tip:(0,t.k6)((()=>l[65]||(l[65]=[(0,t.Lk)("div",{class:"el-upload__tip"},"支持jpg、png、pdf格式文件，单个文件不超过10MB",-1)]))),default:(0,t.k6)((()=>[l[66]||(l[66]=(0,t.Lk)("i",{class:"el-icon-upload"},null,-1)),l[67]||(l[67]=(0,t.Lk)("div",{class:"el-upload__text"},[(0,t.eW)("拖拽文件到此处，或"),(0,t.Lk)("em",null,"点击上传")],-1))])),_:1},8,["file-list","on-change"])])),_:1}),(0,t.bF)(j,{label:"备注"},{default:(0,t.k6)((()=>[(0,t.bF)(L,{modelValue:V.uploadForm.remark,"onUpdate:modelValue":l[23]||(l[23]=e=>V.uploadForm.remark=e),type:"textarea",rows:"3",placeholder:"请输入备注",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}var T=a(953),P=a(5220),E=a(163);const S={name:"OutgoingBatchDetail",setup(){const e=(0,P.rd)(),l=(0,P.lq)(),a=l.params.id,o=(0,T.KR)("basic"),n=(0,T.KR)([{label:"KKS LOGISTICS LLC",value:"KKS LOGISTICS LLC"},{label:"第三方物流公司A",value:"第三方物流公司A"},{label:"第三方物流公司B",value:"第三方物流公司B"}]),d=(0,T.KR)({id:a,batchNumber:"PC2504220106",loadingType:"卡板",deliveryTag:"标准派送",createTime:"2023-07-15 10:00:00",appointmentDate:"2023-07-15 14:00:00",appointmentNumber:"APPT20230715001",deliveryMethod:"第三方",creator:"张三",supplier:"KKS LOGISTICS LLC",batchStatus:"待出库",palletCount:1,outboundVolume:2.5,destination:"深圳市南山区",remark:"kks私人地址第三车5"}),u=(0,T.KR)([{pcNumber:"PC123456",loadingType:"卡板",orderType:"普通订单",destination:"深圳市南山区",palletCount:1,weight:800,volume:1.5,appointmentNumber:"APPT20230715001",appointmentTime:"2023-07-15 14:00:00",appointmentParty:"客户A",status:"待出库",remark:"无",startWarehouse:"东莞仓库",boxCount:10},{pcNumber:"PC654321",loadingType:"地板",orderType:"加急订单",destination:"Amazon 洛杉矶仓库",palletCount:3,weight:1500,volume:3.5,appointmentNumber:"APPT20230716002",appointmentTime:"2023-07-16 10:00:00",appointmentParty:"客户B",status:"待确认预约",remark:"优先处理",startWarehouse:"广州仓库",boxCount:25}]),p=(0,T.KR)(!1),i=(0,T.KR)([]),s=(0,T.KR)(""),r=(0,T.KR)([]),b=(0,T.KR)("all"),m=(0,T.KR)(!1),c=(0,T.KR)({pcNumber:"",expenseType:"",amount:0,paymentStatus:"待付款",expenseRemark:""}),k=(0,T.KR)([]),h=(0,T.KR)([{label:"派送费",value:"delivery"},{label:"装车费",value:"loading"},{label:"等时费",value:"waiting"},{label:"异常费",value:"abnormal"},{label:"其他费用",value:"other"}]),f=(0,T.KR)([{id:"1",pcNumber:"PC123456",status:"已推送",fromWarehouse:"东莞仓库",toWarehouse:"深圳市南山区",paymentNo:"PAY20230715001",supplier:"KKS LOGISTICS LLC",expenseType:"delivery",expenseRemark:"标准派送费",amount:1e3,expenseDate:"2023-07-15",operator:"张三",operateTime:"2023-07-15 11:00:00",paymentStatus:"已付款"},{id:"2",pcNumber:"PC654321",status:"待推送",fromWarehouse:"广州仓库",toWarehouse:"Amazon 洛杉矶仓库",paymentNo:"",supplier:"KKS LOGISTICS LLC",expenseType:"loading",expenseRemark:"加急装车费",amount:500,expenseDate:"2023-07-16",operator:"李四",operateTime:"2023-07-16 09:00:00",paymentStatus:"待付款"}]),F=(0,t.EW)((()=>f.value.filter((e=>"delivery"===e.expenseType)))),y=(0,t.EW)((()=>f.value.filter((e=>"abnormal"===e.expenseType)))),w=(0,t.EW)((()=>f.value.filter((e=>"other"===e.expenseType)))),v=(0,t.EW)((()=>f.value.reduce(((e,l)=>e+l.amount),0).toFixed(2))),g=(0,t.EW)((()=>f.value.filter((e=>"已付款"===e.paymentStatus)).reduce(((e,l)=>e+l.amount),0).toFixed(2))),C=(0,t.EW)((()=>f.value.filter((e=>"已付款"!==e.paymentStatus)).reduce(((e,l)=>e+l.amount),0).toFixed(2))),_=e=>{const l={待推送:"warning",已推送:"success",已拒绝:"danger"};return l[e]||"info"},x=e=>{const l={已付款:"success",待付款:"warning",部分付款:"info"};return l[e]||"info"},V=()=>{e.back()},S=()=>{E.nk.success("触发编辑操作")},W=()=>{E.nk.success("触发导出操作")},N=e=>{const l={待出库:"warning",待确认订舱:"info",待确认预约:"info",已出库:"success",已签收:"success",已签收POD:"success"};return l[e]||"info"},U=e=>{const l={优先派送:"danger",标准派送:"primary",特殊派送:"warning",自提:"info",快递派送:"success",整车运输:"warning"};return l[e]||"info"},L=e=>{const l={待出库:"warning",待确认预约:"info",已出库:"success",已签收:"success",已签收POD:"success",异常:"danger"};return l[e]||"info"},I=()=>{R(),p.value=!0},z=()=>{E.nk.success("触发导出PC操作")},D=e=>{E.nk.success(`查看PC: ${e.pcNumber}`)},K=(e,l)=>{switch(e){case"uploadPod":E.nk.success(`上传POD: ${l.pcNumber}`);break;case"followUp":E.nk.success(`添加跟进记录: ${l.pcNumber}`);break;case"memo":E.nk.success(`添加MEMO: ${l.pcNumber}`);break;case"exception":E.nk.success(`标记异常: ${l.pcNumber}`);break;case"delete":E.nk.success(`删除PC: ${l.pcNumber}`);break}},R=()=>{const e=u.value.map((e=>e.pcNumber));i.value=[{pcNumber:"PC777777",appointmentParty:"客户C",appointmentTime:"2024-03-10 10:00:00",appointmentNumber:"BK777",startWarehouse:"东莞仓库",destination:"芝加哥",palletCount:5,weight:1e3,loadingType:"卡板",boxCount:80,volume:2},{pcNumber:"PC888888",appointmentParty:"客户D",appointmentTime:"2024-03-11 11:00:00",appointmentNumber:"BK888",startWarehouse:"广州仓库",destination:"纽约",palletCount:8,weight:1800,loadingType:"地板",boxCount:200,volume:4},{pcNumber:"PC999999",appointmentParty:"客户E",appointmentTime:"2024-03-12 15:30:00",appointmentNumber:"BK999",startWarehouse:"深圳仓库",destination:"洛杉矶",palletCount:12,weight:3e3,loadingType:"混装",boxCount:150,volume:6}].filter((l=>!e.includes(l.pcNumber)))},A=(0,t.EW)((()=>s.value?i.value.filter((e=>e.pcNumber.toLowerCase().includes(s.value.toLowerCase()))):i.value)),B=e=>{r.value=e},O=()=>{if(0===r.value.length)return void E.nk.warning("请至少选择一个PC进行添加");const e=r.value.map((e=>({pcNumber:e.pcNumber,appointmentParty:e.appointmentParty||"",appointmentTime:e.appointmentTime||"",appointmentNumber:e.appointmentNumber||"",startWarehouse:e.startWarehouse||"N/A",destination:e.destination||"N/A",palletCount:e.palletCount||0,weight:e.weight||0,loadingType:e.loadingType||"卡板",boxCount:e.boxCount||0,volume:e.volume||0,status:"待出库",remark:""})));u.value.push(...e),E.nk.success(`成功添加 ${e.length} 个PC`),p.value=!1},$=()=>{p.value=!1},X=()=>{c.value={pcNumber:u.value.length>0?u.value[0].pcNumber:"",expenseType:"delivery",amount:0,paymentStatus:"待付款",expenseRemark:""},m.value=!0},M=e=>{c.value={...e},m.value=!0},j=e=>{k.value=e},Q=e=>{E.nk.success(`删除费用: ${e.id}`);const l=f.value.findIndex((l=>l.id===e.id));-1!==l&&f.value.splice(l,1)},G=()=>{0!==k.value.length?E.nk.success(`批量推送 ${k.value.length} 条费用`):E.nk.warning("请先选择要推送的费用")},q=()=>{E.nk.success("触发导出费用操作")},Y=(e,l)=>{switch(e){case"push":E.nk.success(`推送费用: ${l.id}`),l.status="已推送";break;case"delete":Q(l);break}},H=()=>{if(c.value.pcNumber)if(c.value.expenseType)if(c.value.amount<=0)E.nk.warning("请输入有效金额");else{if(c.value.id){const e=f.value.findIndex((e=>e.id===c.value.id));-1!==e&&(f.value[e]={...c.value}),E.nk.success("费用已更新")}else{const e={...c.value,id:`EXP${Date.now()}`,status:"待推送",expenseDate:(new Date).toISOString().split("T")[0],operator:"当前用户",operateTime:(new Date).toISOString().replace("T"," ").substring(0,19)};f.value.push(e),E.nk.success("费用已添加")}m.value=!1}else E.nk.warning("请选择费用类型");else E.nk.warning("请选择PC号")},J=()=>{m.value=!1},Z=(0,T.KR)(!1),ee=(0,T.KR)([]),le=(0,T.KR)([]),ae=(0,T.KR)({fileType:"pod",relatedPC:[],remark:""}),te=(0,T.KR)([{id:"1",fileName:"POD_20230715.pdf",fileType:"pod",fileSize:"2.5MB",uploadTime:"2023-07-15 10:30:00",uploadBy:"KKS LOGISTICS LLC",status:"pending",remark:"供应商POD文件"},{id:"2",fileName:"invoice.pdf",fileType:"invoice",fileSize:"1.2MB",uploadTime:"2023-07-15 11:00:00",uploadBy:"张三",status:"approved",remark:"发票文件"},{id:"3",fileName:"receipt_PC123456.jpg",fileType:"receipt",fileSize:"0.8MB",uploadTime:"2023-07-16 09:15:00",uploadBy:"李四",status:"rejected",remark:"签收单有问题，请重新上传"}]),oe=e=>{const l={pod:"success",receipt:"primary",invoice:"warning",other:"info"};return l[e]||"info"},ne=e=>{const l={pod:"POD文件",receipt:"签收单",invoice:"发票",other:"其他文件"};return l[e]||"未知类型"},de=e=>{const l={pending:"warning",approved:"success",rejected:"danger"};return l[e]||"info"},ue=e=>{const l={pending:"待审核",approved:"已通过",rejected:"已拒绝"};return l[e]||"未知状态"},pe=()=>{ae.value={fileType:"pod",relatedPC:u.value.length>0?[u.value[0].pcNumber]:[],remark:""},ee.value=[],Z.value=!0},ie=(e,l)=>{ee.value=l},se=()=>{0!==ee.value.length?0!==ae.value.relatedPC.length?(ee.value.forEach((e=>{const l={id:`FILE${Date.now()}`,fileName:e.name,fileType:ae.value.fileType,fileSize:re(e.size),uploadTime:(new Date).toISOString().replace("T"," ").substring(0,19),uploadBy:"当前用户",status:"pending",remark:ae.value.remark};te.value.push(l)})),E.nk.success(`成功上传 ${ee.value.length} 个文件`),Z.value=!1):E.nk.warning("请选择关联的PC"):E.nk.warning("请选择要上传的文件")},re=e=>e<1024?e+"B":e<1048576?(e/1024).toFixed(1)+"KB":(e/1048576).toFixed(1)+"MB",be=()=>{Z.value=!1},me=e=>{le.value=e},ce=()=>{0!==le.value.length?(le.value.forEach((e=>{"pending"===e.status&&(e.status="approved")})),E.nk.success(`已批量审核通过 ${le.value.length} 个文件`)):E.nk.warning("请先选择要审核的文件")},ke=(e,l)=>{switch(e){case"preview":E.nk.success(`预览文件: ${l.fileName}`);break;case"download":E.nk.success(`下载文件: ${l.fileName}`);break;case"approve":l.status="approved",E.nk.success(`审核通过: ${l.fileName}`);break;case"reject":l.status="rejected",E.nk.success(`审核拒绝: ${l.fileName}`);break;case"pushCustomerService":E.nk.success(`推送客服: ${l.fileName}`);break;case"pushCustomer":E.nk.success(`推送客户: ${l.fileName}`);break;case"delete":const e=te.value.findIndex((e=>e.id===l.id));-1!==e&&te.value.splice(e,1),E.nk.success(`删除文件: ${l.fileName}`);break}};return(0,t.sV)((()=>{console.log("加载批次ID:",a)})),{activeTab:o,basicInfo:d,pcDetailData:u,goBack:V,handleEdit:S,handleExport:W,getBatchStatusType:N,getDeliveryTagType:U,getPCStatusTagType:L,supplierOptions:n,handleAddPC:I,handleExportPC:z,handleViewPC:D,handlePCCommand:K,addPcDialogVisible:p,searchPcQuery:s,filteredAvailablePcs:A,handleAvailablePcSelectionChange:B,handleConfirmAddPc:O,handleCancelAddPc:$,expenseActiveTab:b,allExpenses:f,deliveryExpenses:F,abnormalExpenses:y,otherExpenses:w,totalExpense:v,paidExpense:g,unpaidExpense:C,expenseTypes:h,handleAddExpense:X,handleEditExpense:M,handleDeleteExpense:Q,handleBatchPushExpense:G,handleExportExpense:q,handleExpenseCommand:Y,getExpenseStatusTagType:_,getPaymentStatusTagType:x,handleExpenseSelectionChange:j,selectedExpenses:k,expenseDialogVisible:m,currentExpense:c,handleExpenseSubmit:H,handleExpenseCancel:J,fileList:te,fileUploadDialogVisible:Z,uploadFileList:ee,uploadForm:ae,selectedFiles:le,getFileTypeTagType:oe,getFileTypeLabel:ne,getFileStatusTagType:de,getFileStatusLabel:ue,showFileUploadDialog:pe,handleFileChange:ie,handleConfirmUpload:se,handleCancelUpload:be,handleFileSelectionChange:me,handleBatchApprove:ce,handleFileCommand:ke}}};var W=a(6262);const N=(0,W.A)(S,[["render",V],["__scopeId","data-v-c71967ec"]]),U=N}}]);
//# sourceMappingURL=5457.eedce713.js.map