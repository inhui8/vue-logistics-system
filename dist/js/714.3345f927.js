"use strict";(self["webpackChunkvue_logistics_system"]=self["webpackChunkvue_logistics_system"]||[]).push([[714],{7714:(e,i,n)=>{n.r(i),n.d(i,{default:()=>h});var l=n(641),a=n(953),t=n(33),o=n(7918),d=n(163),s=n(8548);const r={class:"rating-config-container"},m={class:"card-header"},u={class:"dimension-header"},c={class:"indicators-list"},p={__name:"RatingIndicatorConfig",setup(e){const i=(0,a.Kh)({periodType:"quarterly",dimensions:[]}),n=(0,a.KR)(!1),p=()=>{i.periodType="quarterly",i.dimensions=[{id:`dim_${Date.now()}_1`,name:"时效性",weight:40,indicators:[{id:`ind_${Date.now()}_1_1`,name:"准时提货率",description:"按约定时间完成提货的比例",weight:50},{id:`ind_${Date.now()}_1_2`,name:"准时送达率",description:"按约定时间完成送达的比例",weight:50}]},{id:`dim_${Date.now()}_2`,name:"服务质量",weight:30,indicators:[{id:`ind_${Date.now()}_2_1`,name:"货损率",description:"运输过程中货物损坏的比例",weight:40},{id:`ind_${Date.now()}_2_2`,name:"客户投诉率",description:"因服务问题导致客户投诉的比例",weight:30},{id:`ind_${Date.now()}_2_3`,name:"POD返回及时率",description:"签收单按时返回的比例",weight:30}]},{id:`dim_${Date.now()}_3`,name:"成本控制",weight:20,indicators:[{id:`ind_${Date.now()}_3_1`,name:"报价竞争力",description:"与其他供应商相比的价格优势",weight:70},{id:`ind_${Date.now()}_3_2`,name:"附加费用合理性",description:"额外费用的发生频率和合理性",weight:30}]},{id:`dim_${Date.now()}_4`,name:"合规与配合度",weight:10,indicators:[{id:`ind_${Date.now()}_4_1`,name:"证照齐全有效",description:"车辆、司机证照是否符合要求",weight:50},{id:`ind_${Date.now()}_4_2`,name:"系统操作规范性",description:"是否按要求使用供应商门户系统",weight:50}]}]},g=(0,l.EW)((()=>i.dimensions.reduce(((e,i)=>e+(i.weight||0)),0))),_=e=>e.indicators.reduce(((e,i)=>e+(i.weight||0)),0),h=()=>{i.dimensions.push({id:`dim_${Date.now()}`,name:"新维度",weight:0,indicators:[]})},w=e=>{o.s.confirm(`确定要删除维度 "${i.dimensions[e].name||"未命名维度"}" 吗?`,"确认删除",{type:"warning"}).then((()=>{i.dimensions.splice(e,1)})).catch((()=>{}))},k=e=>{i.dimensions[e].indicators.push({id:`ind_${Date.now()}`,name:"新指标",description:"",weight:0})},b=(e,n)=>{const l=i.dimensions[e];l.indicators.splice(n,1)},y=()=>{if(100!==g.value)return d.nk.error("所有维度的权重之和必须为 100%"),!1;for(const e of i.dimensions){if(!e.name)return d.nk.error("存在未命名的维度"),!1;if(100!==_(e))return d.nk.error(`维度 "${e.name}" 下的指标权重之和必须为 100%`),!1;for(const i of e.indicators)if(!i.name)return d.nk.error(`维度 "${e.name}" 下存在未命名的指标`),!1}return!0},f=()=>{y()&&(n.value=!0,console.log("保存评分配置:",JSON.parse(JSON.stringify(i))),setTimeout((()=>{n.value=!1,d.nk.success("评分配置已保存")}),1e3))};return(0,l.sV)((()=>{p()})),(e,o)=>{const d=(0,l.g2)("el-button"),p=(0,l.g2)("el-radio"),y=(0,l.g2)("el-radio-group"),F=(0,l.g2)("el-form-item"),V=(0,l.g2)("el-form"),v=(0,l.g2)("el-divider"),C=(0,l.g2)("el-input"),$=(0,l.g2)("el-input-number"),D=(0,l.g2)("el-tooltip"),x=(0,l.g2)("el-alert"),W=(0,l.g2)("el-card");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(W,null,{header:(0,l.k6)((()=>[(0,l.Lk)("div",m,[o[2]||(o[2]=(0,l.Lk)("span",null,"评分维度与指标配置",-1)),(0,l.bF)(d,{type:"primary",onClick:f,loading:n.value},{default:(0,l.k6)((()=>o[1]||(o[1]=[(0,l.eW)("保存配置")]))),_:1},8,["loading"])])])),default:(0,l.k6)((()=>[(0,l.bF)(V,{"label-width":"100px"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{label:"评分周期"},{default:(0,l.k6)((()=>[(0,l.bF)(y,{modelValue:i.periodType,"onUpdate:modelValue":o[0]||(o[0]=e=>i.periodType=e)},{default:(0,l.k6)((()=>[(0,l.bF)(p,{label:"monthly"},{default:(0,l.k6)((()=>o[3]||(o[3]=[(0,l.eW)("月度")]))),_:1}),(0,l.bF)(p,{label:"quarterly"},{default:(0,l.k6)((()=>o[4]||(o[4]=[(0,l.eW)("季度")]))),_:1}),(0,l.bF)(p,{label:"yearly",disabled:""},{default:(0,l.k6)((()=>o[5]||(o[5]=[(0,l.eW)("年度 (待支持)")]))),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,l.bF)(v,null,{default:(0,l.k6)((()=>o[6]||(o[6]=[(0,l.eW)("评分维度与指标")]))),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.dimensions,((e,i)=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"dimension-block"},[(0,l.Lk)("div",u,[(0,l.bF)(C,{modelValue:e.name,"onUpdate:modelValue":i=>e.name=i,placeholder:"维度名称",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),(0,l.bF)($,{modelValue:e.weight,"onUpdate:modelValue":i=>e.weight=i,min:0,max:100,step:5,size:"small","controls-position":"right",style:{width:"120px","margin-right":"20px"}},null,8,["modelValue","onUpdate:modelValue"]),o[7]||(o[7]=(0,l.eW)(" % ")),(0,l.bF)(d,{type:"danger",icon:(0,a.R1)(s.epd),circle:"",size:"small",onClick:e=>w(i)},null,8,["icon","onClick"])]),(0,l.Lk)("div",c,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.indicators,((e,n)=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"indicator-item"},[(0,l.bF)(C,{modelValue:e.name,"onUpdate:modelValue":i=>e.name=i,placeholder:"指标名称",size:"small",style:{width:"250px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),(0,l.bF)(D,{content:"指标描述或计算方式 (可选)",placement:"top"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{modelValue:e.description,"onUpdate:modelValue":i=>e.description=i,placeholder:"指标描述",size:"small",style:{width:"300px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.bF)($,{modelValue:e.weight,"onUpdate:modelValue":i=>e.weight=i,min:0,max:100,step:1,size:"small","controls-position":"right",style:{width:"100px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),o[8]||(o[8]=(0,l.eW)(" % ")),(0,l.bF)(d,{type:"danger",icon:(0,a.R1)(s.epd),plain:"",circle:"",size:"small",onClick:e=>b(i,n)},null,8,["icon","onClick"])])))),128)),(0,l.bF)(d,{type:"primary",link:"",icon:(0,a.R1)(s.FWt),onClick:e=>k(i)},{default:(0,l.k6)((()=>o[9]||(o[9]=[(0,l.eW)("添加指标")]))),_:2},1032,["icon","onClick"])])])))),128)),(0,l.bF)(d,{type:"success",icon:(0,a.R1)(s.FWt),onClick:h,style:{"margin-top":"20px"}},{default:(0,l.k6)((()=>o[10]||(o[10]=[(0,l.eW)("添加维度")]))),_:1},8,["icon"]),(0,l.bF)(x,{type:"warning","show-icon":"",closable:!1,style:{"margin-top":"20px"}},{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,[o[11]||(o[11]=(0,l.eW)("请确保所有维度的权重之和为 100%。当前总权重: ")),(0,l.Lk)("strong",null,(0,t.v_)(g.value)+"%",1)]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.dimensions,((e,i)=>((0,l.uX)(),(0,l.CE)("p",{key:"dim_alert_"+i},[(0,l.eW)(' 维度 "'+(0,t.v_)(e.name||"未命名维度")+'" 下指标权重之和: ',1),(0,l.Lk)("strong",null,(0,t.v_)(_(e))+"%",1),o[12]||(o[12]=(0,l.eW)(" (应为 100%) "))])))),128))])),_:1})])),_:1})])}}};var g=n(6262);const _=(0,g.A)(p,[["__scopeId","data-v-5d2ae824"]]),h=_}}]);
//# sourceMappingURL=714.3345f927.js.map